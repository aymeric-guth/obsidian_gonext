/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  ExampleModal: () => ExampleModal,
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// constants.ts
var Paths = {
  Tasks: "813 Tasks",
  Components: "Components",
  Goals: "Goals",
  Slipbox: "803 Slipbox",
  Inbox: "800 Inbox",
  Refs: "802 Refs",
  Archives: "400 Archives",
  Logs: "600 Log",
  Attachments: "000 Attachments",
  Journal: "Journal",
  Resources: "Resources",
  Projects: "100 Projects",
  Domains: "Domains",
  Names: "Names"
};
var Status = {
  Todo: "todo",
  Doing: "doing",
  Done: "done",
  Maybe: "maybe",
  Standby: "standby",
  Trash: "trash"
};
var GoalStatus = {
  Reframe: "reframe",
  Research: "research",
  Operationalize: "operationalize",
  Planify: "planify",
  Dependant: "dependant",
  Active: "active",
  Failed: "failed",
  Success: "success"
};
var Types = {
  Fleeting: 13,
  Literature: 1,
  Permanent: 2,
  Task: 3,
  Praxis: 4,
  Provision: 5,
  Log: 6,
  Resource: 7,
  Media: 8,
  Project: 12,
  Org: 9,
  Domain: 10,
  Component: 11
};
var Namespace = {
  Area: "area",
  Context: "context",
  Layer: "layer",
  Org: "org",
  Project: "project"
};
var Default = {
  Area: "none",
  Context: "any",
  Layer: "none",
  Org: "none",
  Project: "none"
};

// node_modules/uuid/dist/esm-browser/stringify.js
var byteToHex = [];
for (i = 0; i < 256; ++i) {
  byteToHex.push((i + 256).toString(16).slice(1));
}
var i;
function unsafeStringify(arr, offset = 0) {
  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + "-" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + "-" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + "-" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + "-" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
}

// node_modules/uuid/dist/esm-browser/rng.js
var getRandomValues;
var rnds8 = new Uint8Array(16);
function rng() {
  if (!getRandomValues) {
    getRandomValues = typeof crypto !== "undefined" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);
    if (!getRandomValues) {
      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    }
  }
  return getRandomValues(rnds8);
}

// node_modules/uuid/dist/esm-browser/native.js
var randomUUID = typeof crypto !== "undefined" && crypto.randomUUID && crypto.randomUUID.bind(crypto);
var native_default = {
  randomUUID
};

// node_modules/uuid/dist/esm-browser/v4.js
function v4(options, buf, offset) {
  if (native_default.randomUUID && !buf && !options) {
    return native_default.randomUUID();
  }
  options = options || {};
  var rnds = options.random || (options.rng || rng)();
  rnds[6] = rnds[6] & 15 | 64;
  rnds[8] = rnds[8] & 63 | 128;
  if (buf) {
    offset = offset || 0;
    for (var i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }
    return buf;
  }
  return unsafeStringify(rnds);
}
var v4_default = v4;

// api.ts
async function notify(msg) {
  const PUSHOVER_URI = "api.pushover.net";
  const d = await app.vault.readJson(".pushover.json");
  const data = new URLSearchParams({
    message: msg,
    token: d.pushover_token,
    user: d.pushover_user
  });
  console.log(data.toString());
  await fetch(`https://${PUSHOVER_URI}/1/messages.json`, {
    method: "POST",
    // mode: 'no-cors',
    cache: "no-cache",
    headers: {
      "Content-type": "application/x-www-form-urlencoded"
    },
    body: data
  });
}
var FrontmatterJS = class {
  singular(values, field) {
    if (!Helper.nilCheck(this.fm[field])) {
      const value = this.fm[field];
      if (typeof value === "string") {
        if (!values.contains(value)) {
          values.push(value);
        }
      } else {
        console.warn(
          `'${field}' is ignored, invalid data-type: '${typeof this.fm[field]}'`
        );
      }
    }
  }
  plural(values, field) {
    if (!Helper.nilCheck(this.fm[field])) {
      if (!Array.isArray(this.fm[field])) {
        console.warn(
          `'${field}' is ignored, invalid data-type: '${field}'`
        );
      } else {
        for (const value of this.fm[field]) {
          if (typeof value === "string") {
            if (!values.contains(value)) {
              values.push(value);
            }
          } else {
            console.warn(
              `'${value}s.${value}' is ignored, invalid data-type: '${typeof value}'`
            );
          }
        }
      }
    }
  }
  constructor(page) {
    Assert.True(page !== void 0, "'page' is undefined");
    this.f = page.file;
    const f = this.f;
    Assert.True(f !== void 0, "'f' is undefined");
    this.fm = f.frontmatter;
    Assert.True(this.fm !== void 0, "'fm' is undefined");
    Assert.True(
      this.fm.uuid !== void 0,
      `'uuid' is undefined for '${this.f.path}'`
    );
    this.uuid = this.fm.uuid;
    this.version = this.fm.version;
    this.type = this.fm.type;
    this.createdAt = new Date(this.fm.created_at);
    this.at = this.fm.at !== void 0 ? new Date(this.fm.at) : new Date();
    this.before = this.fm.before !== void 0 ? new Date(this.fm.before) : new Date();
    this.after = this.fm.after !== void 0 ? new Date(this.fm.after) : new Date();
    this.components = [];
    this.domains = [];
    this.projects = [];
    this.contexts = [];
    this.traits = [];
    this.energy = this.fm.energy !== void 0 ? this.fm.energy : 9;
    const domains = [];
    const components = [];
    const projects = [];
    const names = [];
    const contexts = [];
    const contents = [];
    const traits = [];
    if (!Helper.nilCheck(this.fm.tags)) {
      if (!Array.isArray(this.fm.tags)) {
        console.warn("'tags' is ignored, invalid data-type");
        this.fm.tags = [];
      }
      for (const tag of this.fm.tags) {
        if (tag.slice(0, 7) === "domain/") {
          domains.push(tag.slice(7));
        } else if (tag.slice(0, 10) === "component/") {
          components.push(tag.slice(10));
        } else if (tag.slice(0, 8) === "project/") {
          projects.push(tag.slice(8));
        } else if (tag.slice(0, 5) === "name/") {
          names.push(tag.slice(5));
        } else if (tag.slice(0, 8) == "context/") {
          contexts.push(tag.slice(8));
        } else if (tag.slice(0, 8) == "content/") {
          contents.push(tag.slice(8));
        } else if (tag.slice(0, 6) == "trait/") {
          traits.push(tag.slice(6));
        }
      }
    }
    this.singular(domains, "domain");
    this.plural(domains, "domains");
    this.singular(components, "components");
    this.plural(components, "components");
    this.singular(projects, "project");
    this.plural(projects, "projects");
    this.singular(contents, "contents");
    this.plural(contents, "contents");
    this.singular(names, "name");
    this.plural(names, "names");
    this.plural(names, "alias");
    this.singular(traits, "trait");
    this.plural(traits, "traits");
    this.domains = domains;
    this.components = components;
    this.projects = projects;
    this.names = names;
    this.contexts = contexts;
    this.contents = contents;
    this.traits = traits;
  }
  getDomain(emptyDefault = true) {
    if (emptyDefault) {
      return this.domains[0];
    } else {
      return this.domains[0] === void 0 ? "unknown" : this.domains[0];
    }
  }
  getDomains() {
    return this.domains;
  }
  getTraits() {
    return this.traits;
  }
  getComponents() {
    return this.components;
  }
  getProject(emptyDefault = true) {
    if (emptyDefault) {
      return this.projects[0];
    } else {
      return this.projects[0] === void 0 ? "" : this.projects[0];
    }
  }
  getProjects() {
    return this.projects;
  }
  getName(emptyDefault = true) {
    if (emptyDefault) {
      return this.names[0];
    } else {
      return this.names[0] === void 0 ? "" : this.names[0];
    }
  }
  getContent(emptyDefault = true) {
    if (emptyDefault) {
      return this.contents[0];
    } else {
      return this.contents[0] === void 0 ? "" : this.contents[0];
    }
  }
  getNames() {
    return this.names;
  }
  getContext(emptyDefault = true) {
    if (emptyDefault) {
      return this.contexts[0];
    } else {
      return this.contexts[0] === void 0 ? "" : this.contexts[0];
    }
  }
  resolve(dv) {
    const domains = [];
    for (const domain of this.domains) {
      if (Helper.isUUID(domain)) {
        const pages = dv.pages(`"${Paths.Domains}"`).where((page) => page.file.frontmatter.uuid === domain);
        if (pages.length > 1) {
          throw new Error();
        } else if (pages.length === 1) {
          const page = pages[0];
          domains.push(page.file.frontmatter.name);
        }
      } else {
        const pages = dv.pages(`"${Paths.Domains}"`).where((page) => page.file.frontmatter.name === domain);
        if (pages.length > 1) {
          throw new Error();
        } else if (pages.length === 1) {
          const page = pages[0];
          domains.push(page.file.frontmatter.name);
        }
      }
    }
    if (domains.length !== this.domains.length) {
      console.warn(`Domain resolution failed for: ${this.domains}`);
    }
    this.domains = domains;
  }
};
var ValidationError = class extends Error {
  constructor(message) {
    super(message);
    this.name = "ValidationError";
  }
};
var Assert = {
  True(predicate, message, strict = true) {
    if (!predicate) {
      if (strict) {
        throw new ValidationError(message);
      } else {
        console.error(message);
      }
    }
  },
  False(predicate, message, strict = false) {
    if (predicate) {
      if (strict) {
        throw new ValidationError(message);
      } else {
        console.error(message);
      }
    }
  }
};
var Helper = {
  nilCheck(val) {
    return val === void 0 || val === null;
  },
  getKeyFuck(groupBy) {
    switch (groupBy) {
      default:
      case "doneAt":
        return (entry) => entry.file.frontmatter.doneAt.toISOString().slice(0, 10);
        break;
      case "createdAt":
        return (entry) => entry.file.frontmatter.createdAt.toISOString().slice(0, 10);
        break;
      case "project":
        return (entry) => entry.file.frontmatter.project;
        break;
      case "area":
        return (entry) => entry.file.frontmatter.area;
        break;
    }
  },
  getKey(groupBy) {
    switch (groupBy) {
      default:
      case "doneAt":
        return (entry) => entry.doneAt.toISOString().slice(0, 10);
        break;
      case "createdAt":
        return (entry) => entry.createdAt.toISOString().slice(0, 10);
        break;
      case "project":
        return (entry) => entry.project;
        break;
      case "area":
        return (entry) => entry.area;
        break;
    }
  },
  numberTypeToString(val) {
    switch (val.type) {
      case Types.Fleeting:
        return "fleeting";
      case Types.Log:
        return "log";
      case Types.Project:
        return "project";
      case Types.Org:
        return "org";
      case Types.Domain:
        return "domain";
      case Types.Component:
        return "component";
      default:
        throw new Error(
          `numberTypeToString: type: "${val.type}" not implemented "${val.uuid}"`
        );
    }
  },
  roundToOneDecimal(val) {
    return Math.round(val * 10) / 10;
  },
  isChildTag(parent, child) {
    if (child.length <= parent.length + 1) {
      return false;
    } else if (child.slice(0, parent.length + 1) != `${parent}/`) {
      return false;
    }
    return true;
  },
  getField(field, defaultValue) {
    if (field === void 0 || field === null) {
      return defaultValue;
    } else {
      return field;
    }
  },
  getDate(dt) {
    if (dt === "" || dt === null) {
      return void 0;
    } else if (dt !== void 0) {
      dt = new Date(dt);
      if (isNaN(dt)) {
        return void 0;
      } else {
        return dt;
      }
    } else {
      return void 0;
    }
  },
  getTag(fm, type, emptyDefault = void 0) {
    let name = "";
    let defaultValue = "";
    if (type === "area") {
      name = Namespace.Area;
      defaultValue = Default.Area;
    } else if (type === "context") {
      name = Namespace.Context;
      defaultValue = Default.Context;
    } else if (type === "layer") {
      name = Namespace.Layer;
      defaultValue = Default.Layer;
    } else if (type === "org") {
      name = Namespace.Org;
      defaultValue = Default.Org;
    } else if (type === "project") {
      name = Namespace.Project;
      defaultValue = Default.Project;
    } else if (type == "domain") {
      name = "domain";
      defaultValue = "none";
    } else {
      throw new Error(`getTag got unsuported type: '${type}'`);
    }
    const len = name.length + 1;
    const defaultTag = `${name}/${defaultValue}`;
    let defaultRetVal = defaultTag;
    if (emptyDefault) {
      defaultRetVal = void 0;
    }
    if (fm === void 0) {
      return defaultRetVal;
    }
    const tags = fm.tags;
    if (tags === void 0 || tags.length === 0) {
      return defaultRetVal;
    }
    for (const tag of tags) {
      if (tag == defaultTag) {
        return defaultRetVal;
      }
      if (tag.length > len && tag.slice(0, len) == `${name}/`) {
        return tag;
      }
    }
    return defaultRetVal;
  },
  getName(fm) {
    const components = Helper.getComponents(fm);
    if (components.length < 1) {
      throw new Error(`Helper.getName() ${fm}`);
    }
    let name = void 0;
    let occurences = 0;
    for (const component of components) {
      if (component.slice(0, 15) === "component/name/") {
        name = component.slice(15);
        occurences += 1;
      }
    }
    if (occurences > 1) {
      throw new Error(
        `Helper.getName() ${fm} multiple occurences of 'component/name'`
      );
    }
    if (name === void 0) {
      throw new Error(
        `Helper.getName() ${fm} 'component/name' undefined`
      );
    }
    return name;
  },
  getComponents(fm) {
    const components = [];
    if (Helper.nilCheck(fm.tags)) {
      return [];
    }
    for (const tag of fm.tags) {
      if (tag.length > 10 && tag.slice(0, 10) === "component/") {
        components.push(tag);
      }
    }
    return components;
  },
  getArea(fm, emptyDefault = false) {
    return Helper.getTag(fm, "area", emptyDefault);
  },
  getContext(fm, emptyDefault = false) {
    return Helper.getTag(fm, "context", emptyDefault);
  },
  getDomain(fm, emptyDefault = false) {
    return Helper.getTag(fm, "domain", emptyDefault);
  },
  getLayer(fm, emptyDefault = false) {
    return Helper.getTag(fm, "layer", emptyDefault);
  },
  getOrg(fm, emptyDefault = false) {
    return Helper.getTag(fm, "org", emptyDefault);
  },
  getProject(fm, emptyDefault = false) {
    return Helper.getTag(fm, "project", emptyDefault);
  },
  durationStringToSec(val) {
    if (val === void 0 || val.length === 0) {
      return 0;
    }
    const mult = val.slice(-1);
    let m = 0;
    if (mult === "h") {
      m = 60 * 60;
    } else if (mult === "m") {
      m = 60;
    } else if (mult === "d") {
      m = 24 * 60 * 60;
    } else if (mult == "w") {
      m = 24 * 60 * 60 * 7;
    } else {
      console.warn(`Unhandled case val: ${val}`);
      return void 0;
    }
    return m * parseInt(val.slice(0, -1));
  },
  msecToStringDuration(val) {
    const oneHourInMsec = 36e5;
    const oneDayInMsec = 864e5;
    if (val >= 24 * oneHourInMsec) {
      return String(Helper.roundToOneDecimal(val / oneDayInMsec)).padStart(
        2,
        "0"
      ) + " d";
    } else {
      return String(Helper.roundToOneDecimal(val / oneHourInMsec)).padStart(
        2,
        "0"
      ) + " h";
    }
  },
  isUUID(val) {
    if (typeof val !== "string") {
      return false;
    }
    return val.length === 36;
  },
  sortByAge(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    return fmA.createdAt.getTime() - fmB.createdAt.getTime();
  },
  sortByPriority(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    return fmB.fm.priority - fmA.fm.priority;
  },
  sortByPriorityAndAge(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    if (fmA.fm.priority !== fmB.fm.priority.priority) {
      return Helper.sortByPriority(a, b);
    } else {
      return Helper.sortByAge(a, b);
    }
  },
  sortByDuration(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    return Helper.durationStringToSec(fmA.fm.time_estimate) - Helper.durationStringToSec(fmB.fm.time_estimate);
  },
  sortByPriorityAndDuration(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    if (fmA.fm.priority !== fmB.fm.priority) {
      return Helper.sortByPriority(a, b);
    } else {
      return Helper.sortByDuration(a, b);
    }
  },
  sortByPriorityAndDurationAndAge(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    if (fmA.fm.priority !== fmB.fm.priority) {
      return Helper.sortByPriority(a, b);
    } else if (fmA.fm.time_estimate !== fmB.fm.time_estimate) {
      return Helper.sortByDuration(a, b);
    } else {
      return Helper.sortByAge(a, b);
    }
  }
};
var AutoField = {
  tags(dv, fm, level = 2) {
    const tags = fm.tags;
    if (tags == void 0 || tags.length === 0) {
      return;
    }
    tags.sort();
    dv.header(level, "Tags");
    let s = "";
    for (const tag of tags) {
      s += ` #${tag}`;
    }
    dv.paragraph(s);
  },
  healmon(dv) {
    const fm = new FrontmatterJS(dv.current());
    const current = fm.createdAt.toISOString().slice(0, 10);
    const pages = dv.pages(`"${Paths.Journal}"`).where((page) => {
      const jFm = new FrontmatterJS(page);
      if (jFm.getProject() !== "homecook") {
        return false;
      }
      let jCurrent = null;
      const currentMinusOne = new Date(
        fm.createdAt.getTime() - 24 * 60 * 60 * 1e3
      );
      try {
        jCurrent = jFm.createdAt.toISOString().slice(0, 10);
      } catch (e) {
        dv.paragraph(
          `Invalid date: ${Renderer.makeLinkShortUUID(dv, page.file)}`
        );
        console.error(jFm);
      }
      if (currentMinusOne.toISOString().slice(0, 10) !== jCurrent) {
        return false;
      }
      return true;
    });
    dv.header(4, "repas (veille)");
    if (pages.length) {
      for (const page of pages) {
        dv.paragraph(Renderer.makeLinkShortUUID(dv, page.file));
      }
    }
  },
  authors(dv, fm) {
    const authors = fm.authors;
    if (authors === void 0 || authors.length === 0) {
      return;
    }
    dv.header(3, "Authors");
    dv.list(authors);
  },
  title(dv, fm) {
    const title = fm.alias;
    if (title === void 0 || title.length === 0) {
      return;
    }
    dv.header(3, title);
  },
  logs(dv, entries) {
    console.log("coucou, tu veux voir ma bite?");
    const buff = [];
    let totalTime = 0;
    for (const entry of entries) {
      const fme = entry.file.frontmatter;
      const e = [];
      let start = 0;
      let stop = 0;
      if (fme === void 0 || fme.created_at === void 0) {
        throw new Error(`Invalid frontmatter: ${fme.uuid}`);
      }
      start = new Date(fme.created_at);
      e.push(start.toISOString().slice(0, 10));
      if (fme.done_at === void 0) {
        stop = Date.now();
      } else {
        stop = new Date(fme.done_at);
      }
      totalTime += stop - start;
      e.push(
        dv.sectionLink(
          fme.uuid,
          "## Content",
          false,
          fme.uuid.slice(0, 8)
        )
      );
      e.push(Math.round((stop - start) / (1e3 * 60 * 60) * 10) / 10);
      if (fme.reviewed === void 0 || fme.reviewed === 0) {
        e.push(0);
      } else {
        e.push(fme.reviewed);
      }
      buff.push(e);
    }
    if (buff.length > 0) {
      dv.header(2, "Logs");
      dv.table(["created_at", "uuid", "session", "reviewed"], buff);
      if (totalTime > 0) {
        dv.paragraph(
          `_totalTime (h):_ ${Math.round(totalTime / (1e3 * 60 * 60) * 10) / 10}`
        );
      }
    }
  },
  media(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    const pages = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
    if (pages.length !== 1) {
      return;
    }
    const media = pages[0];
    const mediaFm = media.file.frontmatter;
    AutoField.title(dv, mediaFm);
    dv.paragraph(Renderer.makeLinkAlias(dv, media.file));
    AutoField.authors(dv, mediaFm);
    AutoField.tags(dv, mediaFm, 3);
    const logEntries = dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((p) => p.type === 6).sort((k) => k.created_at, "desc");
    AutoField.logs(dv, logEntries);
  },
  autoFieldTitle(dv, fm) {
    const title = fm.alias;
    if (title == void 0) {
      return;
    }
    dv.header(1, title);
  },
  autoFieldAuthors(dv, fm) {
    const authors = fm.authors;
    if (authors === void 0 || authors.length === 0) {
      return;
    }
    dv.header(2, "Authors");
    dv.list(authors);
  },
  autoFieldTags(dv, fm) {
    const tags = fm.tags;
    if (tags == void 0 || tags.length === 0) {
      return;
    }
    tags.sort();
    dv.header(2, "Tags");
    let s = "";
    for (const tag of tags) {
      s += ` #${tag}`;
    }
    dv.paragraph(s);
  },
  literature(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      return;
    }
    if (Helper.nilCheck(fm.authors)) {
    } else {
      this.autoFieldTitle(dv, fm);
      this.autoFieldAuthors(dv, fm);
      this.autoFieldTags(dv, fm);
    }
  },
  goal(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      console.warn("fm is required");
      return;
    }
    const created_at = new Date(fm.created_at);
    const logEntries = dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((p) => p.type === 6).sort((k) => k.created_at, "desc");
    const buff = [];
    for (const entry of logEntries) {
      const fme = entry.file.frontmatter;
      const e = [];
      if (fme === void 0 || fme.created_at === void 0) {
        throw new Error(`Invalid frontmatter: ${fme.uuid}`);
      }
      const start = new Date(fme.created_at);
      e.push(start.toISOString().slice(0, 10));
      e.push(
        dv.sectionLink(
          fme.uuid,
          "## Content",
          false,
          fme.uuid.slice(0, 8)
        )
      );
      buff.push(e);
    }
    const before = new Date(fm.before);
    const timeframe = (before.getTime() - created_at.getTime()) / (1e3 * 3600 * 24);
    let timeframeText = "";
    dv.header(3, "Timeframe");
    if (timeframe > 0 && timeframe < 30) {
      timeframeText = "runaway";
    } else if (timeframe < 60) {
      timeframeText = "10,000 feet";
    } else if (timeframe < 360) {
      timeframeText = "20,000 feet";
    } else if (timeframe < 720) {
      timeframeText = "30,000 feet";
    } else if (timeframe < 1080) {
      timeframeText = "40,000 feet";
    } else {
      timeframeText = "50,000 feet";
    }
    dv.paragraph(timeframeText);
    if (buff.length > 0) {
      dv.header(2, "Reviews");
      dv.table(["reviewed_at", "uuid"], buff);
    }
  },
  daily(dv) {
    const current = dv.current().file.frontmatter;
    const currentAt = new Date(current.at);
    const currentAtShort = currentAt.toISOString().slice(0, 10);
    const gonext = app.plugins.plugins.obsidian_gonext;
    const noteHelper = new NoteHelper(gonext, dv, new Frontmatter(gonext));
    const pages = dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (current.uuid === fm.uuid) {
        return false;
      }
      if (fm.fm.status !== "todo" || fm.getProject() === "daily") {
        return false;
      }
      const now = currentAt;
      let fmAtShort = void 0;
      try {
        fmAtShort = fm.at.toISOString().slice(0, 10);
      } catch (e) {
        throw new Error(`${fm.uuid}`);
      }
      if (!noteHelper.isDoable(page, currentAt)) {
        return false;
      }
      if (page.file.frontmatter.at !== void 0 && fmAtShort === currentAtShort) {
        return true;
      }
      if (page.file.frontmatter.at !== void 0 && fm.at.getTime() < now.getTime()) {
        return true;
      }
      if (page.file.frontmatter.before !== void 0 && fm.before.getTime() > now.getTime()) {
        return true;
      }
      if (page.file.frontmatter.after !== void 0 && fm.after.getTime() < now.getTime()) {
        return true;
      }
      return false;
    }).sort((k) => k.at, "asc");
    if (pages.length === 0) {
      return;
    }
    const buff = [];
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      const h = String(fm.at.getHours()).padStart(2, "0");
      const m = String(fm.at.getMinutes()).padStart(2, "0");
      if (page.file.frontmatter.status === "done") {
        buff.push([
          `~~${Renderer.makeLinkShortUUID(dv, page.file, "Task")}~~`,
          `~~${h}:${m}~~`
        ]);
      } else {
        buff.push([
          `${Renderer.makeLinkShortUUID(dv, page.file, "Task")}`,
          `${h}:${m}`
        ]);
      }
    }
    dv.table(["uuid", "at"], buff);
    AutoField.dailyJoural(dv);
  },
  dailyJoural(dv) {
    const current = new FrontmatterJS(dv.current());
    const currentAtShort = current.at.toISOString().slice(0, 10);
    console.log(currentAtShort);
    const pages = dv.pages(`"Journal"`).where((page) => {
      const fm = new FrontmatterJS(page);
      const atShort = fm.createdAt.toISOString().slice(0, 10);
      if (atShort === currentAtShort) {
        return true;
      }
      return false;
    }).sort((k) => k.created_at, "asc");
    dv.header(2, "Journal");
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      if (page.file.frontmatter.alias !== void 0) {
        page.file.frontmatter.name = page.file.frontmatter.alias;
      } else if (fm.getProject() !== void 0) {
        page.file.frontmatter.name = fm.getProject();
      } else if (fm.getDomain() !== void 0) {
        page.file.frontmatter.name = fm.getDomain();
      }
      dv.paragraph(Renderer.makeLinkName(dv, page.file));
    }
  },
  dailyGoals(dv) {
    const current = dv.current().file.frontmatter;
    const currentAt = new Date(current.at);
    const pages = dv.pages(`"${Paths.Goals}"`).where((page) => {
      if (page.file.frontmatter.status !== "active") {
        return false;
      } else {
        return true;
      }
    }).sort((k) => k.at, "asc");
    if (pages.length === 0) {
      return;
    }
    for (const page of pages) {
      dv.paragraph(Renderer.makeLinkShortUUID(dv, page.file));
    }
  },
  task(dv) {
    const dvLib = new DvLib();
    dvLib.autoFieldTask(dv);
  },
  log(dv) {
    const current = dv.current();
    const curFm = new FrontmatterJS(current);
    const currentId = curFm.uuid;
    const currentParentId = current.file.path.split("/")[1];
    Assert.True(
      currentParentId !== void 0,
      `currentParentId undefined for ${curFm.uuid}`
    );
    const pages = dv.pages(`"${Paths.Logs}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      const parentId = page.file.path.split("/")[1];
      Assert.True(
        parentId !== void 0,
        `parentId undefined for ${fm.uuid}`
      );
      if (parentId !== currentParentId) {
        return false;
      }
      return true;
    }).sort((k) => k.created_at, "asc");
    for (let i = 0; i < pages.length; i++) {
      const page = pages[i];
      Assert.True(page !== void 0, "ass ert failed");
      const fm = new FrontmatterJS(page);
      if (fm.uuid === currentId) {
        if (i === 0) {
          const dvLib = new DvLib();
          dvLib.autoFieldLog(dv);
        } else {
          dv.paragraph(Renderer.makeLinkShortUUID(dv, pages[i - 1].file));
        }
      }
    }
  }
};
var Renderer = {
  makeLinkName(dv, f, anchor = "Content") {
    if (Helper.nilCheck(f.frontmatter.name)) {
      return Renderer.makeLinkShortUUID(dv, f, anchor);
    }
    return dv.sectionLink(f.path, anchor, false, `${f.frontmatter.name}`);
  },
  makeLinkAlias(dv, f, anchor = "Content") {
    if (Helper.nilCheck(f.frontmatter.alias)) {
      return Renderer.makeLinkShortUUID(dv, f, anchor);
    }
    return dv.sectionLink(f.path, anchor, false, `${f.frontmatter.alias}`);
  },
  makeLinkShortUUID(dv, f, anchor = "Content") {
    return dv.sectionLink(
      f.path,
      anchor,
      false,
      `${f.frontmatter.uuid.slice(0, 8)}`
    );
  },
  makeLink(dv, f, name = void 0, anchor = "Content") {
    return dv.sectionLink(f.path, anchor, false, name);
  },
  projectLogs(dv, data) {
    const cols = ["type", "task_id", "log_id", "took", "reviewed"];
    const buff = [];
    let totalTime = 0;
    for (const d of data) {
      const f = d.file;
      const fm = d.file.frontmatter;
      Assert.True(
        !Helper.nilCheck(fm.uuid),
        `"uuid" id not defined for: ${f.path}`
      );
      Assert.True(
        !Helper.nilCheck(fm.type),
        `"type" id not defined for: ${f.path}`
      );
      const createdAt = new Date(fm.created_at);
      const doneAt = new Date(fm.done_at);
      const delta = doneAt.getTime() - createdAt.getTime();
      totalTime += delta;
      const record = {
        taskId: "",
        logId: Renderer.makeLinkAlias(dv, f),
        took: Math.round(delta / (1e3 * 60 * 60) * 10) / 10,
        reviewed: Helper.nilCheck(fm.reviewed) ? 0 : fm.reviewed,
        type: void 0
      };
      const pages = dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
      if (pages.length !== 1) {
        throw new Error(
          `parent task with id: "${fm.parent_id}" does not exists`
        );
      }
      const parent = pages[0];
      switch (parent.file.frontmatter.type) {
        case Types.Task:
          record.type = `<font color=8B0000>task</font>`;
          record.taskId = Renderer.makeLinkShortUUID(
            dv,
            parent.file,
            "Task"
          );
          break;
        case Types.Media:
          record.type = `<font color=00008B>media</font>`;
          record.taskId = Renderer.makeLinkShortUUID(
            dv,
            parent.file,
            "Content"
          );
          break;
        case Types.Praxis:
          record.type = `<font color=FF8C00>praxis</font>`;
          record.taskId = Renderer.makeLinkShortUUID(
            dv,
            parent.file,
            "Content"
          );
          break;
        case Types.Provision:
          record.type = `<font color=DC143C>provision</font>`;
          record.taskId = Renderer.makeLinkShortUUID(
            dv,
            parent.file,
            "Content"
          );
          break;
        default:
          throw new Error(
            `Renderer.projectLogs: type "${parent.file.frontmatter.type}" not implemented`
          );
      }
      buff.push([
        record.type,
        record.taskId,
        record.logId,
        record.took,
        record.reviewed
      ]);
    }
    dv.table(cols, buff);
  },
  goal(dv, data) {
    const buff = [];
    for (const fm of data) {
      const created_at = fm.createdAt;
      const logEntries = dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((p) => p.type === 6).sort((k) => k.created_at, "desc");
      const before = new Date(fm.fm.before);
      const timeframe = (before.getTime() - created_at.getTime()) / (1e3 * 3600 * 24);
      let timeframeText = "";
      if (timeframe > 0 && timeframe < 30) {
        timeframeText = "runaway";
      } else if (timeframe < 60) {
        timeframeText = "10,000 feet";
      } else if (timeframe < 360) {
        timeframeText = "20,000 feet";
      } else if (timeframe < 720) {
        timeframeText = "30,000 feet";
      } else if (timeframe < 1080) {
        timeframeText = "40,000 feet";
      } else {
        timeframeText = "50,000 feet";
      }
      buff.push([
        before.toISOString().slice(0, 10),
        dv.sectionLink(
          fm.uuid,
          "## Content",
          false,
          fm.uuid.slice(0, 8)
        ),
        fm.getDomain(),
        timeframeText
      ]);
    }
    dv.table(["deadline", "uuid", "domain", "timeframe"], buff);
  },
  inboxEntry(dv, data) {
    const cols = [
      "uuid",
      // "type",
      // "age",
      // "size",
      "name"
      // "project",
      // "domain",
      // "components",
    ];
    const buff = [];
    for (const d of data) {
      const f = d.file;
      const fm = d.file.frontmatter;
      Assert.True(
        !Helper.nilCheck(fm.uuid),
        `"uuid" id not defined for: ${f.path}`
      );
      Assert.True(
        !Helper.nilCheck(fm.type),
        `"type" id not defined for: ${f.path}`
      );
      const now = new Date();
      const delta = now.getTime() - fm.createdAt.getTime();
      const since = Helper.msecToStringDuration(delta);
      let name = "";
      if (fm.domain !== "domain/undefined") {
        name = fm.domain;
      } else if (fm.project !== void 0) {
        name = fm.project;
      } else {
        name = "\\-";
      }
      const record = {
        uuid: Helper.numberTypeToString(fm) === "fleeting" ? `&#128196 ${Renderer.makeLinkAlias(dv, f)}` : Renderer.makeLinkAlias(dv, f),
        // uuid: `&#9728 ${Renderer.makeLinkAlias(dv, f)}`,
        type: Helper.numberTypeToString(fm),
        since: `${since}`,
        size: f.size,
        project: fm.project === void 0 ? "\\-" : fm.project.slice(8),
        domain: fm.domain === void 0 ? "\\-" : fm.domain.slice(7),
        //Renderer.domainBase(dv, fm.domain),
        name
      };
      if (record.type === "log") {
        const pages = dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
        if (pages.length !== 1) {
          throw new Error(`${fm.parent_id} ${fm.id}`);
        }
        const parent = pages[0];
        switch (parent.type) {
          case Types.Task:
            record.uuid = `&#128211 ${record.uuid}`;
            record.type = `<font color=8B0000>task</font>`;
            break;
          case Types.Praxis:
            record.uuid = `&#128188 ${record.uuid}`;
            record.type = `<font color=FF8C00>praxis</font>`;
            break;
          case Types.Media:
            record.uuid = `&#128191 ${record.uuid}`;
            record.type = `<font color=00008B>media</font>`;
            break;
          case Types.Provision:
            record.type = `<font color=DC143C>provision</font>`;
            break;
          default:
            break;
        }
      }
      buff.push([
        record.uuid,
        // record.type,
        // record.since,
        // record.size,
        record.name
        // record.project,
        // record.domain,
      ]);
    }
    dv.table(cols, buff);
  },
  resourceBase(dv, data) {
    const cols = ["uuid"];
    const buff = [];
    for (const d of data) {
      const f = d.file;
      const fm = d.file.frontmatter;
      Assert.True(
        !Helper.nilCheck(fm.uuid),
        `"uuid" id not defined for: ${f.path}`
      );
      buff.push([Renderer.makeLinkAlias(dv, f)]);
    }
    dv.table(cols, buff);
  },
  basicRelation(dv, data) {
    const cols = ["uuid", "name"];
    const buff = [];
    for (const d of data) {
      const f = d.file;
      const fm = d.file.frontmatter;
      Assert.True(
        !Helper.nilCheck(fm.uuid),
        `"uuid" id not defined for: ${f.path}`
      );
      buff.push([Renderer.makeLinkAlias(dv, f), fm.name]);
    }
    dv.table(cols, buff);
  },
  praxisBase(dv, data) {
    const buff = [];
    const cols = ["tasks", "uuid", "estimate"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      buff.push([
        dv.markdownTaskList(f.tasks),
        dv.fileLink(f.path, false, f.name.slice(0, 8)),
        fm.time_estimate
      ]);
    }
    dv.table(cols, buff);
  },
  waitingTask(dv, data) {
    const buff = [];
    const cols = ["tasks", "uuid", "estimate", "cause"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      buff.push([
        dv.markdownTaskList(f.tasks),
        dv.fileLink(f.path, false, f.name.slice(0, 8)),
        fm.time_estimate,
        fm.cause
      ]);
    }
    dv.table(cols, buff);
  },
  readyTask(dv, data) {
    const buff = [];
    const cols = ["uuid", "task", "estimate", "area"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      buff.push([
        Renderer.makeLinkAlias(dv, f, "Task"),
        dv.markdownTaskList(f.tasks),
        fm.time_estimate,
        Helper.getField(Helper.getArea(fm, true), "\\-")
      ]);
    }
    dv.table(cols, buff);
  },
  provisionBase(dv, data) {
    const buff = [];
    const cols = ["uuid", "supplier", "content", "estimate"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      buff.push([
        dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
        fm.supplier,
        dv.markdownTaskList(f.tasks),
        fm.time_estimate
      ]);
    }
    dv.table(cols, buff);
  },
  basicTaskJournalNextAction(dv, data) {
    const buff = [];
    const cols = ["uuid", "priority", "estimate", "tasks"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const domain = Helper.getDomain(fm, true) === void 0 ? "\\-" : Helper.getDomain(fm);
      if (fm.ref_id === void 0) {
        buff.push([
          // journal.contains(fm.uuid) ? "->" : "\\-",
          dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
          fm.priority,
          fm.time_estimate,
          dv.markdownTaskList(f.tasks)
        ]);
      } else {
        const ref = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
        if (ref.length === 0) {
          throw new Error(
            `task: '${fm.uuid}' has an undefined ref_id: '${fm.ref_id}'`
          );
        } else {
          buff.push([
            dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
            Renderer.makeLinkAlias(dv, ref[0].file),
            fm.time_estimate,
            domain
          ]);
        }
      }
    }
    dv.table(cols, buff);
  },
  basicTaskJournalWaiting(dv, data) {
    const buff = [];
    const cols = ["uuid", "cause", "tasks"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const domain = Helper.getDomain(fm, true) === void 0 ? "\\-" : Helper.getDomain(fm);
      if (fm.ref_id === void 0) {
        buff.push([
          // journal.contains(fm.uuid) ? "->" : "\\-",
          dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
          d.cause,
          dv.markdownTaskList(f.tasks)
        ]);
      } else {
        const ref = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
        if (ref.length === 0) {
          throw new Error(
            `task: '${fm.uuid}' has an undefined ref_id: '${fm.ref_id}'`
          );
        } else {
          buff.push([
            dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
            Renderer.makeLinkAlias(dv, ref[0].file),
            fm.time_estimate,
            domain
          ]);
        }
      }
    }
    dv.table(cols, buff);
  },
  basicTaskJournal(dv, data) {
    const buff = [];
    const cols = ["uuid", "tasks", "estimate"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const domain = Helper.getDomain(fm, true) === void 0 ? "\\-" : Helper.getDomain(fm);
      if (fm.ref_id === void 0) {
        buff.push([
          // journal.contains(fm.uuid) ? "->" : "\\-",
          dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
          dv.markdownTaskList(f.tasks),
          fm.time_estimate
        ]);
      } else {
        const ref = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
        if (ref.length === 0) {
          throw new Error(
            `task: '${fm.uuid}' has an undefined ref_id: '${fm.ref_id}'`
          );
        } else {
          buff.push([
            dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
            Renderer.makeLinkAlias(dv, ref[0].file),
            fm.time_estimate,
            domain
          ]);
        }
      }
    }
    dv.table(cols, buff);
  },
  activeTask(dv, data) {
    const buff = [];
    const cols = ["uuid", "tasks", "session"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const logs = dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((p) => p.type === 6).sort((k) => k.created_at, "desc");
      const last = logs[0];
      const createdAt = new Date(last.created_at);
      const now = new Date();
      buff.push([
        dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
        dv.markdownTaskList(f.tasks),
        ((t) => {
          return Math.round(t / (3600 * 1e3) * 10) / 10;
        })(now.getTime() - createdAt.getTime())
      ]);
    }
    dv.table(cols, buff);
  },
  basicTask(dv, data) {
    const buff = [];
    const cols = ["uuid", "tasks", "estimate", "domain"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const domain = Helper.getDomain(fm, true) === void 0 ? "\\-" : Helper.getDomain(fm);
      if (fm.ref_id === void 0) {
        buff.push([
          dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
          dv.markdownTaskList(f.tasks),
          fm.time_estimate,
          domain
        ]);
      } else {
        const ref = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
        if (ref.length === 0) {
          throw new Error(
            `task: '${fm.uuid}' has an undefined ref_id: '${fm.ref_id}'`
          );
        } else {
          buff.push([
            dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
            Renderer.makeLinkAlias(dv, ref[0].file),
            fm.time_estimate,
            domain
          ]);
        }
      }
    }
    dv.table(cols, buff);
  },
  logs(dv, entries) {
    const buff = [];
    let totalTime = 0;
    for (const entry of entries) {
      const fme = entry.file.frontmatter;
      const e = [];
      let start = 0;
      let stop = 0;
      if (fme === void 0 || fme.created_at === void 0) {
        throw new Error(`Invalid frontmatter: ${fme.uuid}`);
      }
      start = new Date(fme.created_at);
      e.push(start.toISOString().slice(0, 10));
      if (fme.done_at === void 0) {
        stop = Date.now();
      } else {
        stop = new Date(fme.done_at);
      }
      totalTime += stop - start;
      e.push(
        dv.sectionLink(
          fme.uuid,
          "## Content",
          false,
          fme.uuid.slice(0, 8)
        )
      );
      e.push(Math.round((stop - start) / (1e3 * 60 * 60) * 10) / 10);
      if (fme.reviewed === void 0 || fme.reviewed === 0) {
        e.push(0);
      } else {
        e.push(fme.reviewed);
      }
      buff.push(e);
    }
    if (buff.length > 0) {
      dv.header(2, "Logs");
      dv.table(["created_at", "uuid", "session", "reviewed"], buff);
      if (totalTime > 0) {
        dv.paragraph(
          `_totalTime (h):_ ${Math.round(totalTime / (1e3 * 60 * 60) * 10) / 10}`
        );
      }
    }
  },
  mediaWithLogs(dv, data) {
    const buff = [];
    const cols = ["uuid", "tasks", "estimate", "current", "domain"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const ref = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
      if (ref.length === 0) {
        throw new Error(
          `task: '${fm.uuid}' has an undefined ref_id: '${fm.ref_id}'`
        );
      }
      const domain = Helper.getDomain(fm, true) === void 0 ? "\\-" : Helper.getDomain(fm);
      const logEntries = dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((p) => p.type === Types.Log).sort((k) => k.created_at, "desc");
      let totalTime = 0;
      for (const entry of logEntries) {
        const fme = entry.file.frontmatter;
        const e = [];
        let start = 0;
        let stop = 0;
        if (fme === void 0 || fme.created_at === void 0) {
          throw new Error(`Invalid frontmatter: ${fme.uuid}`);
        }
        start = new Date(fme.created_at);
        try {
          e.push(start.toISOString().slice(0, 10));
        } catch (e2) {
          console.error(entry.uuid);
        }
        if (fme.done_at === void 0) {
          stop = Date.now();
        } else {
          stop = new Date(fme.done_at);
        }
        totalTime += stop - start;
      }
      buff.push([
        dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
        Renderer.makeLinkAlias(dv, ref[0].file),
        fm.time_estimate,
        `${Math.round(totalTime / (1e3 * 60 * 60) * 10) / 10}h`,
        domain
      ]);
    }
    dv.table(cols, buff);
  },
  taskDoneWithLogs(dv, data) {
    const buff = [];
    const cols = [
      "taskId",
      "logId",
      "createdAt",
      "doneAt",
      "timeEstimate",
      "took",
      "project"
    ];
    for (const d of data) {
      const f = d.file;
      const fm = d.file.frontmatter;
      const createdAt = new Date(fm.created_at);
      const doneAt = new Date(fm.done_at);
      const timeEstimate = "";
      const took = (doneAt - createdAt) / (1e3 * 3600);
      const pages = dv.pages(`"${Paths.Tasks}"`).where((page) => page.file.frontmatter.uuid === fm.parent_id);
      if (pages.length !== 1) {
        throw new Error();
      }
      const parent = pages[0];
      const parentFm = parent.file.frontmatter;
      const parentF = parent.file;
      buff.push([
        Renderer.makeLinkShortUUID(dv, parent.file, "Task"),
        Renderer.makeLinkShortUUID(dv, f),
        createdAt.toISOString().slice(0, 10),
        doneAt.toISOString().slice(0, 10),
        timeEstimate,
        ((t) => {
          return Math.round(t * 10) / 10;
        })(took),
        Helper.getProject(parentFm)
      ]);
    }
    dv.table(cols, buff);
  },
  projects(dv, pages) {
    const cols = ["name"];
    const buff = [];
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      buff.push([Renderer.makeLink(dv, page.file, fm.getName())]);
    }
    dv.table(cols, buff);
  },
  basicDoneTaskWithLogs(dv, data) {
    const cols = [
      "uuid",
      "createdAt",
      "doneAt",
      "timeEstimate",
      "took",
      "delta",
      "project",
      "area"
    ];
    dv.table(cols, data);
  },
  basicDoneTaskWithoutLogs(dv, data) {
    const cols = ["taskId", "createdAt", "project", "area"];
    dv.table(cols, data);
  },
  basicProgressedTaskWithLog(dv, data) {
    const cols = [
      "taskId",
      "logId",
      // "createdAt",
      // "doneAt",
      "took",
      // "tookAcc",
      "project"
      // "domain",
    ];
    dv.table(cols, data);
  },
  // dailyTask(dv, data) {
  // 	Renderer.makeLinkShortUUID(this.dv, page.file),
  // 	dv.
  // 				rs.push([
  // 					"paragraph",
  // 					Renderer.makeLinkShortUUID(this.dv, page.file),
  // 				]);
  // }
  do(dv, rs) {
    for (const row of rs) {
      switch (row[0]) {
        case "header":
          const [, level, heading] = row;
          dv.header(level, heading);
          break;
        case "paragraph":
          const [, text] = row;
          dv.paragraph(text);
          break;
        case "array":
          const [, renderer, data] = row;
          renderer(dv, data);
          break;
        case "stats":
          const [, name, unit, value] = row;
          dv.paragraph(`${name} (${unit}): ${value}`);
          break;
        default:
          throw new Error(`Unsuported opcode: "fuckoff"`);
      }
    }
  }
};
var Frontmatter = class {
  constructor(gonext) {
    this.gonext = gonext;
  }
  projectParseMeta(dv) {
    const current = dv.current();
    const projectName = current.file.folder.slice(
      Paths.Projects.length + 1
    );
    const projectDir = current.file.folder;
    if (projectName.contains("/")) {
      throw new Error(
        `projectDir: ${projectDir} folder: ${current.file.folder}`
      );
    }
    const pages = dv.pages(`"${projectDir}/meta"`).array();
    if (pages.length !== 1) {
      throw new Error(`len: ${pages.length}`);
    }
    const fm = pages[0].file.frontmatter;
    const uuid = fm.uuid;
    if (Helper.nilCheck(uuid)) {
      throw new Error(`project 'uuid' is not defined`);
    }
    const name = fm.name;
    if (Helper.nilCheck(name)) {
      throw new Error(`'name' is not defined`);
    }
    const domains = fm.domains;
    if (!Array.isArray(domains)) {
      throw new Error(`'domains' must be of array type`);
    }
    return {
      uuid,
      name,
      domains
    };
  }
  getCreatedAt(f) {
    return Helper.nilCheck(f.frontmatter.created_at) ? new Date(f.ctime.ts) : new Date(f.frontmatter.created_at);
  }
  getCurrentFrontmatter() {
    const file = this.gonext.workspace.getActiveFile();
    const fileContent = this.gonext.metadataCache.getFileCache(file);
    if (fileContent === void 0) {
      return void 0;
    }
    const fm = fileContent.frontmatter;
    if (fm === void 0) {
      return void 0;
    }
    return fm;
  }
  parseListByNamespace(fm) {
    const byAreas = fm.by_areas === void 0 ? [] : fm.by_areas;
    const byContexts = fm.by_contexts === void 0 ? [] : fm.by_contexts;
    const byLayers = fm.by_layers === void 0 ? [] : fm.by_layers;
    const byOrgs = fm.by_orgs === void 0 ? [] : fm.by_orgs;
    const byProjects = fm.by_projects === void 0 ? [] : fm.by_projects;
    return [byAreas, byContexts, byLayers, byOrgs, byProjects];
  }
  parseListBeforeAfter(fm) {
    const before = Helper.getDate(fm.before);
    const after = Helper.getDate(fm.after);
    return [before, after];
  }
  parseListFilterBy(fm) {
    if (fm === void 0) {
      return [];
    }
    const filterBy = fm.filter_by;
    if (!Array.isArray(filterBy)) {
      return [];
    }
    return filterBy;
  }
  parseListGroupBy(fm) {
    if (fm === void 0) {
      return "";
    }
    const groupBy = fm.group_by;
    if (!(typeof groupBy === "undefined") && !(typeof groupBy === "string")) {
      return "";
    }
    return groupBy;
  }
  parseAllProgressedTasks() {
    const fm = this.getCurrentFrontmatter();
    if (fm === void 0) {
      throw new Error(`Invalid frontmatter, cannot proceed`);
    }
    const groupBy = this.parseListGroupBy(fm);
    const filterBy = this.parseListFilterBy(fm);
    const [before, after] = this.parseListBeforeAfter(fm);
    return [groupBy, filterBy, before, after];
  }
  parseAllDoneTasks() {
    return this.parseAllProgressedTasks();
  }
  parseAllDoneTaskWithoutLog() {
    return this.parseAllProgressedTasks();
  }
  parseAllTodoAdHoc() {
    const fm = this.getCurrentFrontmatter();
    if (fm === void 0) {
      throw new Error(`Invalid frontmatter, cannot proceed`);
    }
    const groupBy = this.parseListGroupBy(fm);
    const filterBy = this.parseListFilterBy(fm);
    const [before, after] = this.parseListBeforeAfter(fm);
    const minPriority = Helper.getField(fm.min_priority, 0);
    return [groupBy, filterBy, before, after, minPriority];
  }
  parseInbox() {
    const fm = this.getCurrentFrontmatter();
    if (fm === void 0) {
      return [[], [], 0, 4294967295];
    }
    const source = Helper.nilCheck(fm.source) ? ["logs", "fleeting"] : fm.source;
    const groupBy = Helper.nilCheck(fm.group_by) ? "none" : fm.group_by;
    const filterBy = this.parseListFilterBy(fm);
    const minSize = Helper.nilCheck(fm.min_size) ? 0 : fm.min_size;
    const maxSize = Helper.nilCheck(fm.max_size) ? 4294967295 : fm.max_size;
    return [source, groupBy, filterBy, minSize, maxSize];
  }
  parseTodoList() {
    const fm = this.getCurrentFrontmatter();
    if (fm === void 0) {
      return [[], [], [], [], [], 0];
    }
    const [byAreas, byContexts, byLayers, byOrgs, byProjects] = this.parseListByNamespace(fm);
    const minPriority = Helper.getField(fm.min_priority, 0);
    return [byAreas, byContexts, byLayers, byOrgs, byProjects, minPriority];
  }
  parseDoneList() {
    const fm = this.getCurrentFrontmatter();
    if (fm === void 0) {
      return [[], [], [], [], [], [], []];
    }
    const [byAreas, byContexts, byLayers, byOrgs, byProjects] = this.parseListByNamespace(fm);
    const [before, after] = this.parseListBeforeAfter(fm);
    const fields = Helper.getField(fm.fields, []);
    const stats = Helper.getField(fm.stats, []);
    return [
      byAreas,
      byContexts,
      byLayers,
      byOrgs,
      byProjects,
      fields,
      stats,
      before,
      after
    ];
  }
};
var NoteHelper = class {
  constructor(gonext, dv, frontmatter) {
    this.gonext = gonext;
    this.dv = dv;
    this.frontmatter = frontmatter;
  }
  isDoable(task, at = void 0) {
    const fm = task.file.frontmatter;
    if (fm.status !== Status.Todo) {
      return false;
    }
    if (fm.after !== void 0) {
      const after = new Date(fm.after);
      if (Date.now() <= after.getTime()) {
        return false;
      }
    }
    if (at !== void 0) {
      const fmAt = new Date(fm.at);
      fmAt.setHours(0);
      fmAt.setMinutes(0);
      fmAt.setSeconds(0);
      if (at.getTime() < fmAt.getTime()) {
        return false;
      }
    } else {
      if (fm.at !== void 0) {
        const at2 = new Date(fm.at);
        if (Date.now() <= at2.getTime()) {
          return false;
        }
      }
    }
    const deps = fm.needs;
    if (deps === void 0 || deps.length === 0) {
      return true;
    }
    if (this.hasPendingDependencies(deps)) {
      return false;
    }
    return true;
  }
  hasPendingDependencies(deps) {
    for (const dep of deps) {
      const task = this.dv.pages(`"${Paths.Tasks}/${dep}"`).array();
      if (task.length === 0) {
        console.warn(
          `hasPendingDependencies: "${Paths.Tasks}/${dep}" task does not exists`
        );
        continue;
      }
      const fm = task[0].file.frontmatter;
      if (fm.type !== Types.Task && fm.type !== Types.Provision && fm.type !== Types.Praxis) {
        continue;
      }
      if (fm.status === Status.Todo) {
        return true;
      }
    }
    return false;
  }
  isChildTag(parent, child) {
    if (child.length <= parent.length + 1) {
      return false;
    } else if (child.slice(0, parent.length + 1) != `${parent}/`) {
      return false;
    }
    return true;
  }
  getNamespaceContent(ns) {
    const children = [];
    const pages = this.dv.pages(`#${ns}`);
    for (const p of pages) {
      const tags = p.file.frontmatter.tags;
      if (tags === void 0 || tags.length === 0) {
        continue;
      }
      for (const tag of tags) {
        if (this.isChildTag(ns, tag)) {
          const t = tag.slice(ns.length + 1);
          if (!children.contains(t)) {
            children.push(t);
          }
        }
      }
    }
    return children;
  }
  isLastRevision(page) {
    const revisionList = (dv, root, current) => {
      let head = current;
      while (true) {
        const pages = dv.pages(`"${root}"`).where(
          (page2) => page2.file.frontmatter.next === head.file.frontmatter.uuid
        );
        if (pages.length > 1) {
          throw new Error();
        } else if (pages.length === 0) {
          break;
        }
        head = pages[0];
      }
      const buff = [];
      let cur = head;
      while (true) {
        buff.push(cur);
        const fm2 = cur.file.frontmatter;
        if (fm2.next === void 0) {
          break;
        }
        const pages = dv.pages(`"${root}/${fm2.next}"`);
        if (pages.length === 0) {
          break;
        }
        cur = pages[0];
      }
      return buff;
    };
    const note = page;
    const fm = note.file.frontmatter;
    let revisions = [];
    switch (fm.type) {
      case Types.Permanent:
        revisions = revisionList(this.dv, Paths.Slipbox, note);
        break;
      case Types.Resource:
        revisions = revisionList(this.dv, Paths.Resources, note);
        break;
      default:
        throw new Error();
    }
    if (revisions.length <= 1) {
      return true;
    }
    return revisions[0].file.frontmatter.uuid === fm.uuid;
  }
};
var Generator = class {
  constructor(app2) {
    this.app = app2;
    this.dv = app2.dv;
    this.gonext = app2.gonext;
  }
  fleeting() {
    const dt = new Date();
    const note = {
      uuid: v4_default(),
      type: 13,
      version: "0.0.4",
      created_at: dt.toISOString(),
      path: "",
      data: ""
    };
    note.path = `800 Inbox/${note.uuid}.md`;
    note.data = `---
type: 13
uuid: "${note.uuid}"
created_at: "${note.created_at}"
version: "0.0.4"
---
## Content
`;
    const f = this.app.vault.create(note.path, note.data).then((f2) => {
      return f2;
    });
    const active = this.app.workspace.activeLeaf;
    const root = active.parent;
    this.app.workspace.createLeafInParent(root, root.children.length + 1);
    const leaf = root.children[root.children.length - 1];
    f.then((file) => {
      leaf.openFile(file, { active: true });
    });
  }
  journalEntry() {
    const dt = new Date();
    const note = {
      uuid: v4_default(),
      type: 20,
      version: "0.0.4",
      created_at: dt.toISOString(),
      path: "",
      data: ""
    };
    note.path = `Journal/${note.uuid}.md`;
    note.data = `---
type: 20
uuid: "${note.uuid}"
created_at: "${note.created_at}"
version: "0.0.4"
tags:
    - project/mission
---
## Content
### entry
`;
    return this.app.vault.create(note.path, note.data).then((f) => {
      return f;
    });
  }
};
var ListMaker = class {
  constructor(gonext, dv, frontmatter) {
    this.gonext = gonext;
    this.dv = dv;
    this.frontmatter = frontmatter;
    this.noteHelper = new NoteHelper(gonext, dv, frontmatter);
  }
  nameInNamespace(fm, ns) {
    let found = false;
    if (ns.length === 0) {
      return true;
    }
    for (const a of ns) {
      const root = a.split("/");
      Assert.True(root.length === 2, `Invalid tag: '${a}'`);
      const parent = root[0].slice(0, 1) === "!" ? root[0].slice(1) : root[0];
      const name = Helper.getTag(fm, parent);
      if (a.slice(0, 1) === "!") {
        if (name === a.slice(1)) {
          return false;
        } else {
          found = true;
        }
      } else {
        if (name === a) {
          found = true;
        } else {
          found = false;
        }
      }
    }
    return found;
  }
  myNameInNamespace(name, ns) {
    let found = false;
    if (ns.length === 0) {
      return true;
    }
    for (const a of ns) {
      if (a.slice(0, 1) === "!") {
        if (name === a.slice(1)) {
          return false;
        } else {
          found = true;
        }
      } else {
        if (name === a) {
          found = true;
        } else {
          found = false;
        }
      }
    }
    return found;
  }
  filterByNamespace(fm, byAreas, byContexts, byLayers, byOrgs, byProjects) {
    if (!this.myNameInNamespace(Helper.getArea(fm), byAreas)) {
      return false;
    }
    if (!this.myNameInNamespace(Helper.getContext(fm), byContexts)) {
      return false;
    }
    if (!this.myNameInNamespace(Helper.getLayer(fm), byLayers)) {
      return false;
    }
    if (!this.myNameInNamespace(Helper.getOrg(fm), byOrgs)) {
      return false;
    }
    if (!this.myNameInNamespace(Helper.getProject(fm), byProjects)) {
      return false;
    }
    return true;
  }
  filterByDate(dt, before, after) {
    if (before !== void 0 && dt.getTime() > before.getTime()) {
      return false;
    }
    if (after !== void 0 && dt.getTime() < after.getTime()) {
      return false;
    }
    return true;
  }
  goals() {
    const rs = [];
    const bins = {};
    bins[GoalStatus.Reframe] = [];
    bins[GoalStatus.Research] = [];
    bins[GoalStatus.Operationalize] = [];
    bins[GoalStatus.Planify] = [];
    bins[GoalStatus.Dependant] = [];
    bins[GoalStatus.Active] = [];
    bins[GoalStatus.Success] = [];
    bins[GoalStatus.Failed] = [];
    const pages = this.dv.pages(`"${Paths.Goals}"`).where((page) => {
      const fmp = page.file.frontmatter;
      if (bins[fmp.status] === void 0) {
        return true;
      } else {
        const fm = new FrontmatterJS(page);
        bins[fmp.status].push(fm);
        return false;
      }
    });
    const keys = Object.keys(bins);
    keys.sort();
    for (const k of keys) {
      const buff = bins[k];
      buff.sort((a, b) => {
        const dta = new Date(a.fm.before);
        const dtb = new Date(b.fm.before);
        return dta.getTime() - dtb.getTime();
      });
    }
    const displayGoals = (k, rs2) => {
      rs2.push(["header", 3, k]);
      const buff = bins[k];
      rs2.push(["array", Renderer.goal, buff]);
    };
    rs.push(["header", 2, "operational"]);
    displayGoals("active", rs);
    displayGoals("planify", rs);
    rs.push(["header", 2, "non-operational"]);
    displayGoals("reframe", rs);
    displayGoals("research", rs);
    displayGoals("operationalize", rs);
    rs.push(["header", 2, "done"]);
    displayGoals("success", rs);
    displayGoals("failed", rs);
    return rs;
  }
  projectTasksSheetRelationFrontmatter(dv) {
    const current = dv.current();
    const fm = new FrontmatterJS(current);
    return {
      name: fm.getName(),
      uuid: fm.uuid,
      active: fm.fm.active === void 0 || fm.fm.active === true ? true : false
    };
  }
  projectTasksSheetRelation(dv) {
    const project = this.projectTasksSheetRelationFrontmatter(dv);
    const rs = [];
    const bins = {
      nextAction: [],
      waitingFor: [],
      somedayMaybe: []
    };
    {
      const pages2 = dv.pages(`"Journal"`).where((page) => {
        const fm = new FrontmatterJS(page);
        return fm.getProject() === project.name;
      }).sort((k) => k.created_at, "desc");
      if (pages2.length > 0) {
        rs.push(["header", 2, `Journal (${pages2.length})`]);
        for (const page of pages2) {
          const fm = new FrontmatterJS(page);
          const text = Renderer.makeLink(
            dv,
            fm.f,
            `${fm.createdAt.toISOString().slice(0, 10)}`,
            "entry"
          );
          rs.push(["paragraph", text]);
        }
      }
    }
    const pages = dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (fm.fm.status === "done") {
        return false;
      }
      if (["daily", "weekly", "monthly"].contains(project.name)) {
        return false;
      } else if (project.name === "adhoc" && fm.getProject() === void 0) {
        page.file.frontmatter.project = "adhoc";
        return true;
      } else if (project.name === fm.getProject()) {
        return true;
      } else {
        return false;
      }
    });
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      if (this.noteHelper.isDoable(page)) {
        if (fm.fm.priority > 0) {
          bins.nextAction.push(page);
        } else {
          bins.somedayMaybe.push(page);
        }
      } else {
        if (fm.fm.needs !== void 0 && this.noteHelper.hasPendingDependencies(fm.fm.needs)) {
          page.cause = "dependencies";
        } else {
          const fmAt = fm.at;
          const currentAt = new Date();
          const fmAfter = fm.after;
          if (fm.fm.at !== void 0) {
            fmAt.setHours(0);
            fmAt.setMinutes(0);
            fmAt.setSeconds(0);
            fmAt.setMilliseconds(0);
            currentAt.setHours(0);
            currentAt.setMinutes(0);
            currentAt.setSeconds(0);
            currentAt.setMilliseconds(0);
          }
          if (fm.after !== void 0) {
            fmAfter.setHours(0);
            fmAfter.setMinutes(0);
            fmAfter.setSeconds(0);
            fmAfter.setMilliseconds(0);
          }
          console.log(`current: ${currentAt.getTime()}`);
          console.log(`at: ${fm.at.getTime()}`);
          console.log(`after: ${fm.after.getTime()}`);
          if (fm.fm.at !== void 0 && fmAt.getTime() > currentAt.getTime()) {
            page.cause = "at";
          } else if (fm.fm.after !== void 0 && fmAfter.getTime() < currentAt.getTime()) {
            page.cause = "after";
          } else {
            page.cause = "unknown";
          }
        }
        bins.waitingFor.push(page);
      }
    }
    if (bins.nextAction.length > 0) {
      rs.push(["header", 2, `Next Actions (${bins.nextAction.length})`]);
      bins.nextAction.sort(Helper.sortByPriorityAndDurationAndAge);
      rs.push([
        "array",
        Renderer.basicTaskJournalNextAction,
        bins.nextAction
      ]);
    }
    if (bins.waitingFor.length > 0) {
      rs.push(["header", 2, `Waiting (${bins.waitingFor.length})`]);
      bins.waitingFor.sort(Helper.sortByPriorityAndDurationAndAge);
      rs.push([
        "array",
        Renderer.basicTaskJournalWaiting,
        bins.waitingFor
      ]);
    }
    if (bins.somedayMaybe.length > 0) {
      rs.push(["header", 2, `Maybe (${bins.somedayMaybe.length})`]);
      bins.somedayMaybe.sort(Helper.sortByPriorityAndDurationAndAge);
      rs.push(["array", Renderer.basicTaskJournal, bins.somedayMaybe]);
    }
    return rs;
  }
  projectLogsSheetRelation(dv) {
    const project = this.projectTasksSheetRelationFrontmatter(dv);
    const filterBy = [];
    const rs = [];
    rs.push(["header", 2, "Logs"]);
    const logs = this.dv.pages(`"${Paths.Logs}"`).where((page) => {
      if (page.type !== Types.Log) {
        return false;
      }
      if (page.file.frontmatter.reviewed > 0) {
        return false;
      }
      return true;
    });
    const buff = {};
    for (const e of logs) {
      const fm = e.file.frontmatter;
      if (filterBy.length > 0 && !this.nameInNamespace(fm, filterBy)) {
        continue;
      }
      fm.createdAt = this.frontmatter.getCreatedAt(e.file);
      Assert.True(
        !Helper.nilCheck(fm.parent_id),
        `Missing field "parent_id" from log: "${fm.uuid}"`
      );
      const parent = this.dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
      if (parent.length !== 1) {
        continue;
      }
      Assert.True(
        parent.length === 1,
        `Parent: ${fm.parent_id} not found for log: "${fm.uuid}"`
      );
      fm.project = Helper.getProject(parent[0].file.frontmatter);
      fm.area = Helper.getArea(parent[0].file.frontmatter, true);
      if (fm.project !== `project/${project.name === "adhoc" ? "none" : project.name}`) {
        continue;
      }
      if (Helper.nilCheck(fm.done_at)) {
        continue;
      }
      const date = fm.done_at.slice(0, 10);
      if (buff[date] === void 0) {
        buff[date] = [e];
      } else {
        buff[date].push(e);
      }
    }
    const keys = Object.keys(buff);
    keys.sort();
    for (const date of keys) {
      buff[date].sort(
        (a, b) => b.file.frontmatter.createdAt.getTime() - a.file.frontmatter.createdAt.getTime()
      );
    }
    for (const date of keys.reverse()) {
      rs.push(["header", 3, date]);
      rs.push(["array", Renderer.projectLogs, buff[date]]);
    }
    return rs;
  }
  getProjectLogs(dv, project) {
    const logs = this.dv.pages(`"${Paths.Logs}"`).where((page) => {
      if (page.type !== Types.Log) {
        return false;
      }
      return true;
    });
    const buff = [];
    for (const e of logs) {
      const fm = e.file.frontmatter;
      Assert.True(
        !Helper.nilCheck(fm.parent_id),
        `Missing field "parent_id" from log: "${fm.uuid}"`
      );
      const parent = this.dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
      if (parent.length !== 1) {
        continue;
      }
      fm.project = Helper.getProject(parent[0].file.frontmatter);
      fm.area = Helper.getArea(parent[0].file.frontmatter, true);
      if (fm.project !== `project/${project.name === "adhoc" ? "none" : project.name}`) {
        continue;
      }
      if (Helper.nilCheck(fm.done_at)) {
        continue;
      }
      buff.push(e);
    }
    return buff;
  }
  projectLogsSheet(dv) {
    const project = this.frontmatter.projectParseMeta(dv);
    const fml = this.frontmatter.getCurrentFrontmatter();
    if (fml === void 0) {
      throw new Error(`Invalid frontmatter, cannot proceed`);
    }
    const before = Helper.nilCheck(fml.before) ? new Date(0) : new Date(fml.before);
    const after = Helper.nilCheck(fml.after) ? new Date() : new Date(fml.after);
    const filterBy = this.frontmatter.parseListFilterBy(fml);
    const rs = [];
    let totalTime = 0;
    rs.push(["header", 1, project.name]);
    const logs = this.dv.pages(`"${Paths.Logs}"`).where((page) => {
      if (page.type !== Types.Log) {
        return false;
      }
      return true;
    });
    const buff = {};
    for (const e of logs) {
      const fm = e.file.frontmatter;
      if (filterBy.length > 0 && !this.nameInNamespace(fm, filterBy)) {
        continue;
      }
      fm.createdAt = this.frontmatter.getCreatedAt(e.file);
      Assert.True(
        !Helper.nilCheck(fm.parent_id),
        `Missing field "parent_id" from log: "${fm.uuid}"`
      );
      const parent = this.dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
      if (parent.length !== 1) {
        continue;
      }
      fm.project = Helper.getProject(parent[0].file.frontmatter);
      fm.area = Helper.getArea(parent[0].file.frontmatter, true);
      if (fm.project !== `project/${project.name === "adhoc" ? "none" : project.name}`) {
        continue;
      }
      if (Helper.nilCheck(fm.done_at)) {
        continue;
      }
      const date = fm.done_at.slice(0, 10);
      const createdAt = new Date(fm.created_at);
      const doneAt = new Date(fm.done_at);
      if (createdAt > before) {
        continue;
      }
      if (createdAt < after) {
        continue;
      }
      if (buff[date] === void 0) {
        buff[date] = [e];
      } else {
        buff[date].push(e);
      }
      const delta = doneAt.getTime() - createdAt.getTime();
      totalTime += delta;
    }
    dv.paragraph(
      `_totalTime (h):_ ${Math.round(totalTime / (1e3 * 60 * 60) * 10) / 10}`
    );
    const keys = Object.keys(buff);
    keys.sort();
    for (const date of keys) {
      buff[date].sort(
        (a, b) => b.file.frontmatter.createdAt.getTime() - a.file.frontmatter.createdAt.getTime()
      );
    }
    for (const date of keys.reverse()) {
      rs.push(["header", 3, date]);
      rs.push(["array", Renderer.projectLogs, buff[date]]);
    }
    return rs;
  }
  logs() {
    const [groupBy, filterBy, before, after] = this.frontmatter.parseAllProgressedTasks();
    const tasks = this.dv.pages(`"${Paths.Tasks}"`).where((page) => page.file.frontmatter.status !== "doing");
    const buff = [];
    for (const task of tasks) {
      const fm = task.file.frontmatter;
      if (filterBy.length > 0 && !this.nameInNamespace(fm, filterBy)) {
        continue;
      }
      const timeEstimate = Helper.durationStringToSec(fm.time_estimate);
      if (timeEstimate === void 0 && fm.time_estimate !== void 0) {
        throw new Error(
          `Invalid value: "${fm.time_estimate}" for entry: "${fm.uuid}"`
        );
      } else {
        fm.timeEstimate = timeEstimate;
      }
      const logs = this.dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((page) => page.type === Types.Log).sort((k) => k.created_at, "asc");
      if (logs.length < 1) {
        continue;
      }
      fm.took = 0;
      const project = Helper.getField(Helper.getProject(fm, true), "");
      const area = Helper.getField(Helper.getArea(fm, true), "");
      for (const log of logs) {
        const fml = log.file.frontmatter;
        const entry = {
          alias: fm.alias,
          uuid: fm.uuid,
          logId: fml.uuid,
          estimate: fm.timeEstimate,
          project,
          area,
          domain: Helper.getField(Helper.getDomain(fm, true), ""),
          path: task.file.path,
          logPath: log.file.path,
          createdAt: void 0,
          doneAt: void 0,
          took: void 0,
          tookAcc: void 0,
          deltaAcc: void 0
        };
        if (fml.created_at === void 0) {
          console.error(log);
          throw new Error(
            `task: ${fm.uuid} last entry is missing 'created_at' field`
          );
        }
        if (fml.done_at === void 0) {
          console.error(log);
          throw new Error(
            `task: ${fm.uuid} last entry is missing 'done_at' field`
          );
        }
        entry.createdAt = new Date(fml.created_at);
        entry.doneAt = new Date(fml.done_at);
        if (!this.filterByDate(entry.doneAt, before, after)) {
          continue;
        }
        const took = (entry.doneAt.getTime() - entry.createdAt.getTime()) / 1e3;
        fm.took += took;
        entry.took = took;
        entry.tookAcc = fm.took;
        entry.deltaAcc = timeEstimate - fm.took;
        buff.push(entry);
      }
    }
    const keyGetter = Helper.getKey(groupBy);
    const bins = {};
    for (const entry of buff) {
      let d = void 0;
      try {
        d = keyGetter(entry);
      } catch (e) {
        throw new Error(entry);
      }
      if (bins[d] === void 0) {
        bins[d] = [entry];
      } else {
        bins[d].push(entry);
      }
    }
    const keys = Object.keys(bins);
    keys.sort();
    const rs = [];
    for (const key of keys.reverse()) {
      rs.push(["header", 2, key]);
      const arr = [];
      let totalTime = 0;
      for (const e of bins[key]) {
        const buff2 = [];
        buff2.push(
          Renderer.makeLinkShortUUID(
            this.dv,
            { path: e.path, frontmatter: { uuid: e.uuid } },
            "Task"
          )
        );
        buff2.push(
          Renderer.makeLinkShortUUID(
            this.dv,
            { path: e.logPath, frontmatter: { uuid: e.logId } },
            "Content"
          )
        );
        const convertSecondsToHours = (t) => {
          return Math.round(t / 3600 * 10) / 10;
        };
        buff2.push(`${convertSecondsToHours(e.took)}`);
        buff2.push(`${e.project}`);
        arr.push(buff2);
        totalTime += e.took;
      }
      totalTime = Math.round(totalTime / 3600 * 10) / 10;
      rs.push(["stats", "totalTime", "h", totalTime]);
      rs.push(["array", Renderer.basicProgressedTaskWithLog, arr]);
    }
    return rs;
  }
  inbox(dv) {
    const rs = [];
    const buff = [];
    const filterBy = [];
    const minSize = 0;
    const maxSize = 4294967295;
    const fleetings = this.dv.pages(`"${Paths.Inbox}"`).array();
    for (const e of fleetings) {
      const fm = e.file.frontmatter;
      e.file.frontmatter.createdAt = this.frontmatter.getCreatedAt(
        e.file
      );
      let fmjs = null;
      try {
        fmjs = new FrontmatterJS(e);
      } catch (ValidationError2) {
        console.log(e);
        dv.paragraph(Renderer.makeLink(dv, e.file));
        break;
      }
      fm.project = Helper.getProject(fm, true);
      fm.domain = `domain/${fmjs.getDomain()}`;
      fm.components = Helper.getComponents(fm);
      if (e.file.size < minSize) {
        continue;
      }
      if (e.file.size > maxSize) {
        continue;
      }
      buff.push(e);
    }
    const logs = [];
    for (const e of logs) {
      const fm = e.file.frontmatter;
      fm.createdAt = this.frontmatter.getCreatedAt(e.file);
      Assert.True(
        !Helper.nilCheck(fm.parent_id),
        `Missing field "parent_id" from log: "${fm.uuid}"`
      );
      const parent = this.dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
      Assert.True(
        parent.length === 1,
        `Parent: ${fm.parent_id} not found for log: "${fm.uuid}"`
      );
      fm.project = Helper.getProject(parent[0].file.frontmatter, true);
      fm.domain = void 0;
      fm.components = [];
      if (e.file.size < minSize) {
        continue;
      }
      if (e.file.size > maxSize) {
        continue;
      }
      buff.push(e);
    }
    const sortBySizeThenDate = function(a, b) {
      const fA = a.file;
      const fB = b.file;
      if (fA.size !== fB.size) {
        return fB.size - fA.size;
      } else {
        return fA.frontmatter.createdAt.getTime() - fB.frontmatter.createdAt.getTime();
      }
    };
    const sortByAge = (a, b) => a.file.frontmatter.createdAt.getTime() - b.file.frontmatter.createdAt.getTime();
    buff.sort(sortByAge);
    rs.push(["array", Renderer.inboxEntry, buff]);
    return rs;
  }
  projects() {
    const rs = [];
    const bins = {
      active: [],
      inactive: []
    };
    const pages = this.dv.pages(`"Projects"`).sort((k) => k.name, "asc");
    for (const project of pages) {
      const fmProject = new FrontmatterJS(project);
      if (fmProject.fm.active === false) {
        bins.inactive.push(project);
        continue;
      } else if (fmProject.getName() === "adhoc") {
        bins.active.push(project);
        continue;
      } else if (["yearly", "monthly", "weekly", "daily"].contains(
        fmProject.getName()
      )) {
        continue;
      }
      const tasks = this.dv.pages(`#project/${fmProject.getName()}`).where((page) => {
        if (page.file.folder !== `${Paths.Tasks}`) {
          return false;
        }
        const fmTask = new FrontmatterJS(page);
        if (fmTask.fm.priority === 0) {
          return false;
        }
        if (["todo", "doing", "waiting"].contains(fmTask.fm.status)) {
          return true;
        }
        return false;
      });
      if (tasks.length > 0) {
        bins.active.push(project);
      } else {
        bins.inactive.push(project);
      }
    }
    rs.push(["header", 2, "Active"]);
    rs.push(["array", Renderer.projects, bins.active]);
    rs.push(["header", 2, "Inactive"]);
    rs.push(["array", Renderer.projects, bins.inactive]);
    return rs;
  }
  praxis() {
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      if (page.file.frontmatter.type !== Types.Praxis) {
        return false;
      }
      if (page.file.frontmatter.status !== Status.Todo) {
        return false;
      }
      return true;
    }).array();
    const rs = [];
    rs.push(["header", 1, "Praxis"]);
    rs.push(["array", Renderer.basicTask, pages]);
    return rs;
  }
  planning(lastWeek = 2) {
    const rs = [];
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (fm.at === void 0) {
        return false;
      }
      if (fm.getProject() !== "daily") {
        return false;
      }
      return true;
    }).sort((page) => page.file.frontmatter.at, "desc");
    const bins = {};
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      let at = void 0;
      try {
        at = fm.at.toISOString().slice(0, 10);
      } catch (e) {
        throw new Error(`Invalid date: '${fm.fm.uuid}'`);
      }
      const weekNumber = this.getWeekNumber(fm.at);
      if (bins[weekNumber] === void 0) {
        bins[weekNumber] = [fm];
      } else {
        bins[weekNumber].push(fm);
      }
    }
    const now = new Date();
    const currentWeekNumber = this.getWeekNumber(now);
    for (const key of Object.keys(bins)) {
      const weekNumber = Number(key);
      if (weekNumber + lastWeek < currentWeekNumber) {
        continue;
      }
      if (weekNumber < currentWeekNumber) {
        rs.push(["header", 2, `~~week ${key}~~`]);
      } else if (weekNumber === currentWeekNumber) {
        rs.push(["header", 2, `*week ${key}*`]);
      } else {
        rs.push(["header", 2, `week ${key}`]);
      }
      bins[key].sort((a, b) => {
        return a.at.getTime() - b.at.getTime();
      });
      for (const task of bins[key]) {
        const day = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][task.at.getDay()];
        const text = Renderer.makeLink(
          this.dv,
          task.f,
          `${task.at.toISOString().slice(0, 10)}, ${day}`,
          "Task"
        );
        if (weekNumber < currentWeekNumber) {
          rs.push(["paragraph", `~~${text}~~`]);
        } else if (weekNumber === currentWeekNumber) {
          if (this.dayOfYear(task.at) < this.dayOfYear(now)) {
            rs.push(["paragraph", `~~${text}~~`]);
          } else {
            rs.push(["paragraph", `${text}`]);
          }
        } else {
          rs.push(["paragraph", `${text}`]);
        }
      }
    }
    return rs;
  }
  dayOfYear(dt) {
    const year = dt.getFullYear();
    const month = dt.getMonth() + 1;
    const day = dt.getDate();
    const N1 = Math.floor(275 * month / 9);
    const N2 = Math.floor((month + 9) / 12);
    const N3 = 1 + Math.floor((year - 4 * Math.floor(year / 4) + 2) / 3);
    return N1 - N2 * N3 + day - 30;
  }
  getWeekNumber(d) {
    d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
    d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));
    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
    return Math.ceil(((d - yearStart) / 864e5 + 1) / 7);
  }
  getWeekNumber4(d) {
    d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
    const firstSunday = yearStart.getUTCDay() === 0 ? yearStart : new Date(
      Date.UTC(
        d.getUTCFullYear(),
        0,
        1 + (7 - yearStart.getUTCDay())
      )
    );
    const daysSinceFirstSunday = (d - firstSunday + 864e5) / 864e5;
    return Math.ceil(daysSinceFirstSunday / 7);
  }
  getMonth(year, weekNumber) {
    const firstDayOfYear = new Date(year, 0, 1);
    const firstDayOfWeek = firstDayOfYear.getDay();
    const daysToAdd = (weekNumber - 1) * 7 - firstDayOfWeek + (firstDayOfWeek === 0 ? 1 : 0);
    const weekStartDate = new Date(
      firstDayOfYear.setDate(firstDayOfYear.getDate() + daysToAdd)
    );
    if (weekStartDate.getDate() > 24) {
      weekStartDate.setDate(weekStartDate.getDate() + 7);
    }
    const monthNumber = weekStartDate.getMonth();
    return monthNumber + 1;
  }
  getMonthName(monthNumber) {
    const date = new Date(2e3, monthNumber - 1);
    return date.toLocaleString("default", { month: "long" });
  }
  energy(dv) {
    const current = dv.current();
    if (current.energy === void 0) {
      current.energy = 0;
    }
    let comp = void 0;
    switch (current.op) {
      case ">":
        comp = (a, b) => a > b;
        break;
      case ">=":
        comp = (a, b) => a >= b;
        break;
      case "<":
        comp = (a, b) => a < b;
        break;
      case "<=":
        comp = (a, b) => a <= b;
        break;
      default:
        comp = (a, b) => a === b;
        break;
    }
    const rs = [];
    const pages = dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (fm.getProject() === "daily") {
        return false;
      }
      if (fm.fm.status !== "todo") {
        return false;
      }
      return comp(fm.energy, current.energy);
    });
    rs.push([
      "array",
      (dv2, data) => {
        for (const entry of data) {
          console.log(entry);
          dv2.paragraph(
            Renderer.makeLinkAlias(dv2, entry.file, "## Task")
          );
        }
      },
      pages
    ]);
    return rs;
  }
  mandala(dv) {
    let mandalaLo = -1;
    let mandalaHi = -1;
    const now = new Date();
    {
      const weekNumber = this.getWeekNumber4(now);
      mandalaLo = weekNumber - 6;
      mandalaHi = weekNumber - 5;
      if (mandalaLo < 0 || mandalaHi < 0) {
        dv.paragraph(`weekNumber: ${weekNumber}`);
        dv.paragraph(`mandalaLo: ${mandalaLo}`);
        dv.paragraph(`mandalaHi: ${mandalaHi}`);
        return;
      }
      dv.paragraph(`weekNumber: ${weekNumber}`);
      dv.paragraph(`mandalaLo: ${mandalaLo}`);
      dv.paragraph(`mandalaHi: ${mandalaHi}`);
    }
    const rs = [];
    const bins = {};
    const suiviWeekly = {};
    const suiviMonthly = {};
    const suiviYearly = {};
    const pages = this.dv.pages(`"Journal"`).where((page) => {
      const fm = new FrontmatterJS(page);
      const weekNumber = this.getWeekNumber4(fm.createdAt);
      console.log(weekNumber);
      if (weekNumber >= mandalaLo && weekNumber <= mandalaHi && fm.createdAt.getFullYear() === now.getFullYear()) {
        return true;
      }
      return false;
    }).sort((page) => page.file.frontmatter.created_at, "desc");
    console.log(pages.length);
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      const weekNumber = this.getWeekNumber4(fm.createdAt);
      const year = fm.createdAt.getFullYear();
      const month = fm.createdAt.getMonth() + 1;
      let msg = "";
      msg += `createdAt: ${fm.createdAt.toISOString().slice(0, 10)}
`;
      msg += `weekNumber: ${weekNumber}
`;
      msg += `year: ${year}
`;
      msg += `month: ${month}
`;
      msg += `day: ${fm.createdAt.getDay()}
`;
      const day = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][fm.createdAt.getDay()];
      msg += `day: ${day}
`;
      console.log(msg);
      if (bins[year] === void 0) {
        bins[year] = {};
      }
      if (bins[year][weekNumber.toString()] === void 0) {
        bins[year][weekNumber.toString()] = {};
      }
      if (suiviMonthly[year] === void 0) {
        suiviMonthly[year] = {};
      }
      if (suiviWeekly[year] === void 0) {
        suiviWeekly[year] = {};
      }
      let tag = "";
      if (fm.getDomain() !== void 0) {
        tag = fm.getDomain();
      } else if (fm.getProject() !== void 0) {
        tag = fm.getProject();
      } else {
        tag = "adhoc";
      }
      if (tag == "weekly") {
        if (suiviWeekly[year][weekNumber] === void 0) {
          suiviWeekly[year][weekNumber] = [page];
        } else {
          suiviWeekly[year][weekNumber].push(page);
        }
        continue;
      } else if (tag === "monthly") {
        if (suiviMonthly[year][month] === void 0) {
          suiviMonthly[year][month] = [page];
        } else {
          suiviMonthly[year][month].push(page);
        }
        continue;
      } else if (tag === "yearly") {
        if (suiviYearly[year] === void 0) {
          suiviYearly[year] = [page];
        } else {
          suiviYearly[year].push(page);
        }
        continue;
      }
      if (bins[year][weekNumber][tag] === void 0) {
        bins[year][weekNumber][tag] = [page];
      } else {
        bins[year][weekNumber][tag].push(page);
      }
    }
    {
      const years = Object.keys(bins);
      let lastYear = 9999;
      let lastMonth = 13;
      years.sort().reverse();
      for (const year of years) {
        rs.push(["header", 2, year]);
        if (parseInt(year, 10) < lastYear) {
          lastMonth = 13;
          lastYear = parseInt(year, 10);
          if (suiviYearly[year] !== void 0) {
            for (const page of suiviYearly[year]) {
              const fm = new FrontmatterJS(page);
              rs.push([
                "paragraph",
                Renderer.makeLinkAlias(this.dv, fm.f)
              ]);
            }
          }
        }
        for (let week = 52; week > 0; week--) {
          const thisMonth = this.getMonth(year, week);
          if (suiviMonthly[year][thisMonth] !== void 0) {
            if (lastMonth !== thisMonth) {
              lastMonth = thisMonth;
              rs.push([
                "header",
                3,
                this.getMonthName(lastMonth)
              ]);
              if (suiviMonthly[year][thisMonth] !== void 0) {
                for (const page of suiviMonthly[year][thisMonth]) {
                  const fm = new FrontmatterJS(page);
                  rs.push([
                    "paragraph",
                    Renderer.makeLinkAlias(this.dv, fm.f)
                  ]);
                }
              }
            }
          }
          if (suiviWeekly[year][week] === void 0 && bins[year][week] === void 0) {
            continue;
          }
          rs.push(["header", 4, `week ${week.toString()}`]);
          if (suiviWeekly[year][week] !== void 0) {
            for (const page of suiviWeekly[year][week]) {
              const fm = new FrontmatterJS(page);
              rs.push([
                "paragraph",
                Renderer.makeLinkAlias(this.dv, fm.f)
              ]);
            }
          }
          if (bins[year][week] === void 0) {
            continue;
          }
          const tags = Object.keys(bins[year][week]);
          tags.sort();
          for (const tag of tags) {
            rs.push(["header", 5, tag]);
            bins[year][week][tag].sort((a, b) => {
              const fmA = new FrontmatterJS(a);
              const fmB = new FrontmatterJS(b);
              return fmB.createdAt.getTime() - fmA.createdAt.getTime();
            });
            for (const page of bins[year][week][tag]) {
              const fm = new FrontmatterJS(page);
              if (fm.type === 6) {
              } else {
                const d = fm.createdAt.toISOString().slice(0, 10);
                const day = [
                  "Sun",
                  "Mon",
                  "Tue",
                  "Wed",
                  "Thu",
                  "Fri",
                  "Sat"
                ][fm.createdAt.getDay()];
                const text = `${d}, ${day}`;
                rs.push([
                  "paragraph",
                  Renderer.makeLink(this.dv, fm.f, text)
                ]);
              }
            }
          }
        }
      }
    }
    return rs;
  }
  journal() {
    const rs = [];
    const bins = {};
    const suiviWeekly = {};
    const suiviMonthly = {};
    const suiviYearly = {};
    const pages = this.dv.pages(`"Journal"`).sort((page) => page.file.frontmatter.created_at, "desc");
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      const weekNumber = this.getWeekNumber4(fm.createdAt);
      const year = fm.createdAt.getFullYear();
      const month = fm.createdAt.getMonth() + 1;
      let msg = "";
      msg += `createdAt: ${fm.createdAt.toISOString().slice(0, 10)}
`;
      msg += `weekNumber: ${weekNumber}
`;
      msg += `year: ${year}
`;
      msg += `month: ${month}
`;
      msg += `day: ${fm.createdAt.getDay()}
`;
      const day = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][fm.createdAt.getDay()];
      msg += `day: ${day}
`;
      if (bins[year] === void 0) {
        bins[year] = {};
      }
      if (bins[year][weekNumber.toString()] === void 0) {
        bins[year][weekNumber.toString()] = {};
      }
      if (suiviMonthly[year] === void 0) {
        suiviMonthly[year] = {};
      }
      if (suiviWeekly[year] === void 0) {
        suiviWeekly[year] = {};
      }
      let tag = "";
      if (fm.getDomain() !== void 0) {
        tag = fm.getDomain();
      } else if (fm.getProject() !== void 0) {
        tag = fm.getProject();
      } else {
        tag = "adhoc";
      }
      if (tag == "weekly") {
        if (suiviWeekly[year][weekNumber] === void 0) {
          suiviWeekly[year][weekNumber] = [page];
        } else {
          suiviWeekly[year][weekNumber].push(page);
        }
        continue;
      } else if (tag === "monthly") {
        if (suiviMonthly[year][month] === void 0) {
          suiviMonthly[year][month] = [page];
        } else {
          suiviMonthly[year][month].push(page);
        }
        continue;
      } else if (tag === "yearly") {
        if (suiviYearly[year] === void 0) {
          suiviYearly[year] = [page];
        } else {
          suiviYearly[year].push(page);
        }
        continue;
      }
      if (bins[year][weekNumber][tag] === void 0) {
        bins[year][weekNumber][tag] = [page];
      } else {
        bins[year][weekNumber][tag].push(page);
      }
    }
    {
      const years = Object.keys(bins);
      let lastYear = 9999;
      let lastMonth = 13;
      years.sort().reverse();
      for (const year of years) {
        rs.push(["header", 2, year]);
        if (parseInt(year, 10) < lastYear) {
          lastMonth = 13;
          lastYear = parseInt(year, 10);
          if (suiviYearly[year] !== void 0) {
            for (const page of suiviYearly[year]) {
              const fm = new FrontmatterJS(page);
              rs.push([
                "paragraph",
                Renderer.makeLinkAlias(this.dv, fm.f)
              ]);
            }
          }
        }
        for (let week = 52; week > 0; week--) {
          const thisMonth = this.getMonth(year, week);
          if (suiviMonthly[year][thisMonth] !== void 0) {
            if (lastMonth !== thisMonth) {
              lastMonth = thisMonth;
              rs.push([
                "header",
                3,
                this.getMonthName(lastMonth)
              ]);
              if (suiviMonthly[year][thisMonth] !== void 0) {
                for (const page of suiviMonthly[year][thisMonth]) {
                  const fm = new FrontmatterJS(page);
                  rs.push([
                    "paragraph",
                    Renderer.makeLinkAlias(this.dv, fm.f)
                  ]);
                }
              }
            }
          }
          if (suiviWeekly[year][week] === void 0 && bins[year][week] === void 0) {
            continue;
          }
          rs.push(["header", 4, `week ${week.toString()}`]);
          if (suiviWeekly[year][week] !== void 0) {
            for (const page of suiviWeekly[year][week]) {
              const fm = new FrontmatterJS(page);
              rs.push([
                "paragraph",
                Renderer.makeLinkAlias(this.dv, fm.f)
              ]);
            }
          }
          if (bins[year][week] === void 0) {
            continue;
          }
          const tags = Object.keys(bins[year][week]);
          tags.sort();
          for (const tag of tags) {
            rs.push(["header", 5, tag]);
            bins[year][week][tag].sort((a, b) => {
              const fmA = new FrontmatterJS(a);
              const fmB = new FrontmatterJS(b);
              return fmB.createdAt.getTime() - fmA.createdAt.getTime();
            });
            for (const page of bins[year][week][tag]) {
              const fm = new FrontmatterJS(page);
              if (fm.type === 6) {
              } else {
                const d = fm.createdAt.toISOString().slice(0, 10);
                const day = [
                  "Sun",
                  "Mon",
                  "Tue",
                  "Wed",
                  "Thu",
                  "Fri",
                  "Sat"
                ][fm.createdAt.getDay()];
                const text = `${d}, ${day}`;
                rs.push([
                  "paragraph",
                  Renderer.makeLink(this.dv, fm.f, text)
                ]);
              }
            }
          }
        }
      }
    }
    return rs;
  }
  calendar() {
    const rs = [];
    const bins = {};
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (fm.fm.at === void 0 && fm.fm.before === void 0 && fm.fm.after === void 0) {
        return false;
      }
      if (fm.fm.status !== "todo") {
        return false;
      }
      if (fm.getProject() === "daily") {
        return false;
      }
      return true;
    });
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      let year = 0;
      let month = 0;
      let day = 0;
      if (fm.fm.before !== void 0) {
        year = fm.before.getFullYear();
        month = fm.before.getMonth();
        day = fm.before.getUTCDate();
      } else if (fm.fm.at !== void 0) {
        year = fm.at.getFullYear();
        month = fm.at.getMonth();
        day = fm.at.getUTCDate();
      } else if (fm.after !== void 0) {
        year = fm.after.getFullYear();
        month = fm.after.getMonth();
        day = fm.after.getUTCDate();
      } else {
        throw new Error();
      }
      if (bins[year] === void 0) {
        bins[year] = {};
      }
      if (bins[year][month] === void 0) {
        bins[year][month] = {};
      }
      if (bins[year][month][day] === void 0) {
        bins[year][month][day] = {};
      }
      if (bins[year][month][day]["at"] === void 0) {
        bins[year][month][day]["at"] = [];
      }
      if (bins[year][month][day]["before"] === void 0) {
        bins[year][month][day]["before"] = [];
      }
      if (bins[year][month][day]["after"] === void 0) {
        bins[year][month][day]["after"] = [];
      }
      if (fm.fm.before !== void 0) {
        bins[year][month][day]["before"].push(page);
      } else if (fm.fm.at !== void 0) {
        bins[year][month][day]["at"].push(page);
      } else {
        bins[year][month][day]["after"].push(page);
      }
    }
    {
      const years = Object.keys(bins);
      years.sort((a, b) => parseInt(a) - parseInt(b));
      for (const year of years) {
        rs.push(["header", 2, year]);
        const months = Object.keys(bins[year]);
        months.sort((a, b) => parseInt(a) - parseInt(b));
        for (const month of months) {
          rs.push([
            "header",
            3,
            `${["January", "Febuary", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"][month]}`
          ]);
          const days = Object.keys(bins[year][month]);
          days.sort((a, b) => parseInt(a) - parseInt(b));
          for (const day of days) {
            const weeks = [
              "Sun",
              "Mon",
              "Tue",
              "Wed",
              "Thu",
              "Fri",
              "Sat"
            ];
            const before = bins[year][month][day]["before"];
            const at = bins[year][month][day]["at"];
            const after = bins[year][month][day]["after"];
            console.log(
              `year: ${year}
month: ${month}
day: ${day}`
            );
            if (before.length > 0) {
              for (const page of before) {
                console.log("--- before ---");
                console.log(page);
                console.log("------");
                const fm = new FrontmatterJS(page);
                const text = `before: ${weeks[fm.before.getDay()]} ${day} ${fm.at.toISOString().slice(11, 16)} | ${fm.getProject()}`;
                rs.push([
                  "paragraph",
                  Renderer.makeLink(
                    this.dv,
                    fm.f,
                    text,
                    "Task"
                  )
                ]);
              }
            }
            if (at.length > 0) {
              at.sort((a, b) => {
                const fmA = new FrontmatterJS(a);
                const fmB = new FrontmatterJS(b);
                return fmB.at.getTime() - fmA.at.getTime();
              });
              for (const page of at) {
                console.log("--- at ---");
                console.log(page);
                console.log("------");
                const fm = new FrontmatterJS(page);
                const text = `at: ${weeks[fm.at.getDay()]} ${day} ${fm.at.toISOString().slice(11, 16)} | ${fm.getProject()}`;
                rs.push([
                  "paragraph",
                  Renderer.makeLink(
                    this.dv,
                    fm.f,
                    text,
                    "Task"
                  )
                ]);
              }
            }
            if (after.length > 0) {
              for (const page of after) {
                console.log("--- after ---");
                console.log(page);
                console.log("------");
                const fm = new FrontmatterJS(page);
                const text = ` after: ${weeks[fm.after.getDay()]} ${day} ${fm.at.toISOString().slice(11, 16)} | ${fm.getProject()}`;
                rs.push([
                  "paragraph",
                  Renderer.makeLink(
                    this.dv,
                    fm.f,
                    text,
                    "Task"
                  )
                ]);
              }
            }
          }
        }
      }
    }
    return rs;
  }
  globalTaskList(pages) {
    const rs = [];
    const bins = {};
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      if (fm.getProject() === void 0) {
        fm.projects = ["adhoc"];
      }
      if (bins[fm.getProject()] === void 0) {
        bins[fm.getProject()] = [page];
      } else {
        bins[fm.getProject()].push(page);
      }
    }
    const projects = Object.keys(bins);
    projects.sort();
    for (const project of projects) {
      const tasks = bins[project];
      tasks.sort(Helper.sortByPriorityAndDurationAndAge);
      rs.push(["header", 2, `${project}`]);
      rs.push(["array", Renderer.basicTaskJournal, tasks]);
    }
    return rs;
  }
  nextActions(dv) {
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (["daily", "weekly", "monthly", "yearly"].contains(
        fm.getProject()
      )) {
        return false;
      }
      if (!this.projectIsActive(fm.getProject())) {
        return false;
      }
      if (!this.noteHelper.isDoable(page)) {
        return false;
      }
      if (fm.fm.priority === 0) {
        return false;
      }
      return true;
    });
    return this.globalTaskList(pages);
  }
  waitingFor(dv) {
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (["daily", "weekly", "monthly", "yearly"].contains(
        fm.getProject()
      )) {
        return false;
      }
      if (!["todo", "waiting"].contains(fm.fm.status)) {
        return false;
      }
      if (!this.projectIsActive(fm.getProject())) {
        return false;
      }
      if (this.noteHelper.isDoable(page) || fm.fm.priority === 0) {
        return false;
      }
      return true;
    });
    return this.globalTaskList(pages);
  }
  projectIsActive(name) {
    const project = this.dv.pages(`"Projects"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (fm.getName() !== name) {
        return false;
      }
      if (fm.fm.active === false) {
        return false;
      }
      return true;
    });
    return project.length > 0;
  }
  somedayMaybe(dv) {
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (["daily", "weekly", "monthly", "yearly"].contains(
        fm.getProject()
      )) {
        return false;
      }
      if (!this.projectIsActive(fm.getProject())) {
        return false;
      }
      if (!this.noteHelper.isDoable(page) || fm.fm.priority > 0) {
        return false;
      }
      return true;
    });
    return this.globalTaskList(pages);
  }
};
var DvLib = class {
  constructor() {
    this.taskDir = "813 Tasks";
    this.inboxDir = "800 Inbox";
    this.refDir = "802 Refs";
    this.logDir = "600 Log";
    this.Task = {
      BASE: 3,
      DAILY: 4
    };
    this.Type = {
      TASK: 3,
      DAILY: 4,
      LOG: 6
    };
    this.Status = {
      TODO: "todo",
      DONE: "done",
      DOING: "doing",
      TRASH: "trash",
      MAYBE: "maybe",
      STANDBY: "standby"
    };
    this.Namespace = {
      AREA: "area",
      CONTEXT: "context",
      LAYER: "layer",
      ORG: "org",
      PROJECT: "project"
    };
    this.Default = {
      AREA: "none",
      CONTEXT: "any",
      LAYER: "none",
      ORG: "none",
      PROJECT: "none"
    };
    this._dv = "";
  }
  set dv(mod) {
    this._dv = mod;
  }
  get dv() {
    return this._dv;
  }
  isChildTag(parent, child) {
    if (child.length <= parent.length + 1) {
      return false;
    } else if (child.slice(0, parent.length + 1) != `${parent}/`) {
      return false;
    }
    return true;
  }
  stripTag(tag) {
    let t = "";
    if (tag.slice(-1) === "/") {
      t = tag.slice(0, -1);
    } else {
      t = tag;
    }
    if (t.slice(0, 1) === "#") {
      t = t.slice(1, t.length);
    }
    return t;
  }
  getTaskFromUUID(dv, uuid) {
    const n = dv.pages(`"${this.taskDir}/${uuid}"`);
    if (n.length === 0) {
      console.warn(`"${this.taskDir}/${uuid}" task does not exists`);
      return void 0;
    }
    return n[0];
  }
  hasValidFormat(task) {
    const fm = task.file.frontmatter;
    if (fm === void 0) {
      console.warn(
        `"${this.taskDir}/${task.uuid}" task does not have a frontmatter`
      );
      return false;
    }
    if (fm.type === void 0) {
      console.warn(
        `"${this.taskDir}/${task.uuid}" task does not have a \`type\` field`
      );
      return false;
    }
    if (fm.status === void 0) {
      console.warn(
        `"${this.taskDir}/${task.uuid}" task does not have a \`status\` field`
      );
      return false;
    }
    return true;
  }
  hasPendingDependencies(dv, deps) {
    for (const dep of deps) {
      const task = this.getTaskFromUUID(dv, dep);
      if (task === void 0) {
        continue;
      }
      if (!this.hasValidFormat(task)) {
        continue;
      }
      const fm = task.file.frontmatter;
      if (fm.type !== this.Task.BASE && fm.type !== this.Task.DAILY) {
        continue;
      }
      if (fm.status === this.Status.TODO) {
        return true;
      }
    }
    return false;
  }
  isDoable(dv, task) {
    const fm = task.file.frontmatter;
    if (fm.status !== this.Status.TODO) {
      return false;
    }
    if (fm.after !== void 0) {
      const after = new Date(fm.after);
      if (Date.now() <= after.getTime()) {
        return false;
      }
    }
    const deps = fm.needs;
    if (deps === void 0 || deps.length === 0) {
      return true;
    }
    if (this.hasPendingDependencies(dv, deps)) {
      return false;
    }
    return true;
  }
  getNamespaceContent(dv, ns) {
    const children = [];
    const resp = dv.pages(`#${ns}`);
    for (const f of resp) {
      const tags = f.tags;
      if (tags === void 0) {
        continue;
      }
      for (const tag of tags) {
        if (this.isChildTag(ns, tag)) {
          const t = tag.slice(ns.length + 1);
          if (!children.includes(t)) {
            children.push(t);
          }
        }
      }
    }
    return children;
  }
  isDone(dv, dep) {
    const task = this.getTaskFromUUID(dv, dep);
    if (task === void 0) {
      return false;
    }
    if (!this.hasValidFormat(task)) {
      return false;
    }
    const fm = task.file.frontmatter;
    if (fm.status === this.Status.DONE) {
      return true;
    }
    return false;
  }
  getTasks(dv, tag, taskType = [this.Task.BASE, this.Task.DAILY], status = this.Status.TODO) {
    const buff = [];
    const tasks = dv.pages(tag);
    for (const task of tasks) {
      const fm = task.file.frontmatter;
      if (fm === void 0) {
        continue;
      }
      if (fm.status === void 0 || fm.status !== status) {
        continue;
      }
      if (fm.type === void 0 || !taskType.contains(fm.type)) {
        continue;
      }
      buff.push(task);
    }
    return buff;
  }
  formatTask(dv, task) {
    return dv.fileLink(task.file.path);
  }
  formatTaskBis(dv, task) {
    const f = task.file;
    let ctx = "";
    for (const tag of f.tags) {
      if (tag.slice(0, 9) == "#context/") {
        ctx = tag.slice(9);
      }
    }
    return [
      dv.fileLink(f.path),
      dv.markdownTaskList(f.tasks),
      f.frontmatter.time_estimate,
      ctx
    ];
  }
  formatTaskBase(dv, task) {
    const f = task.file;
    const fm = f.frontmatter;
    const tags = fm.tags;
    const area = this.getArea(tags);
    return [
      dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
      dv.markdownTaskList(f.tasks),
      fm.time_estimate,
      area
    ];
  }
  formatTaskWaiting(dv, task) {
    const f = task.file;
    const fm = f.frontmatter;
    const deps = [];
    if (fm.needs !== void 0) {
      for (const dep of fm.needs) {
        deps.push(dv.fileLink(`${this.taskDir}/${dep}`));
      }
    }
  }
  formatTaskMaybe(dv, task) {
    const f = task.file;
    const fm = f.frontmatter;
    const deps = [];
    return [dv.fileLink(f.path)];
  }
  makeAsyncRequest(dv, uuid) {
    return dv.query(`LIST WHERE needs AND contains(needs, "${uuid}")`).then((value) => {
      return value;
    });
  }
  getDependantTasks(dv, task) {
    const buff = [];
    const uuid = task.file.name;
    if (task.file.frontmatter === void 0) {
      return buff;
    }
    const tasks = dv.pages(`"${this.taskDir}"`).where((p) => p.needs !== void 0 && p.needs.contains(uuid));
    for (const tk of tasks) {
      const t = dv.pages(`"${tk.file.path}"`);
      buff.push(t[0]);
    }
    return buff;
  }
  byDependencyAndPriorityAndCreatedAt(dv, a, b) {
    const ftA = a.file.frontmatter;
    const ftB = b.file.frontmatter;
    const prioA = ftA.priority;
    const prioB = ftB.priority;
    const depsA = this.getDependantTasks(dv, a);
    const depsB = this.getDependantTasks(dv, b);
    if (depsA.length - depsB.length !== 0) {
      return depsA.length - depsB.length;
    }
    if (prioA - prioB !== 0) {
      return prioA - prioB;
    }
    const dateA = new Date(ftA.created_at);
    const dateB = new Date(ftB.created_at);
    return (dateA.getTime() - dateB.getTime()) * -1;
  }
  formatTaskPlanningWaiting(dv, task) {
    const f = task.file;
    return [
      // ajouter alias sur le link
      dv.markdownTaskList(f.tasks),
      dv.fileLink(f.path, false, f.name.slice(0, 8)),
      f.frontmatter.time_estimate,
      f.frontmatter.cause
    ];
  }
  renderBaseAsArray(dv, tasks) {
    const arr = [];
    tasks.forEach((task) => {
      arr.push(this.formatTaskBase(dv, task));
    });
    dv.table(["uuid", "tasks", "estimate", "area"], arr);
  }
  renderPlanningWaiting(dv, tasks) {
    const arr = [];
    tasks.forEach((task) => {
      arr.push(this.formatTaskPlanningWaiting(dv, task));
    });
    dv.table(["tasks", "uuid", "estimate", "cause"], arr);
  }
  renderMaybeAsArray(dv, tasks) {
    const arr = [];
    tasks.forEach(({ ref, task }) => {
      if (task !== void 0) {
        arr.push(this.formatTaskMaybe(dv, task));
      }
    });
    dv.table(["uuid"], arr);
  }
  formatTaskDaily(dv, task) {
    const f = task.file;
    const fm = task.file.frontmatter;
    const tags = task.file.tags;
    const areas = [];
    for (const tag of tags) {
      if (tag.slice(0, 6) == "#area/") {
        areas.push(tag.slice(6));
      }
    }
    const links = [];
    for (const link of f.outlinks) {
      links.push(link);
    }
    const tasks = [];
    for (const t of f.tasks) {
      tasks.push(t);
    }
    return [
      dv.fileLink(f.path),
      links.length > 0 ? dv.markdownList(links) : dv.markdownTaskList(tasks),
      fm.time_allocated,
      areas.length > 0 ? dv.markdownList(areas) : ""
    ];
  }
  formatFleeting(dv, task) {
    const f = task.file;
    const fm = task.file.frontmatter;
    const tags = task.file.tags;
    const hours = 3600;
    const days = 86400;
    let dt = new Date();
    if (fm !== void 0 && fm.created_at !== void 0) {
      dt = new Date(fm.created_at);
    } else {
      dt = new Date(f.ctime.ts);
    }
    const now = new Date();
    const delta = (now.getTime() - dt.getTime()) / 1e3;
    let since = "";
    const toDt = (t) => {
      return String(Math.round(t * 10) / 10).padStart(2, "0");
    };
    if (delta >= days) {
      since = toDt(delta / days) + "d";
    } else {
      since = toDt(delta / hours) + "h";
    }
    if (fm.alias === void 0 || fm.alias === "") {
      return [dv.fileLink(`${f.path}`), since, f.size];
    } else {
      return [dv.fileLink(`${f.path}`, false, fm.alias), since, f.size];
    }
  }
  renderDailyAsArray(dv, tasks) {
    const arr = [];
    tasks.forEach((task) => {
      arr.push(this.formatTaskDaily(dv, task));
    });
    dv.table(["uuid", "content", "duration", "area"], arr);
  }
  renderFleetingAsArray(dv, tasks) {
    const arr = [];
    tasks.forEach((task) => {
      arr.push(this.formatFleeting(dv, task));
    });
    dv.table(["content", "age", "size"], arr);
  }
  autoFieldNeed(dv, fm) {
    if (fm.needs === void 0) {
      return;
    }
    const buff = [];
    for (const dep of fm.needs) {
      if (!this.isDone(dv, dep)) {
        buff.push(dv.fileLink(`${this.taskDir}/${dep}`));
      }
    }
    if (buff.length > 0) {
      dv.header(2, "Needs");
      dv.list(buff);
    }
  }
  autoFieldNeededBy(dv, current) {
    const tasks = this.getDependantTasks(dv, current);
    if (tasks.length === 0) {
      return;
    }
    const buff = [];
    for (const task of tasks) {
      if (!this.isDone(dv, task.uuid)) {
        buff.push(dv.fileLink(task.file.path));
      }
    }
    if (buff.length > 0) {
      dv.header(2, "NeededBy");
      dv.list(buff);
    }
  }
  autoFieldTags(dv, fm) {
    const tags = fm.tags;
    if (tags == void 0 || tags.length === 0) {
      return;
    }
    tags.sort();
    dv.header(2, "Tags");
    let s = "";
    for (const tag of tags) {
      s += ` #${tag}`;
    }
    dv.paragraph(s);
  }
  autoFieldTaskBase(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      console.warn("fm is required");
      return;
    }
    const projectName = Helper.getProject(fm);
    if (projectName !== void 0) {
      const projects = dv.pages(`"Projects"`).where((fmP) => {
        if (fmP.name === projectName.slice(8)) {
          return true;
        }
        return false;
      });
      if (projects.length) {
        dv.header(2, "Project");
        dv.paragraph(Renderer.makeLinkName(dv, projects[0].file));
      }
    }
    this.autoFieldNeed(dv, fm);
    this.autoFieldNeededBy(dv, current);
    const logEntries = dv.pages(`"${this.logDir}/${fm.uuid}"`).where((p) => p.type === 6).sort((k) => k.created_at, "desc");
    const buff = [];
    let totalTime = 0;
    for (const entry of logEntries) {
      const fme = entry.file.frontmatter;
      const e = [];
      let start = 0;
      let stop = 0;
      if (fme === void 0 || fme.created_at === void 0) {
        throw new Error(`Invalid frontmatter: ${fme.uuid}`);
      }
      start = new Date(fme.created_at);
      e.push(start.toISOString().slice(0, 10));
      if (fme.done_at === void 0) {
        stop = Date.now();
      } else {
        stop = new Date(fme.done_at);
      }
      totalTime += stop - start;
      e.push(
        dv.sectionLink(
          fme.uuid,
          "## Content",
          false,
          fme.uuid.slice(0, 8)
        )
      );
      e.push(Math.round((stop - start) / (1e3 * 60 * 60) * 10) / 10);
      if (fme.reviewed === void 0 || fme.reviewed === 0) {
        e.push(0);
      } else {
        e.push(fme.reviewed);
      }
      buff.push(e);
    }
    if (buff.length > 0) {
      dv.header(2, "Logs");
      dv.table(["created_at", "uuid", "session", "reviewed"], buff);
      if (totalTime > 0) {
        dv.paragraph(
          `_totalTime (h):_ ${Math.round(totalTime / (1e3 * 60 * 60) * 10) / 10}`
        );
      }
    }
  }
  autoFieldLog(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      return;
    }
    dv.header(2, "Parent");
    dv.paragraph(dv.fileLink(`${this.taskDir}/${fm.parent_id}`));
  }
  autoFieldAuthors(dv, fm) {
    const authors = fm.authors;
    if (authors === void 0 || authors.length === 0) {
      return;
    }
    dv.header(2, "Authors");
    dv.list(authors);
  }
  autoFieldTitle(dv, fm) {
    const title = fm.alias;
    if (title == void 0) {
      return;
    }
    dv.header(1, title);
  }
  autoFieldLiteratureNote(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      return;
    }
    this.autoFieldTitle(dv, fm);
    this.autoFieldAuthors(dv, fm);
    this.autoFieldTags(dv, fm);
  }
  autoFieldPermanent(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      return;
    }
    this.autoFieldTags(dv, fm);
  }
  autoFieldTask(dv) {
    return this.autoFieldTaskBase(dv);
  }
  autoFieldLiterature(dv) {
    return this.autoFieldLiteratureNote(dv);
  }
  autoFieldFleeting(dv) {
    return;
  }
  autoFieldSupply(dv) {
    return;
  }
  findTasksByProject(dv, name) {
    const buff = [];
    if (name !== "" && name !== "none") {
      const tasks = this.getTasks(dv, `${this.Namespace.PROJECT}/none`, [
        this.Task.BASE
      ]);
      for (const task of tasks) {
        const fm = task.file.frontmatter;
        if (this.isDoable(dv, task)) {
          buff.push(task);
        }
      }
    } else {
      const tasks = this.getTasks(dv, "", [this.Task.BASE]);
      for (const task of tasks) {
        const fm = task.file.frontmatter;
        const tags = fm.tags;
        if (fm.tags === void 0 && (name === "" || name === "none") || fm.tags.contains(`${this.Namespace.PROJECT}/none`)) {
          if (this.isDoable(dv, task)) {
            buff.push(task);
          }
        }
      }
    }
    buff.sort();
    return buff;
  }
  getTag(tags, type) {
    let name = "";
    let defaultValue = "";
    if (type === "area") {
      name = this.Namespace.AREA;
      defaultValue = this.Default.AREA;
    } else if (type === "context") {
      name = this.Namespace.CONTEXT;
      defaultValue = this.Default.CONTEXT;
    } else if (type === "layer") {
      name = this.Namespace.LAYER;
      defaultValue = this.Default.LAYER;
    } else if (type === "org") {
      name = this.Namespace.ORG;
      defaultValue = this.Default.ORG;
    } else if (type === "project") {
      name = this.Namespace.PROJECT;
      defaultValue = this.Default.PROJECT;
    } else {
      throw new Error(`getTag got unsuported type: ${type}`);
    }
    const len = name.length + 1;
    const defaultTag = `${name}/${defaultValue}`;
    if (tags === void 0) {
      return defaultTag;
    }
    for (const tag of tags) {
      if (tag.length > len && tag.slice(0, len) == `${name}/`) {
        return tag;
      }
    }
    return defaultTag;
  }
  getArea(tags) {
    return this.getTag(tags, "area");
  }
  getContext(tags) {
    return this.getTag(tags, "context");
  }
  getLayer(tags) {
    return this.getTag(tags, "layer");
  }
  getOrg(tags) {
    return this.getTag(tags, "org");
  }
  getProject(tags) {
    return this.getTag(tags, "project");
  }
  parseListFrontmatter(fm) {
    let minPriority = 0;
    if (fm.min_priority !== void 0) {
      minPriority = fm.min_priority;
    }
    let ignore = [];
    if (fm.ignore !== void 0) {
      ignore = fm.ignore;
    }
    let byAreas = [];
    if (fm.by_areas !== void 0) {
      byAreas = fm.by_areas;
    }
    let byProjects = [];
    if (fm.by_projects !== void 0) {
      byProjects = fm.by_projects;
    }
    return [minPriority, ignore, byAreas, byProjects];
  }
  renderNamespaceContent(dv) {
    const self = dv.current();
    const name = self.file.name.toLowerCase().slice(0, -1);
    dv.header(1, "Index");
    dv.header(2, `${self.file.name}`);
    const tags = this.getNamespaceContent(dv, name);
    tags.sort();
    for (const tag of tags) {
      dv.paragraph(`#${name}/${tag}`);
    }
  }
  renderUnprocessedLogs(dv) {
    const logs = dv.pages(`"${this.logDir}"`).where(
      (p) => p.type === this.Type.LOG && (p.reviewd === void 0 || p.reviewed < 1)
    ).sort((k) => k.created_at, "asc");
    const buff = [];
    const arr = [];
    logs.forEach((entry) => {
      const fm = entry.file.frontmatter;
      if (fm === void 0) {
        return;
      }
      const parentId = fm.parent_id;
      if (parentId === void 0) {
        throw new Error(`Invalid log entry: ${entry.file.path}`);
      }
      const parent = dv.pages(`"${this.taskDir}/${parentId}"`);
      const parentFm = parent.file.frontmatter;
      if (parentFm === void 0) {
        throw new Error(`Invalid task: ${parent.file.path}`);
      }
      let project = this.getProject(parentFm.tags);
      if (project === `${this.Namespace.PROJECT}/${this.Default.PROJECT}`) {
        project = "";
      }
      let area = this.getArea(parentFm.tags);
      if (area === `${this.Namespace.AREA}/${this.Default.AREA}`) {
        area = "";
      }
      const formated = [];
      formated.push(
        dv.sectionLink(
          entry.file.path,
          "Content",
          false,
          `${fm.uuid.slice(0, 8)}`
        )
      );
      const createdAt = new Date(fm.created_at);
      formated.push(createdAt.toISOString().slice(0, 10));
      formated.push(project);
      formated.push(area);
      arr.push(formated);
    });
    dv.table(["uuid", "created_at", "project", "area"], arr);
  }
  assertTaskDoneAt(dv, taskId) {
    const task = dv.pages(`"${this.taskDir}/${taskId}"`);
    if (task.length === 0) {
      throw new Error(`task: ${taskId} doest not exists`);
    }
    const fm = task.file.frontmatter;
    if (fm === void 0) {
      throw new Error(`task: ${taskId} does not have a frontmatter`);
    }
    const logs = dv.pages(`"${this.logDir}/${taskId}"`).sort((k) => k.created_at, "asc");
    if (logs.length < 1) {
      throw new Error(`task: ${taskId} has no Logs`);
    }
    const lastEntry = logs[logs.length - 1];
    if (lastEntry.file.frontmatter.done_at === void 0) {
      throw new Error(
        `task: ${taskId} last entry is missing 'done_at' field`
      );
    }
    const doneAt = new Date(lastEntry.file.frontmatter.done_at);
    return [
      dv.sectionLink(
        task.file.path,
        "Content",
        false,
        `${task.file.frontmatter.uuid.slice(0, 8)}`
      ),
      `${doneAt.toISOString().slice(0, 10)}`
    ];
  }
  getDoneTimeline(dv) {
    const tasks = dv.pages(`"${this.taskDir}"`).where((p) => p.status === "done");
    const buff = [];
    for (const task of tasks) {
      const fm = task.file.frontmatter;
      if (fm === void 0) {
        throw new Error(`task: ${fm.uuid} does not have a frontmatter`);
      }
      const logs = dv.pages(`"${this.logDir}/${fm.uuid}"`).sort((k) => k.created_at, "asc");
      if (logs.length < 1) {
        console.warn(`task: ${fm.uuid} has no Logs`);
      }
      const lastEntry = logs[logs.length - 1];
      if (lastEntry === void 0) {
        continue;
      }
      if (lastEntry.file.frontmatter.done_at === void 0) {
        throw new Error(
          `task: ${fm.uuid} last entry is missing 'done_at' field`
        );
      }
      fm.doneAt = new Date(lastEntry.file.frontmatter.done_at);
      buff.push(task);
    }
    buff.sort((a, b) => {
      const dateA = new Date(a.file.frontmatter.doneAt);
      const dateB = new Date(b.file.frontmatter.doneAt);
      return (dateA.getTime() - dateB.getTime()) * -1;
    });
    const arr = [];
    buff.forEach((e) => {
      arr.push([
        dv.sectionLink(
          e.file.path,
          "Content",
          false,
          `${e.file.frontmatter.uuid.slice(0, 8)}`
        ),
        `${e.file.frontmatter.doneAt.toISOString().slice(0, 16)}`
      ]);
    });
    dv.table(["uuid", "doneAt"], arr);
  }
  durationStringToSec(val) {
    const mult = val.slice(-1);
    let m = 0;
    if (mult === "h") {
      m = 60 * 60;
    } else if (mult === "m") {
      m = 60;
    } else if (mult === "d") {
      m = 24 * 60 * 60;
    } else {
      console.warn(`Unhandled case mult: ${mult}`);
    }
    return m * parseInt(val.slice(0, -1));
  }
  testDvFunc() {
    const dv = app.plugins.plugins.dataview.api;
    const tasks = dv.pages(`"${this.taskDir}"`).where((p) => p.status === "done");
    const buff = [];
    for (const task of tasks) {
      const fm = task.file.frontmatter;
      if (fm === void 0) {
        throw new Error(`task: ${fm.uuid} does not have a frontmatter`);
      }
      const logs = dv.pages(`"${this.logDir}/${fm.uuid}"`).sort((k) => k.created_at, "asc");
      if (logs.length < 1) {
        console.warn(`task: ${fm.uuid} has no Logs`);
      }
      const lastEntry = logs[logs.length - 1];
      if (lastEntry === void 0) {
        continue;
      }
      if (lastEntry.file.frontmatter.done_at === void 0) {
        throw new Error(
          `task: ${fm.uuid} last entry is missing 'done_at' field`
        );
      }
      fm.doneAt = new Date(lastEntry.file.frontmatter.done_at);
      buff.push(task);
    }
    buff.sort((a, b) => {
      const dateA = new Date(a.file.frontmatter.doneAt);
      const dateB = new Date(b.file.frontmatter.doneAt);
      return (dateA.getTime() - dateB.getTime()) * -1;
    });
    const arr = [];
    buff.forEach((e) => {
      arr.push([
        dv.sectionLink(
          e.file.path,
          "Content",
          false,
          `${e.file.frontmatter.uuid.slice(0, 8)}`
        ),
        `${e.file.frontmatter.doneAt.toISOString().slice(0, 16)}`
      ]);
    });
  }
};

// main.ts
var DEFAULT_SETTINGS = {
  mySetting: "default"
};
var dayShort = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
var monthShort = [
  "Jan",
  "Feb",
  "Mar",
  "Apr",
  "May",
  "Jun",
  "Jul",
  "Aug",
  "Sep",
  "Oct",
  "Nov",
  "Dec"
];
var MyPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.vaultContent = [];
    this.vaultContentDict = {};
  }
  openViewInNewTabIfNotOpened(name) {
    const active = this.app.workspace.activeLeaf;
    const root = active.parent;
    let found = false;
    let node = void 0;
    const emptyTabs = [];
    for (const leaf of root.children) {
      const file2 = this.getFileFromLeaf(leaf);
      if (file2 === void 0) {
        emptyTabs.push(leaf);
        continue;
      }
      if (file2.name === name) {
        found = true;
        node = leaf;
      }
    }
    let file = void 0;
    if (!found) {
      if (emptyTabs.length > 0) {
        node = emptyTabs[0];
      } else {
        this.app.workspace.createLeafInParent(
          root,
          root.children.length + 1
        );
        node = root.children[root.children.length - 1];
      }
    }
    node.openFile(this.app.vault.getAbstractFileByPath(name), {
      active: true
    });
  }
  openInNewTabIfNotOpened(page) {
    const active = this.app.workspace.activeLeaf;
    const root = active.parent;
    let found = false;
    let node = void 0;
    const emptyTabs = [];
    for (const leaf of root.children) {
      const file = this.getFileCacheFromLeaf(leaf);
      if (file === void 0) {
        emptyTabs.push(leaf);
        continue;
      }
      if (file.frontmatter !== void 0 && file.frontmatter.uuid === page.file.frontmatter.uuid) {
        found = true;
        node = leaf;
        break;
      }
    }
    if (!found) {
      if (emptyTabs.length > 0) {
        node = emptyTabs[0];
      } else {
        this.app.workspace.createLeafInParent(
          root,
          root.children.length + 1
        );
        node = root.children[root.children.length - 1];
      }
    }
    node.openFile(this.app.vault.getAbstractFileByPath(page.file.path), {
      active: true
    });
  }
  getFileCacheFromLeaf(leaf) {
    let file = void 0;
    try {
      file = leaf.view.getSyncViewState().state.file;
    } catch (e) {
      return void 0;
    }
    const abstractPath = app.vault.getAbstractFileByPath(file);
    return app.metadataCache.getFileCache(abstractPath);
  }
  getFileFromLeaf(leaf) {
    let file = void 0;
    try {
      file = leaf.view.getSyncViewState().state.file;
    } catch (e) {
      return void 0;
    }
    return app.vault.getAbstractFileByPath(file);
  }
  extractUUIDFromLink(link) {
    Assert.True(
      link.length >= 36,
      `extractUUIDFromLink: Invalid parameter type: link: "${link}"`
    );
    Assert.True(
      Helper.isUUID(link.slice(0, 36)),
      `extractUUIDFromLink: Invalid parameter type: link: "${link}"`
    );
    if (link.length === 36) {
      return link;
    } else {
      return link.slice(0, 36);
    }
  }
  getFileFromUUID(_id) {
    return this.vaultContentDict[_id];
  }
  getFileCacheFromUUID(_id) {
    const f = this.vaultContentDict[_id];
    if (f === void 0) {
      return void 0;
    }
    return app.metadataCache.getFileCache(f);
  }
  generateJournalEntry() {
  }
  sneakyTabRenamer(app2) {
    const root = app2.workspace.activeLeaf.parent;
    for (const leaf of root.children) {
      let path = void 0;
      try {
        path = leaf.view.getSyncViewState().state.file;
      } catch (e) {
        continue;
      }
      const file = app2.vault.getAbstractFileByPath(path);
      const fm = (
        // @ts-ignore
        app2.metadataCache.getFileCache(file).frontmatter
      );
      if (fm === void 0) {
        continue;
      }
      let text = "";
      if (fm.type === 3 && Helper.getProject(fm) !== void 0) {
        if (Helper.getProject(fm) === "project/daily") {
          const at = new Date(fm.at);
          text = `(D) ${dayShort[at.getDay()]}. ${at.getDate()} ${monthShort[at.getMonth()]}`;
        } else {
          text = `(T) ${Helper.getProject(fm).slice(8)}`;
        }
      } else if (fm.type === 2) {
        if (!Helper.nilCheck(fm.alias)) {
          let buff = "";
          for (const alias of fm.alias) {
            if (buff.length === 0) {
              buff = alias;
            } else if (alias.length < buff.length) {
              buff = alias;
            }
          }
          const note = this.getFileCacheFromLeaf(leaf);
          text = `\u{1F4DC} ${buff}`;
          if (note.headings.length > 1) {
            for (const heading of note.headings) {
              if (heading.level === 3 && heading.heading === "index") {
                text = `(I) ${buff}`;
                break;
              }
            }
          }
        } else {
          const note = this.getFileCacheFromLeaf(leaf);
          if (note.headings.length < 1) {
            continue;
          }
          let found = false;
          for (const heading of note.headings) {
            if (heading.level === 3) {
              found = true;
              text = `\u{1F4DC} ${heading.heading}`;
              break;
            }
          }
          if (!found) {
            text = note.frontmatter.uuid;
          }
        }
      } else if (fm.type === 20) {
        const createdAt = new Date(fm.created_at);
        if (fm.alias !== void 0) {
          text = `(J) ${fm.alias}`;
        } else {
          text = `(J) ${dayShort[createdAt.getDay()]}. ${createdAt.getDate()} ${monthShort[createdAt.getMonth()]}`;
        }
      } else if (fm.type === 12) {
        if (fm.name !== void 0 && fm.name !== "") {
          text = `(P) ${fm.name}`;
        }
      } else if (fm.type === 13) {
        text = `(I) ${fm.uuid}`;
      } else {
        continue;
      }
      if (text !== "") {
        leaf.tabHeaderInnerTitleEl.innerText = text;
        leaf.tabHeaderInnerTitleEl.innerHTML = text;
      }
    }
  }
  async onload() {
    var _a, _b;
    console.log("gonext - onload()");
    await this.loadSettings();
    this.metadataCache = this.app.metadataCache;
    this.workspace = this.app.workspace;
    this.dv = this.app.plugins.plugins.dataview.api;
    this.frontmatter = new Frontmatter(this);
    this.listMaker = new ListMaker(this, this.dv, this.frontmatter);
    this.generate = new Generator(this.app);
    this.files = {};
    this.api = {
      getArea: Helper.getArea,
      getContext: Helper.getContext,
      getDomain: Helper.getDomain,
      getLayer: Helper.getLayer,
      getOrg: Helper.getOrg,
      getProject: Helper.getProject,
      durationStringToSec: Helper.durationStringToSec,
      paths: Paths,
      types: Types,
      status: Status,
      namespace: Namespace,
      default: Default,
      frontmatter: this.frontmatter,
      listMaker: this.listMaker,
      renderer: Renderer,
      autoField: AutoField,
      dvLib: new DvLib(),
      notify
    };
    window.gonext = {
      // @ts-ignore
      state: (_b = (_a = window.gonext) == null ? void 0 : _a.state) != null ? _b : {},
      // @ts-ignore
      app: this.app
    };
    (0, import_obsidian.addIcon)(
      "GoNextIcon",
      `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="currentColor" d="M20 12V2h2v10zm4 0V2h2v10zm4 0V2h2v10zm-12 8a3.912 3.912 0 0 1-4-4a3.912 3.912 0 0 1 4-4v-2a6 6 0 1 0 6 6h-2a3.912 3.912 0 0 1-4 4"></path><path fill="currentColor" d="M28.893 18.454L26.098 16l-1.318 1.504l2.792 2.452l-2.36 4.088l-3.427-1.16a9.032 9.032 0 0 1-2.714 1.565L18.36 28h-4.72l-.71-3.55a9.095 9.095 0 0 1-2.695-1.572l-3.447 1.166l-2.36-4.088l2.725-2.395a8.926 8.926 0 0 1-.007-3.128l-2.718-2.39l2.36-4.087l3.427 1.16A9.03 9.03 0 0 1 12.93 7.55L13.64 4H16V2h-2.36a2 2 0 0 0-1.961 1.608l-.504 2.519a10.967 10.967 0 0 0-1.327.753l-2.42-.819a1.998 1.998 0 0 0-2.372.895l-2.36 4.088a2 2 0 0 0 .411 2.502l1.931 1.697C5.021 15.495 5 15.745 5 16c0 .258.01.513.028.766l-1.92 1.688a2 2 0 0 0-.413 2.502l2.36 4.088a1.998 1.998 0 0 0 2.374.895l2.434-.824a10.974 10.974 0 0 0 1.312.759l.503 2.518A2 2 0 0 0 13.64 30h4.72a2 2 0 0 0 1.961-1.608l.504-2.519a10.967 10.967 0 0 0 1.327-.753l2.419.818a1.998 1.998 0 0 0 2.373-.894l2.36-4.088a2 2 0 0 0-.411-2.502"></path></svg>`
    );
    this.addRibbonIcon("GoNextIcon", "[g]o[n]ext", async () => {
      this.generate.fleeting();
    });
    this.app.workspace.on("active-leaf-change", () => {
      return this.sneakyTabRenamer(this.app);
    });
    this.app.workspace.on("quick-preview", () => {
      return this.sneakyTabRenamer(this.app);
    });
    this.app.workspace.on("resize", () => {
      return this.sneakyTabRenamer(this.app);
    });
    this.addCommand({
      id: "open-index",
      name: "Open Index",
      // @ts-ignore
      callback: () => {
        this.openViewInNewTabIfNotOpened("Index.md");
      }
    });
    this.addCommand({
      id: "open-inbox",
      name: "Open Inbox",
      // @ts-ignore
      callback: () => {
        this.openViewInNewTabIfNotOpened("Inbox.md");
      }
    });
    this.addCommand({
      id: "open-projects",
      name: "Open Projects",
      // @ts-ignore
      callback: () => {
        this.openViewInNewTabIfNotOpened("Projects.md");
      }
    });
    this.addCommand({
      id: "open-planning",
      name: "Open Planning",
      // @ts-ignore
      callback: () => {
        this.openViewInNewTabIfNotOpened("Planning.md");
      }
    });
    this.addCommand({
      id: "goto-active-task-logs",
      name: "Goto Active Tasks Logs'",
      // @ts-ignore
      callback: () => {
        const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
          if (page.file.frontmatter.status === "doing") {
            return true;
          }
          return false;
        });
        if (pages.length === 0) {
          return;
        }
        const tFm = new FrontmatterJS(pages[0]);
        const logs = this.dv.pages(`"${Paths.Logs}/${tFm.uuid}"`).sort((k) => k.created_at, "desc");
        if (logs.length === 0) {
          return;
        }
        this.openInNewTabIfNotOpened(logs[0]);
      }
    });
    this.addCommand({
      id: "goto-children",
      name: "Goto Child",
      // @ts-ignore
      callback: () => {
        const file = this.getFileFromLeaf(
          this.app.workspace.activeLeaf
        );
        if (file === void 0) {
          console.error("goto-children: File is undefined");
          return;
        }
        const cache = this.getFileCacheFromLeaf(
          this.app.workspace.activeLeaf
        );
        const fm = cache.frontmatter;
        if (fm === void 0) {
          console.error("goto-children: Invalid FrontMatter");
          return;
        }
        const active = this.app.workspace.activeLeaf;
        const dir = file.path.split("/")[0];
        if (dir === Paths.Tasks) {
          const page = { file: { frontmatter: fm, path: file.path } };
          const curFm = new FrontmatterJS(page);
          const curAt = curFm.at.toISOString().slice(0, 10);
          if (curFm.getProject() === "daily") {
            const pages = this.dv.pages(`"${Paths.Journal}"`).where((page2) => {
              const jFm = new FrontmatterJS(page2);
              if (jFm.getProject() !== "mission") {
                return false;
              }
              const jAt = jFm.createdAt.toISOString().slice(0, 10);
              if (curAt !== jAt) {
                return false;
              }
              return true;
            });
            if (pages.length === 0) {
              const note = this.generate.journalEntry();
              note.then((file2) => {
                active.openFile(file2, { active: true });
              });
              return;
            } else {
              const children = this.app.vault.getAbstractFileByPath(
                pages[0].file.path
              );
              Assert.True(
                !Helper.nilCheck(children),
                `goto-children: Unexpected undefined file: ${pages[0].file.path}`
              );
              active.openFile(children);
              return;
            }
          } else {
            const pages = this.dv.pages(`"${Paths.Logs}/${curFm.uuid}"`).sort((k) => k.created_at, "desc");
            if (pages.length === 0) {
              return;
            }
            const children = this.app.vault.getAbstractFileByPath(
              pages[0].file.path
            );
            Assert.True(
              !Helper.nilCheck(children),
              `goto-children: Unexpected undefined file: ${pages[0].file.path}`
            );
            active.openFile(children);
          }
        } else {
          console.error(
            "goto-children: Not Implemented outside Journal, Tasks"
          );
          return;
        }
      }
    });
    this.addCommand({
      id: "goto-parent",
      name: "Goto Parent",
      // @ts-ignore
      callback: () => {
        console.log("goto-parent:");
        const file = this.getFileFromLeaf(
          this.app.workspace.activeLeaf
        );
        if (file === void 0) {
          console.error("goto-parent: File is undefined");
          return;
        }
        const cache = this.getFileCacheFromLeaf(
          this.app.workspace.activeLeaf
        );
        const fm = cache.frontmatter;
        if (fm === void 0) {
          console.error("goto-parent: Invalid FrontMatter");
          return;
        }
        const active = this.app.workspace.activeLeaf;
        const dir = file.path.split("/")[0];
        if (dir === Paths.Slipbox) {
          const parent = this.findFirstParentInDomains(file, cache);
          if (parent !== void 0) {
            const file2 = this.getFileFromUUID(
              parent.frontmatter.uuid
            );
            active.openFile(file2);
          } else {
            active.openFile(
              this.app.vault.getAbstractFileByPath("Index.md")
            );
          }
        } else if (dir === Paths.Logs) {
          const taskId = file.path.split("/")[1];
          Assert.True(
            taskId !== void 0,
            `Invalid logDir: ${file.path}`
          );
          const task = this.app.vault.getAbstractFileByPath(
            `${Paths.Tasks}/${fm.parent_id}.md`
          );
          if (Helper.nilCheck(task)) {
            console.error(`Undefined Task: ${taskId}`);
          } else {
            active.openFile(task);
          }
        } else if (dir === Paths.Tasks) {
          const page = { file: { frontmatter: fm, path: file.path } };
          const curFm = new FrontmatterJS(page);
          const curAt = curFm.at.toISOString().slice(0, 10);
          if (curFm.getProject() === "daily") {
            const pages = this.dv.pages(`"${Paths.Journal}"`).where((page2) => {
              const jFm = new FrontmatterJS(page2);
              if (jFm.getProject() !== "mission") {
                return false;
              }
              const jAt = jFm.at.toISOString().slice(0, 10);
              if (curAt !== jAt) {
                return false;
              }
              return true;
            });
            if (pages.length === 0) {
              console.log("Must create journal entry first");
              return;
            } else {
              throw new Error("Not Implemented");
            }
          } else {
            console.error(
              "goto-parent: Not Implemented for non-daily Task"
            );
            return;
          }
        } else if (dir === Paths.Journal) {
          const page = { file: { frontmatter: fm, path: file.path } };
          const curFm = new FrontmatterJS(page);
          const curAt = curFm.createdAt.toISOString().slice(0, 10);
          if (curFm.getProject() === "mission") {
            const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page2) => {
              if (page2.file.frontmatter.at === void 0) {
                return false;
              }
              const tFm = new FrontmatterJS(page2);
              if (tFm.getProject() !== "daily") {
                return false;
              }
              const tAt = tFm.at.toISOString().slice(0, 10);
              if (curAt !== tAt) {
                return false;
              }
              return true;
            });
            Assert.True(
              pages.length === 1,
              `Non existant or non unique Task: ${pages.file.frontmatter.uuid}`
            );
            const f = this.app.vault.getAbstractFileByPath(
              pages[0].file.path
            );
            Assert.True(
              !Helper.nilCheck(f),
              `Unexpected non-existant Task: ${pages[0].file.path}`
            );
            active.openFile(f);
          } else {
            console.error(
              "goto-parent: Not Implemented for non-mission Journal Entry"
            );
            return;
          }
        } else {
          console.error(
            "goto-parent: Not Implemented outside Index, Logs"
          );
          return;
        }
      }
    });
    this.addCommand({
      id: "goto-active-task",
      name: "Goto Active Task",
      // @ts-ignore
      callback: () => {
        const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
          if (page.file.frontmatter.status === "doing") {
            return true;
          }
          return false;
        });
        console.log(`found ${pages.length} active task(s)`);
        if (pages.length === 0) {
          return;
        }
        this.openInNewTabIfNotOpened(pages[0]);
      }
    });
    this.addCommand({
      id: "open-todays-daily",
      name: "Open Today's Daily",
      // @ts-ignore
      callback: () => {
        const now = new Date();
        const nowIso = now.toISOString().slice(0, 10);
        const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
          if (page.file.frontmatter.at === void 0) {
            return false;
          }
          const fm = new FrontmatterJS(page);
          if (fm.getProject() !== "daily") {
            return false;
          }
          let fmIso = void 0;
          try {
            fmIso = fm.at.toISOString().slice(0, 10);
          } catch (e) {
            console.warn(`possible invalid data in ${fm.uuid}`);
            return false;
          }
          if (fmIso === nowIso) {
            return true;
          }
          return false;
        });
        if (pages.length === 0) {
          return;
        }
        this.openInNewTabIfNotOpened(pages[0]);
      }
    });
    this.addCommand({
      id: "gonext-generate-fleeting",
      name: "Generate fleeting note",
      // @ts-ignore
      callback: () => {
        this.generate.fleeting();
      }
    });
    this.addCommand({
      id: "safe-delete",
      name: "Safe Delete",
      // @ts-ignore
      callback: () => {
        const file = app.workspace.getActiveFile();
        const fm = app.metadataCache.getFileCache(file).frontmatter;
        if (fm === void 0) {
          return;
        }
        const rootPath = [
          `${Paths.Journal}.md`,
          `${Paths.Inbox}.md`,
          "Ad Hoc.md",
          "allDoneTasks.md",
          "allDoneTasksWithoutLog.md",
          "allMedia.md",
          "allProgressedTasks.md",
          "noteLocator.md",
          "Praxis.md"
        ];
        for (const p of rootPath) {
          if (file.path === p) {
            return;
          }
        }
        if (
          // @ts-ignore
          file.path.split(0, Paths.Resources.length) === // @ts-ignore
          Paths.Resources
        ) {
          return;
        }
        console.log(`deleted file: ${file.path}`);
        app.vault.delete(file);
      }
    });
    this.addCommand({
      id: "display-modal",
      name: "Display modal",
      callback: () => {
        new ExampleModal(this.app).open();
      }
    });
    this.addCommand({
      id: "go-parent",
      name: "Go Parent",
      // @ts-ignore
      callback: () => {
        const file = app.workspace.getActiveFile();
        const fm = app.metadataCache.getFileCache(file).frontmatter;
        if (fm === void 0) {
          return;
        }
        if (fm.parent_id === void 0 && fm.ref_id === void 0) {
          console.warn(
            `parent_id: '${fm.parent_id}' ref_id: '${fm.ref_id}'`
          );
          return;
        }
        if (fm.type === void 0 || fm.type !== Types.Log && fm.type !== Types.Media && fm.type !== Types.Fleeting) {
          console.warn(
            `invalid type: '${fm.type}' for note: '${fm.uuid}'`
          );
          return;
        }
        const parent = fm.type === Types.Log ? `${Paths.Tasks}/${fm.parent_id}.md` : `${Paths.Refs}/${fm.ref_id}.md`;
        const page = app.vault.getAbstractFileByPath(parent);
        app.workspace.openLinkText(parent, "/", false);
      }
    });
    this.app.metadataCache.on(
      "changed",
      (file, data, cache) => {
        const fm = cache.frontmatter;
        if (fm.type === 2) {
          if (this.files[fm.uuid] !== void 0) {
            const [path, note] = this.files[fm.uuid];
            fm.alias = [path.join(" / ")];
          }
        }
      }
    );
    this.app.workspace.onLayoutReady(() => {
      console.log("workspace - layout-ready");
      for (const f of this.app.vault.getFiles()) {
        if (!Helper.isUUID(f.basename)) {
          continue;
        }
        this.vaultContentDict[f.basename] = f;
      }
      this.loadIndex();
    });
  }
  getIndexDomains() {
    const indexPath = this.app.vault.getAbstractFileByPath("Index.md");
    const index = this.app.metadataCache.getFileCache(indexPath);
    const domains = [];
    let start = void 0;
    let end = void 0;
    let found = false;
    for (const heading of index.headings) {
      if (heading.level === 2 && found) {
        end = heading.position.start.offset;
        break;
      } else if (heading.level === 2 && heading.heading === "domains") {
        start = heading.position.end.offset;
        found = true;
      }
    }
    for (const link of index.links) {
      const pos = link.position;
      if (pos.start.offset < start || pos.end.offset > end) {
        continue;
      }
      const indexContent = this.getFileCacheFromUUID(link.link);
      if (indexContent === void 0) {
        continue;
      }
      if (indexContent.headings.length < 2) {
        console.error(`Invalid Index: ${link.link}`);
        continue;
      }
      domains.push(indexContent);
    }
    return domains;
  }
  getDomainComponents(domains) {
    const components = {};
    for (const domain of domains) {
      const name = domain.headings[1].heading;
      const start = domain.headings[1].position.end.offset;
      let end = 0;
      if (domain.headings[2] !== void 0) {
        end = domain.headings[2].position.start.offset;
      } else {
        end = domain.sections[domain.sections.length - 1].position.end.offset;
      }
      for (const component of domain.links) {
        if (component.position.start.offset < start || component.position.end.offset > end) {
          continue;
        }
        if (components[name] === void 0) {
          components[name] = {};
        }
        const cache = this.getFileCacheFromUUID(
          this.extractUUIDFromLink(component.link)
        );
        const componentName = component.displayText;
        if (![
          "patterns",
          "concepts",
          "guidelines",
          "procedures",
          "material"
        ].contains(componentName)) {
          continue;
        }
        if (components[name][componentName] === void 0) {
          components[name][componentName] = [];
        }
        if (cache.links === void 0 || cache.links.length === 0) {
          continue;
        }
        for (const link of cache.links) {
          components[name][componentName].push(
            this.getFileCacheFromUUID(
              this.extractUUIDFromLink(link.link)
            )
          );
        }
      }
    }
    return components;
  }
  commonDataValidation(path, note) {
    const fm = note.frontmatter;
    Assert.True(
      fm !== void 0,
      `Invalid FrontMatter in: ${path.join("/")}`
    );
    Assert.True(note.headings !== void 0, `Blank resource: ${fm.uuid}`);
  }
  getContentBoundaries(note) {
    const fm = note.frontmatter;
    let found = false;
    let start = 0;
    let end = 0;
    for (const heading of note.headings) {
      if (heading.level === 2 && heading.heading.toLowerCase() === "content") {
        found = true;
        start = heading.position.end.offset;
        continue;
      }
      if (found && heading.level === 2 && heading.heading.toLowerCase() !== "content") {
        end = heading.position.start.offset;
      }
    }
    Assert.True(found, `Resource does not declares content: ${fm.uuid}`);
    if (end === 0) {
      end = note.sections[note.sections.length - 1].position.end.offset;
    }
    return [start, end];
  }
  getResourceName(note, start, end) {
    let resourceName = "";
    let lvl3HeadingCount = 0;
    const fm = note.frontmatter;
    for (const heading of note.headings) {
      if (heading.level === 3 && heading.position.start.offset > start && heading.position.end.offset < end) {
        resourceName = heading.heading;
        lvl3HeadingCount++;
      }
    }
    Assert.False(
      lvl3HeadingCount > 1,
      `Resource has multiple names: ${fm.uuid}`
    );
    return resourceName;
  }
  parseComponentConcepts(path, note, q, results) {
    this.commonDataValidation(path, note);
    const [start, end] = this.getContentBoundaries(note);
    const resourceName = this.getResourceName(note, start, end);
    const fm = note.frontmatter;
    results.push([[...path, resourceName], note]);
    if (note.links === void 0 || note.links.length === 0) {
      return;
    }
    for (const link of note.links) {
      if (link.position.start.offset > start && link.position.end.offset < end) {
        Assert.True(
          Helper.isUUID(link.link.slice(0, 36)),
          `Invalid link in resource: ${fm.uuid}`
        );
        if (!Helper.isUUID(link.link.slice(0, 36))) {
          continue;
        }
        const f = this.getFileCacheFromUUID(
          this.extractUUIDFromLink(link.link)
        );
        if (f === void 0 || f.frontmatter === void 0 || f.frontmatter.type !== 2) {
          continue;
        }
        q.push([[...path, resourceName], f]);
      }
    }
  }
  parseComponentPatterns(path, note, q, results) {
    this.commonDataValidation(path, note);
    const [start, end] = this.getContentBoundaries(note);
    const resourceName = this.getResourceName(note, start, end);
    if (this.isSequence(note)) {
      results.push([[...path, resourceName], note]);
      return;
    }
    if (note.links === void 0 || note.links.length === 0) {
      return;
    }
    for (const link of note.links) {
      if (link.position.start.offset < start || link.position.end.offset > end) {
        continue;
      }
      if (!Helper.isUUID(link.link.slice(0, 36))) {
        continue;
      }
      const f = this.getFileCacheFromUUID(
        this.extractUUIDFromLink(link.link)
      );
      if (f === void 0 || f.frontmatter === void 0 || f.frontmatter.type !== 2) {
        continue;
      }
      q.push([[...path, resourceName], f]);
    }
  }
  parseComponentTree(components, domainName, componentName) {
    const q = [];
    const results = [];
    if (components[domainName][componentName] === void 0) {
      return;
    }
    for (const pattern of components[domainName][componentName]) {
      q.push([[domainName, componentName], pattern]);
    }
    while (q.length > 0) {
      const [path, note] = q.shift();
      Assert.True(path.length >= 2, `Invalid component path: ${path}`);
      const componentName2 = path[1];
      switch (componentName2) {
        case "patterns":
          this.parseComponentPatterns(path, note, q, results);
          break;
        case "concepts":
          this.parseComponentConcepts(path, note, q, results);
          break;
        default:
          break;
      }
    }
    return results;
  }
  loadIndex() {
    console.log("gonext - loadIndex()");
    const domains = this.getIndexDomains();
    const components = this.getDomainComponents(domains);
    const renamed = {};
    for (const domain of Object.keys(components)) {
      for (const component of Object.keys(components[domain])) {
        const results = this.parseComponentTree(
          components,
          domain,
          component
        );
        if (results === void 0) {
          continue;
        }
        const reserved = ["strength routine", "strength routine", "stretch routine", "stretch routine"];
        for (const [path, note] of results) {
          const fm = note.frontmatter;
          this.files[fm.uuid] = [path, note];
          if (renamed[fm.uuid] !== true && fm.type === 2) {
            if (fm.alias === void 0) {
              fm.alias = [path.join(" / ")];
            } else if (Array.isArray(fm.alias)) {
              fm.alias.push(path.join(" / "));
            } else {
              fm.alias = [fm.alias, path.join(" / ")];
            }
            renamed[fm.uuid] = true;
          }
        }
      }
    }
  }
  findFirstParentInDomains(file, resource) {
    const domains = this.getIndexDomains();
    const q = [];
    for (const domain of domains) {
      q.push(domain);
    }
    while (q.length > 0) {
      const cur = q.pop();
      if (cur === void 0) {
        continue;
        return void 0;
      }
      if (cur.links === void 0 || cur.links.length === 0) {
        continue;
      }
      if (cur.frontmatter === void 0) {
        continue;
      }
      const f = this.getFileFromUUID(cur.frontmatter.uuid);
      if (f === void 0) {
        continue;
      }
      if (f.parent.name !== Paths.Slipbox) {
        continue;
      }
      const [start, end] = this.getContentBoundaries(cur);
      for (const link of cur.links) {
        if (link.link.length !== 36) {
          continue;
        }
        const pos = link.position;
        if (pos.start.offset < start || pos.end.offset > end) {
          continue;
        }
        if (link.link === resource.frontmatter.uuid) {
          return cur;
        } else {
          q.push(this.getFileCacheFromUUID(link.link));
        }
      }
    }
    return void 0;
  }
  isSequence(note) {
    Assert.True(
      note.headings.length > 0,
      `isSequence: Invalid parameter: note: ${note.frontmatter.uuid}`
    );
    for (const heading of note.headings) {
      if (heading.level === 4 && heading.heading === "steps") {
        return true;
      }
    }
    return false;
  }
  onunload() {
    console.log("gonext - onunload()");
    delete window.gonext;
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var ExampleModal = class extends import_obsidian.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    const { contentEl } = this;
    const dv = this.app.plugins.plugins.dataview.api;
    const tasks = dv.pages().array().slice(0, 10);
    let s = "";
    for (const task of tasks) {
      s += `${task.file.path}

`;
    }
    contentEl.setText(s);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJjb25zdGFudHMudHMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9zdHJpbmdpZnkuanMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9ybmcuanMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9uYXRpdmUuanMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92NC5qcyIsICJhcGkudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7XG5cdEFwcCxcblx0TW9kYWwsXG5cdFBsdWdpbixcblx0V29ya3NwYWNlLFxuXHQvLyBAdHMtaWdub3JlXG5cdEhUTUxFbGVtZW50LFxuXHRhZGRJY29uLFxuXHRDYWNoZWRNZXRhZGF0YSxcblx0VEZpbGUsXG5cdE1ldGFkYXRhQ2FjaGUsXG5cdFRBYnN0cmFjdEZpbGUsXG59IGZyb20gXCJvYnNpZGlhblwiO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHtcblx0SGVscGVyLFxuXHRGcm9udG1hdHRlcixcblx0TGlzdE1ha2VyLFxuXHQvLyBAdHMtaWdub3JlXG5cdE5hbWVzcGFjZSxcblx0Ly8gQHRzLWlnbm9yZVxuXHRSZW5kZXJlcixcblx0Ly8gQHRzLWlnbm9yZVxuXHRBdXRvRmllbGQsXG5cdC8vIEB0cy1pZ25vcmVcblx0RnJvbnRtYXR0ZXJKUyxcblx0RHZMaWIsXG5cdC8vIEB0cy1pZ25vcmVcblx0R2VuZXJhdG9yLFxuXHQvLyBAdHMtaWdub3JlXG5cdG5vdGlmeSxcblx0Ly8gQHRzLWlnbm9yZVxuXHRBc3NlcnQsXG59IGZyb20gXCIuL2FwaVwiO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgUGF0aHMsIFN0YXR1cywgVHlwZXMsIE5hbWVzcGFjZSwgRGVmYXVsdCB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuLy8gaW1wb3J0IHsgcmFuZG9tVVVJRCB9IGZyb20gXCJjcnlwdG9cIjtcbi8vIGNvbnN0IHsgcmFuZG9tVVVJRCB9ID0gcmVxdWlyZShcImNyeXB0b1wiKTtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBjb250aW51ZWRJbmRlbnQgfSBmcm9tIFwiQGNvZGVtaXJyb3IvbGFuZ3VhZ2VcIjtcbmltcG9ydCB7IHRocm93cyB9IGZyb20gXCJhc3NlcnRcIjtcblxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXG5pbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XG5cdG15U2V0dGluZzogc3RyaW5nO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeVBsdWdpblNldHRpbmdzID0ge1xuXHRteVNldHRpbmc6IFwiZGVmYXVsdFwiLFxufTtcblxuY29uc3QgZGF5U2hvcnQgPSBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl07XG5jb25zdCBtb250aFNob3J0ID0gW1xuXHRcIkphblwiLFxuXHRcIkZlYlwiLFxuXHRcIk1hclwiLFxuXHRcIkFwclwiLFxuXHRcIk1heVwiLFxuXHRcIkp1blwiLFxuXHRcIkp1bFwiLFxuXHRcIkF1Z1wiLFxuXHRcIlNlcFwiLFxuXHRcIk9jdFwiLFxuXHRcIk5vdlwiLFxuXHRcIkRlY1wiLFxuXTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncztcblx0d29ya3NwYWNlOiBXb3Jrc3BhY2U7XG5cdG1ldGFkYXRhQ2FjaGU6IGFueTtcblx0ZHY6IGFueTtcblx0Ly8gQHRzLWlnbm9yZVxuXHRyZW5kZXI6IFJlbmRlcjtcblx0ZGVidWc6IGJvb2xlYW47XG5cdHRhc2tJblN0YXR1c0JhcjogSFRNTEVsZW1lbnQ7XG5cdGFwaTogYW55O1xuXHRsaXN0TWFrZXI6IExpc3RNYWtlcjtcblx0ZnJvbnRtYXR0ZXI6IEZyb250bWF0dGVyO1xuXHRnZW5lcmF0ZTogR2VuZXJhdG9yO1xuXHRub3RpZnk6IGFueTtcblx0dmF1bHRDb250ZW50OiBURmlsZVtdID0gW107XG5cdHZhdWx0Q29udGVudERpY3Q6IHtbIGlkOiBzdHJpbmddOiBURmlsZX0gPSB7fTtcblxuXHRvcGVuVmlld0luTmV3VGFiSWZOb3RPcGVuZWQobmFtZTogc3RyaW5nKSB7XG5cdFx0Y29uc3QgYWN0aXZlID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnN0IHJvb3QgPSBhY3RpdmUucGFyZW50O1xuXHRcdC8vIHJlY2hlcmNoZXIgc2kgcGFzIGRcdTAwRTlqYSBvdXZlcnQgZGFucyBsZXMgb25nbGV0cyBhY3RpZnNcblx0XHQvLyBzaW5vbiBjclx1MDBFOWVyIHVuIG5vdXZlbCBvbmdsZXQsIG91dnJpciBsZSBmaWNoaWVyLCBldCBlbiBmYWlyZSBsJ29uZ2xldCBhY3RpZlxuXHRcdGxldCBmb3VuZCA9IGZhbHNlO1xuXHRcdGxldCBub2RlID0gdW5kZWZpbmVkO1xuXHRcdGNvbnN0IGVtcHR5VGFicyA9IFtdO1xuXG5cdFx0Zm9yIChjb25zdCBsZWFmIG9mIHJvb3QuY2hpbGRyZW4pIHtcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmdldEZpbGVGcm9tTGVhZihsZWFmKTtcblx0XHRcdGlmIChmaWxlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0ZW1wdHlUYWJzLnB1c2gobGVhZik7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZmlsZS5uYW1lID09PSBuYW1lKSB7XG5cdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0bm9kZSA9IGxlYWY7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bGV0IGZpbGUgPSB1bmRlZmluZWQ7XG5cdFx0aWYgKCFmb3VuZCkge1xuXHRcdFx0aWYgKGVtcHR5VGFicy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdG5vZGUgPSBlbXB0eVRhYnNbMF07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuY3JlYXRlTGVhZkluUGFyZW50KFxuXHRcdFx0XHRcdHJvb3QsXG5cdFx0XHRcdFx0cm9vdC5jaGlsZHJlbi5sZW5ndGggKyAxLFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRub2RlID0gcm9vdC5jaGlsZHJlbltyb290LmNoaWxkcmVuLmxlbmd0aCAtIDFdO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdG5vZGUub3BlbkZpbGUodGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5hbWUpLCB7XG5cdFx0XHRhY3RpdmU6IHRydWUsXG5cdFx0fSk7XG5cdH1cblxuXHRvcGVuSW5OZXdUYWJJZk5vdE9wZW5lZChwYWdlKSB7XG5cdFx0Y29uc3QgYWN0aXZlID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnN0IHJvb3QgPSBhY3RpdmUucGFyZW50O1xuXHRcdC8vIHJlY2hlcmNoZXIgc2kgcGFzIGRcdTAwRTlqYSBvdXZlcnQgZGFucyBsZXMgb25nbGV0cyBhY3RpZnNcblx0XHQvLyBzaW5vbiBjclx1MDBFOWVyIHVuIG5vdXZlbCBvbmdsZXQsIG91dnJpciBsZSBmaWNoaWVyLCBldCBlbiBmYWlyZSBsJ29uZ2xldCBhY3RpZlxuXHRcdGxldCBmb3VuZCA9IGZhbHNlO1xuXHRcdGxldCBub2RlID0gdW5kZWZpbmVkO1xuXHRcdGNvbnN0IGVtcHR5VGFicyA9IFtdO1xuXG5cdFx0Zm9yIChjb25zdCBsZWFmIG9mIHJvb3QuY2hpbGRyZW4pIHtcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmdldEZpbGVDYWNoZUZyb21MZWFmKGxlYWYpO1xuXHRcdFx0aWYgKGZpbGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRlbXB0eVRhYnMucHVzaChsZWFmKTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChcblx0XHRcdFx0ZmlsZS5mcm9udG1hdHRlciAhPT0gdW5kZWZpbmVkICYmXG5cdFx0XHRcdGZpbGUuZnJvbnRtYXR0ZXIudXVpZCA9PT0gcGFnZS5maWxlLmZyb250bWF0dGVyLnV1aWRcblx0XHRcdCkge1xuXHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHRcdG5vZGUgPSBsZWFmO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIWZvdW5kKSB7XG5cdFx0XHRpZiAoZW1wdHlUYWJzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0bm9kZSA9IGVtcHR5VGFic1swXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5jcmVhdGVMZWFmSW5QYXJlbnQoXG5cdFx0XHRcdFx0cm9vdCxcblx0XHRcdFx0XHRyb290LmNoaWxkcmVuLmxlbmd0aCArIDEsXG5cdFx0XHRcdCk7XG5cdFx0XHRcdG5vZGUgPSByb290LmNoaWxkcmVuW3Jvb3QuY2hpbGRyZW4ubGVuZ3RoIC0gMV07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bm9kZS5vcGVuRmlsZSh0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGFnZS5maWxlLnBhdGgpLCB7XG5cdFx0XHRhY3RpdmU6IHRydWUsXG5cdFx0fSk7XG5cdH1cblxuXHRnZXRGaWxlQ2FjaGVGcm9tTGVhZihsZWFmKTogQ2FjaGVkTWV0YWRhdGEge1xuXHRcdGxldCBmaWxlID0gdW5kZWZpbmVkO1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRmaWxlID0gbGVhZi52aWV3LmdldFN5bmNWaWV3U3RhdGUoKS5zdGF0ZS5maWxlO1xuXHRcdH0gY2F0Y2gge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnN0IGFic3RyYWN0UGF0aCA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZSk7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdHJldHVybiBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWJzdHJhY3RQYXRoKTtcblx0fVxuXG5cdGdldEZpbGVGcm9tTGVhZihsZWFmKTogVEFic3RyYWN0RmlsZSB7XG5cdFx0bGV0IGZpbGUgPSB1bmRlZmluZWQ7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGZpbGUgPSBsZWFmLnZpZXcuZ2V0U3luY1ZpZXdTdGF0ZSgpLnN0YXRlLmZpbGU7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0cmV0dXJuIGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZSk7XG5cdH1cblxuXHRleHRyYWN0VVVJREZyb21MaW5rKGxpbms6IHN0cmluZykge1xuXHRcdEFzc2VydC5UcnVlKFxuXHRcdFx0bGluay5sZW5ndGggPj0gMzYsXG5cdFx0XHRgZXh0cmFjdFVVSURGcm9tTGluazogSW52YWxpZCBwYXJhbWV0ZXIgdHlwZTogbGluazogXCIke2xpbmt9XCJgLFxuXHRcdCk7XG5cblx0XHQvLyBhdCB0aGlzIHBvaW50IGxpbmsgaXMgZWl0aGVyIGZvcm0gdXVpZCNoZWFkaW5nIHx8IGludmFsaWRcblx0XHQvLyB3ZSBjYW4gc2FmZWx5IGFzc3VtZSAwOjM2IGlzIHRoZSB1dWlkXG5cdFx0QXNzZXJ0LlRydWUoXG5cdFx0XHRIZWxwZXIuaXNVVUlEKGxpbmsuc2xpY2UoMCwgMzYpKSxcblx0XHRcdGBleHRyYWN0VVVJREZyb21MaW5rOiBJbnZhbGlkIHBhcmFtZXRlciB0eXBlOiBsaW5rOiBcIiR7bGlua31cImAsXG5cdFx0KTtcblx0XHRpZiAobGluay5sZW5ndGggPT09IDM2KSB7XG5cdFx0XHRyZXR1cm4gbGluaztcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGxpbmsuc2xpY2UoMCwgMzYpO1xuXHRcdH1cblx0fVxuXG5cdGdldEZpbGVGcm9tVVVJRChfaWQ6IHN0cmluZyk6IFRBYnN0cmFjdEZpbGUge1xuXHRcdHJldHVybiB0aGlzLnZhdWx0Q29udGVudERpY3RbX2lkXTtcblx0fVxuXG5cdGdldEZpbGVDYWNoZUZyb21VVUlEKF9pZDogc3RyaW5nKTogQ2FjaGVkTWV0YWRhdGEge1xuXHRcdGNvbnN0IGYgPSB0aGlzLnZhdWx0Q29udGVudERpY3RbX2lkXTtcblx0XHRpZiAoZiA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdHJldHVybiBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZik7XG5cdH1cblxuXHRnZW5lcmF0ZUpvdXJuYWxFbnRyeSgpIHsgfVxuXG5cdHNuZWFreVRhYlJlbmFtZXIoYXBwKSB7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnN0IHJvb3QgPSBhcHAud29ya3NwYWNlLmFjdGl2ZUxlYWYucGFyZW50O1xuXG5cdFx0Zm9yIChjb25zdCBsZWFmIG9mIHJvb3QuY2hpbGRyZW4pIHtcblx0XHRcdGxldCBwYXRoID0gdW5kZWZpbmVkO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0cGF0aCA9IGxlYWYudmlldy5nZXRTeW5jVmlld1N0YXRlKCkuc3RhdGUuZmlsZTtcblx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0Y29uc3QgZm0gPVxuXHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKS5mcm9udG1hdHRlcjtcblxuXHRcdFx0aWYgKGZtID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGxldCB0ZXh0ID0gXCJcIjtcblxuXHRcdFx0aWYgKGZtLnR5cGUgPT09IDMgJiYgSGVscGVyLmdldFByb2plY3QoZm0pICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0aWYgKEhlbHBlci5nZXRQcm9qZWN0KGZtKSA9PT0gXCJwcm9qZWN0L2RhaWx5XCIpIHtcblx0XHRcdFx0XHRjb25zdCBhdCA9IG5ldyBEYXRlKGZtLmF0KTtcblx0XHRcdFx0XHR0ZXh0ID0gYChEKSAke2RheVNob3J0W2F0LmdldERheSgpXX0uICR7YXQuZ2V0RGF0ZSgpfSAke21vbnRoU2hvcnRbYXQuZ2V0TW9udGgoKV19YDtcblx0XHRcdFx0XHQvLyB0ZXh0ID0gYFx1RDgzRFx1RENDNSAke2RheVNob3J0W2F0LmdldERheSgpXX0uICR7YXQuZ2V0RGF5KCl9ICR7bW9udGhTaG9ydFthdC5nZXRNb250aCgpXX1gO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRleHQgPSBgKFQpICR7SGVscGVyLmdldFByb2plY3QoZm0pLnNsaWNlKDgpfWA7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoZm0udHlwZSA9PT0gMikge1xuXHRcdFx0XHRpZiAoIUhlbHBlci5uaWxDaGVjayhmbS5hbGlhcykpIHtcblx0XHRcdFx0XHRsZXQgYnVmZiA9IFwiXCI7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBhbGlhcyBvZiBmbS5hbGlhcykge1xuXHRcdFx0XHRcdFx0aWYgKGJ1ZmYubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdGJ1ZmYgPSBhbGlhcztcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoYWxpYXMubGVuZ3RoIDwgYnVmZi5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0YnVmZiA9IGFsaWFzO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNvbnN0IG5vdGUgPSB0aGlzLmdldEZpbGVDYWNoZUZyb21MZWFmKGxlYWYpO1xuXHRcdFx0XHRcdHRleHQgPSBgXHVEODNEXHVEQ0RDICR7YnVmZn1gO1xuXG5cdFx0XHRcdFx0aWYgKG5vdGUuaGVhZGluZ3MubGVuZ3RoID4gMSkge1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBoZWFkaW5nIG9mIG5vdGUuaGVhZGluZ3MpIHtcblx0XHRcdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0XHRcdGhlYWRpbmcubGV2ZWwgPT09IDMgJiZcblx0XHRcdFx0XHRcdFx0XHRoZWFkaW5nLmhlYWRpbmcgPT09IFwiaW5kZXhcIlxuXHRcdFx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdFx0XHR0ZXh0ID0gYChJKSAke2J1ZmZ9YDtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyByZWFkIGxldmVsIDMgaGVhZGluZ1xuXHRcdFx0XHRcdGNvbnN0IG5vdGUgPSB0aGlzLmdldEZpbGVDYWNoZUZyb21MZWFmKGxlYWYpO1xuXHRcdFx0XHRcdGlmIChub3RlLmhlYWRpbmdzLmxlbmd0aCA8IDEpIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGxldCBmb3VuZCA9IGZhbHNlO1xuXHRcdFx0XHRcdGZvciAoY29uc3QgaGVhZGluZyBvZiBub3RlLmhlYWRpbmdzKSB7XG5cdFx0XHRcdFx0XHRpZiAoaGVhZGluZy5sZXZlbCA9PT0gMykge1xuXHRcdFx0XHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdHRleHQgPSBgXHVEODNEXHVEQ0RDICR7aGVhZGluZy5oZWFkaW5nfWA7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIWZvdW5kKSB7XG5cdFx0XHRcdFx0XHR0ZXh0ID0gbm90ZS5mcm9udG1hdHRlci51dWlkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChmbS50eXBlID09PSAyMCkge1xuXHRcdFx0XHRjb25zdCBjcmVhdGVkQXQgPSBuZXcgRGF0ZShmbS5jcmVhdGVkX2F0KTtcblx0XHRcdFx0Ly8gdGV4dCA9IGBcdUQ4M0RcdURDRDMgJHtkYXlTaG9ydFthdC5nZXREYXkoKV19LiAke2F0LmdldERheSgpfSAke21vbnRoU2hvcnRbYXQuZ2V0TW9udGgoKV19YDtcblx0XHRcdFx0aWYgKGZtLmFsaWFzICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHR0ZXh0ID0gYChKKSAke2ZtLmFsaWFzfWA7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGV4dCA9IGAoSikgJHtkYXlTaG9ydFtjcmVhdGVkQXQuZ2V0RGF5KCldfS4gJHtjcmVhdGVkQXQuZ2V0RGF0ZSgpfSAke21vbnRoU2hvcnRbY3JlYXRlZEF0LmdldE1vbnRoKCldfWA7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoZm0udHlwZSA9PT0gMTIpIHtcblx0XHRcdFx0aWYgKGZtLm5hbWUgIT09IHVuZGVmaW5lZCAmJiBmbS5uYW1lICE9PSBcIlwiKSB7XG5cdFx0XHRcdFx0dGV4dCA9IGAoUCkgJHtmbS5uYW1lfWA7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoZm0udHlwZSA9PT0gMTMpIHtcblx0XHRcdFx0dGV4dCA9IGAoSSkgJHtmbS51dWlkfWA7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGlmICh0ZXh0ICE9PSBcIlwiKSB7XG5cdFx0XHRcdC8vIFx1RDgzRFx1RENEM1xuXHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdGxlYWYudGFiSGVhZGVySW5uZXJUaXRsZUVsLmlubmVyVGV4dCA9IHRleHQ7XG5cdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0bGVhZi50YWJIZWFkZXJJbm5lclRpdGxlRWwuaW5uZXJIVE1MID0gdGV4dDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJnb25leHQgLSBvbmxvYWQoKVwiKTtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXHRcdHRoaXMubWV0YWRhdGFDYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGU7XG5cdFx0dGhpcy53b3Jrc3BhY2UgPSB0aGlzLmFwcC53b3Jrc3BhY2U7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdHRoaXMuZHYgPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnMuZGF0YXZpZXcuYXBpO1xuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHR0aGlzLmZyb250bWF0dGVyID0gbmV3IEZyb250bWF0dGVyKHRoaXMpO1xuXHRcdHRoaXMubGlzdE1ha2VyID0gbmV3IExpc3RNYWtlcih0aGlzLCB0aGlzLmR2LCB0aGlzLmZyb250bWF0dGVyKTtcblx0XHR0aGlzLmdlbmVyYXRlID0gbmV3IEdlbmVyYXRvcih0aGlzLmFwcCk7XG5cdFx0dGhpcy5maWxlcyA9IHt9O1xuXG5cdFx0dGhpcy5hcGkgPSB7XG5cdFx0XHRnZXRBcmVhOiBIZWxwZXIuZ2V0QXJlYSxcblx0XHRcdGdldENvbnRleHQ6IEhlbHBlci5nZXRDb250ZXh0LFxuXHRcdFx0Z2V0RG9tYWluOiBIZWxwZXIuZ2V0RG9tYWluLFxuXHRcdFx0Z2V0TGF5ZXI6IEhlbHBlci5nZXRMYXllcixcblx0XHRcdGdldE9yZzogSGVscGVyLmdldE9yZyxcblx0XHRcdGdldFByb2plY3Q6IEhlbHBlci5nZXRQcm9qZWN0LFxuXHRcdFx0ZHVyYXRpb25TdHJpbmdUb1NlYzogSGVscGVyLmR1cmF0aW9uU3RyaW5nVG9TZWMsXG5cdFx0XHRwYXRoczogUGF0aHMsXG5cdFx0XHR0eXBlczogVHlwZXMsXG5cdFx0XHRzdGF0dXM6IFN0YXR1cyxcblx0XHRcdG5hbWVzcGFjZTogTmFtZXNwYWNlLFxuXHRcdFx0ZGVmYXVsdDogRGVmYXVsdCxcblx0XHRcdGZyb250bWF0dGVyOiB0aGlzLmZyb250bWF0dGVyLFxuXHRcdFx0bGlzdE1ha2VyOiB0aGlzLmxpc3RNYWtlcixcblx0XHRcdHJlbmRlcmVyOiBSZW5kZXJlcixcblx0XHRcdGF1dG9GaWVsZDogQXV0b0ZpZWxkLFxuXHRcdFx0ZHZMaWI6IG5ldyBEdkxpYigpLFxuXHRcdFx0bm90aWZ5OiBub3RpZnksXG5cdFx0fTtcblxuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHR3aW5kb3cuZ29uZXh0ID0ge1xuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0c3RhdGU6IHdpbmRvdy5nb25leHQ/LnN0YXRlID8/IHt9LFxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0YXBwOiB0aGlzLmFwcCxcblx0XHR9O1xuXHRcdGFkZEljb24oXG5cdFx0XHRcIkdvTmV4dEljb25cIixcblx0XHRcdGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjMyXCIgaGVpZ2h0PVwiMzJcIiB2aWV3Qm94PVwiMCAwIDMyIDMyXCI+PHBhdGggZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNMjAgMTJWMmgydjEwem00IDBWMmgydjEwem00IDBWMmgydjEwem0tMTIgOGEzLjkxMiAzLjkxMiAwIDAgMS00LTRhMy45MTIgMy45MTIgMCAwIDEgNC00di0yYTYgNiAwIDEgMCA2IDZoLTJhMy45MTIgMy45MTIgMCAwIDEtNCA0XCI+PC9wYXRoPjxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTTI4Ljg5MyAxOC40NTRMMjYuMDk4IDE2bC0xLjMxOCAxLjUwNGwyLjc5MiAyLjQ1MmwtMi4zNiA0LjA4OGwtMy40MjctMS4xNmE5LjAzMiA5LjAzMiAwIDAgMS0yLjcxNCAxLjU2NUwxOC4zNiAyOGgtNC43MmwtLjcxLTMuNTVhOS4wOTUgOS4wOTUgMCAwIDEtMi42OTUtMS41NzJsLTMuNDQ3IDEuMTY2bC0yLjM2LTQuMDg4bDIuNzI1LTIuMzk1YTguOTI2IDguOTI2IDAgMCAxLS4wMDctMy4xMjhsLTIuNzE4LTIuMzlsMi4zNi00LjA4N2wzLjQyNyAxLjE2QTkuMDMgOS4wMyAwIDAgMSAxMi45MyA3LjU1TDEzLjY0IDRIMTZWMmgtMi4zNmEyIDIgMCAwIDAtMS45NjEgMS42MDhsLS41MDQgMi41MTlhMTAuOTY3IDEwLjk2NyAwIDAgMC0xLjMyNy43NTNsLTIuNDItLjgxOWExLjk5OCAxLjk5OCAwIDAgMC0yLjM3Mi44OTVsLTIuMzYgNC4wODhhMiAyIDAgMCAwIC40MTEgMi41MDJsMS45MzEgMS42OTdDNS4wMjEgMTUuNDk1IDUgMTUuNzQ1IDUgMTZjMCAuMjU4LjAxLjUxMy4wMjguNzY2bC0xLjkyIDEuNjg4YTIgMiAwIDAgMC0uNDEzIDIuNTAybDIuMzYgNC4wODhhMS45OTggMS45OTggMCAwIDAgMi4zNzQuODk1bDIuNDM0LS44MjRhMTAuOTc0IDEwLjk3NCAwIDAgMCAxLjMxMi43NTlsLjUwMyAyLjUxOEEyIDIgMCAwIDAgMTMuNjQgMzBoNC43MmEyIDIgMCAwIDAgMS45NjEtMS42MDhsLjUwNC0yLjUxOWExMC45NjcgMTAuOTY3IDAgMCAwIDEuMzI3LS43NTNsMi40MTkuODE4YTEuOTk4IDEuOTk4IDAgMCAwIDIuMzczLS44OTRsMi4zNi00LjA4OGEyIDIgMCAwIDAtLjQxMS0yLjUwMlwiPjwvcGF0aD48L3N2Zz5gLFxuXHRcdCk7XG5cblx0XHR0aGlzLmFkZFJpYmJvbkljb24oXCJHb05leHRJY29uXCIsIFwiW2ddb1tuXWV4dFwiLCBhc3luYyAoKSA9PiB7XG5cdFx0XHR0aGlzLmdlbmVyYXRlLmZsZWV0aW5nKCk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJhY3RpdmUtbGVhZi1jaGFuZ2VcIiwgKCkgPT4ge1xuXHRcdFx0cmV0dXJuIHRoaXMuc25lYWt5VGFiUmVuYW1lcih0aGlzLmFwcCk7XG5cdFx0fSk7XG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwicXVpY2stcHJldmlld1wiLCAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gdGhpcy5zbmVha3lUYWJSZW5hbWVyKHRoaXMuYXBwKTtcblx0XHR9KTtcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJyZXNpemVcIiwgKCkgPT4ge1xuXHRcdFx0cmV0dXJuIHRoaXMuc25lYWt5VGFiUmVuYW1lcih0aGlzLmFwcCk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwib3Blbi1pbmRleFwiLFxuXHRcdFx0bmFtZTogXCJPcGVuIEluZGV4XCIsXG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHR0aGlzLm9wZW5WaWV3SW5OZXdUYWJJZk5vdE9wZW5lZChcIkluZGV4Lm1kXCIpO1xuXHRcdFx0fSxcblx0XHR9KTtcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwib3Blbi1pbmJveFwiLFxuXHRcdFx0bmFtZTogXCJPcGVuIEluYm94XCIsXG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHR0aGlzLm9wZW5WaWV3SW5OZXdUYWJJZk5vdE9wZW5lZChcIkluYm94Lm1kXCIpO1xuXHRcdFx0fSxcblx0XHR9KTtcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwib3Blbi1wcm9qZWN0c1wiLFxuXHRcdFx0bmFtZTogXCJPcGVuIFByb2plY3RzXCIsXG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHR0aGlzLm9wZW5WaWV3SW5OZXdUYWJJZk5vdE9wZW5lZChcIlByb2plY3RzLm1kXCIpO1xuXHRcdFx0fSxcblx0XHR9KTtcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwib3Blbi1wbGFubmluZ1wiLFxuXHRcdFx0bmFtZTogXCJPcGVuIFBsYW5uaW5nXCIsXG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHR0aGlzLm9wZW5WaWV3SW5OZXdUYWJJZk5vdE9wZW5lZChcIlBsYW5uaW5nLm1kXCIpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJnb3RvLWFjdGl2ZS10YXNrLWxvZ3NcIixcblx0XHRcdG5hbWU6IFwiR290byBBY3RpdmUgVGFza3MgTG9ncydcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0Y29uc3QgcGFnZXMgPSB0aGlzLmR2XG5cdFx0XHRcdFx0LnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKVxuXHRcdFx0XHRcdC53aGVyZSgocGFnZSkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHBhZ2UuZmlsZS5mcm9udG1hdHRlci5zdGF0dXMgPT09IFwiZG9pbmdcIikge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGlmIChwYWdlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCB0Rm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlc1swXSk7XG5cdFx0XHRcdGNvbnN0IGxvZ3MgPSB0aGlzLmR2LnBhZ2VzKGBcIiR7UGF0aHMuTG9nc30vJHt0Rm0udXVpZH1cImApLnNvcnQoKGspID0+IGsuY3JlYXRlZF9hdCwgXCJkZXNjXCIpO1xuXHRcdFx0XHRpZiAobG9ncy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLm9wZW5Jbk5ld1RhYklmTm90T3BlbmVkKGxvZ3NbMF0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImdvdG8tY2hpbGRyZW5cIixcblx0XHRcdG5hbWU6IFwiR290byBDaGlsZFwiLFxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuZ2V0RmlsZUZyb21MZWFmKFxuXHRcdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmLFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRpZiAoZmlsZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcImdvdG8tY2hpbGRyZW46IEZpbGUgaXMgdW5kZWZpbmVkXCIpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGNhY2hlID0gdGhpcy5nZXRGaWxlQ2FjaGVGcm9tTGVhZihcblx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZixcblx0XHRcdFx0KTtcblx0XHRcdFx0Y29uc3QgZm0gPSBjYWNoZS5mcm9udG1hdHRlcjtcblx0XHRcdFx0aWYgKGZtID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiZ290by1jaGlsZHJlbjogSW52YWxpZCBGcm9udE1hdHRlclwiKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBhY3RpdmUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZjtcblx0XHRcdFx0Y29uc3QgZGlyID0gZmlsZS5wYXRoLnNwbGl0KFwiL1wiKVswXTtcblxuXHRcdFx0XHRpZiAoZGlyID09PSBQYXRocy5UYXNrcykge1xuXHRcdFx0XHRcdGNvbnN0IHBhZ2UgPSB7IGZpbGU6IHsgZnJvbnRtYXR0ZXI6IGZtLCBwYXRoOiBmaWxlLnBhdGggfSB9O1xuXHRcdFx0XHRcdGNvbnN0IGN1ckZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG5cdFx0XHRcdFx0Y29uc3QgY3VyQXQgPSBjdXJGbS5hdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcblxuXHRcdFx0XHRcdGlmIChjdXJGbS5nZXRQcm9qZWN0KCkgPT09IFwiZGFpbHlcIikge1xuXHRcdFx0XHRcdFx0Y29uc3QgcGFnZXMgPSB0aGlzLmR2XG5cdFx0XHRcdFx0XHRcdC5wYWdlcyhgXCIke1BhdGhzLkpvdXJuYWx9XCJgKVxuXHRcdFx0XHRcdFx0XHQud2hlcmUoKHBhZ2UpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBqRm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoakZtLmdldFByb2plY3QoKSAhPT0gXCJtaXNzaW9uXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRjb25zdCBqQXQgPSBqRm0uY3JlYXRlZEF0XG5cdFx0XHRcdFx0XHRcdFx0XHQudG9JU09TdHJpbmcoKVxuXHRcdFx0XHRcdFx0XHRcdFx0LnNsaWNlKDAsIDEwKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoY3VyQXQgIT09IGpBdCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0aWYgKHBhZ2VzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHQvLyBjcmVhdGUgam91cm5hbCBwYWdlXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5vdGUgPSB0aGlzLmdlbmVyYXRlLmpvdXJuYWxFbnRyeSgpO1xuXHRcdFx0XHRcdFx0XHRub3RlLnRoZW4oKGZpbGUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRhY3RpdmUub3BlbkZpbGUoZmlsZSwgeyBhY3RpdmU6IHRydWUgfSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBjaGlsZHJlbiA9XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFxuXHRcdFx0XHRcdFx0XHRcdFx0cGFnZXNbMF0uZmlsZS5wYXRoLFxuXHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdEFzc2VydC5UcnVlKFxuXHRcdFx0XHRcdFx0XHRcdCFIZWxwZXIubmlsQ2hlY2soY2hpbGRyZW4pLFxuXHRcdFx0XHRcdFx0XHRcdGBnb3RvLWNoaWxkcmVuOiBVbmV4cGVjdGVkIHVuZGVmaW5lZCBmaWxlOiAke3BhZ2VzWzBdLmZpbGUucGF0aH1gLFxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRhY3RpdmUub3BlbkZpbGUoY2hpbGRyZW4pO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnN0IHBhZ2VzID0gdGhpcy5kdlxuXHRcdFx0XHRcdFx0XHQucGFnZXMoYFwiJHtQYXRocy5Mb2dzfS8ke2N1ckZtLnV1aWR9XCJgKVxuXHRcdFx0XHRcdFx0XHQuc29ydCgoaykgPT4gay5jcmVhdGVkX2F0LCBcImRlc2NcIik7XG5cdFx0XHRcdFx0XHRpZiAocGFnZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Y29uc3QgY2hpbGRyZW4gPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXG5cdFx0XHRcdFx0XHRcdHBhZ2VzWzBdLmZpbGUucGF0aCxcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRBc3NlcnQuVHJ1ZShcblx0XHRcdFx0XHRcdFx0IUhlbHBlci5uaWxDaGVjayhjaGlsZHJlbiksXG5cdFx0XHRcdFx0XHRcdGBnb3RvLWNoaWxkcmVuOiBVbmV4cGVjdGVkIHVuZGVmaW5lZCBmaWxlOiAke3BhZ2VzWzBdLmZpbGUucGF0aH1gLFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGFjdGl2ZS5vcGVuRmlsZShjaGlsZHJlbik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXG5cdFx0XHRcdFx0XHRcImdvdG8tY2hpbGRyZW46IE5vdCBJbXBsZW1lbnRlZCBvdXRzaWRlIEpvdXJuYWwsIFRhc2tzXCIsXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiZ290by1wYXJlbnRcIixcblx0XHRcdG5hbWU6IFwiR290byBQYXJlbnRcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiZ290by1wYXJlbnQ6XCIpXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmdldEZpbGVGcm9tTGVhZihcblx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZixcblx0XHRcdFx0KTtcblx0XHRcdFx0aWYgKGZpbGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJnb3RvLXBhcmVudDogRmlsZSBpcyB1bmRlZmluZWRcIik7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgY2FjaGUgPSB0aGlzLmdldEZpbGVDYWNoZUZyb21MZWFmKFxuXHRcdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmLFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRjb25zdCBmbSA9IGNhY2hlLmZyb250bWF0dGVyO1xuXHRcdFx0XHRpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJnb3RvLXBhcmVudDogSW52YWxpZCBGcm9udE1hdHRlclwiKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBhY3RpdmUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZjtcblx0XHRcdFx0Y29uc3QgZGlyID0gZmlsZS5wYXRoLnNwbGl0KFwiL1wiKVswXTtcblxuXHRcdFx0XHRpZiAoZGlyID09PSBQYXRocy5TbGlwYm94KSB7XG5cdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRcdGNvbnN0IHBhcmVudCA9IHRoaXMuZmluZEZpcnN0UGFyZW50SW5Eb21haW5zKGZpbGUsIGNhY2hlKTtcblx0XHRcdFx0XHRpZiAocGFyZW50ICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmdldEZpbGVGcm9tVVVJRChcblx0XHRcdFx0XHRcdFx0cGFyZW50LmZyb250bWF0dGVyLnV1aWQsXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0YWN0aXZlLm9wZW5GaWxlKGZpbGUpO1xuXHRcdFx0XHRcdFx0Ly8gdGhpcy5vcGVuSW5OZXdUYWJJZk5vdE9wZW5lZChwYWdlKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0YWN0aXZlLm9wZW5GaWxlKFxuXHRcdFx0XHRcdFx0XHR0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmRleC5tZFwiKSxcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKGRpciA9PT0gUGF0aHMuTG9ncykge1xuXHRcdFx0XHRcdGNvbnN0IHRhc2tJZCA9IGZpbGUucGF0aC5zcGxpdChcIi9cIilbMV07XG5cdFx0XHRcdFx0QXNzZXJ0LlRydWUoXG5cdFx0XHRcdFx0XHR0YXNrSWQgIT09IHVuZGVmaW5lZCxcblx0XHRcdFx0XHRcdGBJbnZhbGlkIGxvZ0RpcjogJHtmaWxlLnBhdGh9YCxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGNvbnN0IHRhc2sgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXG5cdFx0XHRcdFx0XHRgJHtQYXRocy5UYXNrc30vJHtmbS5wYXJlbnRfaWR9Lm1kYCxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGlmIChIZWxwZXIubmlsQ2hlY2sodGFzaykpIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoYFVuZGVmaW5lZCBUYXNrOiAke3Rhc2tJZH1gKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0YWN0aXZlLm9wZW5GaWxlKHRhc2spO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmIChkaXIgPT09IFBhdGhzLlRhc2tzKSB7XG5cdFx0XHRcdFx0Y29uc3QgcGFnZSA9IHsgZmlsZTogeyBmcm9udG1hdHRlcjogZm0sIHBhdGg6IGZpbGUucGF0aCB9IH07XG5cdFx0XHRcdFx0Y29uc3QgY3VyRm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcblx0XHRcdFx0XHRjb25zdCBjdXJBdCA9IGN1ckZtLmF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuXHRcdFx0XHRcdGlmIChjdXJGbS5nZXRQcm9qZWN0KCkgPT09IFwiZGFpbHlcIikge1xuXHRcdFx0XHRcdFx0Y29uc3QgcGFnZXMgPSB0aGlzLmR2XG5cdFx0XHRcdFx0XHRcdC5wYWdlcyhgXCIke1BhdGhzLkpvdXJuYWx9XCJgKVxuXHRcdFx0XHRcdFx0XHQud2hlcmUoKHBhZ2UpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBqRm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoakZtLmdldFByb2plY3QoKSAhPT0gXCJtaXNzaW9uXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRjb25zdCBqQXQgPSBqRm0uYXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGN1ckF0ICE9PSBqQXQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRpZiAocGFnZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdC8vIGNyZWF0ZSBqb3VybmFsIHBhZ2Vcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJNdXN0IGNyZWF0ZSBqb3VybmFsIGVudHJ5IGZpcnN0XCIpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgSW1wbGVtZW50ZWRcIik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXG5cdFx0XHRcdFx0XHRcdFwiZ290by1wYXJlbnQ6IE5vdCBJbXBsZW1lbnRlZCBmb3Igbm9uLWRhaWx5IFRhc2tcIixcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKGRpciA9PT0gUGF0aHMuSm91cm5hbCkge1xuXHRcdFx0XHRcdGNvbnN0IHBhZ2UgPSB7IGZpbGU6IHsgZnJvbnRtYXR0ZXI6IGZtLCBwYXRoOiBmaWxlLnBhdGggfSB9O1xuXHRcdFx0XHRcdGNvbnN0IGN1ckZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG5cdFx0XHRcdFx0Y29uc3QgY3VyQXQgPSBjdXJGbS5jcmVhdGVkQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG5cdFx0XHRcdFx0aWYgKGN1ckZtLmdldFByb2plY3QoKSA9PT0gXCJtaXNzaW9uXCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHBhZ2VzID0gdGhpcy5kdlxuXHRcdFx0XHRcdFx0XHQucGFnZXMoYFwiJHtQYXRocy5UYXNrc31cImApXG5cdFx0XHRcdFx0XHRcdC53aGVyZSgocGFnZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuYXQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRGbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuXHRcdFx0XHRcdFx0XHRcdGlmICh0Rm0uZ2V0UHJvamVjdCgpICE9PSBcImRhaWx5XCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRjb25zdCB0QXQgPSB0Rm0uYXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGN1ckF0ICE9PSB0QXQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdEFzc2VydC5UcnVlKFxuXHRcdFx0XHRcdFx0XHRwYWdlcy5sZW5ndGggPT09IDEsXG5cdFx0XHRcdFx0XHRcdGBOb24gZXhpc3RhbnQgb3Igbm9uIHVuaXF1ZSBUYXNrOiAke3BhZ2VzLmZpbGUuZnJvbnRtYXR0ZXIudXVpZH1gLFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGNvbnN0IGYgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXG5cdFx0XHRcdFx0XHRcdHBhZ2VzWzBdLmZpbGUucGF0aCxcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRBc3NlcnQuVHJ1ZShcblx0XHRcdFx0XHRcdFx0IUhlbHBlci5uaWxDaGVjayhmKSxcblx0XHRcdFx0XHRcdFx0YFVuZXhwZWN0ZWQgbm9uLWV4aXN0YW50IFRhc2s6ICR7cGFnZXNbMF0uZmlsZS5wYXRofWAsXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0YWN0aXZlLm9wZW5GaWxlKGYpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFxuXHRcdFx0XHRcdFx0XHRcImdvdG8tcGFyZW50OiBOb3QgSW1wbGVtZW50ZWQgZm9yIG5vbi1taXNzaW9uIEpvdXJuYWwgRW50cnlcIixcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXG5cdFx0XHRcdFx0XHRcImdvdG8tcGFyZW50OiBOb3QgSW1wbGVtZW50ZWQgb3V0c2lkZSBJbmRleCwgTG9nc1wiLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImdvdG8tYWN0aXZlLXRhc2tcIixcblx0XHRcdG5hbWU6IFwiR290byBBY3RpdmUgVGFza1wiLFxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRjb25zdCBwYWdlcyA9IHRoaXMuZHZcblx0XHRcdFx0XHQucGFnZXMoYFwiJHtQYXRocy5UYXNrc31cImApXG5cdFx0XHRcdFx0LndoZXJlKChwYWdlKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAocGFnZS5maWxlLmZyb250bWF0dGVyLnN0YXR1cyA9PT0gXCJkb2luZ1wiKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coYGZvdW5kICR7cGFnZXMubGVuZ3RofSBhY3RpdmUgdGFzayhzKWApO1xuXHRcdFx0XHRpZiAocGFnZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5vcGVuSW5OZXdUYWJJZk5vdE9wZW5lZChwYWdlc1swXSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcIm9wZW4tdG9kYXlzLWRhaWx5XCIsXG5cdFx0XHRuYW1lOiBcIk9wZW4gVG9kYXkncyBEYWlseVwiLFxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0Y29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblx0XHRcdFx0Y29uc3Qgbm93SXNvID0gbm93LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuXHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdGNvbnN0IHBhZ2VzID0gdGhpcy5kdlxuXHRcdFx0XHRcdC5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfVwiYClcblx0XHRcdFx0XHQud2hlcmUoKHBhZ2UpID0+IHtcblx0XHRcdFx0XHRcdGlmIChwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuYXQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIGFzc2lnbiBub3cgc2kgYXQgPT09IHVuZGVmaW5lZFxuXHRcdFx0XHRcdFx0Y29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcblx0XHRcdFx0XHRcdGlmIChmbS5nZXRQcm9qZWN0KCkgIT09IFwiZGFpbHlcIikge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGxldCBmbUlzbyA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGZtSXNvID0gZm0uYXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKGBwb3NzaWJsZSBpbnZhbGlkIGRhdGEgaW4gJHtmbS51dWlkfWApO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChmbUlzbyA9PT0gbm93SXNvKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYgKHBhZ2VzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMub3BlbkluTmV3VGFiSWZOb3RPcGVuZWQocGFnZXNbMF0pO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJnb25leHQtZ2VuZXJhdGUtZmxlZXRpbmdcIixcblx0XHRcdG5hbWU6IFwiR2VuZXJhdGUgZmxlZXRpbmcgbm90ZVwiLFxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0dGhpcy5nZW5lcmF0ZS5mbGVldGluZygpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJzYWZlLWRlbGV0ZVwiLFxuXHRcdFx0bmFtZTogXCJTYWZlIERlbGV0ZVwiLFxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0Y29uc3QgZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdFx0XHRjb25zdCBmbSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKS5mcm9udG1hdHRlcjtcblx0XHRcdFx0aWYgKGZtID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCByb290UGF0aCA9IFtcblx0XHRcdFx0XHRgJHtQYXRocy5Kb3VybmFsfS5tZGAsXG5cdFx0XHRcdFx0YCR7UGF0aHMuSW5ib3h9Lm1kYCxcblx0XHRcdFx0XHRcIkFkIEhvYy5tZFwiLFxuXHRcdFx0XHRcdFwiYWxsRG9uZVRhc2tzLm1kXCIsXG5cdFx0XHRcdFx0XCJhbGxEb25lVGFza3NXaXRob3V0TG9nLm1kXCIsXG5cdFx0XHRcdFx0XCJhbGxNZWRpYS5tZFwiLFxuXHRcdFx0XHRcdFwiYWxsUHJvZ3Jlc3NlZFRhc2tzLm1kXCIsXG5cdFx0XHRcdFx0XCJub3RlTG9jYXRvci5tZFwiLFxuXHRcdFx0XHRcdFwiUHJheGlzLm1kXCIsXG5cdFx0XHRcdF07XG5cdFx0XHRcdGZvciAoY29uc3QgcCBvZiByb290UGF0aCkge1xuXHRcdFx0XHRcdGlmIChmaWxlLnBhdGggPT09IHApIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdFx0ZmlsZS5wYXRoLnNwbGl0KDAsIFBhdGhzLlJlc291cmNlcy5sZW5ndGgpID09PVxuXHRcdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0XHRQYXRocy5SZXNvdXJjZXNcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc29sZS5sb2coYGRlbGV0ZWQgZmlsZTogJHtmaWxlLnBhdGh9YCk7XG5cdFx0XHRcdGFwcC52YXVsdC5kZWxldGUoZmlsZSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImRpc3BsYXktbW9kYWxcIixcblx0XHRcdG5hbWU6IFwiRGlzcGxheSBtb2RhbFwiLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0bmV3IEV4YW1wbGVNb2RhbCh0aGlzLmFwcCkub3BlbigpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJnby1wYXJlbnRcIixcblx0XHRcdG5hbWU6IFwiR28gUGFyZW50XCIsXG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBmaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdFx0XHRcdGNvbnN0IGZtID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpLmZyb250bWF0dGVyO1xuXHRcdFx0XHRpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChmbS5wYXJlbnRfaWQgPT09IHVuZGVmaW5lZCAmJiBmbS5yZWZfaWQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGNvbnNvbGUud2Fybihcblx0XHRcdFx0XHRcdGBwYXJlbnRfaWQ6ICcke2ZtLnBhcmVudF9pZH0nIHJlZl9pZDogJyR7Zm0ucmVmX2lkfSdgLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdGZtLnR5cGUgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHRcdChmbS50eXBlICE9PSBUeXBlcy5Mb2cgJiZcblx0XHRcdFx0XHRcdGZtLnR5cGUgIT09IFR5cGVzLk1lZGlhICYmXG5cdFx0XHRcdFx0XHRmbS50eXBlICE9PSBUeXBlcy5GbGVldGluZylcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKFxuXHRcdFx0XHRcdFx0YGludmFsaWQgdHlwZTogJyR7Zm0udHlwZX0nIGZvciBub3RlOiAnJHtmbS51dWlkfSdgLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaHR0cHM6Ly9kb2NzLm9ic2lkaWFuLm1kL1JlZmVyZW5jZS9UeXBlU2NyaXB0K0FQSS9Xb3Jrc3BhY2UvY3JlYXRlTGVhZkluUGFyZW50XG5cdFx0XHRcdC8vIGFwcC53b3Jrc3BhY2UuY3JlYXRlTGVhZkluUGFyZW50KCk7XG5cdFx0XHRcdC8vIGNvbnN0IGxlYWYgPSBhcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSk7XG5cdFx0XHRcdC8vIHBhcmVudCBpZFxuXHRcdFx0XHRjb25zdCBwYXJlbnQgPVxuXHRcdFx0XHRcdGZtLnR5cGUgPT09IFR5cGVzLkxvZ1xuXHRcdFx0XHRcdFx0PyBgJHtQYXRocy5UYXNrc30vJHtmbS5wYXJlbnRfaWR9Lm1kYFxuXHRcdFx0XHRcdFx0OiBgJHtQYXRocy5SZWZzfS8ke2ZtLnJlZl9pZH0ubWRgO1xuXHRcdFx0XHRjb25zdCBwYWdlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXJlbnQpO1xuXHRcdFx0XHRhcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChwYXJlbnQsIFwiL1wiLCBmYWxzZSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gaG9vayBwb3VyIG1ldHRyZSBcdTAwRTAgam91ciBsZXMgYWxpYXNcblx0XHR0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLm9uKFxuXHRcdFx0XCJjaGFuZ2VkXCIsXG5cdFx0XHQoZmlsZTogVEZpbGUsIGRhdGE6IHN0cmluZywgY2FjaGU6IENhY2hlZE1ldGFkYXRhKSA9PiB7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwibWV0YWRhdGFDYWNoZSAtIGNoYW5nZWRcIik7XG5cdFx0XHRcdGNvbnN0IGZtID0gY2FjaGUuZnJvbnRtYXR0ZXI7XG5cdFx0XHRcdGlmIChmbS50eXBlID09PSAyKSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuZmlsZXNbZm0udXVpZF0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0Y29uc3QgW3BhdGgsIG5vdGVdID0gdGhpcy5maWxlc1tmbS51dWlkXTtcblx0XHRcdFx0XHRcdGZtLmFsaWFzID0gW3BhdGguam9pbihcIiAvIFwiKV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdCk7XG5cblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIndvcmtzcGFjZSAtIGxheW91dC1yZWFkeVwiKTtcblx0XHRcdGZvciAoY29uc3QgZiBvZiB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpKSB7XG5cdFx0XHRcdGlmICghSGVscGVyLmlzVVVJRChmLmJhc2VuYW1lKSkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy52YXVsdENvbnRlbnREaWN0W2YuYmFzZW5hbWVdID0gZjtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5sb2FkSW5kZXgoKTtcblx0XHR9KTtcblx0fVxuXG5cdGdldEluZGV4RG9tYWlucygpIHtcblx0XHRjb25zdCBpbmRleFBhdGggPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmRleC5tZFwiKTtcblx0XHRjb25zdCBpbmRleCA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGluZGV4UGF0aCk7XG5cdFx0Y29uc3QgZG9tYWlucyA9IFtdO1xuXG5cdFx0bGV0IHN0YXJ0ID0gdW5kZWZpbmVkO1xuXHRcdGxldCBlbmQgPSB1bmRlZmluZWQ7XG5cdFx0bGV0IGZvdW5kID0gZmFsc2U7XG5cblx0XHQvLyByZWNoZXJjaGUgZHUgdG9wIGxldmVsIGhlYWRpbmcgYCMjIGRvbWFpbnNgXG5cdFx0Zm9yIChjb25zdCBoZWFkaW5nIG9mIGluZGV4LmhlYWRpbmdzKSB7XG5cdFx0XHRpZiAoaGVhZGluZy5sZXZlbCA9PT0gMiAmJiBmb3VuZCkge1xuXHRcdFx0XHRlbmQgPSBoZWFkaW5nLnBvc2l0aW9uLnN0YXJ0Lm9mZnNldDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9IGVsc2UgaWYgKGhlYWRpbmcubGV2ZWwgPT09IDIgJiYgaGVhZGluZy5oZWFkaW5nID09PSBcImRvbWFpbnNcIikge1xuXHRcdFx0XHRzdGFydCA9IGhlYWRpbmcucG9zaXRpb24uZW5kLm9mZnNldDtcblx0XHRcdFx0Zm91bmQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIHJlY2hlcmNoZSBkZXMgbGllbnMgcXVpIHNvbnQgY29udGVudXMgZGFucyBsZXMgYm9ybmVzIGR1IHRvcCBsZXZlbCBoZWFkaW5nIGAjIyBkb21haW5zYFxuXHRcdGZvciAoY29uc3QgbGluayBvZiBpbmRleC5saW5rcykge1xuXHRcdFx0Y29uc3QgcG9zID0gbGluay5wb3NpdGlvbjtcblx0XHRcdGlmIChwb3Muc3RhcnQub2Zmc2V0IDwgc3RhcnQgfHwgcG9zLmVuZC5vZmZzZXQgPiBlbmQpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGluZGV4Q29udGVudCA9IHRoaXMuZ2V0RmlsZUNhY2hlRnJvbVVVSUQobGluay5saW5rKTtcblx0XHRcdGlmIChpbmRleENvbnRlbnQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGluZGV4Q29udGVudC5oZWFkaW5ncy5sZW5ndGggPCAyKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEludmFsaWQgSW5kZXg6ICR7bGluay5saW5rfWApO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0ZG9tYWlucy5wdXNoKGluZGV4Q29udGVudCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRvbWFpbnM7XG5cdH1cblxuXHRnZXREb21haW5Db21wb25lbnRzKGRvbWFpbnMpIHtcblx0XHQvLyByZWNoZXJjaGUgZGFucyBsZXMgaW5kZXggZGVzIGRvbWFpbnMgcmVzcGVjdGlmcyBzJ2lsIHkgYSBwclx1MDBFOXNlbmNlIGQndW5lIGVudHJ5IGAjIyMgcGF0dGVybnNgXG5cdFx0Ly8gLT4gY29tcG9uZW50c1xuXHRcdGNvbnN0IGNvbXBvbmVudHMgPSB7fTtcblx0XHRmb3IgKGNvbnN0IGRvbWFpbiBvZiBkb21haW5zKSB7XG5cdFx0XHRjb25zdCBuYW1lID0gZG9tYWluLmhlYWRpbmdzWzFdLmhlYWRpbmc7XG5cdFx0XHRjb25zdCBzdGFydCA9IGRvbWFpbi5oZWFkaW5nc1sxXS5wb3NpdGlvbi5lbmQub2Zmc2V0O1xuXHRcdFx0bGV0IGVuZCA9IDA7XG5cdFx0XHRpZiAoZG9tYWluLmhlYWRpbmdzWzJdICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0ZW5kID0gZG9tYWluLmhlYWRpbmdzWzJdLnBvc2l0aW9uLnN0YXJ0Lm9mZnNldDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVuZCA9XG5cdFx0XHRcdFx0ZG9tYWluLnNlY3Rpb25zW2RvbWFpbi5zZWN0aW9ucy5sZW5ndGggLSAxXS5wb3NpdGlvbi5lbmRcblx0XHRcdFx0XHRcdC5vZmZzZXQ7XG5cdFx0XHR9XG5cblx0XHRcdGZvciAoY29uc3QgY29tcG9uZW50IG9mIGRvbWFpbi5saW5rcykge1xuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0Y29tcG9uZW50LnBvc2l0aW9uLnN0YXJ0Lm9mZnNldCA8IHN0YXJ0IHx8XG5cdFx0XHRcdFx0Y29tcG9uZW50LnBvc2l0aW9uLmVuZC5vZmZzZXQgPiBlbmRcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoY29tcG9uZW50c1tuYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0Y29tcG9uZW50c1tuYW1lXSA9IHt9O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgY2FjaGUgPSB0aGlzLmdldEZpbGVDYWNoZUZyb21VVUlEKFxuXHRcdFx0XHRcdHRoaXMuZXh0cmFjdFVVSURGcm9tTGluayhjb21wb25lbnQubGluayksXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0Y29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5kaXNwbGF5VGV4dDtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdCFbXG5cdFx0XHRcdFx0XHRcInBhdHRlcm5zXCIsXG5cdFx0XHRcdFx0XHRcImNvbmNlcHRzXCIsXG5cdFx0XHRcdFx0XHRcImd1aWRlbGluZXNcIixcblx0XHRcdFx0XHRcdFwicHJvY2VkdXJlc1wiLFxuXHRcdFx0XHRcdFx0XCJtYXRlcmlhbFwiLFxuXHRcdFx0XHRcdF0uY29udGFpbnMoY29tcG9uZW50TmFtZSlcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoY29tcG9uZW50c1tuYW1lXVtjb21wb25lbnROYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0Y29tcG9uZW50c1tuYW1lXVtjb21wb25lbnROYW1lXSA9IFtdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGNhY2hlLmxpbmtzID09PSB1bmRlZmluZWQgfHwgY2FjaGUubGlua3MubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmb3IgKGNvbnN0IGxpbmsgb2YgY2FjaGUubGlua3MpIHtcblx0XHRcdFx0XHRjb21wb25lbnRzW25hbWVdW2NvbXBvbmVudE5hbWVdLnB1c2goXG5cdFx0XHRcdFx0XHR0aGlzLmdldEZpbGVDYWNoZUZyb21VVUlEKFxuXHRcdFx0XHRcdFx0XHR0aGlzLmV4dHJhY3RVVUlERnJvbUxpbmsobGluay5saW5rKSxcblx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjb21wb25lbnRzO1xuXHR9XG5cblx0Y29tbW9uRGF0YVZhbGlkYXRpb24ocGF0aDogc3RyaW5nW10sIG5vdGU6IENhY2hlZE1ldGFkYXRhKSB7XG5cdFx0Ly8gcGFzIGQnYWNjZXMgYXUgbm9tIGR1IGZpY2hpZXIsIGF1IGNoZW1pbiBhdmVjIGxlIENhY2hlZE1ldGFkYXRhXG5cdFx0Ly8gY291bnQgZGUgaGVhZGluZ3MgbGV2ZWwgMyA9PT0gMVxuXHRcdGNvbnN0IGZtID0gbm90ZS5mcm9udG1hdHRlcjtcblx0XHRBc3NlcnQuVHJ1ZShcblx0XHRcdGZtICE9PSB1bmRlZmluZWQsXG5cdFx0XHRgSW52YWxpZCBGcm9udE1hdHRlciBpbjogJHtwYXRoLmpvaW4oXCIvXCIpfWAsXG5cdFx0KTtcblx0XHRBc3NlcnQuVHJ1ZShub3RlLmhlYWRpbmdzICE9PSB1bmRlZmluZWQsIGBCbGFuayByZXNvdXJjZTogJHtmbS51dWlkfWApO1xuXHR9XG5cblx0Z2V0Q29udGVudEJvdW5kYXJpZXMobm90ZTogQ2FjaGVkTWV0YWRhdGEpIHtcblx0XHQvLyBsb2NhdGUgY29udGVudCBvZmZzZXRcblx0XHRjb25zdCBmbSA9IG5vdGUuZnJvbnRtYXR0ZXI7XG5cdFx0bGV0IGZvdW5kID0gZmFsc2U7XG5cdFx0bGV0IHN0YXJ0ID0gMDtcblx0XHRsZXQgZW5kID0gMDtcblxuXHRcdGZvciAoY29uc3QgaGVhZGluZyBvZiBub3RlLmhlYWRpbmdzKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdGhlYWRpbmcubGV2ZWwgPT09IDIgJiZcblx0XHRcdFx0aGVhZGluZy5oZWFkaW5nLnRvTG93ZXJDYXNlKCkgPT09IFwiY29udGVudFwiXG5cdFx0XHQpIHtcblx0XHRcdFx0Zm91bmQgPSB0cnVlO1xuXHRcdFx0XHRzdGFydCA9IGhlYWRpbmcucG9zaXRpb24uZW5kLm9mZnNldDtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHQvLyBzJ2lsIHkgYSB1biBhdXRyZSBoZWFkaW5nIGxldmVsIDIgYXByZXMsIGVuZCA9IHN0YXJ0Lm9mZnNldFxuXHRcdFx0aWYgKFxuXHRcdFx0XHRmb3VuZCAmJlxuXHRcdFx0XHRoZWFkaW5nLmxldmVsID09PSAyICYmXG5cdFx0XHRcdGhlYWRpbmcuaGVhZGluZy50b0xvd2VyQ2FzZSgpICE9PSBcImNvbnRlbnRcIlxuXHRcdFx0KSB7XG5cdFx0XHRcdGVuZCA9IGhlYWRpbmcucG9zaXRpb24uc3RhcnQub2Zmc2V0O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRBc3NlcnQuVHJ1ZShmb3VuZCwgYFJlc291cmNlIGRvZXMgbm90IGRlY2xhcmVzIGNvbnRlbnQ6ICR7Zm0udXVpZH1gKTtcblx0XHQvLyBzaW5vbiBlbmQgPSBlbmQgZG9jdW1lbnRcblx0XHRpZiAoZW5kID09PSAwKSB7XG5cdFx0XHRlbmQgPSBub3RlLnNlY3Rpb25zW25vdGUuc2VjdGlvbnMubGVuZ3RoIC0gMV0ucG9zaXRpb24uZW5kLm9mZnNldDtcblx0XHR9XG5cblx0XHRyZXR1cm4gW3N0YXJ0LCBlbmRdO1xuXHR9XG5cblx0Z2V0UmVzb3VyY2VOYW1lKG5vdGU6IENhY2hlZE1ldGFkYXRhLCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHN0cmluZyB7XG5cdFx0bGV0IHJlc291cmNlTmFtZSA9IFwiXCI7XG5cdFx0bGV0IGx2bDNIZWFkaW5nQ291bnQgPSAwO1xuXHRcdGNvbnN0IGZtID0gbm90ZS5mcm9udG1hdHRlcjtcblxuXHRcdGZvciAoY29uc3QgaGVhZGluZyBvZiBub3RlLmhlYWRpbmdzKSB7XG5cdFx0XHQvLyBoZWFkaW5nIGx2bCAzIGluIGJvdW5kIG9mIGBjb250ZW50YFxuXHRcdFx0aWYgKFxuXHRcdFx0XHRoZWFkaW5nLmxldmVsID09PSAzICYmXG5cdFx0XHRcdGhlYWRpbmcucG9zaXRpb24uc3RhcnQub2Zmc2V0ID4gc3RhcnQgJiZcblx0XHRcdFx0aGVhZGluZy5wb3NpdGlvbi5lbmQub2Zmc2V0IDwgZW5kXG5cdFx0XHQpIHtcblx0XHRcdFx0cmVzb3VyY2VOYW1lID0gaGVhZGluZy5oZWFkaW5nO1xuXHRcdFx0XHRsdmwzSGVhZGluZ0NvdW50Kys7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gZGFucyAjIyBDb250ZW50XG5cdFx0Ly8gdW4gc2V1bCBoZWFkaW5nIG5pdmVhdSAzXG5cdFx0Ly8gQXNzZXJ0LkZhbHNlKFxuXHRcdC8vICAgbHZsM0hlYWRpbmdDb3VudCA9PT0gMCxcblx0XHQvLyAgIGBSZXNvdXJjZSBkb2VzIG5vdCBkZWNsYXJlcyBhIG5hbWU6ICR7Zm0udXVpZH1gLFxuXHRcdC8vICk7XG5cdFx0QXNzZXJ0LkZhbHNlKFxuXHRcdFx0bHZsM0hlYWRpbmdDb3VudCA+IDEsXG5cdFx0XHRgUmVzb3VyY2UgaGFzIG11bHRpcGxlIG5hbWVzOiAke2ZtLnV1aWR9YCxcblx0XHQpO1xuXG5cdFx0cmV0dXJuIHJlc291cmNlTmFtZTtcblx0fVxuXG5cdHBhcnNlQ29tcG9uZW50Q29uY2VwdHMocGF0aDogc3RyaW5nW10sIG5vdGU6IENhY2hlZE1ldGFkYXRhLCBxLCByZXN1bHRzKSB7XG5cdFx0dGhpcy5jb21tb25EYXRhVmFsaWRhdGlvbihwYXRoLCBub3RlKTtcblx0XHRjb25zdCBbc3RhcnQsIGVuZF0gPSB0aGlzLmdldENvbnRlbnRCb3VuZGFyaWVzKG5vdGUpO1xuXHRcdGNvbnN0IHJlc291cmNlTmFtZSA9IHRoaXMuZ2V0UmVzb3VyY2VOYW1lKG5vdGUsIHN0YXJ0LCBlbmQpO1xuXHRcdGNvbnN0IGZtID0gbm90ZS5mcm9udG1hdHRlcjtcblxuXHRcdHJlc3VsdHMucHVzaChbWy4uLnBhdGgsIHJlc291cmNlTmFtZV0sIG5vdGVdKTtcblxuXHRcdC8vIGxlYWZcblx0XHRpZiAobm90ZS5saW5rcyA9PT0gdW5kZWZpbmVkIHx8IG5vdGUubGlua3MubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Zm9yIChjb25zdCBsaW5rIG9mIG5vdGUubGlua3MpIHtcblx0XHRcdC8vIGxpbmsgaW4gYm91bmQgY29udGVudCBoZWFkaW5nXG5cdFx0XHQvLyBzaG91bGQgYmUgbmFtZSwgYnV0IGNvbnRlbnQgYm91bmRhcmllcyBhcmUga25vd24gYW5kIHNpbWlsYXJcblx0XHRcdGlmIChcblx0XHRcdFx0bGluay5wb3NpdGlvbi5zdGFydC5vZmZzZXQgPiBzdGFydCAmJlxuXHRcdFx0XHRsaW5rLnBvc2l0aW9uLmVuZC5vZmZzZXQgPCBlbmRcblx0XHRcdCkge1xuXHRcdFx0XHQvLyB0aGVyZSBpcyBhbiBpbiBib3VuZCBsaW5rXG5cdFx0XHRcdC8vIHJlc291cmNlIGlzIGNvbnNpZGVyZWQgYSBub2RlXG5cdFx0XHRcdEFzc2VydC5UcnVlKFxuXHRcdFx0XHRcdEhlbHBlci5pc1VVSUQobGluay5saW5rLnNsaWNlKDAsIDM2KSksXG5cdFx0XHRcdFx0YEludmFsaWQgbGluayBpbiByZXNvdXJjZTogJHtmbS51dWlkfWAsXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGlmICghSGVscGVyLmlzVVVJRChsaW5rLmxpbmsuc2xpY2UoMCwgMzYpKSkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgZiA9IHRoaXMuZ2V0RmlsZUNhY2hlRnJvbVVVSUQoXG5cdFx0XHRcdFx0dGhpcy5leHRyYWN0VVVJREZyb21MaW5rKGxpbmsubGluayksXG5cdFx0XHRcdCk7XG5cdFx0XHRcdC8vIGVycmV1cnMgZGUgZm9ybWF0cyBwYXNzXHUwMEU5ZXMgc291cyBzaWxlbmNlXG5cdFx0XHRcdC8vIG9uIGlnbm9yZSBsZXMgbGllbiB2ZXJzIGxlcyByZXNvdXJjZXMgYXV0cmUgcXVlIFBlcm1hbmVudFxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0ZiA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdFx0Zi5mcm9udG1hdHRlciA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdFx0Zi5mcm9udG1hdHRlci50eXBlICE9PSAyXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cS5wdXNoKFtbLi4ucGF0aCwgcmVzb3VyY2VOYW1lXSwgZl0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyB1dGlsaXR5IGxpbmtcblx0XHQvLyBkZXRlY3RlciB1dWlkXG5cdFx0Ly8gZGV0ZWN0ZXIgbGluayB2ZXJzIHJlc291cmNlIG1hcmtkb3duXG5cdFx0Ly8gZGV0ZWN0ZXIgbGluayB2ZXJzIGFzc2V0XG5cdFx0Ly9cblx0fVxuXG5cdHBhcnNlQ29tcG9uZW50UGF0dGVybnMocGF0aDogc3RyaW5nW10sIG5vdGU6IENhY2hlZE1ldGFkYXRhLCBxLCByZXN1bHRzKSB7XG5cdFx0dGhpcy5jb21tb25EYXRhVmFsaWRhdGlvbihwYXRoLCBub3RlKTtcblx0XHRjb25zdCBbc3RhcnQsIGVuZF0gPSB0aGlzLmdldENvbnRlbnRCb3VuZGFyaWVzKG5vdGUpO1xuXHRcdGNvbnN0IHJlc291cmNlTmFtZSA9IHRoaXMuZ2V0UmVzb3VyY2VOYW1lKG5vdGUsIHN0YXJ0LCBlbmQpO1xuXG5cdFx0aWYgKHRoaXMuaXNTZXF1ZW5jZShub3RlKSkge1xuXHRcdFx0Ly8gZG9tYWluIG5hbWUgLyBwYXR0ZXJucyAvIHBhdHRlcm4gbmFtZSBhIC8gcGF0dGVybiBuYW1lIGIgLyBzZXF1ZW5jZSBuYW1lIC0+IHV1aWQgfCBmaWxlIGNhY2hlIHwgZmlsZSBwYXRoXG5cdFx0XHRyZXN1bHRzLnB1c2goW1suLi5wYXRoLCByZXNvdXJjZU5hbWVdLCBub3RlXSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKG5vdGUubGlua3MgPT09IHVuZGVmaW5lZCB8fCBub3RlLmxpbmtzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGZvciAoY29uc3QgbGluayBvZiBub3RlLmxpbmtzKSB7XG5cdFx0XHQvLyBsaW5rIGluIGJvdW5kIG5hbWVIZWFkaW5nXG5cdFx0XHRpZiAoXG5cdFx0XHRcdGxpbmsucG9zaXRpb24uc3RhcnQub2Zmc2V0IDwgc3RhcnQgfHxcblx0XHRcdFx0bGluay5wb3NpdGlvbi5lbmQub2Zmc2V0ID4gZW5kXG5cdFx0XHQpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGNvbnNvbGUubG9nKGxpbmsubGluay5zbGljZShsaW5rLmxpbmsubGVuZ3RoLTMsIGxpbmsubGluay5sZW5ndGgpKVxuXHRcdFx0aWYgKCFIZWxwZXIuaXNVVUlEKGxpbmsubGluay5zbGljZSgwLCAzNikpKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBmID0gdGhpcy5nZXRGaWxlQ2FjaGVGcm9tVVVJRChcblx0XHRcdFx0dGhpcy5leHRyYWN0VVVJREZyb21MaW5rKGxpbmsubGluayksXG5cdFx0XHQpO1xuXG5cdFx0XHRpZiAoXG5cdFx0XHRcdGYgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHRmLmZyb250bWF0dGVyID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0Zi5mcm9udG1hdHRlci50eXBlICE9PSAyXG5cdFx0XHQpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdHEucHVzaChbWy4uLnBhdGgsIHJlc291cmNlTmFtZV0sIGZdKTtcblx0XHR9XG5cdH1cblxuXHRwYXJzZUNvbXBvbmVudFRyZWUoY29tcG9uZW50cywgZG9tYWluTmFtZSwgY29tcG9uZW50TmFtZSkge1xuXHRcdGNvbnN0IHEgPSBbXTtcblx0XHRjb25zdCByZXN1bHRzID0gW107XG5cblx0XHRpZiAoY29tcG9uZW50c1tkb21haW5OYW1lXVtjb21wb25lbnROYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Zm9yIChjb25zdCBwYXR0ZXJuIG9mIGNvbXBvbmVudHNbZG9tYWluTmFtZV1bY29tcG9uZW50TmFtZV0pIHtcblx0XHRcdHEucHVzaChbW2RvbWFpbk5hbWUsIGNvbXBvbmVudE5hbWVdLCBwYXR0ZXJuXSk7XG5cdFx0fVxuXG5cdFx0Ly8gbGVzIGxpbmtzIGRvaXZlbnQgZXRyZSBpbiBib3VuZCBkYW5zIGAjIyMgbmFtZWBcblx0XHR3aGlsZSAocS5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBbcGF0aCwgbm90ZV0gPSBxLnNoaWZ0KCk7XG5cdFx0XHQvLyBpbCB5IGEgdW4gYnVnIHBvdXIgbGVzIGNvbmNlcHRzIHF1aSB1dGlsaXNlbnQgZGVzIGxpZW5zIGlubGluZSB2ZXJzIGQnYXV0cmVzIHJlc291cmNlcyBkb250IGVsbGVzIG5lIHNvbnQgcGFzIHVuIGNvbnRhaW5lciBkaXJlY3Rcblx0XHRcdC8vIGV4ZW1wbGUgcG91ciB1bmUgcmVmZXJlbmNlIGlubGluZVxuXHRcdFx0Ly8gYXZlYyBsZSBzY2hlbWUgYWN0dWVsXG5cdFx0XHQvLyBsZSBkb21haW4gc2UgdHJvdXZlIFx1MDBFMCBsJ2luZGV4IDBcblx0XHRcdC8vIGxlIG5vbSBkdSBjb21wb25lbnQgc2UgdHJvdXZlIFx1MDBFMCBsJ2luZGV4IDEgZHUgY2hlbWluXG5cdFx0XHRBc3NlcnQuVHJ1ZShwYXRoLmxlbmd0aCA+PSAyLCBgSW52YWxpZCBjb21wb25lbnQgcGF0aDogJHtwYXRofWApO1xuXHRcdFx0Ly8gY29uc29sZS5sb2cocGF0aCk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhub3RlKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKFwiXFxuXFxuXFxuXCIpO1xuXG5cdFx0XHRjb25zdCBjb21wb25lbnROYW1lID0gcGF0aFsxXTtcblx0XHRcdHN3aXRjaCAoY29tcG9uZW50TmFtZSkge1xuXHRcdFx0XHRjYXNlIFwicGF0dGVybnNcIjpcblx0XHRcdFx0XHR0aGlzLnBhcnNlQ29tcG9uZW50UGF0dGVybnMocGF0aCwgbm90ZSwgcSwgcmVzdWx0cyk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJjb25jZXB0c1wiOlxuXHRcdFx0XHRcdHRoaXMucGFyc2VDb21wb25lbnRDb25jZXB0cyhwYXRoLCBub3RlLCBxLCByZXN1bHRzKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coYFVuc3Vwb3J0ZWQgY29tcG9uZW50OiAke2NvbXBvbmVudE5hbWV9YClcblx0XHRcdFx0Ly8gdGhyb3cgbmV3IEVycm9yKGBVbnN1cG9ydGVkIGNvbXBvbmVudDogJHtjb21wb25lbnROYW1lfWApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9XG5cblx0bG9hZEluZGV4KCkge1xuXHRcdGNvbnNvbGUubG9nKFwiZ29uZXh0IC0gbG9hZEluZGV4KClcIik7XG5cdFx0Y29uc3QgZG9tYWlucyA9IHRoaXMuZ2V0SW5kZXhEb21haW5zKCk7XG5cdFx0Y29uc3QgY29tcG9uZW50cyA9IHRoaXMuZ2V0RG9tYWluQ29tcG9uZW50cyhkb21haW5zKTtcblx0XHRjb25zdCByZW5hbWVkID0ge307XG5cblx0XHRmb3IgKGNvbnN0IGRvbWFpbiBvZiBPYmplY3Qua2V5cyhjb21wb25lbnRzKSkge1xuXHRcdFx0Zm9yIChjb25zdCBjb21wb25lbnQgb2YgT2JqZWN0LmtleXMoY29tcG9uZW50c1tkb21haW5dKSkge1xuXHRcdFx0XHRjb25zdCByZXN1bHRzID0gdGhpcy5wYXJzZUNvbXBvbmVudFRyZWUoXG5cdFx0XHRcdFx0Y29tcG9uZW50cyxcblx0XHRcdFx0XHRkb21haW4sXG5cdFx0XHRcdFx0Y29tcG9uZW50LFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRpZiAocmVzdWx0cyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCByZXNlcnZlZCA9IFtcInN0cmVuZ3RoIHJvdXRpbmVcIiwgXCJzdHJlbmd0aCByb3V0aW5lXCIsIFwic3RyZXRjaCByb3V0aW5lXCIsIFwic3RyZXRjaCByb3V0aW5lXCJdO1xuXHRcdFx0XHRmb3IgKGNvbnN0IFtwYXRoLCBub3RlXSBvZiByZXN1bHRzKSB7XG5cdFx0XHRcdFx0Y29uc3QgZm0gPSBub3RlLmZyb250bWF0dGVyO1xuXHRcdFx0XHRcdHRoaXMuZmlsZXNbZm0udXVpZF0gPSBbcGF0aCwgbm90ZV07XG5cblx0XHRcdFx0XHRpZiAocmVuYW1lZFtmbS51dWlkXSAhPT0gdHJ1ZSAmJiBmbS50eXBlID09PSAyKSB7XG5cdFx0XHRcdFx0XHRpZiAoZm0uYWxpYXMgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRmbS5hbGlhcyA9IFtwYXRoLmpvaW4oXCIgLyBcIildO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGZtLmFsaWFzKSkge1xuXHRcdFx0XHRcdFx0XHRmbS5hbGlhcy5wdXNoKHBhdGguam9pbihcIiAvIFwiKSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRmbS5hbGlhcyA9IFtmbS5hbGlhcywgcGF0aC5qb2luKFwiIC8gXCIpXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJlbmFtZWRbZm0udXVpZF0gPSB0cnVlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZmluZEZpcnN0UGFyZW50SW5Eb21haW5zKGZpbGU6IFRBYnN0cmFjdEZpbGUsIHJlc291cmNlOiBDYWNoZWRNZXRhZGF0YSkge1xuXHRcdGNvbnN0IGRvbWFpbnMgPSB0aGlzLmdldEluZGV4RG9tYWlucygpO1xuXHRcdGNvbnN0IHEgPSBbXTtcblx0XHRmb3IgKGNvbnN0IGRvbWFpbiBvZiBkb21haW5zKSB7XG5cdFx0XHRxLnB1c2goZG9tYWluKTtcblx0XHR9XG5cblx0XHR3aGlsZSAocS5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBjdXIgPSBxLnBvcCgpO1xuXHRcdFx0aWYgKGN1ciA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdC8vIHNwZWNpYWwgY2FzZSBmb3IgSW5kZXhcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChjdXIubGlua3MgPT09IHVuZGVmaW5lZCB8fCBjdXIubGlua3MubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoY3VyLmZyb250bWF0dGVyID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGYgPSB0aGlzLmdldEZpbGVGcm9tVVVJRChjdXIuZnJvbnRtYXR0ZXIudXVpZCk7XG5cdFx0XHRpZiAoZiA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZi5wYXJlbnQubmFtZSAhPT0gUGF0aHMuU2xpcGJveCkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgW3N0YXJ0LCBlbmRdID0gdGhpcy5nZXRDb250ZW50Qm91bmRhcmllcyhjdXIpO1xuXHRcdFx0Zm9yIChjb25zdCBsaW5rIG9mIGN1ci5saW5rcykge1xuXHRcdFx0XHRpZiAobGluay5saW5rLmxlbmd0aCAhPT0gMzYpIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBBc3NlcnQuVHJ1ZShsaW5rLmxpbmsubGVuZ3RoID09PSAzNiwgYE5vbiAzNiBsZW5ndGggbGluazogJHtsaW5rLmxpbmt9YClcblxuXHRcdFx0XHRjb25zdCBwb3MgPSBsaW5rLnBvc2l0aW9uO1xuXHRcdFx0XHRpZiAocG9zLnN0YXJ0Lm9mZnNldCA8IHN0YXJ0IHx8IHBvcy5lbmQub2Zmc2V0ID4gZW5kKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAobGluay5saW5rID09PSByZXNvdXJjZS5mcm9udG1hdHRlci51dWlkKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGN1cjtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRxLnB1c2godGhpcy5nZXRGaWxlQ2FjaGVGcm9tVVVJRChsaW5rLmxpbmspKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdH1cblxuXHRpc1NlcXVlbmNlKG5vdGU6IENhY2hlZE1ldGFkYXRhKTogYm9vbGVhbiB7XG5cdFx0QXNzZXJ0LlRydWUoXG5cdFx0XHRub3RlLmhlYWRpbmdzLmxlbmd0aCA+IDAsXG5cdFx0XHRgaXNTZXF1ZW5jZTogSW52YWxpZCBwYXJhbWV0ZXI6IG5vdGU6ICR7bm90ZS5mcm9udG1hdHRlci51dWlkfWAsXG5cdFx0KTtcblx0XHRmb3IgKGNvbnN0IGhlYWRpbmcgb2Ygbm90ZS5oZWFkaW5ncykge1xuXHRcdFx0aWYgKGhlYWRpbmcubGV2ZWwgPT09IDQgJiYgaGVhZGluZy5oZWFkaW5nID09PSBcInN0ZXBzXCIpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJnb25leHQgLSBvbnVubG9hZCgpXCIpO1xuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHRkZWxldGUgd2luZG93LmdvbmV4dDtcblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcblx0XHRcdHt9LFxuXHRcdFx0REVGQVVMVF9TRVRUSU5HUyxcblx0XHRcdGF3YWl0IHRoaXMubG9hZERhdGEoKSxcblx0XHQpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIEV4YW1wbGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0Y29uc3RydWN0b3IoYXBwOiBBcHApIHtcblx0XHRzdXBlcihhcHApO1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHRjb25zdCBkdiA9IHRoaXMuYXBwLnBsdWdpbnMucGx1Z2lucy5kYXRhdmlldy5hcGk7XG5cdFx0Y29uc3QgdGFza3MgPSBkdi5wYWdlcygpLmFycmF5KCkuc2xpY2UoMCwgMTApO1xuXHRcdGxldCBzID0gXCJcIjtcblx0XHRmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcblx0XHRcdHMgKz0gYCR7dGFzay5maWxlLnBhdGh9XFxuXFxuYDtcblx0XHR9XG5cdFx0Y29udGVudEVsLnNldFRleHQocyk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG4iLCAiZXhwb3J0IGNvbnN0IFBhdGhzID0ge1xuXHRUYXNrczogXCI4MTMgVGFza3NcIixcblx0Q29tcG9uZW50czogXCJDb21wb25lbnRzXCIsXG5cdEdvYWxzOiBcIkdvYWxzXCIsXG5cdFNsaXBib3g6IFwiODAzIFNsaXBib3hcIixcblx0SW5ib3g6IFwiODAwIEluYm94XCIsXG5cdFJlZnM6IFwiODAyIFJlZnNcIixcblx0QXJjaGl2ZXM6IFwiNDAwIEFyY2hpdmVzXCIsXG5cdExvZ3M6IFwiNjAwIExvZ1wiLFxuXHRBdHRhY2htZW50czogXCIwMDAgQXR0YWNobWVudHNcIixcblx0Sm91cm5hbDogXCJKb3VybmFsXCIsXG5cdFJlc291cmNlczogXCJSZXNvdXJjZXNcIixcblx0UHJvamVjdHM6IFwiMTAwIFByb2plY3RzXCIsXG5cdERvbWFpbnM6IFwiRG9tYWluc1wiLFxuXHROYW1lczogXCJOYW1lc1wiLFxufTtcblxuZXhwb3J0IGNvbnN0IFN0YXR1cyA9IHtcblx0VG9kbzogXCJ0b2RvXCIsXG5cdERvaW5nOiBcImRvaW5nXCIsXG5cdERvbmU6IFwiZG9uZVwiLFxuXHRNYXliZTogXCJtYXliZVwiLFxuXHRTdGFuZGJ5OiBcInN0YW5kYnlcIixcblx0VHJhc2g6IFwidHJhc2hcIixcbn07XG5leHBvcnQgY29uc3QgR29hbFN0YXR1cyA9IHtcblx0UmVmcmFtZTogXCJyZWZyYW1lXCIsXG5cdFJlc2VhcmNoOiBcInJlc2VhcmNoXCIsXG5cdE9wZXJhdGlvbmFsaXplOiBcIm9wZXJhdGlvbmFsaXplXCIsXG5cdFBsYW5pZnk6IFwicGxhbmlmeVwiLFxuXHREZXBlbmRhbnQ6IFwiZGVwZW5kYW50XCIsXG5cdEFjdGl2ZTogXCJhY3RpdmVcIixcblx0RmFpbGVkOiBcImZhaWxlZFwiLFxuXHRTdWNjZXNzOiBcInN1Y2Nlc3NcIixcbn07XG5cbmV4cG9ydCBjb25zdCBUeXBlcyA9IHtcblx0RmxlZXRpbmc6IDEzLFxuXHRMaXRlcmF0dXJlOiAxLFxuXHRQZXJtYW5lbnQ6IDIsXG5cdFRhc2s6IDMsXG5cdFByYXhpczogNCxcblx0UHJvdmlzaW9uOiA1LFxuXHRMb2c6IDYsXG5cdFJlc291cmNlOiA3LFxuXHRNZWRpYTogOCxcblx0UHJvamVjdDogMTIsXG5cdE9yZzogOSxcblx0RG9tYWluOiAxMCxcblx0Q29tcG9uZW50OiAxMSxcbn07XG5cbmV4cG9ydCBjb25zdCBOYW1lc3BhY2UgPSB7XG5cdEFyZWE6IFwiYXJlYVwiLFxuXHRDb250ZXh0OiBcImNvbnRleHRcIixcblx0TGF5ZXI6IFwibGF5ZXJcIixcblx0T3JnOiBcIm9yZ1wiLFxuXHRQcm9qZWN0OiBcInByb2plY3RcIixcbn07XG5cbmV4cG9ydCBjb25zdCBEZWZhdWx0ID0ge1xuXHRBcmVhOiBcIm5vbmVcIixcblx0Q29udGV4dDogXCJhbnlcIixcblx0TGF5ZXI6IFwibm9uZVwiLFxuXHRPcmc6IFwibm9uZVwiLFxuXHRQcm9qZWN0OiBcIm5vbmVcIixcbn07XG4iLCAiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuXG4vKipcbiAqIENvbnZlcnQgYXJyYXkgb2YgMTYgYnl0ZSB2YWx1ZXMgdG8gVVVJRCBzdHJpbmcgZm9ybWF0IG9mIHRoZSBmb3JtOlxuICogWFhYWFhYWFgtWFhYWC1YWFhYLVhYWFgtWFhYWFhYWFhYWFhYXG4gKi9cbnZhciBieXRlVG9IZXggPSBbXTtcbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4LnB1c2goKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnNsaWNlKDEpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIC8vIE5vdGU6IEJlIGNhcmVmdWwgZWRpdGluZyB0aGlzIGNvZGUhICBJdCdzIGJlZW4gdHVuZWQgZm9yIHBlcmZvcm1hbmNlXG4gIC8vIGFuZCB3b3JrcyBpbiB3YXlzIHlvdSBtYXkgbm90IGV4cGVjdC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZC9wdWxsLzQzNFxuICAvL1xuICAvLyBOb3RlIHRvIGZ1dHVyZS1zZWxmOiBObywgeW91IGNhbid0IHJlbW92ZSB0aGUgYHRvTG93ZXJDYXNlKClgIGNhbGwuXG4gIC8vIFJFRjogaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkL3B1bGwvNjc3I2lzc3VlY29tbWVudC0xNzU3MzUxMzUxXG4gIHJldHVybiAoYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAzXV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA5XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDExXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEzXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE1XV0pLnRvTG93ZXJDYXNlKCk7XG59XG5mdW5jdGlvbiBzdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIHZhciB1dWlkID0gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0KTtcbiAgLy8gQ29uc2lzdGVuY3kgY2hlY2sgZm9yIHZhbGlkIFVVSUQuICBJZiB0aGlzIHRocm93cywgaXQncyBsaWtlbHkgZHVlIHRvIG9uZVxuICAvLyBvZiB0aGUgZm9sbG93aW5nOlxuICAvLyAtIE9uZSBvciBtb3JlIGlucHV0IGFycmF5IHZhbHVlcyBkb24ndCBtYXAgdG8gYSBoZXggb2N0ZXQgKGxlYWRpbmcgdG9cbiAgLy8gXCJ1bmRlZmluZWRcIiBpbiB0aGUgdXVpZClcbiAgLy8gLSBJbnZhbGlkIGlucHV0IHZhbHVlcyBmb3IgdGhlIFJGQyBgdmVyc2lvbmAgb3IgYHZhcmlhbnRgIGZpZWxkc1xuICBpZiAoIXZhbGlkYXRlKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgfVxuICByZXR1cm4gdXVpZDtcbn1cbmV4cG9ydCBkZWZhdWx0IHN0cmluZ2lmeTsiLCAiLy8gVW5pcXVlIElEIGNyZWF0aW9uIHJlcXVpcmVzIGEgaGlnaCBxdWFsaXR5IHJhbmRvbSAjIGdlbmVyYXRvci4gSW4gdGhlIGJyb3dzZXIgd2UgdGhlcmVmb3JlXG4vLyByZXF1aXJlIHRoZSBjcnlwdG8gQVBJIGFuZCBkbyBub3Qgc3VwcG9ydCBidWlsdC1pbiBmYWxsYmFjayB0byBsb3dlciBxdWFsaXR5IHJhbmRvbSBudW1iZXJcbi8vIGdlbmVyYXRvcnMgKGxpa2UgTWF0aC5yYW5kb20oKSkuXG5cbnZhciBnZXRSYW5kb21WYWx1ZXM7XG52YXIgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIC8vIGxhenkgbG9hZCBzbyB0aGF0IGVudmlyb25tZW50cyB0aGF0IG5lZWQgdG8gcG9seWZpbGwgaGF2ZSBhIGNoYW5jZSB0byBkbyBzb1xuICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgIC8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0byBpbXBsZW1lbnRhdGlvbi5cbiAgICBnZXRSYW5kb21WYWx1ZXMgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pO1xuICAgIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyeXB0by5nZXRSYW5kb21WYWx1ZXMoKSBub3Qgc3VwcG9ydGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkI2dldHJhbmRvbXZhbHVlcy1ub3Qtc3VwcG9ydGVkJyk7XG4gICAgfVxuICB9XG4gIHJldHVybiBnZXRSYW5kb21WYWx1ZXMocm5kczgpO1xufSIsICJ2YXIgcmFuZG9tVVVJRCA9IHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5yYW5kb21VVUlEICYmIGNyeXB0by5yYW5kb21VVUlELmJpbmQoY3J5cHRvKTtcbmV4cG9ydCBkZWZhdWx0IHtcbiAgcmFuZG9tVVVJRFxufTsiLCAiaW1wb3J0IG5hdGl2ZSBmcm9tICcuL25hdGl2ZS5qcyc7XG5pbXBvcnQgcm5nIGZyb20gJy4vcm5nLmpzJztcbmltcG9ydCB7IHVuc2FmZVN0cmluZ2lmeSB9IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIGlmIChuYXRpdmUucmFuZG9tVVVJRCAmJiAhYnVmICYmICFvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5hdGl2ZS5yYW5kb21VVUlEKCk7XG4gIH1cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTtcblxuICAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG4gIHJuZHNbNl0gPSBybmRzWzZdICYgMHgwZiB8IDB4NDA7XG4gIHJuZHNbOF0gPSBybmRzWzhdICYgMHgzZiB8IDB4ODA7XG5cbiAgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG4gIGlmIChidWYpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHJuZHNbaV07XG4gICAgfVxuICAgIHJldHVybiBidWY7XG4gIH1cbiAgcmV0dXJuIHVuc2FmZVN0cmluZ2lmeShybmRzKTtcbn1cbmV4cG9ydCBkZWZhdWx0IHY0OyIsICJpbXBvcnQgeyBhc3NlcnQsIGdyb3VwLCB0aW1lIH0gZnJvbSBcImNvbnNvbGVcIjtcbmltcG9ydCB7IHVuemlwIH0gZnJvbSBcInpsaWJcIjtcbmltcG9ydCB7XG4gIFBhdGhzLFxuICBTdGF0dXMsXG4gIFR5cGVzLFxuICBOYW1lc3BhY2UsXG4gIERlZmF1bHQsXG4gIEdvYWxTdGF0dXMsXG59IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcbmltcG9ydCB7IHVubGluayB9IGZyb20gXCJmc1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbm90aWZ5KG1zZzogc3RyaW5nKSB7XG4gIGNvbnN0IFBVU0hPVkVSX1VSSSA9IFwiYXBpLnB1c2hvdmVyLm5ldFwiO1xuICBjb25zdCBkID0gYXdhaXQgYXBwLnZhdWx0LnJlYWRKc29uKFwiLnB1c2hvdmVyLmpzb25cIik7XG4gIGNvbnN0IGRhdGEgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICBtZXNzYWdlOiBtc2csXG4gICAgdG9rZW46IGQucHVzaG92ZXJfdG9rZW4sXG4gICAgdXNlcjogZC5wdXNob3Zlcl91c2VyLFxuICB9KTtcbiAgY29uc29sZS5sb2coZGF0YS50b1N0cmluZygpKTtcblxuICBhd2FpdCBmZXRjaChgaHR0cHM6Ly8ke1BVU0hPVkVSX1VSSX0vMS9tZXNzYWdlcy5qc29uYCwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgLy8gbW9kZTogJ25vLWNvcnMnLFxuICAgIGNhY2hlOiBcIm5vLWNhY2hlXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgXCJDb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIixcbiAgICB9LFxuICAgIGJvZHk6IGRhdGEsXG4gIH0pO1xufVxuXG5jbGFzcyBGaWx0ZXJCeSB7XG4gIHB1YmxpYyBmbTogYW55O1xuICBwdWJsaWMgcHJlZGljYXRlczogc3RyaW5nW107XG4gIHB1YmxpYyBjb250ZXh0czogc3RyaW5nW107XG5cbiAgY29uc3RydWN0b3IoZm06IGFueSkge1xuICAgIHRoaXMuZm0gPSBmbTtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5wcmVkaWNhdGVzID0gW107XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHJlZGljYXRlcyA9IEFycmF5LmlzQXJyYXkoZm0uZmlsdGVyX2J5KSA/IGZtLmZpbHRlcl9ieSA6IFtdO1xuICAgIH1cbiAgfVxuXG4gIG5hbWVJbk5hbWVzcGFjZShmbTogYW55LCBuczogc3RyaW5nW10pIHtcbiAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICBpZiAobnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGEgb2YgbnMpIHtcbiAgICAgIGNvbnN0IHJvb3QgPSBhLnNwbGl0KFwiL1wiKTtcbiAgICAgIEFzc2VydC5UcnVlKHJvb3QubGVuZ3RoID09PSAyLCBgSW52YWxpZCB0YWc6ICcke2F9J2ApO1xuICAgICAgY29uc3QgcGFyZW50ID1cbiAgICAgICAgcm9vdFswXS5zbGljZSgwLCAxKSA9PT0gXCIhXCIgPyByb290WzBdLnNsaWNlKDEpIDogcm9vdFswXTtcbiAgICAgIGNvbnN0IG5hbWUgPSBIZWxwZXIuZ2V0VGFnKGZtLCBwYXJlbnQpO1xuXG4gICAgICBpZiAoYS5zbGljZSgwLCAxKSA9PT0gXCIhXCIpIHtcbiAgICAgICAgLy8gbmVnYXRpdmUgbWF0Y2gsIGRpc2NhcmQgZW50cnlcbiAgICAgICAgaWYgKG5hbWUgPT09IGEuc2xpY2UoMSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgLy8gbm8gbWF0Y2gsIHJlaW5pdFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcG9zaXRpdmUgbWF0Y2gsIGtlZXAgZW50cnlcbiAgICAgICAgaWYgKG5hbWUgPT09IGEpIHtcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgLy8gbm8gbWF0Y2gsIHJlaW5pdFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvdW5kID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZm91bmQ7XG4gIH1cblxuICBmaWx0ZXIoZm06IGFueSkge1xuICAgIGlmICh0aGlzLnByZWRpY2F0ZXMubGVuZ3RoID09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuICF0aGlzLm5hbWVJbk5hbWVzcGFjZShmbSwgdGhpcy5wcmVkaWNhdGVzKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRnJvbnRtYXR0ZXJKUyB7XG4gIHB1YmxpYyB1dWlkOiBzdHJpbmc7XG4gIHB1YmxpYyB2ZXJzaW9uOiBzdHJpbmc7XG4gIHB1YmxpYyB0eXBlOiBudW1iZXI7XG4gIHB1YmxpYyBjcmVhdGVkQXQ6IERhdGU7XG4gIHB1YmxpYyBhdDogRGF0ZTtcbiAgcHVibGljIGJlZm9yZTogRGF0ZTtcbiAgcHVibGljIGFmdGVyOiBEYXRlO1xuICBwdWJsaWMgY29tcG9uZW50czogc3RyaW5nW107XG4gIHB1YmxpYyBkb21haW5zOiBzdHJpbmdbXTtcbiAgcHVibGljIG5hbWVzOiBzdHJpbmdbXTtcbiAgcHVibGljIHByb2plY3RzOiBzdHJpbmdbXTtcbiAgcHVibGljIGZtO1xuICBwdWJsaWMgY29udGVudHM6IHN0cmluZ1tdO1xuICBwdWJsaWMgdHJhaXRzOiBzdHJpbmdbXTtcbiAgcHVibGljIGNvbnRleHRzOiBzdHJpbmdbXTtcbiAgcHVibGljIHN0YXR1czogc3RyaW5nO1xuICBwdWJsaWMgZjtcbiAgcHVibGljIGVuZXJneTogbnVtYmVyO1xuXG4gIHNpbmd1bGFyKHZhbHVlczogc3RyaW5nW10sIGZpZWxkOiBzdHJpbmcpIHtcbiAgICBpZiAoIUhlbHBlci5uaWxDaGVjayh0aGlzLmZtW2ZpZWxkXSkpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5mbVtmaWVsZF07XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlmICghdmFsdWVzLmNvbnRhaW5zKHZhbHVlKSkge1xuICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGAnJHtmaWVsZH0nIGlzIGlnbm9yZWQsIGludmFsaWQgZGF0YS10eXBlOiAnJHt0eXBlb2YgdGhpcy5mbVtmaWVsZF19J2AsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcGx1cmFsKHZhbHVlczogc3RyaW5nW10sIGZpZWxkOiBzdHJpbmcpIHtcbiAgICBpZiAoIUhlbHBlci5uaWxDaGVjayh0aGlzLmZtW2ZpZWxkXSkpIHtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLmZtW2ZpZWxkXSkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGAnJHtmaWVsZH0nIGlzIGlnbm9yZWQsIGludmFsaWQgZGF0YS10eXBlOiAnJHtmaWVsZH0nYCxcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5mbVtmaWVsZF0pIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBpZiAoIXZhbHVlcy5jb250YWlucyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgdmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgIGAnJHt2YWx1ZX1zLiR7dmFsdWV9JyBpcyBpZ25vcmVkLCBpbnZhbGlkIGRhdGEtdHlwZTogJyR7dHlwZW9mIHZhbHVlfSdgLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3RvcihwYWdlKSB7XG4gICAgQXNzZXJ0LlRydWUocGFnZSAhPT0gdW5kZWZpbmVkLCBcIidwYWdlJyBpcyB1bmRlZmluZWRcIik7XG4gICAgdGhpcy5mID0gcGFnZS5maWxlO1xuICAgIGNvbnN0IGYgPSB0aGlzLmY7XG4gICAgQXNzZXJ0LlRydWUoZiAhPT0gdW5kZWZpbmVkLCBcIidmJyBpcyB1bmRlZmluZWRcIik7XG4gICAgdGhpcy5mbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgQXNzZXJ0LlRydWUodGhpcy5mbSAhPT0gdW5kZWZpbmVkLCBcIidmbScgaXMgdW5kZWZpbmVkXCIpO1xuICAgIEFzc2VydC5UcnVlKFxuICAgICAgdGhpcy5mbS51dWlkICE9PSB1bmRlZmluZWQsXG4gICAgICBgJ3V1aWQnIGlzIHVuZGVmaW5lZCBmb3IgJyR7dGhpcy5mLnBhdGh9J2AsXG4gICAgKTtcbiAgICAvLyBBc3NlcnQuVHJ1ZSh0aGlzLmZtLnZlcnNpb24gIT09IHVuZGVmaW5lZCwgXCIndmVyc2lvbicgaXMgdW5kZWZpbmVkXCIpO1xuICAgIC8vIEFzc2VydC5UcnVlKGZtLmNyZWF0ZWRfYXQgIT09IHVuZGVmaW5lZCwgXCInY3JlYXRlZF9hdCcgaXMgdW5kZWZpbmVkXCIpO1xuXG4gICAgdGhpcy51dWlkID0gdGhpcy5mbS51dWlkO1xuICAgIHRoaXMudmVyc2lvbiA9IHRoaXMuZm0udmVyc2lvbjtcbiAgICB0aGlzLnR5cGUgPSB0aGlzLmZtLnR5cGU7XG4gICAgdGhpcy5jcmVhdGVkQXQgPSBuZXcgRGF0ZSh0aGlzLmZtLmNyZWF0ZWRfYXQpO1xuICAgIHRoaXMuYXQgPSB0aGlzLmZtLmF0ICE9PSB1bmRlZmluZWQgPyBuZXcgRGF0ZSh0aGlzLmZtLmF0KSA6IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5iZWZvcmUgPVxuICAgICAgdGhpcy5mbS5iZWZvcmUgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG5ldyBEYXRlKHRoaXMuZm0uYmVmb3JlKVxuICAgICAgICA6IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5hZnRlciA9XG4gICAgICB0aGlzLmZtLmFmdGVyICE9PSB1bmRlZmluZWQgPyBuZXcgRGF0ZSh0aGlzLmZtLmFmdGVyKSA6IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5jb21wb25lbnRzID0gW107XG4gICAgdGhpcy5kb21haW5zID0gW107XG4gICAgdGhpcy5wcm9qZWN0cyA9IFtdO1xuICAgIHRoaXMuY29udGV4dHMgPSBbXTtcbiAgICB0aGlzLnRyYWl0cyA9IFtdO1xuICAgIHRoaXMuZW5lcmd5ID0gdGhpcy5mbS5lbmVyZ3kgIT09IHVuZGVmaW5lZCA/IHRoaXMuZm0uZW5lcmd5IDogOTtcblxuICAgIGNvbnN0IGRvbWFpbnMgPSBbXTtcbiAgICBjb25zdCBjb21wb25lbnRzID0gW107XG4gICAgY29uc3QgcHJvamVjdHMgPSBbXTtcbiAgICBjb25zdCBuYW1lcyA9IFtdO1xuICAgIGNvbnN0IGNvbnRleHRzID0gW107XG4gICAgY29uc3QgY29udGVudHMgPSBbXTtcbiAgICBjb25zdCB0cmFpdHMgPSBbXTtcblxuICAgIGlmICghSGVscGVyLm5pbENoZWNrKHRoaXMuZm0udGFncykpIHtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLmZtLnRhZ3MpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIid0YWdzJyBpcyBpZ25vcmVkLCBpbnZhbGlkIGRhdGEtdHlwZVwiKTtcbiAgICAgICAgdGhpcy5mbS50YWdzID0gW107XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgdGFnIG9mIHRoaXMuZm0udGFncykge1xuICAgICAgICBpZiAodGFnLnNsaWNlKDAsIDcpID09PSBcImRvbWFpbi9cIikge1xuICAgICAgICAgIGRvbWFpbnMucHVzaCh0YWcuc2xpY2UoNykpO1xuICAgICAgICB9IGVsc2UgaWYgKHRhZy5zbGljZSgwLCAxMCkgPT09IFwiY29tcG9uZW50L1wiKSB7XG4gICAgICAgICAgY29tcG9uZW50cy5wdXNoKHRhZy5zbGljZSgxMCkpO1xuICAgICAgICB9IGVsc2UgaWYgKHRhZy5zbGljZSgwLCA4KSA9PT0gXCJwcm9qZWN0L1wiKSB7XG4gICAgICAgICAgcHJvamVjdHMucHVzaCh0YWcuc2xpY2UoOCkpO1xuICAgICAgICB9IGVsc2UgaWYgKHRhZy5zbGljZSgwLCA1KSA9PT0gXCJuYW1lL1wiKSB7XG4gICAgICAgICAgbmFtZXMucHVzaCh0YWcuc2xpY2UoNSkpO1xuICAgICAgICB9IGVsc2UgaWYgKHRhZy5zbGljZSgwLCA4KSA9PSBcImNvbnRleHQvXCIpIHtcbiAgICAgICAgICBjb250ZXh0cy5wdXNoKHRhZy5zbGljZSg4KSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGFnLnNsaWNlKDAsIDgpID09IFwiY29udGVudC9cIikge1xuICAgICAgICAgIGNvbnRlbnRzLnB1c2godGFnLnNsaWNlKDgpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YWcuc2xpY2UoMCwgNikgPT0gXCJ0cmFpdC9cIikge1xuICAgICAgICAgIHRyYWl0cy5wdXNoKHRhZy5zbGljZSg2KSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNpbmd1bGFyKGRvbWFpbnMsIFwiZG9tYWluXCIpO1xuICAgIHRoaXMucGx1cmFsKGRvbWFpbnMsIFwiZG9tYWluc1wiKTtcbiAgICB0aGlzLnNpbmd1bGFyKGNvbXBvbmVudHMsIFwiY29tcG9uZW50c1wiKTtcbiAgICB0aGlzLnBsdXJhbChjb21wb25lbnRzLCBcImNvbXBvbmVudHNcIik7XG4gICAgdGhpcy5zaW5ndWxhcihwcm9qZWN0cywgXCJwcm9qZWN0XCIpO1xuICAgIHRoaXMucGx1cmFsKHByb2plY3RzLCBcInByb2plY3RzXCIpO1xuICAgIHRoaXMuc2luZ3VsYXIoY29udGVudHMsIFwiY29udGVudHNcIik7XG4gICAgdGhpcy5wbHVyYWwoY29udGVudHMsIFwiY29udGVudHNcIik7XG4gICAgdGhpcy5zaW5ndWxhcihuYW1lcywgXCJuYW1lXCIpO1xuICAgIHRoaXMucGx1cmFsKG5hbWVzLCBcIm5hbWVzXCIpO1xuICAgIHRoaXMucGx1cmFsKG5hbWVzLCBcImFsaWFzXCIpO1xuICAgIHRoaXMuc2luZ3VsYXIodHJhaXRzLCBcInRyYWl0XCIpO1xuICAgIHRoaXMucGx1cmFsKHRyYWl0cywgXCJ0cmFpdHNcIik7XG5cbiAgICB0aGlzLmRvbWFpbnMgPSBkb21haW5zO1xuICAgIHRoaXMuY29tcG9uZW50cyA9IGNvbXBvbmVudHM7XG4gICAgdGhpcy5wcm9qZWN0cyA9IHByb2plY3RzO1xuICAgIHRoaXMubmFtZXMgPSBuYW1lcztcbiAgICB0aGlzLmNvbnRleHRzID0gY29udGV4dHM7XG4gICAgdGhpcy5jb250ZW50cyA9IGNvbnRlbnRzO1xuICAgIHRoaXMudHJhaXRzID0gdHJhaXRzO1xuICB9XG5cbiAgZ2V0RG9tYWluKGVtcHR5RGVmYXVsdCA9IHRydWUpOiBzdHJpbmcge1xuICAgIGlmIChlbXB0eURlZmF1bHQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRvbWFpbnNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmRvbWFpbnNbMF0gPT09IHVuZGVmaW5lZCA/IFwidW5rbm93blwiIDogdGhpcy5kb21haW5zWzBdO1xuICAgIH1cbiAgfVxuXG4gIGdldERvbWFpbnMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLmRvbWFpbnM7XG4gIH1cblxuICBnZXRUcmFpdHMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLnRyYWl0cztcbiAgfVxuXG4gIGdldENvbXBvbmVudHMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHM7XG4gIH1cblxuICBnZXRQcm9qZWN0KGVtcHR5RGVmYXVsdCA9IHRydWUpOiBzdHJpbmcge1xuICAgIGlmIChlbXB0eURlZmF1bHQpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb2plY3RzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9qZWN0c1swXSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHRoaXMucHJvamVjdHNbMF07XG4gICAgfVxuICB9XG5cbiAgZ2V0UHJvamVjdHMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLnByb2plY3RzO1xuICB9XG5cbiAgZ2V0TmFtZShlbXB0eURlZmF1bHQgPSB0cnVlKTogc3RyaW5nIHtcbiAgICBpZiAoZW1wdHlEZWZhdWx0KSB7XG4gICAgICByZXR1cm4gdGhpcy5uYW1lc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMubmFtZXNbMF0gPT09IHVuZGVmaW5lZCA/IFwiXCIgOiB0aGlzLm5hbWVzWzBdO1xuICAgIH1cbiAgfVxuXG4gIGdldENvbnRlbnQoZW1wdHlEZWZhdWx0ID0gdHJ1ZSk6IHN0cmluZyB7XG4gICAgaWYgKGVtcHR5RGVmYXVsdCkge1xuICAgICAgcmV0dXJuIHRoaXMuY29udGVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRzWzBdID09PSB1bmRlZmluZWQgPyBcIlwiIDogdGhpcy5jb250ZW50c1swXTtcbiAgICB9XG4gIH1cblxuICBnZXROYW1lcygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHRoaXMubmFtZXM7XG4gIH1cblxuICBnZXRDb250ZXh0KGVtcHR5RGVmYXVsdCA9IHRydWUpOiBzdHJpbmcge1xuICAgIGlmIChlbXB0eURlZmF1bHQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnRleHRzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZXh0c1swXSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHRoaXMuY29udGV4dHNbMF07XG4gICAgfVxuICB9XG5cbiAgcmVzb2x2ZShkdikge1xuICAgIGNvbnN0IGRvbWFpbnMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGRvbWFpbiBvZiB0aGlzLmRvbWFpbnMpIHtcbiAgICAgIGlmIChIZWxwZXIuaXNVVUlEKGRvbWFpbikpIHtcbiAgICAgICAgY29uc3QgcGFnZXMgPSBkdlxuICAgICAgICAgIC5wYWdlcyhgXCIke1BhdGhzLkRvbWFpbnN9XCJgKVxuICAgICAgICAgIC53aGVyZSgocGFnZSkgPT4gcGFnZS5maWxlLmZyb250bWF0dGVyLnV1aWQgPT09IGRvbWFpbik7XG4gICAgICAgIGlmIChwYWdlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgIH0gZWxzZSBpZiAocGFnZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgY29uc3QgcGFnZSA9IHBhZ2VzWzBdO1xuICAgICAgICAgIGRvbWFpbnMucHVzaChwYWdlLmZpbGUuZnJvbnRtYXR0ZXIubmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHBhZ2VzID0gZHZcbiAgICAgICAgICAucGFnZXMoYFwiJHtQYXRocy5Eb21haW5zfVwiYClcbiAgICAgICAgICAud2hlcmUoKHBhZ2UpID0+IHBhZ2UuZmlsZS5mcm9udG1hdHRlci5uYW1lID09PSBkb21haW4pO1xuICAgICAgICBpZiAocGFnZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICB9IGVsc2UgaWYgKHBhZ2VzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGNvbnN0IHBhZ2UgPSBwYWdlc1swXTtcbiAgICAgICAgICBkb21haW5zLnB1c2gocGFnZS5maWxlLmZyb250bWF0dGVyLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChkb21haW5zLmxlbmd0aCAhPT0gdGhpcy5kb21haW5zLmxlbmd0aCkge1xuICAgICAgY29uc29sZS53YXJuKGBEb21haW4gcmVzb2x1dGlvbiBmYWlsZWQgZm9yOiAke3RoaXMuZG9tYWluc31gKTtcbiAgICB9XG5cbiAgICB0aGlzLmRvbWFpbnMgPSBkb21haW5zO1xuICB9XG59XG5cbmNsYXNzIFZhbGlkYXRpb25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UpOyAvLyAoMSlcbiAgICB0aGlzLm5hbWUgPSBcIlZhbGlkYXRpb25FcnJvclwiOyAvLyAoMilcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgQXNzZXJ0ID0ge1xuICBUcnVlKHByZWRpY2F0ZTogYm9vbGVhbiwgbWVzc2FnZTogc3RyaW5nLCBzdHJpY3QgPSB0cnVlKSB7XG4gICAgaWYgKCFwcmVkaWNhdGUpIHtcbiAgICAgIGlmIChzdHJpY3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihtZXNzYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBGYWxzZShwcmVkaWNhdGU6IGJvb2xlYW4sIG1lc3NhZ2U6IHN0cmluZywgc3RyaWN0ID0gZmFsc2UpIHtcbiAgICBpZiAocHJlZGljYXRlKSB7XG4gICAgICBpZiAoc3RyaWN0KSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IobWVzc2FnZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCBIZWxwZXIgPSB7XG4gIG5pbENoZWNrKHZhbDogYW55KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHZhbCA9PT0gdW5kZWZpbmVkIHx8IHZhbCA9PT0gbnVsbDtcbiAgfSxcblxuICBnZXRLZXlGdWNrKGdyb3VwQnkpIHtcbiAgICBzd2l0Y2ggKGdyb3VwQnkpIHtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICBjYXNlIFwiZG9uZUF0XCI6XG4gICAgICAgIHJldHVybiAoZW50cnkpID0+XG4gICAgICAgICAgZW50cnkuZmlsZS5mcm9udG1hdHRlci5kb25lQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImNyZWF0ZWRBdFwiOlxuICAgICAgICByZXR1cm4gKGVudHJ5KSA9PlxuICAgICAgICAgIGVudHJ5LmZpbGUuZnJvbnRtYXR0ZXIuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJwcm9qZWN0XCI6XG4gICAgICAgIHJldHVybiAoZW50cnkpID0+IGVudHJ5LmZpbGUuZnJvbnRtYXR0ZXIucHJvamVjdDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiYXJlYVwiOlxuICAgICAgICByZXR1cm4gKGVudHJ5KSA9PiBlbnRyeS5maWxlLmZyb250bWF0dGVyLmFyZWE7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSxcblxuICBnZXRLZXkoZ3JvdXBCeSkge1xuICAgIHN3aXRjaCAoZ3JvdXBCeSkge1xuICAgICAgZGVmYXVsdDpcbiAgICAgIGNhc2UgXCJkb25lQXRcIjpcbiAgICAgICAgcmV0dXJuIChlbnRyeSkgPT4gZW50cnkuZG9uZUF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJjcmVhdGVkQXRcIjpcbiAgICAgICAgcmV0dXJuIChlbnRyeSkgPT4gZW50cnkuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJwcm9qZWN0XCI6XG4gICAgICAgIHJldHVybiAoZW50cnkpID0+IGVudHJ5LnByb2plY3Q7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImFyZWFcIjpcbiAgICAgICAgcmV0dXJuIChlbnRyeSkgPT4gZW50cnkuYXJlYTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9LFxuXG4gIG51bWJlclR5cGVUb1N0cmluZyh2YWwpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodmFsLnR5cGUpIHtcbiAgICAgIGNhc2UgVHlwZXMuRmxlZXRpbmc6XG4gICAgICAgIHJldHVybiBcImZsZWV0aW5nXCI7XG4gICAgICBjYXNlIFR5cGVzLkxvZzpcbiAgICAgICAgcmV0dXJuIFwibG9nXCI7XG4gICAgICBjYXNlIFR5cGVzLlByb2plY3Q6XG4gICAgICAgIHJldHVybiBcInByb2plY3RcIjtcbiAgICAgIGNhc2UgVHlwZXMuT3JnOlxuICAgICAgICByZXR1cm4gXCJvcmdcIjtcbiAgICAgIGNhc2UgVHlwZXMuRG9tYWluOlxuICAgICAgICByZXR1cm4gXCJkb21haW5cIjtcbiAgICAgIGNhc2UgVHlwZXMuQ29tcG9uZW50OlxuICAgICAgICByZXR1cm4gXCJjb21wb25lbnRcIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgbnVtYmVyVHlwZVRvU3RyaW5nOiB0eXBlOiBcIiR7dmFsLnR5cGV9XCIgbm90IGltcGxlbWVudGVkIFwiJHt2YWwudXVpZH1cImAsXG4gICAgICAgICk7XG4gICAgfVxuICB9LFxuXG4gIHJvdW5kVG9PbmVEZWNpbWFsKHZhbDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWwgKiAxMCkgLyAxMDtcbiAgfSxcblxuICBpc0NoaWxkVGFnKHBhcmVudCwgY2hpbGQpIHtcbiAgICBpZiAoY2hpbGQubGVuZ3RoIDw9IHBhcmVudC5sZW5ndGggKyAxKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChjaGlsZC5zbGljZSgwLCBwYXJlbnQubGVuZ3RoICsgMSkgIT0gYCR7cGFyZW50fS9gKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIGdldEZpZWxkKGZpZWxkLCBkZWZhdWx0VmFsdWUpIHtcbiAgICBpZiAoZmllbGQgPT09IHVuZGVmaW5lZCB8fCBmaWVsZCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZpZWxkO1xuICAgIH1cbiAgfSxcblxuICBnZXREYXRlKGR0KSB7XG4gICAgaWYgKGR0ID09PSBcIlwiIHx8IGR0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSBpZiAoZHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZHQgPSBuZXcgRGF0ZShkdCk7XG4gICAgICBpZiAoaXNOYU4oZHQpKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZHQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9LFxuXG4gIGdldFRhZyhmbSwgdHlwZSwgZW1wdHlEZWZhdWx0ID0gdW5kZWZpbmVkKSB7XG4gICAgbGV0IG5hbWUgPSBcIlwiO1xuICAgIGxldCBkZWZhdWx0VmFsdWUgPSBcIlwiO1xuXG4gICAgaWYgKHR5cGUgPT09IFwiYXJlYVwiKSB7XG4gICAgICBuYW1lID0gTmFtZXNwYWNlLkFyZWE7XG4gICAgICBkZWZhdWx0VmFsdWUgPSBEZWZhdWx0LkFyZWE7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcImNvbnRleHRcIikge1xuICAgICAgbmFtZSA9IE5hbWVzcGFjZS5Db250ZXh0O1xuICAgICAgZGVmYXVsdFZhbHVlID0gRGVmYXVsdC5Db250ZXh0O1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJsYXllclwiKSB7XG4gICAgICBuYW1lID0gTmFtZXNwYWNlLkxheWVyO1xuICAgICAgZGVmYXVsdFZhbHVlID0gRGVmYXVsdC5MYXllcjtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwib3JnXCIpIHtcbiAgICAgIG5hbWUgPSBOYW1lc3BhY2UuT3JnO1xuICAgICAgZGVmYXVsdFZhbHVlID0gRGVmYXVsdC5Pcmc7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcInByb2plY3RcIikge1xuICAgICAgbmFtZSA9IE5hbWVzcGFjZS5Qcm9qZWN0O1xuICAgICAgZGVmYXVsdFZhbHVlID0gRGVmYXVsdC5Qcm9qZWN0O1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcImRvbWFpblwiKSB7XG4gICAgICBuYW1lID0gXCJkb21haW5cIjtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IFwibm9uZVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGdldFRhZyBnb3QgdW5zdXBvcnRlZCB0eXBlOiAnJHt0eXBlfSdgKTtcbiAgICB9XG5cbiAgICBjb25zdCBsZW4gPSBuYW1lLmxlbmd0aCArIDE7XG4gICAgY29uc3QgZGVmYXVsdFRhZyA9IGAke25hbWV9LyR7ZGVmYXVsdFZhbHVlfWA7XG5cbiAgICBsZXQgZGVmYXVsdFJldFZhbCA9IGRlZmF1bHRUYWc7XG4gICAgaWYgKGVtcHR5RGVmYXVsdCkge1xuICAgICAgZGVmYXVsdFJldFZhbCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRSZXRWYWw7XG4gICAgfVxuXG4gICAgY29uc3QgdGFncyA9IGZtLnRhZ3M7XG4gICAgaWYgKHRhZ3MgPT09IHVuZGVmaW5lZCB8fCB0YWdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRSZXRWYWw7XG4gICAgfVxuICAgIC8vIC0+IHRhZyBuJ2V4aXN0ZSBwYXMgLT4gdmFsZXVyIHBhciBkZWZhdXRcbiAgICAvLyAtPiB0YWcgZXhpc3RlIG1haXMgaWwgYSB1bmUgdmFsZXVyIHBhciBkZWZhdXQgLT4gdmFsZXVyIHBhciBkZWZhdXRcbiAgICBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgICBpZiAodGFnID09IGRlZmF1bHRUYWcpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRSZXRWYWw7XG4gICAgICB9XG5cbiAgICAgIGlmICh0YWcubGVuZ3RoID4gbGVuICYmIHRhZy5zbGljZSgwLCBsZW4pID09IGAke25hbWV9L2ApIHtcbiAgICAgICAgcmV0dXJuIHRhZztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGVmYXVsdFJldFZhbDtcbiAgfSxcblxuICBnZXROYW1lKGZtKTogc3RyaW5nIHtcbiAgICBjb25zdCBjb21wb25lbnRzID0gSGVscGVyLmdldENvbXBvbmVudHMoZm0pO1xuICAgIGlmIChjb21wb25lbnRzLmxlbmd0aCA8IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSGVscGVyLmdldE5hbWUoKSAke2ZtfWApO1xuICAgIH1cblxuICAgIGxldCBuYW1lID0gdW5kZWZpbmVkO1xuICAgIGxldCBvY2N1cmVuY2VzID0gMDtcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBjb21wb25lbnRzKSB7XG4gICAgICBpZiAoY29tcG9uZW50LnNsaWNlKDAsIDE1KSA9PT0gXCJjb21wb25lbnQvbmFtZS9cIikge1xuICAgICAgICBuYW1lID0gY29tcG9uZW50LnNsaWNlKDE1KTtcbiAgICAgICAgb2NjdXJlbmNlcyArPSAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvY2N1cmVuY2VzID4gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSGVscGVyLmdldE5hbWUoKSAke2ZtfSBtdWx0aXBsZSBvY2N1cmVuY2VzIG9mICdjb21wb25lbnQvbmFtZSdgLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAobmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBIZWxwZXIuZ2V0TmFtZSgpICR7Zm19ICdjb21wb25lbnQvbmFtZScgdW5kZWZpbmVkYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5hbWU7XG4gIH0sXG5cbiAgZ2V0Q29tcG9uZW50cyhmbSkge1xuICAgIGNvbnN0IGNvbXBvbmVudHMgPSBbXTtcbiAgICBpZiAoSGVscGVyLm5pbENoZWNrKGZtLnRhZ3MpKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGZvciAoY29uc3QgdGFnIG9mIGZtLnRhZ3MpIHtcbiAgICAgIGlmICh0YWcubGVuZ3RoID4gMTAgJiYgdGFnLnNsaWNlKDAsIDEwKSA9PT0gXCJjb21wb25lbnQvXCIpIHtcbiAgICAgICAgY29tcG9uZW50cy5wdXNoKHRhZyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb21wb25lbnRzO1xuICB9LFxuXG4gIGdldEFyZWEoZm0sIGVtcHR5RGVmYXVsdCA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIEhlbHBlci5nZXRUYWcoZm0sIFwiYXJlYVwiLCBlbXB0eURlZmF1bHQpO1xuICB9LFxuXG4gIGdldENvbnRleHQoZm0sIGVtcHR5RGVmYXVsdCA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIEhlbHBlci5nZXRUYWcoZm0sIFwiY29udGV4dFwiLCBlbXB0eURlZmF1bHQpO1xuICB9LFxuXG4gIGdldERvbWFpbihmbSwgZW1wdHlEZWZhdWx0ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gSGVscGVyLmdldFRhZyhmbSwgXCJkb21haW5cIiwgZW1wdHlEZWZhdWx0KTtcbiAgfSxcblxuICBnZXRMYXllcihmbSwgZW1wdHlEZWZhdWx0ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gSGVscGVyLmdldFRhZyhmbSwgXCJsYXllclwiLCBlbXB0eURlZmF1bHQpO1xuICB9LFxuXG4gIGdldE9yZyhmbSwgZW1wdHlEZWZhdWx0ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gSGVscGVyLmdldFRhZyhmbSwgXCJvcmdcIiwgZW1wdHlEZWZhdWx0KTtcbiAgfSxcblxuICBnZXRQcm9qZWN0KGZtLCBlbXB0eURlZmF1bHQgPSBmYWxzZSkge1xuICAgIHJldHVybiBIZWxwZXIuZ2V0VGFnKGZtLCBcInByb2plY3RcIiwgZW1wdHlEZWZhdWx0KTtcbiAgfSxcblxuICBkdXJhdGlvblN0cmluZ1RvU2VjKHZhbCkge1xuICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCB8fCB2YWwubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgY29uc3QgbXVsdCA9IHZhbC5zbGljZSgtMSk7XG4gICAgbGV0IG0gPSAwO1xuICAgIGlmIChtdWx0ID09PSBcImhcIikge1xuICAgICAgbSA9IDYwICogNjA7XG4gICAgfSBlbHNlIGlmIChtdWx0ID09PSBcIm1cIikge1xuICAgICAgbSA9IDYwO1xuICAgIH0gZWxzZSBpZiAobXVsdCA9PT0gXCJkXCIpIHtcbiAgICAgIG0gPSAyNCAqIDYwICogNjA7XG4gICAgfSBlbHNlIGlmIChtdWx0ID09IFwid1wiKSB7XG4gICAgICBtID0gMjQgKiA2MCAqIDYwICogNztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKGBVbmhhbmRsZWQgY2FzZSB2YWw6ICR7dmFsfWApO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gbSAqIHBhcnNlSW50KHZhbC5zbGljZSgwLCAtMSkpO1xuICB9LFxuXG4gIG1zZWNUb1N0cmluZ0R1cmF0aW9uKHZhbDogbnVtYmVyKSB7XG4gICAgY29uc3Qgb25lSG91ckluTXNlYyA9IDM2MDAwMDA7IC8vIDEgaG91ciBpbiBtc2VjXG4gICAgY29uc3Qgb25lRGF5SW5Nc2VjID0gODY0MDAwMDA7IC8vIDEgZGF5IGluIG1zZWNcbiAgICBpZiAodmFsID49IDI0ICogb25lSG91ckluTXNlYykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgU3RyaW5nKEhlbHBlci5yb3VuZFRvT25lRGVjaW1hbCh2YWwgLyBvbmVEYXlJbk1zZWMpKS5wYWRTdGFydChcbiAgICAgICAgICAyLFxuICAgICAgICAgIFwiMFwiLFxuICAgICAgICApICsgXCIgZFwiXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBTdHJpbmcoSGVscGVyLnJvdW5kVG9PbmVEZWNpbWFsKHZhbCAvIG9uZUhvdXJJbk1zZWMpKS5wYWRTdGFydChcbiAgICAgICAgICAyLFxuICAgICAgICAgIFwiMFwiLFxuICAgICAgICApICsgXCIgaFwiXG4gICAgICApO1xuICAgIH1cbiAgfSxcblxuICBpc1VVSUQodmFsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAodHlwZW9mIHZhbCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsLmxlbmd0aCA9PT0gMzY7XG4gIH0sXG5cbiAgc29ydEJ5QWdlKGEsIGIpIHtcbiAgICBjb25zdCBmbUEgPSBuZXcgRnJvbnRtYXR0ZXJKUyhhKTtcbiAgICBjb25zdCBmbUIgPSBuZXcgRnJvbnRtYXR0ZXJKUyhiKTtcblxuICAgIHJldHVybiBmbUEuY3JlYXRlZEF0LmdldFRpbWUoKSAtIGZtQi5jcmVhdGVkQXQuZ2V0VGltZSgpO1xuICB9LFxuXG4gIHNvcnRCeVByaW9yaXR5KGEsIGIpIHtcbiAgICBjb25zdCBmbUEgPSBuZXcgRnJvbnRtYXR0ZXJKUyhhKTtcbiAgICBjb25zdCBmbUIgPSBuZXcgRnJvbnRtYXR0ZXJKUyhiKTtcblxuICAgIHJldHVybiBmbUIuZm0ucHJpb3JpdHkgLSBmbUEuZm0ucHJpb3JpdHk7XG4gIH0sXG5cbiAgc29ydEJ5UHJpb3JpdHlBbmRBZ2UoYSwgYikge1xuICAgIGNvbnN0IGZtQSA9IG5ldyBGcm9udG1hdHRlckpTKGEpO1xuICAgIGNvbnN0IGZtQiA9IG5ldyBGcm9udG1hdHRlckpTKGIpO1xuXG4gICAgaWYgKGZtQS5mbS5wcmlvcml0eSAhPT0gZm1CLmZtLnByaW9yaXR5LnByaW9yaXR5KSB7XG4gICAgICByZXR1cm4gSGVscGVyLnNvcnRCeVByaW9yaXR5KGEsIGIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gSGVscGVyLnNvcnRCeUFnZShhLCBiKTtcbiAgICB9XG4gIH0sXG5cbiAgc29ydEJ5RHVyYXRpb24oYSwgYikge1xuICAgIGNvbnN0IGZtQSA9IG5ldyBGcm9udG1hdHRlckpTKGEpO1xuICAgIGNvbnN0IGZtQiA9IG5ldyBGcm9udG1hdHRlckpTKGIpO1xuICAgIHJldHVybiAoXG4gICAgICBIZWxwZXIuZHVyYXRpb25TdHJpbmdUb1NlYyhmbUEuZm0udGltZV9lc3RpbWF0ZSkgLVxuICAgICAgSGVscGVyLmR1cmF0aW9uU3RyaW5nVG9TZWMoZm1CLmZtLnRpbWVfZXN0aW1hdGUpXG4gICAgKTtcbiAgfSxcblxuICBzb3J0QnlQcmlvcml0eUFuZER1cmF0aW9uKGEsIGIpIHtcbiAgICBjb25zdCBmbUEgPSBuZXcgRnJvbnRtYXR0ZXJKUyhhKTtcbiAgICBjb25zdCBmbUIgPSBuZXcgRnJvbnRtYXR0ZXJKUyhiKTtcblxuICAgIGlmIChmbUEuZm0ucHJpb3JpdHkgIT09IGZtQi5mbS5wcmlvcml0eSkge1xuICAgICAgcmV0dXJuIEhlbHBlci5zb3J0QnlQcmlvcml0eShhLCBiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIEhlbHBlci5zb3J0QnlEdXJhdGlvbihhLCBiKTtcbiAgICB9XG4gIH0sXG5cbiAgc29ydEJ5UHJpb3JpdHlBbmREdXJhdGlvbkFuZEFnZShhLCBiKSB7XG4gICAgY29uc3QgZm1BID0gbmV3IEZyb250bWF0dGVySlMoYSk7XG4gICAgY29uc3QgZm1CID0gbmV3IEZyb250bWF0dGVySlMoYik7XG5cbiAgICBpZiAoZm1BLmZtLnByaW9yaXR5ICE9PSBmbUIuZm0ucHJpb3JpdHkpIHtcbiAgICAgIHJldHVybiBIZWxwZXIuc29ydEJ5UHJpb3JpdHkoYSwgYik7XG4gICAgfSBlbHNlIGlmIChmbUEuZm0udGltZV9lc3RpbWF0ZSAhPT0gZm1CLmZtLnRpbWVfZXN0aW1hdGUpIHtcbiAgICAgIHJldHVybiBIZWxwZXIuc29ydEJ5RHVyYXRpb24oYSwgYik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBIZWxwZXIuc29ydEJ5QWdlKGEsIGIpO1xuICAgIH1cbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCBBdXRvRmllbGQgPSB7XG4gIHRhZ3MoZHYsIGZtLCBsZXZlbCA9IDIpIHtcbiAgICBjb25zdCB0YWdzID0gZm0udGFncztcbiAgICBpZiAodGFncyA9PSB1bmRlZmluZWQgfHwgdGFncy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0YWdzLnNvcnQoKTtcbiAgICBkdi5oZWFkZXIobGV2ZWwsIFwiVGFnc1wiKTtcbiAgICBsZXQgcyA9IFwiXCI7XG4gICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgcyArPSBgICMke3RhZ31gO1xuICAgIH1cbiAgICBkdi5wYXJhZ3JhcGgocyk7XG4gIH0sXG5cbiAgaGVhbG1vbihkdikge1xuICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMoZHYuY3VycmVudCgpKTtcbiAgICBjb25zdCBjdXJyZW50ID0gZm0uY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuXG4gICAgY29uc3QgcGFnZXMgPSBkdi5wYWdlcyhgXCIke1BhdGhzLkpvdXJuYWx9XCJgKS53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgY29uc3QgakZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICBpZiAoakZtLmdldFByb2plY3QoKSAhPT0gXCJob21lY29va1wiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgbGV0IGpDdXJyZW50ID0gbnVsbDtcbiAgICAgIC8vIGxhIGZpY2hlIGhvbWVjb29rIHNlIHRyb3V2ZSB0b3Vqb3VycyBcdTAwRTAgbGEgZGF0ZSBqLTFcbiAgICAgIGNvbnN0IGN1cnJlbnRNaW51c09uZSA9IG5ldyBEYXRlKFxuICAgICAgICBmbS5jcmVhdGVkQXQuZ2V0VGltZSgpIC0gMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICAgICk7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBvbiBzJ2ludFx1MDBFOXJlc3NlIGF1IHJlcGFzIGRlIGxhIHZlaWxsZSBkYW5zIGhlYWxtb25cbiAgICAgICAgLy8gbmUgY291dnJlIHBhcyBvdSBsZSByZXBhcyBlc3QgcHJpcyBhcHJlcyAwMGggbGUgam91ciBlbiBjb3Vyc1xuICAgICAgICAvLyBzZXJhIGdcdTAwRTlyXHUwMEU5IGF2ZWMgbGEgZmljaGUgZGlyZWN0ZW1lbnQgcG91ciBsZSBtb21lbnRcbiAgICAgICAgakN1cnJlbnQgPSBqRm0uY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIGR2LnBhcmFncmFwaChcbiAgICAgICAgICBgSW52YWxpZCBkYXRlOiAke1JlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKGR2LCBwYWdlLmZpbGUpfWAsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoakZtKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJlbnRNaW51c09uZS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKSAhPT0gakN1cnJlbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGR2LmhlYWRlcig0LCBcInJlcGFzICh2ZWlsbGUpXCIpO1xuICAgIGlmIChwYWdlcy5sZW5ndGgpIHtcbiAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuICAgICAgICBkdi5wYXJhZ3JhcGgoUmVuZGVyZXIubWFrZUxpbmtTaG9ydFVVSUQoZHYsIHBhZ2UuZmlsZSkpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBhdXRob3JzKGR2LCBmbSkge1xuICAgIGNvbnN0IGF1dGhvcnMgPSBmbS5hdXRob3JzO1xuICAgIGlmIChhdXRob3JzID09PSB1bmRlZmluZWQgfHwgYXV0aG9ycy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkdi5oZWFkZXIoMywgXCJBdXRob3JzXCIpO1xuICAgIGR2Lmxpc3QoYXV0aG9ycyk7XG4gIH0sXG5cbiAgdGl0bGUoZHYsIGZtKSB7XG4gICAgY29uc3QgdGl0bGUgPSBmbS5hbGlhcztcbiAgICBpZiAodGl0bGUgPT09IHVuZGVmaW5lZCB8fCB0aXRsZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkdi5oZWFkZXIoMywgdGl0bGUpO1xuICB9LFxuXG4gIGxvZ3MoZHYsIGVudHJpZXMpIHtcbiAgICBjb25zb2xlLmxvZyhcImNvdWNvdSwgdHUgdmV1eCB2b2lyIG1hIGJpdGU/XCIpO1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBsZXQgdG90YWxUaW1lID0gMDtcblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgY29uc3QgZm1lID0gZW50cnkuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgIGxldCBzdGFydDogYW55ID0gMDtcbiAgICAgIGxldCBzdG9wOiBhbnkgPSAwO1xuICAgICAgaWYgKGZtZSA9PT0gdW5kZWZpbmVkIHx8IGZtZS5jcmVhdGVkX2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGZyb250bWF0dGVyOiAke2ZtZS51dWlkfWApO1xuICAgICAgfVxuXG4gICAgICBzdGFydCA9IG5ldyBEYXRlKGZtZS5jcmVhdGVkX2F0KTtcbiAgICAgIGUucHVzaChzdGFydC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKSk7XG4gICAgICBpZiAoZm1lLmRvbmVfYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdG9wID0gRGF0ZS5ub3coKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0b3AgPSBuZXcgRGF0ZShmbWUuZG9uZV9hdCk7XG4gICAgICB9XG4gICAgICB0b3RhbFRpbWUgKz0gc3RvcCAtIHN0YXJ0O1xuICAgICAgZS5wdXNoKFxuICAgICAgICBkdi5zZWN0aW9uTGluayhcbiAgICAgICAgICBmbWUudXVpZCxcbiAgICAgICAgICBcIiMjIENvbnRlbnRcIixcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICBmbWUudXVpZC5zbGljZSgwLCA4KSxcbiAgICAgICAgKSxcbiAgICAgICk7XG4gICAgICBlLnB1c2goTWF0aC5yb3VuZCgoKHN0b3AgLSBzdGFydCkgLyAoMTAwMCAqIDYwICogNjApKSAqIDEwKSAvIDEwKTtcbiAgICAgIGlmIChmbWUucmV2aWV3ZWQgPT09IHVuZGVmaW5lZCB8fCBmbWUucmV2aWV3ZWQgPT09IDApIHtcbiAgICAgICAgZS5wdXNoKDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZS5wdXNoKGZtZS5yZXZpZXdlZCk7XG4gICAgICB9XG4gICAgICBidWZmLnB1c2goZSk7XG4gICAgfVxuXG4gICAgaWYgKGJ1ZmYubGVuZ3RoID4gMCkge1xuICAgICAgZHYuaGVhZGVyKDIsIFwiTG9nc1wiKTtcbiAgICAgIGR2LnRhYmxlKFtcImNyZWF0ZWRfYXRcIiwgXCJ1dWlkXCIsIFwic2Vzc2lvblwiLCBcInJldmlld2VkXCJdLCBidWZmKTtcbiAgICAgIGlmICh0b3RhbFRpbWUgPiAwKSB7XG4gICAgICAgIGR2LnBhcmFncmFwaChcbiAgICAgICAgICBgX3RvdGFsVGltZSAoaCk6XyAke01hdGgucm91bmQoKHRvdGFsVGltZSAvICgxMDAwICogNjAgKiA2MCkpICogMTApIC8gMTBcbiAgICAgICAgICB9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgbWVkaWEoZHYpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gZHYuY3VycmVudCgpO1xuICAgIGNvbnN0IGZtID0gY3VycmVudC5maWxlLmZyb250bWF0dGVyO1xuICAgIGNvbnN0IHBhZ2VzID0gZHYucGFnZXMoYFwiJHtQYXRocy5SZWZzfS8ke2ZtLnJlZl9pZH1cImApLmFycmF5KCk7XG4gICAgaWYgKHBhZ2VzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtZWRpYSA9IHBhZ2VzWzBdO1xuICAgIGNvbnN0IG1lZGlhRm0gPSBtZWRpYS5maWxlLmZyb250bWF0dGVyO1xuICAgIEF1dG9GaWVsZC50aXRsZShkdiwgbWVkaWFGbSk7XG4gICAgZHYucGFyYWdyYXBoKFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIG1lZGlhLmZpbGUpKTtcbiAgICBBdXRvRmllbGQuYXV0aG9ycyhkdiwgbWVkaWFGbSk7XG4gICAgQXV0b0ZpZWxkLnRhZ3MoZHYsIG1lZGlhRm0sIDMpO1xuXG4gICAgY29uc3QgbG9nRW50cmllcyA9IGR2XG4gICAgICAucGFnZXMoYFwiJHtQYXRocy5Mb2dzfS8ke2ZtLnV1aWR9XCJgKVxuICAgICAgLndoZXJlKChwKSA9PiBwLnR5cGUgPT09IDYpXG4gICAgICAuc29ydCgoaykgPT4gay5jcmVhdGVkX2F0LCBcImRlc2NcIik7XG4gICAgQXV0b0ZpZWxkLmxvZ3MoZHYsIGxvZ0VudHJpZXMpO1xuICB9LFxuXG4gIGF1dG9GaWVsZFRpdGxlKGR2LCBmbSkge1xuICAgIGNvbnN0IHRpdGxlID0gZm0uYWxpYXM7XG4gICAgaWYgKHRpdGxlID09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGR2LmhlYWRlcigxLCB0aXRsZSk7XG4gIH0sXG5cbiAgYXV0b0ZpZWxkQXV0aG9ycyhkdiwgZm0pIHtcbiAgICBjb25zdCBhdXRob3JzID0gZm0uYXV0aG9ycztcbiAgICBpZiAoYXV0aG9ycyA9PT0gdW5kZWZpbmVkIHx8IGF1dGhvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGR2LmhlYWRlcigyLCBcIkF1dGhvcnNcIik7XG4gICAgZHYubGlzdChhdXRob3JzKTtcbiAgfSxcblxuICBhdXRvRmllbGRUYWdzKGR2LCBmbSkge1xuICAgIGNvbnN0IHRhZ3MgPSBmbS50YWdzO1xuICAgIGlmICh0YWdzID09IHVuZGVmaW5lZCB8fCB0YWdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRhZ3Muc29ydCgpO1xuICAgIGR2LmhlYWRlcigyLCBcIlRhZ3NcIik7XG4gICAgbGV0IHMgPSBcIlwiO1xuICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAgIHMgKz0gYCAjJHt0YWd9YDtcbiAgICB9XG4gICAgZHYucGFyYWdyYXBoKHMpO1xuICB9LFxuXG4gIGxpdGVyYXR1cmUoZHYpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gZHYuY3VycmVudCgpO1xuICAgIGNvbnN0IGZtID0gY3VycmVudC5maWxlLmZyb250bWF0dGVyO1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChIZWxwZXIubmlsQ2hlY2soZm0uYXV0aG9ycykpIHtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hdXRvRmllbGRUaXRsZShkdiwgZm0pO1xuICAgICAgdGhpcy5hdXRvRmllbGRBdXRob3JzKGR2LCBmbSk7XG4gICAgICB0aGlzLmF1dG9GaWVsZFRhZ3MoZHYsIGZtKTtcbiAgICB9XG4gIH0sXG5cbiAgZ29hbChkdikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBkdi5jdXJyZW50KCk7XG4gICAgY29uc3QgZm0gPSBjdXJyZW50LmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnNvbGUud2FybihcImZtIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHRoaXMuYXV0b0ZpZWxkTmVlZChkdiwgZm0pO1xuICAgIC8vIHRoaXMuYXV0b0ZpZWxkTmVlZGVkQnkoZHYsIGN1cnJlbnQpO1xuICAgIC8vIHRoaXMuYXV0b0ZpZWxkVGFncyhkdiwgZm0pO1xuICAgIC8vXG4gICAgY29uc3QgY3JlYXRlZF9hdCA9IG5ldyBEYXRlKGZtLmNyZWF0ZWRfYXQpO1xuICAgIGNvbnN0IGxvZ0VudHJpZXMgPSBkdlxuICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuTG9nc30vJHtmbS51dWlkfVwiYClcbiAgICAgIC53aGVyZSgocCkgPT4gcC50eXBlID09PSA2KVxuICAgICAgLnNvcnQoKGspID0+IGsuY3JlYXRlZF9hdCwgXCJkZXNjXCIpO1xuXG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgbG9nRW50cmllcykge1xuICAgICAgY29uc3QgZm1lID0gZW50cnkuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IGUgPSBbXTtcblxuICAgICAgaWYgKGZtZSA9PT0gdW5kZWZpbmVkIHx8IGZtZS5jcmVhdGVkX2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGZyb250bWF0dGVyOiAke2ZtZS51dWlkfWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKGZtZS5jcmVhdGVkX2F0KTtcbiAgICAgIGUucHVzaChzdGFydC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKSk7XG5cbiAgICAgIGUucHVzaChcbiAgICAgICAgZHYuc2VjdGlvbkxpbmsoXG4gICAgICAgICAgZm1lLnV1aWQsXG4gICAgICAgICAgXCIjIyBDb250ZW50XCIsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgZm1lLnV1aWQuc2xpY2UoMCwgOCksXG4gICAgICAgICksXG4gICAgICApO1xuXG4gICAgICBidWZmLnB1c2goZSk7XG4gICAgfVxuXG4gICAgY29uc3QgYmVmb3JlID0gbmV3IERhdGUoZm0uYmVmb3JlKTtcbiAgICAvLyBkYXlzXG4gICAgY29uc3QgdGltZWZyYW1lID1cbiAgICAgIChiZWZvcmUuZ2V0VGltZSgpIC0gY3JlYXRlZF9hdC5nZXRUaW1lKCkpIC8gKDEwMDAgKiAzNjAwICogMjQpO1xuICAgIGxldCB0aW1lZnJhbWVUZXh0ID0gXCJcIjtcbiAgICAvLyAxIGpvdXJcbiAgICAvLyAxIHNlbWFpbmVcbiAgICAvLyAyIHNlbWFpbmVcbiAgICAvLyAxIG1vaXNcbiAgICAvLyAyIG1vaXNcbiAgICAvLyA2IG1vaXNcbiAgICAvLyAxIGFuXG4gICAgLy8gMiBhbnNcbiAgICAvLyA1IGFuc1xuICAgIGR2LmhlYWRlcigzLCBcIlRpbWVmcmFtZVwiKTtcbiAgICBpZiAodGltZWZyYW1lID4gMCAmJiB0aW1lZnJhbWUgPCAzMCkge1xuICAgICAgdGltZWZyYW1lVGV4dCA9IFwicnVuYXdheVwiO1xuICAgIH0gZWxzZSBpZiAodGltZWZyYW1lIDwgNjApIHtcbiAgICAgIHRpbWVmcmFtZVRleHQgPSBcIjEwLDAwMCBmZWV0XCI7XG4gICAgfSBlbHNlIGlmICh0aW1lZnJhbWUgPCAzNjApIHtcbiAgICAgIHRpbWVmcmFtZVRleHQgPSBcIjIwLDAwMCBmZWV0XCI7XG4gICAgfSBlbHNlIGlmICh0aW1lZnJhbWUgPCA3MjApIHtcbiAgICAgIHRpbWVmcmFtZVRleHQgPSBcIjMwLDAwMCBmZWV0XCI7XG4gICAgfSBlbHNlIGlmICh0aW1lZnJhbWUgPCAxMDgwKSB7XG4gICAgICB0aW1lZnJhbWVUZXh0ID0gXCI0MCwwMDAgZmVldFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aW1lZnJhbWVUZXh0ID0gXCI1MCwwMDAgZmVldFwiO1xuICAgIH1cblxuICAgIGR2LnBhcmFncmFwaCh0aW1lZnJhbWVUZXh0KTtcblxuICAgIGlmIChidWZmLmxlbmd0aCA+IDApIHtcbiAgICAgIGR2LmhlYWRlcigyLCBcIlJldmlld3NcIik7XG4gICAgICBkdi50YWJsZShbXCJyZXZpZXdlZF9hdFwiLCBcInV1aWRcIl0sIGJ1ZmYpO1xuICAgIH1cbiAgfSxcblxuICBkYWlseShkdikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBkdi5jdXJyZW50KCkuZmlsZS5mcm9udG1hdHRlcjtcbiAgICBjb25zdCBjdXJyZW50QXQgPSBuZXcgRGF0ZShjdXJyZW50LmF0KTtcbiAgICBjb25zdCBjdXJyZW50QXRTaG9ydCA9IGN1cnJlbnRBdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBnb25leHQgPSBhcHAucGx1Z2lucy5wbHVnaW5zLm9ic2lkaWFuX2dvbmV4dDtcbiAgICBjb25zdCBub3RlSGVscGVyID0gbmV3IE5vdGVIZWxwZXIoZ29uZXh0LCBkdiwgbmV3IEZyb250bWF0dGVyKGdvbmV4dCkpO1xuXG4gICAgY29uc3QgcGFnZXMgPSBkdlxuICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKVxuICAgICAgLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICAgIC8vIGlmIChwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBcdHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgIGlmIChjdXJyZW50LnV1aWQgPT09IGZtLnV1aWQpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm0uZm0uc3RhdHVzICE9PSBcInRvZG9cIiB8fCBmbS5nZXRQcm9qZWN0KCkgPT09IFwiZGFpbHlcIikge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IG5vdyA9IGN1cnJlbnRBdDtcbiAgICAgICAgbGV0IGZtQXRTaG9ydCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmbUF0U2hvcnQgPSBmbS5hdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2ZtLnV1aWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW5vdGVIZWxwZXIuaXNEb2FibGUocGFnZSwgY3VycmVudEF0KSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIChmbS51dWlkID09PSBcIjJhOTdkZTM1LWNhODctNDI2Ny05MTU5LTZjMDk2ZDQxNjNmMVwiKSB7XG4gICAgICAgIC8vIFx0Y29uc29sZS5sb2coYHV1aWQ6ICR7Zm0udXVpZH1gKTtcbiAgICAgICAgLy8gXHRjb25zb2xlLmxvZyhgbm93OiAke25vd31gKTtcbiAgICAgICAgLy8gXHRjb25zb2xlLmxvZyhgZm0uYXQ6ICR7Zm0uYXR9YCk7XG4gICAgICAgIC8vIFx0Y29uc29sZS5sb2coYGZtQXRTaG9ydDogJHtmbUF0U2hvcnR9YCk7XG4gICAgICAgIC8vIFx0Y29uc29sZS5sb2coYGN1cnJlbnRBdFNob3J0OiAke2N1cnJlbnRBdFNob3J0fWApO1xuICAgICAgICAvLyBcdGNvbnNvbGUubG9nKGBjb25kaXRpb246ICR7Zm0uYXQgIT09IHVuZGVmaW5lZCAmJiBmbUF0U2hvcnQgPT09IGN1cnJlbnRBdFNob3J0fWApO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHBhZ2UuZmlsZS5mcm9udG1hdHRlci5hdCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgZm1BdFNob3J0ID09PSBjdXJyZW50QXRTaG9ydFxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuYXQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgIGZtLmF0LmdldFRpbWUoKSA8IG5vdy5nZXRUaW1lKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgcGFnZS5maWxlLmZyb250bWF0dGVyLmJlZm9yZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgZm0uYmVmb3JlLmdldFRpbWUoKSA+IG5vdy5nZXRUaW1lKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgcGFnZS5maWxlLmZyb250bWF0dGVyLmFmdGVyICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICBmbS5hZnRlci5nZXRUaW1lKCkgPCBub3cuZ2V0VGltZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSlcbiAgICAgIC5zb3J0KChrKSA9PiBrLmF0LCBcImFzY1wiKTtcblxuICAgIGlmIChwYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBidWZmID0gW107XG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgY29uc3QgaCA9IFN0cmluZyhmbS5hdC5nZXRIb3VycygpKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgICBjb25zdCBtID0gU3RyaW5nKGZtLmF0LmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuICAgICAgaWYgKHBhZ2UuZmlsZS5mcm9udG1hdHRlci5zdGF0dXMgPT09IFwiZG9uZVwiKSB7XG4gICAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgICAgYH5+JHtSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChkdiwgcGFnZS5maWxlLCBcIlRhc2tcIil9fn5gLFxuICAgICAgICAgIGB+fiR7aH06JHttfX5+YCxcbiAgICAgICAgXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidWZmLnB1c2goW1xuICAgICAgICAgIGAke1JlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKGR2LCBwYWdlLmZpbGUsIFwiVGFza1wiKX1gLFxuICAgICAgICAgIGAke2h9OiR7bX1gLFxuICAgICAgICBdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZHYudGFibGUoW1widXVpZFwiLCBcImF0XCJdLCBidWZmKTtcblxuICAgIEF1dG9GaWVsZC5kYWlseUpvdXJhbChkdik7XG4gIH0sXG5cbiAgZGFpbHlKb3VyYWwoZHYpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gbmV3IEZyb250bWF0dGVySlMoZHYuY3VycmVudCgpKTtcbiAgICBjb25zdCBjdXJyZW50QXRTaG9ydCA9IGN1cnJlbnQuYXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgY29uc29sZS5sb2coY3VycmVudEF0U2hvcnQpO1xuICAgIGNvbnN0IHBhZ2VzID0gZHZcbiAgICAgIC5wYWdlcyhgXCJKb3VybmFsXCJgKVxuICAgICAgLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgIGNvbnN0IGF0U2hvcnQgPSBmbS5jcmVhdGVkQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgICAgIGlmIChhdFNob3J0ID09PSBjdXJyZW50QXRTaG9ydCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSlcbiAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiYXNjXCIpO1xuXG4gICAgZHYuaGVhZGVyKDIsIFwiSm91cm5hbFwiKTtcbiAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgcGFnZXMpIHtcbiAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICBpZiAocGFnZS5maWxlLmZyb250bWF0dGVyLmFsaWFzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcGFnZS5maWxlLmZyb250bWF0dGVyLm5hbWUgPSBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuYWxpYXM7XG4gICAgICB9IGVsc2UgaWYgKGZtLmdldFByb2plY3QoKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBhZ2UuZmlsZS5mcm9udG1hdHRlci5uYW1lID0gZm0uZ2V0UHJvamVjdCgpO1xuICAgICAgfSBlbHNlIGlmIChmbS5nZXREb21haW4oKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBhZ2UuZmlsZS5mcm9udG1hdHRlci5uYW1lID0gZm0uZ2V0RG9tYWluKCk7XG4gICAgICB9XG5cbiAgICAgIGR2LnBhcmFncmFwaChSZW5kZXJlci5tYWtlTGlua05hbWUoZHYsIHBhZ2UuZmlsZSkpO1xuICAgICAgLy8gZHYucGFyYWdyYXBoKFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIHBhZ2UuZmlsZSkpO1xuICAgIH1cbiAgfSxcblxuICBkYWlseUdvYWxzKGR2KSB7XG4gICAgY29uc3QgY3VycmVudCA9IGR2LmN1cnJlbnQoKS5maWxlLmZyb250bWF0dGVyO1xuICAgIGNvbnN0IGN1cnJlbnRBdCA9IG5ldyBEYXRlKGN1cnJlbnQuYXQpO1xuXG4gICAgY29uc3QgcGFnZXMgPSBkdlxuICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuR29hbHN9XCJgKVxuICAgICAgLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICAgIGlmIChwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuc3RhdHVzICE9PSBcImFjdGl2ZVwiKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnNvcnQoKGspID0+IGsuYXQsIFwiYXNjXCIpO1xuXG4gICAgaWYgKHBhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuICAgICAgZHYucGFyYWdyYXBoKFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKGR2LCBwYWdlLmZpbGUpKTtcbiAgICB9XG4gIH0sXG5cbiAgdGFzayhkdikge1xuICAgIGNvbnN0IGR2TGliID0gbmV3IER2TGliKCk7XG4gICAgZHZMaWIuYXV0b0ZpZWxkVGFzayhkdik7XG4gIH0sXG5cbiAgbG9nKGR2KSB7XG4gICAgY29uc3QgY3VycmVudCA9IGR2LmN1cnJlbnQoKTtcbiAgICBjb25zdCBjdXJGbSA9IG5ldyBGcm9udG1hdHRlckpTKGN1cnJlbnQpO1xuICAgIGNvbnN0IGN1cnJlbnRJZCA9IGN1ckZtLnV1aWQ7XG4gICAgY29uc3QgY3VycmVudFBhcmVudElkID0gY3VycmVudC5maWxlLnBhdGguc3BsaXQoXCIvXCIpWzFdO1xuICAgIEFzc2VydC5UcnVlKFxuICAgICAgY3VycmVudFBhcmVudElkICE9PSB1bmRlZmluZWQsXG4gICAgICBgY3VycmVudFBhcmVudElkIHVuZGVmaW5lZCBmb3IgJHtjdXJGbS51dWlkfWAsXG4gICAgKTtcblxuICAgIGNvbnN0IHBhZ2VzID0gZHZcbiAgICAgIC5wYWdlcyhgXCIke1BhdGhzLkxvZ3N9XCJgKVxuICAgICAgLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgIGNvbnN0IHBhcmVudElkID0gcGFnZS5maWxlLnBhdGguc3BsaXQoXCIvXCIpWzFdO1xuICAgICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgICBwYXJlbnRJZCAhPT0gdW5kZWZpbmVkLFxuICAgICAgICAgIGBwYXJlbnRJZCB1bmRlZmluZWQgZm9yICR7Zm0udXVpZH1gLFxuICAgICAgICApO1xuICAgICAgICBpZiAocGFyZW50SWQgIT09IGN1cnJlbnRQYXJlbnRJZCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSlcbiAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiYXNjXCIpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcGFnZSA9IHBhZ2VzW2ldO1xuICAgICAgQXNzZXJ0LlRydWUocGFnZSAhPT0gdW5kZWZpbmVkLCBcImFzcyBlcnQgZmFpbGVkXCIpO1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGlmIChmbS51dWlkID09PSBjdXJyZW50SWQpIHtcbiAgICAgICAgLy8gZ290Y2hhXG4gICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgY29uc3QgZHZMaWIgPSBuZXcgRHZMaWIoKTtcbiAgICAgICAgICBkdkxpYi5hdXRvRmllbGRMb2coZHYpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGR2LnBhcmFncmFwaChSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChkdiwgcGFnZXNbaSAtIDFdLmZpbGUpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbn07XG5cbi8vIHRoaXMgbXVzdCBiZSBjYWxsZWQgZnJvbSBgZGF0YXZpZXdqc2AgY29kZWJsb2Nrc1xuZXhwb3J0IGNvbnN0IFJlbmRlcmVyID0ge1xuICBtYWtlTGlua05hbWUoZHYsIGYsIGFuY2hvciA9IFwiQ29udGVudFwiKSB7XG4gICAgaWYgKEhlbHBlci5uaWxDaGVjayhmLmZyb250bWF0dGVyLm5hbWUpKSB7XG4gICAgICByZXR1cm4gUmVuZGVyZXIubWFrZUxpbmtTaG9ydFVVSUQoZHYsIGYsIGFuY2hvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGR2LnNlY3Rpb25MaW5rKGYucGF0aCwgYW5jaG9yLCBmYWxzZSwgYCR7Zi5mcm9udG1hdHRlci5uYW1lfWApO1xuICB9LFxuXG4gIG1ha2VMaW5rQWxpYXMoZHYsIGYsIGFuY2hvciA9IFwiQ29udGVudFwiKSB7XG4gICAgaWYgKEhlbHBlci5uaWxDaGVjayhmLmZyb250bWF0dGVyLmFsaWFzKSkge1xuICAgICAgcmV0dXJuIFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKGR2LCBmLCBhbmNob3IpO1xuICAgIH1cblxuICAgIHJldHVybiBkdi5zZWN0aW9uTGluayhmLnBhdGgsIGFuY2hvciwgZmFsc2UsIGAke2YuZnJvbnRtYXR0ZXIuYWxpYXN9YCk7XG4gIH0sXG5cbiAgbWFrZUxpbmtTaG9ydFVVSUQoZHYsIGYsIGFuY2hvciA9IFwiQ29udGVudFwiKSB7XG4gICAgcmV0dXJuIGR2LnNlY3Rpb25MaW5rKFxuICAgICAgZi5wYXRoLFxuICAgICAgYW5jaG9yLFxuICAgICAgZmFsc2UsXG4gICAgICBgJHtmLmZyb250bWF0dGVyLnV1aWQuc2xpY2UoMCwgOCl9YCxcbiAgICApO1xuICB9LFxuXG4gIG1ha2VMaW5rKGR2LCBmLCBuYW1lID0gdW5kZWZpbmVkLCBhbmNob3IgPSBcIkNvbnRlbnRcIikge1xuICAgIHJldHVybiBkdi5zZWN0aW9uTGluayhmLnBhdGgsIGFuY2hvciwgZmFsc2UsIG5hbWUpO1xuICB9LFxuXG4gIHByb2plY3RMb2dzKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgY29scyA9IFtcInR5cGVcIiwgXCJ0YXNrX2lkXCIsIFwibG9nX2lkXCIsIFwidG9va1wiLCBcInJldmlld2VkXCJdO1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBsZXQgdG90YWxUaW1lID0gMDtcblxuICAgIGZvciAoY29uc3QgZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCBmID0gZC5maWxlO1xuICAgICAgY29uc3QgZm0gPSBkLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgIUhlbHBlci5uaWxDaGVjayhmbS51dWlkKSxcbiAgICAgICAgYFwidXVpZFwiIGlkIG5vdCBkZWZpbmVkIGZvcjogJHtmLnBhdGh9YCxcbiAgICAgICk7XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgIUhlbHBlci5uaWxDaGVjayhmbS50eXBlKSxcbiAgICAgICAgYFwidHlwZVwiIGlkIG5vdCBkZWZpbmVkIGZvcjogJHtmLnBhdGh9YCxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGNyZWF0ZWRBdCA9IG5ldyBEYXRlKGZtLmNyZWF0ZWRfYXQpO1xuICAgICAgY29uc3QgZG9uZUF0ID0gbmV3IERhdGUoZm0uZG9uZV9hdCk7XG4gICAgICBjb25zdCBkZWx0YSA9IGRvbmVBdC5nZXRUaW1lKCkgLSBjcmVhdGVkQXQuZ2V0VGltZSgpO1xuXG4gICAgICB0b3RhbFRpbWUgKz0gZGVsdGE7XG4gICAgICBjb25zdCByZWNvcmQgPSB7XG4gICAgICAgIHRhc2tJZDogXCJcIixcbiAgICAgICAgbG9nSWQ6IFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIGYpLFxuICAgICAgICB0b29rOiBNYXRoLnJvdW5kKChkZWx0YSAvICgxMDAwICogNjAgKiA2MCkpICogMTApIC8gMTAsXG4gICAgICAgIHJldmlld2VkOiBIZWxwZXIubmlsQ2hlY2soZm0ucmV2aWV3ZWQpID8gMCA6IGZtLnJldmlld2VkLFxuICAgICAgICB0eXBlOiB1bmRlZmluZWQsXG4gICAgICB9O1xuICAgICAgY29uc3QgcGFnZXMgPSBkdi5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfS8ke2ZtLnBhcmVudF9pZH1cImApLmFycmF5KCk7XG4gICAgICBpZiAocGFnZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgcGFyZW50IHRhc2sgd2l0aCBpZDogXCIke2ZtLnBhcmVudF9pZH1cIiBkb2VzIG5vdCBleGlzdHNgLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgcGFyZW50ID0gcGFnZXNbMF07XG4gICAgICBzd2l0Y2ggKHBhcmVudC5maWxlLmZyb250bWF0dGVyLnR5cGUpIHtcbiAgICAgICAgY2FzZSBUeXBlcy5UYXNrOlxuICAgICAgICAgIHJlY29yZC50eXBlID0gYDxmb250IGNvbG9yPThCMDAwMD50YXNrPC9mb250PmA7XG4gICAgICAgICAgcmVjb3JkLnRhc2tJZCA9IFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKFxuICAgICAgICAgICAgZHYsXG4gICAgICAgICAgICBwYXJlbnQuZmlsZSxcbiAgICAgICAgICAgIFwiVGFza1wiLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZXMuTWVkaWE6XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPSBgPGZvbnQgY29sb3I9MDAwMDhCPm1lZGlhPC9mb250PmA7XG4gICAgICAgICAgcmVjb3JkLnRhc2tJZCA9IFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKFxuICAgICAgICAgICAgZHYsXG4gICAgICAgICAgICBwYXJlbnQuZmlsZSxcbiAgICAgICAgICAgIFwiQ29udGVudFwiLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZXMuUHJheGlzOlxuICAgICAgICAgIHJlY29yZC50eXBlID0gYDxmb250IGNvbG9yPUZGOEMwMD5wcmF4aXM8L2ZvbnQ+YDtcbiAgICAgICAgICByZWNvcmQudGFza0lkID0gUmVuZGVyZXIubWFrZUxpbmtTaG9ydFVVSUQoXG4gICAgICAgICAgICBkdixcbiAgICAgICAgICAgIHBhcmVudC5maWxlLFxuICAgICAgICAgICAgXCJDb250ZW50XCIsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlcy5Qcm92aXNpb246XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPSBgPGZvbnQgY29sb3I9REMxNDNDPnByb3Zpc2lvbjwvZm9udD5gO1xuICAgICAgICAgIHJlY29yZC50YXNrSWQgPSBSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChcbiAgICAgICAgICAgIGR2LFxuICAgICAgICAgICAgcGFyZW50LmZpbGUsXG4gICAgICAgICAgICBcIkNvbnRlbnRcIixcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBSZW5kZXJlci5wcm9qZWN0TG9nczogdHlwZSBcIiR7cGFyZW50LmZpbGUuZnJvbnRtYXR0ZXIudHlwZX1cIiBub3QgaW1wbGVtZW50ZWRgLFxuICAgICAgICAgICk7XG4gICAgICB9XG4gICAgICBidWZmLnB1c2goW1xuICAgICAgICByZWNvcmQudHlwZSxcbiAgICAgICAgcmVjb3JkLnRhc2tJZCxcbiAgICAgICAgcmVjb3JkLmxvZ0lkLFxuICAgICAgICByZWNvcmQudG9vayxcbiAgICAgICAgcmVjb3JkLnJldmlld2VkLFxuICAgICAgXSk7XG4gICAgfVxuXG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gICAgLy8gTWF0aC5yb3VuZCgodG90YWxUaW1lIC8gKDEwMDAgKiA2MCAqIDYwKSkgKiAxMCkgLyAxMCxcbiAgfSxcblxuICBnb2FsKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGZvciAoY29uc3QgZm0gb2YgZGF0YSkge1xuICAgICAgY29uc3QgY3JlYXRlZF9hdCA9IGZtLmNyZWF0ZWRBdDtcbiAgICAgIGNvbnN0IGxvZ0VudHJpZXMgPSBkdlxuICAgICAgICAucGFnZXMoYFwiJHtQYXRocy5Mb2dzfS8ke2ZtLnV1aWR9XCJgKVxuICAgICAgICAud2hlcmUoKHApID0+IHAudHlwZSA9PT0gNilcbiAgICAgICAgLnNvcnQoKGspID0+IGsuY3JlYXRlZF9hdCwgXCJkZXNjXCIpO1xuICAgICAgY29uc3QgYmVmb3JlID0gbmV3IERhdGUoZm0uZm0uYmVmb3JlKTtcblxuICAgICAgY29uc3QgdGltZWZyYW1lID1cbiAgICAgICAgKGJlZm9yZS5nZXRUaW1lKCkgLSBjcmVhdGVkX2F0LmdldFRpbWUoKSkgLyAoMTAwMCAqIDM2MDAgKiAyNCk7XG4gICAgICBsZXQgdGltZWZyYW1lVGV4dCA9IFwiXCI7XG4gICAgICBpZiAodGltZWZyYW1lID4gMCAmJiB0aW1lZnJhbWUgPCAzMCkge1xuICAgICAgICB0aW1lZnJhbWVUZXh0ID0gXCJydW5hd2F5XCI7XG4gICAgICB9IGVsc2UgaWYgKHRpbWVmcmFtZSA8IDYwKSB7XG4gICAgICAgIHRpbWVmcmFtZVRleHQgPSBcIjEwLDAwMCBmZWV0XCI7XG4gICAgICB9IGVsc2UgaWYgKHRpbWVmcmFtZSA8IDM2MCkge1xuICAgICAgICB0aW1lZnJhbWVUZXh0ID0gXCIyMCwwMDAgZmVldFwiO1xuICAgICAgfSBlbHNlIGlmICh0aW1lZnJhbWUgPCA3MjApIHtcbiAgICAgICAgdGltZWZyYW1lVGV4dCA9IFwiMzAsMDAwIGZlZXRcIjtcbiAgICAgIH0gZWxzZSBpZiAodGltZWZyYW1lIDwgMTA4MCkge1xuICAgICAgICB0aW1lZnJhbWVUZXh0ID0gXCI0MCwwMDAgZmVldFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGltZWZyYW1lVGV4dCA9IFwiNTAsMDAwIGZlZXRcIjtcbiAgICAgIH1cblxuICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgYmVmb3JlLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApLFxuICAgICAgICBkdi5zZWN0aW9uTGluayhcbiAgICAgICAgICBmbS51dWlkLFxuICAgICAgICAgIFwiIyMgQ29udGVudFwiLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIGZtLnV1aWQuc2xpY2UoMCwgOCksXG4gICAgICAgICksXG4gICAgICAgIGZtLmdldERvbWFpbigpLFxuICAgICAgICB0aW1lZnJhbWVUZXh0LFxuICAgICAgXSk7XG4gICAgfVxuXG4gICAgZHYudGFibGUoW1wiZGVhZGxpbmVcIiwgXCJ1dWlkXCIsIFwiZG9tYWluXCIsIFwidGltZWZyYW1lXCJdLCBidWZmKTtcbiAgfSxcblxuICBpbmJveEVudHJ5KGR2LCBkYXRhKSB7XG4gICAgY29uc3QgY29scyA9IFtcbiAgICAgIFwidXVpZFwiLFxuICAgICAgLy8gXCJ0eXBlXCIsXG4gICAgICAvLyBcImFnZVwiLFxuICAgICAgLy8gXCJzaXplXCIsXG4gICAgICBcIm5hbWVcIixcbiAgICAgIC8vIFwicHJvamVjdFwiLFxuICAgICAgLy8gXCJkb21haW5cIixcbiAgICAgIC8vIFwiY29tcG9uZW50c1wiLFxuICAgIF07XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGZvciAoY29uc3QgZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCBmID0gZC5maWxlO1xuICAgICAgY29uc3QgZm0gPSBkLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgIUhlbHBlci5uaWxDaGVjayhmbS51dWlkKSxcbiAgICAgICAgYFwidXVpZFwiIGlkIG5vdCBkZWZpbmVkIGZvcjogJHtmLnBhdGh9YCxcbiAgICAgICk7XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgIUhlbHBlci5uaWxDaGVjayhmbS50eXBlKSxcbiAgICAgICAgYFwidHlwZVwiIGlkIG5vdCBkZWZpbmVkIGZvcjogJHtmLnBhdGh9YCxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICBjb25zdCBkZWx0YSA9IG5vdy5nZXRUaW1lKCkgLSBmbS5jcmVhdGVkQXQuZ2V0VGltZSgpO1xuICAgICAgY29uc3Qgc2luY2UgPSBIZWxwZXIubXNlY1RvU3RyaW5nRHVyYXRpb24oZGVsdGEpO1xuICAgICAgbGV0IG5hbWUgPSBcIlwiO1xuXG4gICAgICBpZiAoZm0uZG9tYWluICE9PSBcImRvbWFpbi91bmRlZmluZWRcIikge1xuICAgICAgICBuYW1lID0gZm0uZG9tYWluO1xuICAgICAgfSBlbHNlIGlmIChmbS5wcm9qZWN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmFtZSA9IGZtLnByb2plY3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuYW1lID0gXCJcXFxcLVwiO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZWNvcmQgPSB7XG4gICAgICAgIHV1aWQ6XG4gICAgICAgICAgSGVscGVyLm51bWJlclR5cGVUb1N0cmluZyhmbSkgPT09IFwiZmxlZXRpbmdcIlxuICAgICAgICAgICAgPyBgJiMxMjgxOTYgJHtSZW5kZXJlci5tYWtlTGlua0FsaWFzKGR2LCBmKX1gXG4gICAgICAgICAgICA6IFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIGYpLFxuICAgICAgICAvLyB1dWlkOiBgJiM5NzI4ICR7UmVuZGVyZXIubWFrZUxpbmtBbGlhcyhkdiwgZil9YCxcbiAgICAgICAgdHlwZTogSGVscGVyLm51bWJlclR5cGVUb1N0cmluZyhmbSksXG4gICAgICAgIHNpbmNlOiBgJHtzaW5jZX1gLFxuICAgICAgICBzaXplOiBmLnNpemUsXG4gICAgICAgIHByb2plY3Q6IGZtLnByb2plY3QgPT09IHVuZGVmaW5lZCA/IFwiXFxcXC1cIiA6IGZtLnByb2plY3Quc2xpY2UoOCksXG4gICAgICAgIGRvbWFpbjogZm0uZG9tYWluID09PSB1bmRlZmluZWQgPyBcIlxcXFwtXCIgOiBmbS5kb21haW4uc2xpY2UoNyksIC8vUmVuZGVyZXIuZG9tYWluQmFzZShkdiwgZm0uZG9tYWluKSxcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgIH07XG5cbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJsb2dcIikge1xuICAgICAgICBjb25zdCBwYWdlcyA9IGR2XG4gICAgICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9LyR7Zm0ucGFyZW50X2lkfVwiYClcbiAgICAgICAgICAuYXJyYXkoKTtcbiAgICAgICAgaWYgKHBhZ2VzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtmbS5wYXJlbnRfaWR9ICR7Zm0uaWR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyZW50ID0gcGFnZXNbMF07XG4gICAgICAgIHN3aXRjaCAocGFyZW50LnR5cGUpIHtcbiAgICAgICAgICBjYXNlIFR5cGVzLlRhc2s6XG4gICAgICAgICAgICByZWNvcmQudXVpZCA9IGAmIzEyODIxMSAke3JlY29yZC51dWlkfWA7XG4gICAgICAgICAgICByZWNvcmQudHlwZSA9IGA8Zm9udCBjb2xvcj04QjAwMDA+dGFzazwvZm9udD5gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBUeXBlcy5QcmF4aXM6XG4gICAgICAgICAgICByZWNvcmQudXVpZCA9IGAmIzEyODE4OCAke3JlY29yZC51dWlkfWA7XG4gICAgICAgICAgICByZWNvcmQudHlwZSA9IGA8Zm9udCBjb2xvcj1GRjhDMDA+cHJheGlzPC9mb250PmA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFR5cGVzLk1lZGlhOlxuICAgICAgICAgICAgcmVjb3JkLnV1aWQgPSBgJiMxMjgxOTEgJHtyZWNvcmQudXVpZH1gO1xuICAgICAgICAgICAgcmVjb3JkLnR5cGUgPSBgPGZvbnQgY29sb3I9MDAwMDhCPm1lZGlhPC9mb250PmA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFR5cGVzLlByb3Zpc2lvbjpcbiAgICAgICAgICAgIHJlY29yZC50eXBlID0gYDxmb250IGNvbG9yPURDMTQzQz5wcm92aXNpb248L2ZvbnQ+YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBidWZmLnB1c2goW1xuICAgICAgICByZWNvcmQudXVpZCxcbiAgICAgICAgLy8gcmVjb3JkLnR5cGUsXG4gICAgICAgIC8vIHJlY29yZC5zaW5jZSxcbiAgICAgICAgLy8gcmVjb3JkLnNpemUsXG4gICAgICAgIHJlY29yZC5uYW1lLFxuICAgICAgICAvLyByZWNvcmQucHJvamVjdCxcbiAgICAgICAgLy8gcmVjb3JkLmRvbWFpbixcbiAgICAgIF0pO1xuICAgIH1cblxuICAgIGR2LnRhYmxlKGNvbHMsIGJ1ZmYpO1xuICB9LFxuXG4gIHJlc291cmNlQmFzZShkdiwgZGF0YSkge1xuICAgIGNvbnN0IGNvbHMgPSBbXCJ1dWlkXCJdO1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xuICAgICAgY29uc3QgZiA9IGQuZmlsZTtcbiAgICAgIGNvbnN0IGZtID0gZC5maWxlLmZyb250bWF0dGVyO1xuICAgICAgQXNzZXJ0LlRydWUoXG4gICAgICAgICFIZWxwZXIubmlsQ2hlY2soZm0udXVpZCksXG4gICAgICAgIGBcInV1aWRcIiBpZCBub3QgZGVmaW5lZCBmb3I6ICR7Zi5wYXRofWAsXG4gICAgICApO1xuICAgICAgYnVmZi5wdXNoKFtSZW5kZXJlci5tYWtlTGlua0FsaWFzKGR2LCBmKV0pO1xuICAgIH1cblxuICAgIGR2LnRhYmxlKGNvbHMsIGJ1ZmYpO1xuICB9LFxuXG4gIGJhc2ljUmVsYXRpb24oZHYsIGRhdGEpIHtcbiAgICBjb25zdCBjb2xzID0gW1widXVpZFwiLCBcIm5hbWVcIl07XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGZvciAoY29uc3QgZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCBmID0gZC5maWxlO1xuICAgICAgY29uc3QgZm0gPSBkLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgIUhlbHBlci5uaWxDaGVjayhmbS51dWlkKSxcbiAgICAgICAgYFwidXVpZFwiIGlkIG5vdCBkZWZpbmVkIGZvcjogJHtmLnBhdGh9YCxcbiAgICAgICk7XG4gICAgICBidWZmLnB1c2goW1JlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIGYpLCBmbS5uYW1lXSk7XG4gICAgfVxuXG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgcHJheGlzQmFzZShkdiwgZGF0YSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBjb25zdCBjb2xzID0gW1widGFza3NcIiwgXCJ1dWlkXCIsIFwiZXN0aW1hdGVcIl07XG4gICAgZm9yIChjb25zdCBkIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGYgPSBkLmZpbGU7XG4gICAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgICBidWZmLnB1c2goW1xuICAgICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmLm5hbWUuc2xpY2UoMCwgOCkpLFxuICAgICAgICBmbS50aW1lX2VzdGltYXRlLFxuICAgICAgXSk7XG4gICAgfVxuXG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgd2FpdGluZ1Rhc2soZHYsIGRhdGEpIHtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgY29uc3QgY29scyA9IFtcInRhc2tzXCIsIFwidXVpZFwiLCBcImVzdGltYXRlXCIsIFwiY2F1c2VcIl07XG4gICAgZm9yIChjb25zdCBkIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGYgPSBkLmZpbGU7XG4gICAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgICBidWZmLnB1c2goW1xuICAgICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmLm5hbWUuc2xpY2UoMCwgOCkpLFxuICAgICAgICBmbS50aW1lX2VzdGltYXRlLFxuICAgICAgICBmbS5jYXVzZSxcbiAgICAgIF0pO1xuICAgIH1cblxuICAgIGR2LnRhYmxlKGNvbHMsIGJ1ZmYpO1xuICB9LFxuXG4gIHJlYWR5VGFzayhkdiwgZGF0YSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBjb25zdCBjb2xzID0gW1widXVpZFwiLCBcInRhc2tcIiwgXCJlc3RpbWF0ZVwiLCBcImFyZWFcIl07XG4gICAgZm9yIChjb25zdCBkIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGYgPSBkLmZpbGU7XG4gICAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG5cbiAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIGYsIFwiVGFza1wiKSxcbiAgICAgICAgZHYubWFya2Rvd25UYXNrTGlzdChmLnRhc2tzKSxcbiAgICAgICAgZm0udGltZV9lc3RpbWF0ZSxcbiAgICAgICAgSGVscGVyLmdldEZpZWxkKEhlbHBlci5nZXRBcmVhKGZtLCB0cnVlKSwgXCJcXFxcLVwiKSxcbiAgICAgIF0pO1xuICAgIH1cbiAgICBkdi50YWJsZShjb2xzLCBidWZmKTtcbiAgfSxcblxuICBwcm92aXNpb25CYXNlKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGNvbnN0IGNvbHMgPSBbXCJ1dWlkXCIsIFwic3VwcGxpZXJcIiwgXCJjb250ZW50XCIsIFwiZXN0aW1hdGVcIl07XG4gICAgZm9yIChjb25zdCBkIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGYgPSBkLmZpbGU7XG4gICAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgICBidWZmLnB1c2goW1xuICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgZm0uc3VwcGxpZXIsXG4gICAgICAgIGR2Lm1hcmtkb3duVGFza0xpc3QoZi50YXNrcyksXG4gICAgICAgIGZtLnRpbWVfZXN0aW1hdGUsXG4gICAgICBdKTtcbiAgICB9XG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgYmFzaWNUYXNrSm91cm5hbE5leHRBY3Rpb24oZHYsIGRhdGEpIHtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgLy8gY29uc3QgY29scyA9IFtcImpvdXJuYWxcIiwgXCJ1dWlkXCIsIFwidGFza3NcIiwgXCJlc3RpbWF0ZVwiXTtcbiAgICBjb25zdCBjb2xzID0gW1widXVpZFwiLCBcInByaW9yaXR5XCIsIFwiZXN0aW1hdGVcIiwgXCJ0YXNrc1wiXTtcbiAgICAvLyBjb25zdCBqb3VybmFsID0gZHYucGFnZXMoYFwiJHtQYXRocy5Kb3VybmFsfVwiYCkuYXJyYXkoKVswXS5maWxlXG4gICAgLy8gXHQuZnJvbnRtYXR0ZXIudGFza3M7XG5cbiAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xuICAgICAgY29uc3QgZiA9IGQuZmlsZTtcbiAgICAgIGNvbnN0IGZtID0gZi5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IGRvbWFpbiA9XG4gICAgICAgIEhlbHBlci5nZXREb21haW4oZm0sIHRydWUpID09PSB1bmRlZmluZWRcbiAgICAgICAgICA/IFwiXFxcXC1cIlxuICAgICAgICAgIDogSGVscGVyLmdldERvbWFpbihmbSk7XG5cbiAgICAgIGlmIChmbS5yZWZfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhgbmFtZTogJHtkLmZpbGUucGF0aH1gKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgdGFza3M6ICR7ZC5maWxlLnRhc2tzLmxlbmd0aH1gKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgdGFza3NCOiAke2YudGFza3MubGVuZ3RofWApXG4gICAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgICAgLy8gam91cm5hbC5jb250YWlucyhmbS51dWlkKSA/IFwiLT5cIiA6IFwiXFxcXC1cIixcbiAgICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgICBmbS5wcmlvcml0eSxcbiAgICAgICAgICBmbS50aW1lX2VzdGltYXRlLFxuICAgICAgICAgIGR2Lm1hcmtkb3duVGFza0xpc3QoZi50YXNrcyksXG4gICAgICAgIF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcmVmID0gZHYucGFnZXMoYFwiJHtQYXRocy5SZWZzfS8ke2ZtLnJlZl9pZH1cImApLmFycmF5KCk7XG4gICAgICAgIGlmIChyZWYubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYHRhc2s6ICcke2ZtLnV1aWR9JyBoYXMgYW4gdW5kZWZpbmVkIHJlZl9pZDogJyR7Zm0ucmVmX2lkfSdgLFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgICAgIGR2LmZpbGVMaW5rKGYucGF0aCwgZmFsc2UsIGZtLnV1aWQuc2xpY2UoMCwgOCkpLFxuICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtBbGlhcyhkdiwgcmVmWzBdLmZpbGUpLFxuICAgICAgICAgICAgZm0udGltZV9lc3RpbWF0ZSxcbiAgICAgICAgICAgIGRvbWFpbixcbiAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBkdi50YWJsZShjb2xzLCBidWZmKTtcbiAgfSxcblxuICBiYXNpY1Rhc2tKb3VybmFsV2FpdGluZyhkdiwgZGF0YSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBjb25zdCBjb2xzID0gW1widXVpZFwiLCBcImNhdXNlXCIsIFwidGFza3NcIl07XG5cbiAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xuICAgICAgY29uc3QgZiA9IGQuZmlsZTtcbiAgICAgIGNvbnN0IGZtID0gZi5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IGRvbWFpbiA9XG4gICAgICAgIEhlbHBlci5nZXREb21haW4oZm0sIHRydWUpID09PSB1bmRlZmluZWRcbiAgICAgICAgICA/IFwiXFxcXC1cIlxuICAgICAgICAgIDogSGVscGVyLmdldERvbWFpbihmbSk7XG5cbiAgICAgIGlmIChmbS5yZWZfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhgbmFtZTogJHtkLmZpbGUucGF0aH1gKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgdGFza3M6ICR7ZC5maWxlLnRhc2tzLmxlbmd0aH1gKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgdGFza3NCOiAke2YudGFza3MubGVuZ3RofWApXG4gICAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgICAgLy8gam91cm5hbC5jb250YWlucyhmbS51dWlkKSA/IFwiLT5cIiA6IFwiXFxcXC1cIixcbiAgICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgICBkLmNhdXNlLFxuICAgICAgICAgIGR2Lm1hcmtkb3duVGFza0xpc3QoZi50YXNrcyksXG4gICAgICAgIF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcmVmID0gZHYucGFnZXMoYFwiJHtQYXRocy5SZWZzfS8ke2ZtLnJlZl9pZH1cImApLmFycmF5KCk7XG4gICAgICAgIGlmIChyZWYubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYHRhc2s6ICcke2ZtLnV1aWR9JyBoYXMgYW4gdW5kZWZpbmVkIHJlZl9pZDogJyR7Zm0ucmVmX2lkfSdgLFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgICAgIGR2LmZpbGVMaW5rKGYucGF0aCwgZmFsc2UsIGZtLnV1aWQuc2xpY2UoMCwgOCkpLFxuICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtBbGlhcyhkdiwgcmVmWzBdLmZpbGUpLFxuICAgICAgICAgICAgZm0udGltZV9lc3RpbWF0ZSxcbiAgICAgICAgICAgIGRvbWFpbixcbiAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBkdi50YWJsZShjb2xzLCBidWZmKTtcbiAgfSxcbiAgYmFzaWNUYXNrSm91cm5hbChkdiwgZGF0YSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICAvLyBjb25zdCBjb2xzID0gW1wiam91cm5hbFwiLCBcInV1aWRcIiwgXCJ0YXNrc1wiLCBcImVzdGltYXRlXCJdO1xuICAgIGNvbnN0IGNvbHMgPSBbXCJ1dWlkXCIsIFwidGFza3NcIiwgXCJlc3RpbWF0ZVwiXTtcbiAgICAvLyBjb25zdCBqb3VybmFsID0gZHYucGFnZXMoYFwiJHtQYXRocy5Kb3VybmFsfVwiYCkuYXJyYXkoKVswXS5maWxlXG4gICAgLy8gXHQuZnJvbnRtYXR0ZXIudGFza3M7XG5cbiAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xuICAgICAgY29uc3QgZiA9IGQuZmlsZTtcbiAgICAgIGNvbnN0IGZtID0gZi5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IGRvbWFpbiA9XG4gICAgICAgIEhlbHBlci5nZXREb21haW4oZm0sIHRydWUpID09PSB1bmRlZmluZWRcbiAgICAgICAgICA/IFwiXFxcXC1cIlxuICAgICAgICAgIDogSGVscGVyLmdldERvbWFpbihmbSk7XG5cbiAgICAgIGlmIChmbS5yZWZfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhgbmFtZTogJHtkLmZpbGUucGF0aH1gKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgdGFza3M6ICR7ZC5maWxlLnRhc2tzLmxlbmd0aH1gKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgdGFza3NCOiAke2YudGFza3MubGVuZ3RofWApXG4gICAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgICAgLy8gam91cm5hbC5jb250YWlucyhmbS51dWlkKSA/IFwiLT5cIiA6IFwiXFxcXC1cIixcbiAgICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgICAgIGZtLnRpbWVfZXN0aW1hdGUsXG4gICAgICAgIF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcmVmID0gZHYucGFnZXMoYFwiJHtQYXRocy5SZWZzfS8ke2ZtLnJlZl9pZH1cImApLmFycmF5KCk7XG4gICAgICAgIGlmIChyZWYubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYHRhc2s6ICcke2ZtLnV1aWR9JyBoYXMgYW4gdW5kZWZpbmVkIHJlZl9pZDogJyR7Zm0ucmVmX2lkfSdgLFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgICAgIGR2LmZpbGVMaW5rKGYucGF0aCwgZmFsc2UsIGZtLnV1aWQuc2xpY2UoMCwgOCkpLFxuICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtBbGlhcyhkdiwgcmVmWzBdLmZpbGUpLFxuICAgICAgICAgICAgZm0udGltZV9lc3RpbWF0ZSxcbiAgICAgICAgICAgIGRvbWFpbixcbiAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBkdi50YWJsZShjb2xzLCBidWZmKTtcbiAgfSxcbiAgYWN0aXZlVGFzayhkdiwgZGF0YSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBjb25zdCBjb2xzID0gW1widXVpZFwiLCBcInRhc2tzXCIsIFwic2Vzc2lvblwiXTtcbiAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xuICAgICAgY29uc3QgZiA9IGQuZmlsZTtcbiAgICAgIGNvbnN0IGZtID0gZi5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IGxvZ3MgPSBkdlxuICAgICAgICAucGFnZXMoYFwiJHtQYXRocy5Mb2dzfS8ke2ZtLnV1aWR9XCJgKVxuICAgICAgICAud2hlcmUoKHApID0+IHAudHlwZSA9PT0gNilcbiAgICAgICAgLnNvcnQoKGspID0+IGsuY3JlYXRlZF9hdCwgXCJkZXNjXCIpO1xuICAgICAgY29uc3QgbGFzdCA9IGxvZ3NbMF07XG4gICAgICBjb25zdCBjcmVhdGVkQXQgPSBuZXcgRGF0ZShsYXN0LmNyZWF0ZWRfYXQpO1xuICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgIGR2LmZpbGVMaW5rKGYucGF0aCwgZmFsc2UsIGZtLnV1aWQuc2xpY2UoMCwgOCkpLFxuICAgICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgICAoKHQpID0+IHtcbiAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgodCAvICgzNjAwICogMTAwMCkpICogMTApIC8gMTA7XG4gICAgICAgIH0pKG5vdy5nZXRUaW1lKCkgLSBjcmVhdGVkQXQuZ2V0VGltZSgpKSxcbiAgICAgIF0pO1xuICAgIH1cbiAgICBkdi50YWJsZShjb2xzLCBidWZmKTtcbiAgfSxcblxuICBiYXNpY1Rhc2soZHYsIGRhdGEpIHtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgY29uc3QgY29scyA9IFtcInV1aWRcIiwgXCJ0YXNrc1wiLCBcImVzdGltYXRlXCIsIFwiZG9tYWluXCJdO1xuICAgIGZvciAoY29uc3QgZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCBmID0gZC5maWxlO1xuICAgICAgY29uc3QgZm0gPSBmLmZyb250bWF0dGVyO1xuICAgICAgY29uc3QgZG9tYWluID1cbiAgICAgICAgSGVscGVyLmdldERvbWFpbihmbSwgdHJ1ZSkgPT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gXCJcXFxcLVwiXG4gICAgICAgICAgOiBIZWxwZXIuZ2V0RG9tYWluKGZtKTtcblxuICAgICAgaWYgKGZtLnJlZl9pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBuYW1lOiAke2QuZmlsZS5wYXRofWApXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGB0YXNrczogJHtkLmZpbGUudGFza3MubGVuZ3RofWApXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGB0YXNrc0I6ICR7Zi50YXNrcy5sZW5ndGh9YClcbiAgICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgICAgIGZtLnRpbWVfZXN0aW1hdGUsXG4gICAgICAgICAgZG9tYWluLFxuICAgICAgICBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHJlZiA9IGR2LnBhZ2VzKGBcIiR7UGF0aHMuUmVmc30vJHtmbS5yZWZfaWR9XCJgKS5hcnJheSgpO1xuICAgICAgICBpZiAocmVmLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGB0YXNrOiAnJHtmbS51dWlkfScgaGFzIGFuIHVuZGVmaW5lZCByZWZfaWQ6ICcke2ZtLnJlZl9pZH0nYCxcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIHJlZlswXS5maWxlKSxcbiAgICAgICAgICAgIGZtLnRpbWVfZXN0aW1hdGUsXG4gICAgICAgICAgICBkb21haW4sXG4gICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgbG9ncyhkdiwgZW50cmllcykge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBsZXQgdG90YWxUaW1lID0gMDtcblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgY29uc3QgZm1lID0gZW50cnkuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgIGxldCBzdGFydDogYW55ID0gMDtcbiAgICAgIGxldCBzdG9wOiBhbnkgPSAwO1xuICAgICAgaWYgKGZtZSA9PT0gdW5kZWZpbmVkIHx8IGZtZS5jcmVhdGVkX2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGZyb250bWF0dGVyOiAke2ZtZS51dWlkfWApO1xuICAgICAgfVxuXG4gICAgICBzdGFydCA9IG5ldyBEYXRlKGZtZS5jcmVhdGVkX2F0KTtcbiAgICAgIGUucHVzaChzdGFydC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKSk7XG4gICAgICBpZiAoZm1lLmRvbmVfYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdG9wID0gRGF0ZS5ub3coKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0b3AgPSBuZXcgRGF0ZShmbWUuZG9uZV9hdCk7XG4gICAgICB9XG4gICAgICB0b3RhbFRpbWUgKz0gc3RvcCAtIHN0YXJ0O1xuICAgICAgZS5wdXNoKFxuICAgICAgICBkdi5zZWN0aW9uTGluayhcbiAgICAgICAgICBmbWUudXVpZCxcbiAgICAgICAgICBcIiMjIENvbnRlbnRcIixcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICBmbWUudXVpZC5zbGljZSgwLCA4KSxcbiAgICAgICAgKSxcbiAgICAgICk7XG4gICAgICBlLnB1c2goTWF0aC5yb3VuZCgoKHN0b3AgLSBzdGFydCkgLyAoMTAwMCAqIDYwICogNjApKSAqIDEwKSAvIDEwKTtcbiAgICAgIGlmIChmbWUucmV2aWV3ZWQgPT09IHVuZGVmaW5lZCB8fCBmbWUucmV2aWV3ZWQgPT09IDApIHtcbiAgICAgICAgZS5wdXNoKDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZS5wdXNoKGZtZS5yZXZpZXdlZCk7XG4gICAgICB9XG4gICAgICBidWZmLnB1c2goZSk7XG4gICAgfVxuXG4gICAgaWYgKGJ1ZmYubGVuZ3RoID4gMCkge1xuICAgICAgZHYuaGVhZGVyKDIsIFwiTG9nc1wiKTtcbiAgICAgIGR2LnRhYmxlKFtcImNyZWF0ZWRfYXRcIiwgXCJ1dWlkXCIsIFwic2Vzc2lvblwiLCBcInJldmlld2VkXCJdLCBidWZmKTtcbiAgICAgIGlmICh0b3RhbFRpbWUgPiAwKSB7XG4gICAgICAgIGR2LnBhcmFncmFwaChcbiAgICAgICAgICBgX3RvdGFsVGltZSAoaCk6XyAke01hdGgucm91bmQoKHRvdGFsVGltZSAvICgxMDAwICogNjAgKiA2MCkpICogMTApIC8gMTBcbiAgICAgICAgICB9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgbWVkaWFXaXRoTG9ncyhkdiwgZGF0YSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBjb25zdCBjb2xzID0gW1widXVpZFwiLCBcInRhc2tzXCIsIFwiZXN0aW1hdGVcIiwgXCJjdXJyZW50XCIsIFwiZG9tYWluXCJdO1xuXG4gICAgZm9yIChjb25zdCBkIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGYgPSBkLmZpbGU7XG4gICAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgICBjb25zdCByZWYgPSBkdi5wYWdlcyhgXCIke1BhdGhzLlJlZnN9LyR7Zm0ucmVmX2lkfVwiYCkuYXJyYXkoKTtcbiAgICAgIGlmIChyZWYubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgdGFzazogJyR7Zm0udXVpZH0nIGhhcyBhbiB1bmRlZmluZWQgcmVmX2lkOiAnJHtmbS5yZWZfaWR9J2AsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBkb21haW4gPVxuICAgICAgICBIZWxwZXIuZ2V0RG9tYWluKGZtLCB0cnVlKSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyBcIlxcXFwtXCJcbiAgICAgICAgICA6IEhlbHBlci5nZXREb21haW4oZm0pO1xuICAgICAgY29uc3QgbG9nRW50cmllcyA9IGR2XG4gICAgICAgIC5wYWdlcyhgXCIke1BhdGhzLkxvZ3N9LyR7Zm0udXVpZH1cImApXG4gICAgICAgIC53aGVyZSgocCkgPT4gcC50eXBlID09PSBUeXBlcy5Mb2cpXG4gICAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiZGVzY1wiKTtcbiAgICAgIGxldCB0b3RhbFRpbWUgPSAwO1xuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBsb2dFbnRyaWVzKSB7XG4gICAgICAgIGNvbnN0IGZtZSA9IGVudHJ5LmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgbGV0IHN0YXJ0OiBhbnkgPSAwO1xuICAgICAgICBsZXQgc3RvcDogYW55ID0gMDtcbiAgICAgICAgaWYgKGZtZSA9PT0gdW5kZWZpbmVkIHx8IGZtZS5jcmVhdGVkX2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZnJvbnRtYXR0ZXI6ICR7Zm1lLnV1aWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGFydCA9IG5ldyBEYXRlKGZtZS5jcmVhdGVkX2F0KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBlLnB1c2goc3RhcnQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkpO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVudHJ5LnV1aWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbWUuZG9uZV9hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc3RvcCA9IERhdGUubm93KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RvcCA9IG5ldyBEYXRlKGZtZS5kb25lX2F0KTtcbiAgICAgICAgfVxuICAgICAgICB0b3RhbFRpbWUgKz0gc3RvcCAtIHN0YXJ0O1xuICAgICAgfVxuXG4gICAgICBidWZmLnB1c2goW1xuICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtBbGlhcyhkdiwgcmVmWzBdLmZpbGUpLFxuICAgICAgICBmbS50aW1lX2VzdGltYXRlLFxuICAgICAgICBgJHtNYXRoLnJvdW5kKCh0b3RhbFRpbWUgLyAoMTAwMCAqIDYwICogNjApKSAqIDEwKSAvIDEwfWhgLFxuICAgICAgICBkb21haW4sXG4gICAgICBdKTtcbiAgICB9XG5cbiAgICBkdi50YWJsZShjb2xzLCBidWZmKTtcbiAgfSxcblxuICB0YXNrRG9uZVdpdGhMb2dzKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGNvbnN0IGNvbHMgPSBbXG4gICAgICBcInRhc2tJZFwiLFxuICAgICAgXCJsb2dJZFwiLFxuICAgICAgXCJjcmVhdGVkQXRcIixcbiAgICAgIFwiZG9uZUF0XCIsXG4gICAgICBcInRpbWVFc3RpbWF0ZVwiLFxuICAgICAgXCJ0b29rXCIsXG4gICAgICBcInByb2plY3RcIixcbiAgICBdO1xuICAgIGZvciAoY29uc3QgZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCBmID0gZC5maWxlO1xuICAgICAgY29uc3QgZm0gPSBkLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBjb25zdCBjcmVhdGVkQXQ6IGFueSA9IG5ldyBEYXRlKGZtLmNyZWF0ZWRfYXQpO1xuICAgICAgY29uc3QgZG9uZUF0OiBhbnkgPSBuZXcgRGF0ZShmbS5kb25lX2F0KTtcbiAgICAgIGNvbnN0IHRpbWVFc3RpbWF0ZSA9IFwiXCI7XG4gICAgICBjb25zdCB0b29rID0gKGRvbmVBdCAtIGNyZWF0ZWRBdCkgLyAoMTAwMCAqIDM2MDApO1xuICAgICAgY29uc3QgcGFnZXMgPSBkdlxuICAgICAgICAucGFnZXMoYFwiJHtQYXRocy5UYXNrc31cImApXG4gICAgICAgIC53aGVyZSgocGFnZSkgPT4gcGFnZS5maWxlLmZyb250bWF0dGVyLnV1aWQgPT09IGZtLnBhcmVudF9pZCk7XG4gICAgICBpZiAocGFnZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgfVxuICAgICAgY29uc3QgcGFyZW50ID0gcGFnZXNbMF07XG4gICAgICBjb25zdCBwYXJlbnRGbSA9IHBhcmVudC5maWxlLmZyb250bWF0dGVyO1xuICAgICAgY29uc3QgcGFyZW50RiA9IHBhcmVudC5maWxlO1xuICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtTaG9ydFVVSUQoZHYsIHBhcmVudC5maWxlLCBcIlRhc2tcIiksXG4gICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKGR2LCBmKSxcbiAgICAgICAgY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApLFxuICAgICAgICBkb25lQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCksXG4gICAgICAgIHRpbWVFc3RpbWF0ZSxcbiAgICAgICAgKCh0KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodCAqIDEwKSAvIDEwO1xuICAgICAgICB9KSh0b29rKSxcbiAgICAgICAgSGVscGVyLmdldFByb2plY3QocGFyZW50Rm0pLFxuICAgICAgXSk7XG4gICAgfVxuXG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgcHJvamVjdHMoZHYsIHBhZ2VzKSB7XG4gICAgY29uc3QgY29scyA9IFtcIm5hbWVcIl07XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgYnVmZi5wdXNoKFtSZW5kZXJlci5tYWtlTGluayhkdiwgcGFnZS5maWxlLCBmbS5nZXROYW1lKCkpXSk7XG4gICAgfVxuXG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgYmFzaWNEb25lVGFza1dpdGhMb2dzKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgY29scyA9IFtcbiAgICAgIFwidXVpZFwiLFxuICAgICAgXCJjcmVhdGVkQXRcIixcbiAgICAgIFwiZG9uZUF0XCIsXG4gICAgICBcInRpbWVFc3RpbWF0ZVwiLFxuICAgICAgXCJ0b29rXCIsXG4gICAgICBcImRlbHRhXCIsXG4gICAgICBcInByb2plY3RcIixcbiAgICAgIFwiYXJlYVwiLFxuICAgIF07XG4gICAgZHYudGFibGUoY29scywgZGF0YSk7XG4gIH0sXG5cbiAgYmFzaWNEb25lVGFza1dpdGhvdXRMb2dzKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgY29scyA9IFtcInRhc2tJZFwiLCBcImNyZWF0ZWRBdFwiLCBcInByb2plY3RcIiwgXCJhcmVhXCJdO1xuICAgIGR2LnRhYmxlKGNvbHMsIGRhdGEpO1xuICB9LFxuXG4gIGJhc2ljUHJvZ3Jlc3NlZFRhc2tXaXRoTG9nKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgY29scyA9IFtcbiAgICAgIFwidGFza0lkXCIsXG4gICAgICBcImxvZ0lkXCIsXG4gICAgICAvLyBcImNyZWF0ZWRBdFwiLFxuICAgICAgLy8gXCJkb25lQXRcIixcbiAgICAgIFwidG9va1wiLFxuICAgICAgLy8gXCJ0b29rQWNjXCIsXG4gICAgICBcInByb2plY3RcIixcbiAgICAgIC8vIFwiZG9tYWluXCIsXG4gICAgXTtcbiAgICBkdi50YWJsZShjb2xzLCBkYXRhKTtcbiAgfSxcblxuICAvLyBkYWlseVRhc2soZHYsIGRhdGEpIHtcbiAgLy8gXHRSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRCh0aGlzLmR2LCBwYWdlLmZpbGUpLFxuICAvLyBcdGR2LlxuICAvLyBcdFx0XHRcdHJzLnB1c2goW1xuICAvLyBcdFx0XHRcdFx0XCJwYXJhZ3JhcGhcIixcbiAgLy8gXHRcdFx0XHRcdFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKHRoaXMuZHYsIHBhZ2UuZmlsZSksXG4gIC8vIFx0XHRcdFx0XSk7XG4gIC8vIH1cblxuICBkbyhkdiwgcnMpIHtcbiAgICBmb3IgKGNvbnN0IHJvdyBvZiBycykge1xuICAgICAgc3dpdGNoIChyb3dbMF0pIHtcbiAgICAgICAgY2FzZSBcImhlYWRlclwiOlxuICAgICAgICAgIGNvbnN0IFssIGxldmVsLCBoZWFkaW5nXSA9IHJvdztcbiAgICAgICAgICBkdi5oZWFkZXIobGV2ZWwsIGhlYWRpbmcpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicGFyYWdyYXBoXCI6XG4gICAgICAgICAgY29uc3QgWywgdGV4dF0gPSByb3c7XG4gICAgICAgICAgZHYucGFyYWdyYXBoKHRleHQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYXJyYXlcIjpcbiAgICAgICAgICBjb25zdCBbLCByZW5kZXJlciwgZGF0YV0gPSByb3c7XG4gICAgICAgICAgcmVuZGVyZXIoZHYsIGRhdGEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic3RhdHNcIjpcbiAgICAgICAgICBjb25zdCBbLCBuYW1lLCB1bml0LCB2YWx1ZV0gPSByb3c7XG4gICAgICAgICAgZHYucGFyYWdyYXBoKGAke25hbWV9ICgke3VuaXR9KTogJHt2YWx1ZX1gKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3Vwb3J0ZWQgb3Bjb2RlOiBcImZ1Y2tvZmZcImApO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbn07XG5cbmV4cG9ydCBjbGFzcyBGcm9udG1hdHRlciB7XG4gIGdvbmV4dDogYW55O1xuXG4gIGNvbnN0cnVjdG9yKGdvbmV4dCkge1xuICAgIHRoaXMuZ29uZXh0ID0gZ29uZXh0O1xuICB9XG5cbiAgcHJvamVjdFBhcnNlTWV0YShkdikge1xuICAgIC8vIGZhdXRlIGRlIG1pZXV4IHBvdXIgbGUgbW9tZW50XG4gICAgY29uc3QgY3VycmVudCA9IGR2LmN1cnJlbnQoKTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGN1cnJlbnQuZmlsZS5mb2xkZXIuc2xpY2UoXG4gICAgICBQYXRocy5Qcm9qZWN0cy5sZW5ndGggKyAxLFxuICAgICk7XG4gICAgY29uc3QgcHJvamVjdERpciA9IGN1cnJlbnQuZmlsZS5mb2xkZXI7XG4gICAgaWYgKHByb2plY3ROYW1lLmNvbnRhaW5zKFwiL1wiKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgcHJvamVjdERpcjogJHtwcm9qZWN0RGlyfSBmb2xkZXI6ICR7Y3VycmVudC5maWxlLmZvbGRlcn1gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBwYWdlcyA9IGR2LnBhZ2VzKGBcIiR7cHJvamVjdERpcn0vbWV0YVwiYCkuYXJyYXkoKTtcbiAgICBpZiAocGFnZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhwYWdlcyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGxlbjogJHtwYWdlcy5sZW5ndGh9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgZm0gPSBwYWdlc1swXS5maWxlLmZyb250bWF0dGVyO1xuICAgIGNvbnN0IHV1aWQgPSBmbS51dWlkO1xuICAgIGlmIChIZWxwZXIubmlsQ2hlY2sodXVpZCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgcHJvamVjdCAndXVpZCcgaXMgbm90IGRlZmluZWRgKTtcbiAgICB9XG5cbiAgICBjb25zdCBuYW1lID0gZm0ubmFtZTtcbiAgICBpZiAoSGVscGVyLm5pbENoZWNrKG5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCduYW1lJyBpcyBub3QgZGVmaW5lZGApO1xuICAgIH1cblxuICAgIGNvbnN0IGRvbWFpbnMgPSBmbS5kb21haW5zO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShkb21haW5zKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGAnZG9tYWlucycgbXVzdCBiZSBvZiBhcnJheSB0eXBlYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHV1aWQ6IHV1aWQsXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgZG9tYWluczogZG9tYWlucyxcbiAgICB9O1xuICB9XG5cbiAgZ2V0Q3JlYXRlZEF0KGYpOiBEYXRlIHtcbiAgICByZXR1cm4gSGVscGVyLm5pbENoZWNrKGYuZnJvbnRtYXR0ZXIuY3JlYXRlZF9hdClcbiAgICAgID8gbmV3IERhdGUoZi5jdGltZS50cylcbiAgICAgIDogbmV3IERhdGUoZi5mcm9udG1hdHRlci5jcmVhdGVkX2F0KTtcbiAgfVxuXG4gIGdldEN1cnJlbnRGcm9udG1hdHRlcigpIHtcbiAgICBjb25zdCBmaWxlID0gdGhpcy5nb25leHQud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBjb25zdCBmaWxlQ29udGVudCA9IHRoaXMuZ29uZXh0Lm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgIGlmIChmaWxlQ29udGVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBjb25zb2xlLndhcm4oXCInZmlsZUNvbnRlbnQnIGlzIHVuZGVmaW5lZFwiKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgZm0gPSBmaWxlQ29udGVudC5mcm9udG1hdHRlcjtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gY29uc29sZS53YXJuKFwiJ2ZtJyBpcyB1bmRlZmluZWRcIik7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiBmbTtcbiAgfVxuXG4gIHBhcnNlTGlzdEJ5TmFtZXNwYWNlKGZtKSB7XG4gICAgY29uc3QgYnlBcmVhcyA9IGZtLmJ5X2FyZWFzID09PSB1bmRlZmluZWQgPyBbXSA6IGZtLmJ5X2FyZWFzO1xuICAgIGNvbnN0IGJ5Q29udGV4dHMgPSBmbS5ieV9jb250ZXh0cyA9PT0gdW5kZWZpbmVkID8gW10gOiBmbS5ieV9jb250ZXh0cztcbiAgICBjb25zdCBieUxheWVycyA9IGZtLmJ5X2xheWVycyA9PT0gdW5kZWZpbmVkID8gW10gOiBmbS5ieV9sYXllcnM7XG4gICAgY29uc3QgYnlPcmdzID0gZm0uYnlfb3JncyA9PT0gdW5kZWZpbmVkID8gW10gOiBmbS5ieV9vcmdzO1xuICAgIGNvbnN0IGJ5UHJvamVjdHMgPSBmbS5ieV9wcm9qZWN0cyA9PT0gdW5kZWZpbmVkID8gW10gOiBmbS5ieV9wcm9qZWN0cztcblxuICAgIHJldHVybiBbYnlBcmVhcywgYnlDb250ZXh0cywgYnlMYXllcnMsIGJ5T3JncywgYnlQcm9qZWN0c107XG4gIH1cblxuICBwYXJzZUxpc3RCZWZvcmVBZnRlcihmbSkge1xuICAgIGNvbnN0IGJlZm9yZSA9IEhlbHBlci5nZXREYXRlKGZtLmJlZm9yZSk7XG4gICAgY29uc3QgYWZ0ZXIgPSBIZWxwZXIuZ2V0RGF0ZShmbS5hZnRlcik7XG4gICAgcmV0dXJuIFtiZWZvcmUsIGFmdGVyXTtcbiAgfVxuXG4gIHBhcnNlTGlzdEZpbHRlckJ5KGZtKSB7XG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBmaWx0ZXJCeSA9IGZtLmZpbHRlcl9ieTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZmlsdGVyQnkpKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbHRlckJ5O1xuICB9XG5cbiAgcGFyc2VMaXN0R3JvdXBCeShmbSkge1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG5cbiAgICBjb25zdCBncm91cEJ5ID0gZm0uZ3JvdXBfYnk7XG4gICAgaWYgKFxuICAgICAgISh0eXBlb2YgZ3JvdXBCeSA9PT0gXCJ1bmRlZmluZWRcIikgJiZcbiAgICAgICEodHlwZW9mIGdyb3VwQnkgPT09IFwic3RyaW5nXCIpXG4gICAgKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gZ3JvdXBCeTtcbiAgfVxuXG4gIHBhcnNlQWxsUHJvZ3Jlc3NlZFRhc2tzKCkge1xuICAgIGNvbnN0IGZtID0gdGhpcy5nZXRDdXJyZW50RnJvbnRtYXR0ZXIoKTtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGZyb250bWF0dGVyLCBjYW5ub3QgcHJvY2VlZGApO1xuICAgIH1cblxuICAgIGNvbnN0IGdyb3VwQnkgPSB0aGlzLnBhcnNlTGlzdEdyb3VwQnkoZm0pO1xuICAgIGNvbnN0IGZpbHRlckJ5ID0gdGhpcy5wYXJzZUxpc3RGaWx0ZXJCeShmbSk7XG4gICAgY29uc3QgW2JlZm9yZSwgYWZ0ZXJdID0gdGhpcy5wYXJzZUxpc3RCZWZvcmVBZnRlcihmbSk7XG5cbiAgICByZXR1cm4gW2dyb3VwQnksIGZpbHRlckJ5LCBiZWZvcmUsIGFmdGVyXTtcbiAgfVxuXG4gIHBhcnNlQWxsRG9uZVRhc2tzKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnNlQWxsUHJvZ3Jlc3NlZFRhc2tzKCk7XG4gIH1cblxuICBwYXJzZUFsbERvbmVUYXNrV2l0aG91dExvZygpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZUFsbFByb2dyZXNzZWRUYXNrcygpO1xuICB9XG5cbiAgcGFyc2VBbGxUb2RvQWRIb2MoKSB7XG4gICAgY29uc3QgZm0gPSB0aGlzLmdldEN1cnJlbnRGcm9udG1hdHRlcigpO1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZnJvbnRtYXR0ZXIsIGNhbm5vdCBwcm9jZWVkYCk7XG4gICAgfVxuXG4gICAgY29uc3QgZ3JvdXBCeSA9IHRoaXMucGFyc2VMaXN0R3JvdXBCeShmbSk7XG4gICAgY29uc3QgZmlsdGVyQnkgPSB0aGlzLnBhcnNlTGlzdEZpbHRlckJ5KGZtKTtcbiAgICBjb25zdCBbYmVmb3JlLCBhZnRlcl0gPSB0aGlzLnBhcnNlTGlzdEJlZm9yZUFmdGVyKGZtKTtcbiAgICBjb25zdCBtaW5Qcmlvcml0eSA9IEhlbHBlci5nZXRGaWVsZChmbS5taW5fcHJpb3JpdHksIDApO1xuXG4gICAgcmV0dXJuIFtncm91cEJ5LCBmaWx0ZXJCeSwgYmVmb3JlLCBhZnRlciwgbWluUHJpb3JpdHldO1xuICB9XG5cbiAgcGFyc2VJbmJveCgpIHtcbiAgICBjb25zdCBmbSA9IHRoaXMuZ2V0Q3VycmVudEZyb250bWF0dGVyKCk7XG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBbW10sIFtdLCAwLCAweGZmZmZmZmZmXTtcbiAgICB9XG5cbiAgICBjb25zdCBzb3VyY2UgPSBIZWxwZXIubmlsQ2hlY2soZm0uc291cmNlKVxuICAgICAgPyBbXCJsb2dzXCIsIFwiZmxlZXRpbmdcIl1cbiAgICAgIDogZm0uc291cmNlO1xuICAgIGNvbnN0IGdyb3VwQnkgPSBIZWxwZXIubmlsQ2hlY2soZm0uZ3JvdXBfYnkpID8gXCJub25lXCIgOiBmbS5ncm91cF9ieTtcbiAgICBjb25zdCBmaWx0ZXJCeSA9IHRoaXMucGFyc2VMaXN0RmlsdGVyQnkoZm0pO1xuICAgIGNvbnN0IG1pblNpemUgPSBIZWxwZXIubmlsQ2hlY2soZm0ubWluX3NpemUpID8gMCA6IGZtLm1pbl9zaXplO1xuICAgIGNvbnN0IG1heFNpemUgPSBIZWxwZXIubmlsQ2hlY2soZm0ubWF4X3NpemUpID8gMHhmZmZmZmZmZiA6IGZtLm1heF9zaXplO1xuXG4gICAgcmV0dXJuIFtzb3VyY2UsIGdyb3VwQnksIGZpbHRlckJ5LCBtaW5TaXplLCBtYXhTaXplXTtcbiAgfVxuXG4gIHBhcnNlVG9kb0xpc3QoKSB7XG4gICAgY29uc3QgZm0gPSB0aGlzLmdldEN1cnJlbnRGcm9udG1hdHRlcigpO1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gW1tdLCBbXSwgW10sIFtdLCBbXSwgMF07XG4gICAgfVxuXG4gICAgY29uc3QgW2J5QXJlYXMsIGJ5Q29udGV4dHMsIGJ5TGF5ZXJzLCBieU9yZ3MsIGJ5UHJvamVjdHNdID1cbiAgICAgIHRoaXMucGFyc2VMaXN0QnlOYW1lc3BhY2UoZm0pO1xuICAgIGNvbnN0IG1pblByaW9yaXR5ID0gSGVscGVyLmdldEZpZWxkKGZtLm1pbl9wcmlvcml0eSwgMCk7XG5cbiAgICByZXR1cm4gW2J5QXJlYXMsIGJ5Q29udGV4dHMsIGJ5TGF5ZXJzLCBieU9yZ3MsIGJ5UHJvamVjdHMsIG1pblByaW9yaXR5XTtcbiAgfVxuXG4gIHBhcnNlRG9uZUxpc3QoKSB7XG4gICAgY29uc3QgZm0gPSB0aGlzLmdldEN1cnJlbnRGcm9udG1hdHRlcigpO1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gW1tdLCBbXSwgW10sIFtdLCBbXSwgW10sIFtdXTtcbiAgICB9XG5cbiAgICBjb25zdCBbYnlBcmVhcywgYnlDb250ZXh0cywgYnlMYXllcnMsIGJ5T3JncywgYnlQcm9qZWN0c10gPVxuICAgICAgdGhpcy5wYXJzZUxpc3RCeU5hbWVzcGFjZShmbSk7XG4gICAgY29uc3QgW2JlZm9yZSwgYWZ0ZXJdID0gdGhpcy5wYXJzZUxpc3RCZWZvcmVBZnRlcihmbSk7XG4gICAgY29uc3QgZmllbGRzID0gSGVscGVyLmdldEZpZWxkKGZtLmZpZWxkcywgW10pO1xuICAgIGNvbnN0IHN0YXRzID0gSGVscGVyLmdldEZpZWxkKGZtLnN0YXRzLCBbXSk7XG5cbiAgICByZXR1cm4gW1xuICAgICAgYnlBcmVhcyxcbiAgICAgIGJ5Q29udGV4dHMsXG4gICAgICBieUxheWVycyxcbiAgICAgIGJ5T3JncyxcbiAgICAgIGJ5UHJvamVjdHMsXG4gICAgICBmaWVsZHMsXG4gICAgICBzdGF0cyxcbiAgICAgIGJlZm9yZSxcbiAgICAgIGFmdGVyLFxuICAgIF07XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE5vdGVIZWxwZXIge1xuICBkdjogYW55O1xuICBnb25leHQ6IGFueTtcbiAgZnJvbnRtYXR0ZXI6IEZyb250bWF0dGVyO1xuXG4gIGNvbnN0cnVjdG9yKGdvbmV4dCwgZHYsIGZyb250bWF0dGVyKSB7XG4gICAgdGhpcy5nb25leHQgPSBnb25leHQ7XG4gICAgdGhpcy5kdiA9IGR2O1xuICAgIHRoaXMuZnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlcjtcbiAgfVxuXG4gIGlzRG9hYmxlKHRhc2ssIGF0ID0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgaWYgKGZtLnN0YXR1cyAhPT0gU3RhdHVzLlRvZG8pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZm0uYWZ0ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgYWZ0ZXIgPSBuZXcgRGF0ZShmbS5hZnRlcik7XG4gICAgICBpZiAoRGF0ZS5ub3coKSA8PSBhZnRlci5nZXRUaW1lKCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBmbUF0ID0gbmV3IERhdGUoZm0uYXQpO1xuICAgICAgZm1BdC5zZXRIb3VycygwKTtcbiAgICAgIGZtQXQuc2V0TWludXRlcygwKTtcbiAgICAgIGZtQXQuc2V0U2Vjb25kcygwKTtcblxuICAgICAgLy8gaWYgKGZtLnV1aWQgPT09IFwiMmE5N2RlMzUtY2E4Ny00MjY3LTkxNTktNmMwOTZkNDE2M2YxXCIpIHtcbiAgICAgIC8vIFx0Y29uc29sZS5sb2coYHV1aWQ6ICR7Zm0udXVpZH1gKTtcbiAgICAgIC8vIFx0Y29uc29sZS5sb2coYGF0OiAke2F0LmdldFRpbWUoKX1gKTtcbiAgICAgIC8vIFx0Y29uc29sZS5sb2coYGZtQXQ6ICR7Zm1BdC5nZXRUaW1lKCl9YCk7XG4gICAgICAvLyBcdGNvbnNvbGUubG9nKGBpZjogJHthdC5nZXRUaW1lKCkgPCBmbUF0LmdldFRpbWUoKX1gKTtcbiAgICAgIC8vIH1cblxuICAgICAgaWYgKGF0LmdldFRpbWUoKSA8IGZtQXQuZ2V0VGltZSgpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGZtLmF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgYXQgPSBuZXcgRGF0ZShmbS5hdCk7XG4gICAgICAgIGlmIChEYXRlLm5vdygpIDw9IGF0LmdldFRpbWUoKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGRlcHMgPSBmbS5uZWVkcztcbiAgICBpZiAoZGVwcyA9PT0gdW5kZWZpbmVkIHx8IGRlcHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYXNQZW5kaW5nRGVwZW5kZW5jaWVzKGRlcHMpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBoYXNQZW5kaW5nRGVwZW5kZW5jaWVzKGRlcHMpIHtcbiAgICBmb3IgKGNvbnN0IGRlcCBvZiBkZXBzKSB7XG4gICAgICBjb25zdCB0YXNrID0gdGhpcy5kdi5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfS8ke2RlcH1cImApLmFycmF5KCk7XG4gICAgICBpZiAodGFzay5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBoYXNQZW5kaW5nRGVwZW5kZW5jaWVzOiBcIiR7UGF0aHMuVGFza3N9LyR7ZGVwfVwiIHRhc2sgZG9lcyBub3QgZXhpc3RzYCxcbiAgICAgICAgKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZtID0gdGFza1swXS5maWxlLmZyb250bWF0dGVyO1xuICAgICAgaWYgKFxuICAgICAgICBmbS50eXBlICE9PSBUeXBlcy5UYXNrICYmXG4gICAgICAgIGZtLnR5cGUgIT09IFR5cGVzLlByb3Zpc2lvbiAmJlxuICAgICAgICBmbS50eXBlICE9PSBUeXBlcy5QcmF4aXNcbiAgICAgICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZtLnN0YXR1cyA9PT0gU3RhdHVzLlRvZG8pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaXNDaGlsZFRhZyhwYXJlbnQsIGNoaWxkKSB7XG4gICAgaWYgKGNoaWxkLmxlbmd0aCA8PSBwYXJlbnQubGVuZ3RoICsgMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQuc2xpY2UoMCwgcGFyZW50Lmxlbmd0aCArIDEpICE9IGAke3BhcmVudH0vYCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGdldE5hbWVzcGFjZUNvbnRlbnQobnM6IHN0cmluZykge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gW107XG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLmR2LnBhZ2VzKGAjJHtuc31gKTtcbiAgICBmb3IgKGNvbnN0IHAgb2YgcGFnZXMpIHtcbiAgICAgIGNvbnN0IHRhZ3MgPSBwLmZpbGUuZnJvbnRtYXR0ZXIudGFncztcblxuICAgICAgaWYgKHRhZ3MgPT09IHVuZGVmaW5lZCB8fCB0YWdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgICBpZiAodGhpcy5pc0NoaWxkVGFnKG5zLCB0YWcpKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHRhZy5zbGljZShucy5sZW5ndGggKyAxKTtcbiAgICAgICAgICBpZiAoIWNoaWxkcmVuLmNvbnRhaW5zKHQpKSB7XG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjaGlsZHJlbjtcbiAgfVxuXG4gIGlzTGFzdFJldmlzaW9uKHBhZ2UpOiBib29sZWFuIHtcbiAgICBjb25zdCByZXZpc2lvbkxpc3QgPSAoZHYsIHJvb3Q6IHN0cmluZywgY3VycmVudCkgPT4ge1xuICAgICAgbGV0IGhlYWQgPSBjdXJyZW50O1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY29uc3QgcGFnZXMgPSBkdlxuICAgICAgICAgIC5wYWdlcyhgXCIke3Jvb3R9XCJgKVxuICAgICAgICAgIC53aGVyZShcbiAgICAgICAgICAgIChwYWdlKSA9PlxuICAgICAgICAgICAgICBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIubmV4dCA9PT1cbiAgICAgICAgICAgICAgaGVhZC5maWxlLmZyb250bWF0dGVyLnV1aWQsXG4gICAgICAgICAgKTtcbiAgICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfSBlbHNlIGlmIChwYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBoZWFkID0gcGFnZXNbMF07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICAgIGxldCBjdXIgPSBoZWFkO1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgYnVmZi5wdXNoKGN1cik7XG4gICAgICAgIGNvbnN0IGZtID0gY3VyLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICAgIGlmIChmbS5uZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWdlcyA9IGR2LnBhZ2VzKGBcIiR7cm9vdH0vJHtmbS5uZXh0fVwiYCk7XG4gICAgICAgIGlmIChwYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjdXIgPSBwYWdlc1swXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJ1ZmY7XG4gICAgfTtcblxuICAgIGNvbnN0IG5vdGUgPSBwYWdlO1xuICAgIGNvbnN0IGZtID0gbm90ZS5maWxlLmZyb250bWF0dGVyO1xuICAgIGxldCByZXZpc2lvbnMgPSBbXTtcbiAgICBzd2l0Y2ggKGZtLnR5cGUpIHtcbiAgICAgIGNhc2UgVHlwZXMuUGVybWFuZW50OlxuICAgICAgICByZXZpc2lvbnMgPSByZXZpc2lvbkxpc3QodGhpcy5kdiwgUGF0aHMuU2xpcGJveCwgbm90ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBUeXBlcy5SZXNvdXJjZTpcbiAgICAgICAgcmV2aXNpb25zID0gcmV2aXNpb25MaXN0KHRoaXMuZHYsIFBhdGhzLlJlc291cmNlcywgbm90ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuXG4gICAgaWYgKHJldmlzaW9ucy5sZW5ndGggPD0gMSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldmlzaW9uc1swXS5maWxlLmZyb250bWF0dGVyLnV1aWQgPT09IGZtLnV1aWQ7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEdlbmVyYXRvciB7XG4gIGFwcDogYW55O1xuICBkdjogYW55O1xuICBnb25leHQ6IGFueTtcblxuICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB0aGlzLmR2ID0gYXBwLmR2O1xuICAgIHRoaXMuZ29uZXh0ID0gYXBwLmdvbmV4dDtcbiAgfVxuXG4gIGZsZWV0aW5nKCkge1xuICAgIGNvbnN0IGR0ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBub3RlID0ge1xuICAgICAgdXVpZDogdXVpZHY0KCksXG4gICAgICB0eXBlOiAxMyxcbiAgICAgIHZlcnNpb246IFwiMC4wLjRcIixcbiAgICAgIGNyZWF0ZWRfYXQ6IGR0LnRvSVNPU3RyaW5nKCksXG4gICAgICBwYXRoOiBcIlwiLFxuICAgICAgZGF0YTogXCJcIixcbiAgICB9O1xuXG4gICAgbm90ZS5wYXRoID0gYDgwMCBJbmJveC8ke25vdGUudXVpZH0ubWRgO1xuICAgIG5vdGUuZGF0YSA9IGAtLS1cXG50eXBlOiAxM1xcbnV1aWQ6IFwiJHtub3RlLnV1aWR9XCJcXG5jcmVhdGVkX2F0OiBcIiR7bm90ZS5jcmVhdGVkX2F0fVwiXFxudmVyc2lvbjogXCIwLjAuNFwiXFxuLS0tXFxuIyMgQ29udGVudFxcbmA7XG5cbiAgICBjb25zdCBmID0gdGhpcy5hcHAudmF1bHQuY3JlYXRlKG5vdGUucGF0aCwgbm90ZS5kYXRhKS50aGVuKChmKSA9PiB7XG4gICAgICByZXR1cm4gZjtcbiAgICB9KTtcbiAgICBjb25zdCBhY3RpdmUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZjtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3Qgcm9vdCA9IGFjdGl2ZS5wYXJlbnQ7XG4gICAgdGhpcy5hcHAud29ya3NwYWNlLmNyZWF0ZUxlYWZJblBhcmVudChyb290LCByb290LmNoaWxkcmVuLmxlbmd0aCArIDEpO1xuICAgIGNvbnN0IGxlYWYgPSByb290LmNoaWxkcmVuW3Jvb3QuY2hpbGRyZW4ubGVuZ3RoIC0gMV07XG4gICAgZi50aGVuKChmaWxlKSA9PiB7XG4gICAgICBsZWFmLm9wZW5GaWxlKGZpbGUsIHsgYWN0aXZlOiB0cnVlIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgam91cm5hbEVudHJ5KCkge1xuICAgIGNvbnN0IGR0ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBub3RlID0ge1xuICAgICAgdXVpZDogdXVpZHY0KCksXG4gICAgICB0eXBlOiAyMCxcbiAgICAgIHZlcnNpb246IFwiMC4wLjRcIixcbiAgICAgIGNyZWF0ZWRfYXQ6IGR0LnRvSVNPU3RyaW5nKCksXG4gICAgICBwYXRoOiBcIlwiLFxuICAgICAgZGF0YTogXCJcIixcbiAgICB9O1xuXG4gICAgbm90ZS5wYXRoID0gYEpvdXJuYWwvJHtub3RlLnV1aWR9Lm1kYDtcbiAgICBub3RlLmRhdGEgPSBgLS0tXFxudHlwZTogMjBcXG51dWlkOiBcIiR7bm90ZS51dWlkfVwiXFxuY3JlYXRlZF9hdDogXCIke25vdGUuY3JlYXRlZF9hdH1cIlxcbnZlcnNpb246IFwiMC4wLjRcIlxcbnRhZ3M6XFxuICAgIC0gcHJvamVjdC9taXNzaW9uXFxuLS0tXFxuIyMgQ29udGVudFxcbiMjIyBlbnRyeVxcbmA7XG5cbiAgICByZXR1cm4gdGhpcy5hcHAudmF1bHQuY3JlYXRlKG5vdGUucGF0aCwgbm90ZS5kYXRhKS50aGVuKChmKSA9PiB7XG4gICAgICByZXR1cm4gZjtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGlzdE1ha2VyIHtcbiAgZHY6IGFueTtcbiAgZ29uZXh0OiBhbnk7XG4gIGZyb250bWF0dGVyOiBGcm9udG1hdHRlcjtcbiAgbm90ZUhlbHBlcjogTm90ZUhlbHBlcjtcblxuICBjb25zdHJ1Y3Rvcihnb25leHQsIGR2LCBmcm9udG1hdHRlcikge1xuICAgIHRoaXMuZ29uZXh0ID0gZ29uZXh0O1xuICAgIHRoaXMuZHYgPSBkdjtcbiAgICB0aGlzLmZyb250bWF0dGVyID0gZnJvbnRtYXR0ZXI7XG4gICAgdGhpcy5ub3RlSGVscGVyID0gbmV3IE5vdGVIZWxwZXIoZ29uZXh0LCBkdiwgZnJvbnRtYXR0ZXIpO1xuICB9XG5cbiAgbmFtZUluTmFtZXNwYWNlKGZtOiBhbnksIG5zOiBzdHJpbmdbXSkge1xuICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgIGlmIChucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgYSBvZiBucykge1xuICAgICAgY29uc3Qgcm9vdCA9IGEuc3BsaXQoXCIvXCIpO1xuICAgICAgQXNzZXJ0LlRydWUocm9vdC5sZW5ndGggPT09IDIsIGBJbnZhbGlkIHRhZzogJyR7YX0nYCk7XG4gICAgICBjb25zdCBwYXJlbnQgPVxuICAgICAgICByb290WzBdLnNsaWNlKDAsIDEpID09PSBcIiFcIiA/IHJvb3RbMF0uc2xpY2UoMSkgOiByb290WzBdO1xuICAgICAgLy8gY29uc29sZS5sb2cocGFyZW50KVxuICAgICAgY29uc3QgbmFtZSA9IEhlbHBlci5nZXRUYWcoZm0sIHBhcmVudCk7XG5cbiAgICAgIGlmIChhLnNsaWNlKDAsIDEpID09PSBcIiFcIikge1xuICAgICAgICAvLyBuZWdhdGl2ZSBtYXRjaCwgZGlzY2FyZCBlbnRyeVxuICAgICAgICBpZiAobmFtZSA9PT0gYS5zbGljZSgxKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAvLyBubyBtYXRjaCwgcmVpbml0XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBwb3NpdGl2ZSBtYXRjaCwga2VlcCBlbnRyeVxuICAgICAgICBpZiAobmFtZSA9PT0gYSkge1xuICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAvLyBubyBtYXRjaCwgcmVpbml0XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmb3VuZDtcbiAgfVxuXG4gIG15TmFtZUluTmFtZXNwYWNlKG5hbWU6IHN0cmluZywgbnM6IHN0cmluZ1tdKSB7XG4gICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgaWYgKG5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBhIG9mIG5zKSB7XG4gICAgICBpZiAoYS5zbGljZSgwLCAxKSA9PT0gXCIhXCIpIHtcbiAgICAgICAgLy8gbmVnYXRpdmUgbWF0Y2gsIGRpc2NhcmQgZW50cnlcbiAgICAgICAgaWYgKG5hbWUgPT09IGEuc2xpY2UoMSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgLy8gbm8gbWF0Y2gsIHJlaW5pdFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcG9zaXRpdmUgbWF0Y2gsIGtlZXAgZW50cnlcbiAgICAgICAgaWYgKG5hbWUgPT09IGEpIHtcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgLy8gbm8gbWF0Y2gsIHJlaW5pdFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvdW5kID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZm91bmQ7XG4gIH1cblxuICBmaWx0ZXJCeU5hbWVzcGFjZShcbiAgICBmbTogYW55LFxuICAgIGJ5QXJlYXM6IHN0cmluZ1tdLFxuICAgIGJ5Q29udGV4dHM6IHN0cmluZ1tdLFxuICAgIGJ5TGF5ZXJzOiBzdHJpbmdbXSxcbiAgICBieU9yZ3M6IHN0cmluZ1tdLFxuICAgIGJ5UHJvamVjdHM6IHN0cmluZ1tdLFxuICApOiBib29sZWFuIHtcbiAgICAvLyBpZiAoYnlBcmVhcy5sZW5ndGggPiAwICYmICFieUFyZWFzLmNvbnRhaW5zKEhlbHBlci5nZXRBcmVhKGZtKSkpIHtcbiAgICAvLyBcdHJldHVybiBmYWxzZTtcbiAgICAvLyB9XG5cbiAgICBpZiAoIXRoaXMubXlOYW1lSW5OYW1lc3BhY2UoSGVscGVyLmdldEFyZWEoZm0pLCBieUFyZWFzKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGNvbnN0IGFyZWEgPSBIZWxwZXIuZ2V0QXJlYShmbSk7XG4gICAgLy8gbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgLy8gZm9yIChjb25zdCBhIG9mIGJ5QXJlYXMpIHtcbiAgICAvLyBcdGlmIChhLnNsaWNlKDAsIDEpID09PSBcIiFcIikge1xuICAgIC8vIFx0XHQvLyBuZWdhdGl2ZSBtYXRjaCwgZGlzY2FyZCBlbnRyeVxuICAgIC8vIFx0XHRpZiAoYXJlYSA9PT0gYS5zbGljZSgxKSkge1xuICAgIC8vIFx0XHRcdHJldHVybiBmYWxzZTtcbiAgICAvLyBcdFx0XHQvLyBubyBtYXRjaCwgcmVpbml0XG4gICAgLy8gXHRcdH0gZWxzZSB7XG4gICAgLy8gXHRcdFx0Zm91bmQgPSB0cnVlO1xuICAgIC8vIFx0XHR9XG4gICAgLy8gXHR9IGVsc2Uge1xuICAgIC8vIFx0XHQvLyBwb3NpdGl2ZSBtYXRjaCwga2VlcCBlbnRyeVxuICAgIC8vIFx0XHRpZiAoYXJlYSA9PT0gYSkge1xuICAgIC8vIFx0XHRcdGZvdW5kID0gdHJ1ZTtcbiAgICAvLyBcdFx0XHQvLyBubyBtYXRjaCwgcmVpbml0XG4gICAgLy8gXHRcdH0gZWxzZSB7XG4gICAgLy8gXHRcdFx0Zm91bmQgPSBmYWxzZTtcbiAgICAvLyBcdFx0fVxuICAgIC8vIFx0fVxuICAgIC8vIH1cbiAgICAvL1xuICAgIC8vIGlmICghZm91bmQpIHtcbiAgICAvLyBcdHJldHVybiBmYWxzZTtcbiAgICAvLyB9XG5cbiAgICAvLyBpZiAoXG4gICAgLy8gXHRieUNvbnRleHRzLmxlbmd0aCA+IDAgJiZcbiAgICAvLyBcdCFieUNvbnRleHRzLmNvbnRhaW5zKEhlbHBlci5nZXRDb250ZXh0KGZtKSlcbiAgICAvLyApIHtcbiAgICAvLyBcdHJldHVybiBmYWxzZTtcbiAgICAvLyB9XG4gICAgaWYgKCF0aGlzLm15TmFtZUluTmFtZXNwYWNlKEhlbHBlci5nZXRDb250ZXh0KGZtKSwgYnlDb250ZXh0cykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBpZiAoYnlMYXllcnMubGVuZ3RoID4gMCAmJiAhYnlMYXllcnMuY29udGFpbnMoSGVscGVyLmdldExheWVyKGZtKSkpIHtcbiAgICAvLyBcdHJldHVybiBmYWxzZTtcbiAgICAvLyB9XG4gICAgaWYgKCF0aGlzLm15TmFtZUluTmFtZXNwYWNlKEhlbHBlci5nZXRMYXllcihmbSksIGJ5TGF5ZXJzKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGlmIChieU9yZ3MubGVuZ3RoID4gMCAmJiAhYnlPcmdzLmNvbnRhaW5zKEhlbHBlci5nZXRPcmcoZm0pKSkge1xuICAgIC8vIFx0cmV0dXJuIGZhbHNlO1xuICAgIC8vIH1cbiAgICBpZiAoIXRoaXMubXlOYW1lSW5OYW1lc3BhY2UoSGVscGVyLmdldE9yZyhmbSksIGJ5T3JncykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBpZiAoXG4gICAgLy8gXHRieVByb2plY3RzLmxlbmd0aCA+IDAgJiZcbiAgICAvLyBcdCFieVByb2plY3RzLmNvbnRhaW5zKEhlbHBlci5nZXRQcm9qZWN0KGZtKSlcbiAgICAvLyApIHtcbiAgICAvLyBcdHJldHVybiBmYWxzZTtcbiAgICAvLyB9XG4gICAgaWYgKCF0aGlzLm15TmFtZUluTmFtZXNwYWNlKEhlbHBlci5nZXRQcm9qZWN0KGZtKSwgYnlQcm9qZWN0cykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZpbHRlckJ5RGF0ZShkdDogRGF0ZSwgYmVmb3JlOiBEYXRlLCBhZnRlcjogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIGlmIChiZWZvcmUgIT09IHVuZGVmaW5lZCAmJiBkdC5nZXRUaW1lKCkgPiBiZWZvcmUuZ2V0VGltZSgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGFmdGVyICE9PSB1bmRlZmluZWQgJiYgZHQuZ2V0VGltZSgpIDwgYWZ0ZXIuZ2V0VGltZSgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBnb2FscygpIHtcbiAgICAvLyBjb25zdCBmbSA9IHRoaXMuZnJvbnRtYXR0ZXIuZ2V0Q3VycmVudEZyb250bWF0dGVyKCk7XG4gICAgY29uc3QgcnMgPSBbXTtcbiAgICBjb25zdCBiaW5zID0ge307XG4gICAgYmluc1tHb2FsU3RhdHVzLlJlZnJhbWVdID0gW107XG4gICAgYmluc1tHb2FsU3RhdHVzLlJlc2VhcmNoXSA9IFtdO1xuICAgIGJpbnNbR29hbFN0YXR1cy5PcGVyYXRpb25hbGl6ZV0gPSBbXTtcbiAgICBiaW5zW0dvYWxTdGF0dXMuUGxhbmlmeV0gPSBbXTtcbiAgICBiaW5zW0dvYWxTdGF0dXMuRGVwZW5kYW50XSA9IFtdO1xuICAgIGJpbnNbR29hbFN0YXR1cy5BY3RpdmVdID0gW107XG4gICAgYmluc1tHb2FsU3RhdHVzLlN1Y2Nlc3NdID0gW107XG4gICAgYmluc1tHb2FsU3RhdHVzLkZhaWxlZF0gPSBbXTtcblxuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5kdi5wYWdlcyhgXCIke1BhdGhzLkdvYWxzfVwiYCkud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgIGNvbnN0IGZtcCA9IHBhZ2UuZmlsZS5mcm9udG1hdHRlcjtcblxuICAgICAgaWYgKGJpbnNbZm1wLnN0YXR1c10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBjb25zb2xlLmVycm9yKGBJbnZhbGlkIHN0YXR1cyBmb3IgZ29hbDogXCIke2ZtcC51dWlkfVwiYCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgYmluc1tmbXAuc3RhdHVzXS5wdXNoKGZtKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGJpbnMpO1xuICAgIGtleXMuc29ydCgpO1xuICAgIGZvciAoY29uc3QgayBvZiBrZXlzKSB7XG4gICAgICBjb25zdCBidWZmID0gYmluc1trXTtcbiAgICAgIGJ1ZmYuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBkdGEgPSBuZXcgRGF0ZShhLmZtLmJlZm9yZSk7XG4gICAgICAgIGNvbnN0IGR0YiA9IG5ldyBEYXRlKGIuZm0uYmVmb3JlKTtcbiAgICAgICAgcmV0dXJuIGR0YS5nZXRUaW1lKCkgLSBkdGIuZ2V0VGltZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZGlzcGxheUdvYWxzID0gKGssIHJzKSA9PiB7XG4gICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAzLCBrXSk7XG4gICAgICBjb25zdCBidWZmID0gYmluc1trXTtcbiAgICAgIHJzLnB1c2goW1wiYXJyYXlcIiwgUmVuZGVyZXIuZ29hbCwgYnVmZl0pO1xuICAgIH07XG5cbiAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCBcIm9wZXJhdGlvbmFsXCJdKTtcbiAgICBkaXNwbGF5R29hbHMoXCJhY3RpdmVcIiwgcnMpO1xuICAgIGRpc3BsYXlHb2FscyhcInBsYW5pZnlcIiwgcnMpO1xuXG4gICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgXCJub24tb3BlcmF0aW9uYWxcIl0pO1xuICAgIGRpc3BsYXlHb2FscyhcInJlZnJhbWVcIiwgcnMpO1xuICAgIGRpc3BsYXlHb2FscyhcInJlc2VhcmNoXCIsIHJzKTtcbiAgICBkaXNwbGF5R29hbHMoXCJvcGVyYXRpb25hbGl6ZVwiLCBycyk7XG4gICAgLy8gZGlzcGxheUdvYWxzKFwiZGVwZW5kYW50XCIsIHJzKTtcblxuICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIFwiZG9uZVwiXSk7XG4gICAgZGlzcGxheUdvYWxzKFwic3VjY2Vzc1wiLCBycyk7XG4gICAgZGlzcGxheUdvYWxzKFwiZmFpbGVkXCIsIHJzKTtcblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIHByb2plY3RUYXNrc1NoZWV0UmVsYXRpb25Gcm9udG1hdHRlcihkdikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBkdi5jdXJyZW50KCk7XG4gICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhjdXJyZW50KTtcblxuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBmbS5nZXROYW1lKCksXG4gICAgICB1dWlkOiBmbS51dWlkLFxuICAgICAgYWN0aXZlOlxuICAgICAgICBmbS5mbS5hY3RpdmUgPT09IHVuZGVmaW5lZCB8fCBmbS5mbS5hY3RpdmUgPT09IHRydWVcbiAgICAgICAgICA/IHRydWVcbiAgICAgICAgICA6IGZhbHNlLFxuICAgIH07XG4gIH1cblxuICBwcm9qZWN0VGFza3NTaGVldFJlbGF0aW9uKGR2KSB7XG4gICAgY29uc3QgcHJvamVjdCA9IHRoaXMucHJvamVjdFRhc2tzU2hlZXRSZWxhdGlvbkZyb250bWF0dGVyKGR2KTtcblxuICAgIGNvbnN0IHJzID0gW107XG4gICAgY29uc3QgYmlucyA9IHtcbiAgICAgIG5leHRBY3Rpb246IFtdLFxuICAgICAgd2FpdGluZ0ZvcjogW10sXG4gICAgICBzb21lZGF5TWF5YmU6IFtdLFxuICAgIH07XG5cbiAgICB7XG4gICAgICBjb25zdCBwYWdlcyA9IGR2XG4gICAgICAgIC5wYWdlcyhgXCJKb3VybmFsXCJgKVxuICAgICAgICAud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICAgIHJldHVybiBmbS5nZXRQcm9qZWN0KCkgPT09IHByb2plY3QubmFtZTtcbiAgICAgICAgfSlcbiAgICAgICAgLnNvcnQoKGspID0+IGsuY3JlYXRlZF9hdCwgXCJkZXNjXCIpO1xuXG4gICAgICBpZiAocGFnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCBgSm91cm5hbCAoJHtwYWdlcy5sZW5ndGh9KWBdKTtcbiAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgICBjb25zdCB0ZXh0ID0gUmVuZGVyZXIubWFrZUxpbmsoXG4gICAgICAgICAgICBkdixcbiAgICAgICAgICAgIGZtLmYsXG4gICAgICAgICAgICBgJHtmbS5jcmVhdGVkQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCl9YCxcbiAgICAgICAgICAgIFwiZW50cnlcIixcbiAgICAgICAgICApO1xuICAgICAgICAgIHJzLnB1c2goW1wicGFyYWdyYXBoXCIsIHRleHRdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHBhZ2VzID0gZHYucGFnZXMoYFwiJHtQYXRocy5UYXNrc31cImApLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgaWYgKGZtLmZtLnN0YXR1cyA9PT0gXCJkb25lXCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoW1wiZGFpbHlcIiwgXCJ3ZWVrbHlcIiwgXCJtb250aGx5XCJdLmNvbnRhaW5zKHByb2plY3QubmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgcHJvamVjdC5uYW1lID09PSBcImFkaG9jXCIgJiZcbiAgICAgICAgZm0uZ2V0UHJvamVjdCgpID09PSB1bmRlZmluZWRcbiAgICAgICkge1xuICAgICAgICBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIucHJvamVjdCA9IFwiYWRob2NcIjtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHByb2plY3QubmFtZSA9PT0gZm0uZ2V0UHJvamVjdCgpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuXG4gICAgICBpZiAodGhpcy5ub3RlSGVscGVyLmlzRG9hYmxlKHBhZ2UpKSB7XG4gICAgICAgIGlmIChmbS5mbS5wcmlvcml0eSA+IDApIHtcbiAgICAgICAgICBiaW5zLm5leHRBY3Rpb24ucHVzaChwYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBiaW5zLnNvbWVkYXlNYXliZS5wdXNoKHBhZ2UpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZm0uZm0ubmVlZHMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgIHRoaXMubm90ZUhlbHBlci5oYXNQZW5kaW5nRGVwZW5kZW5jaWVzKGZtLmZtLm5lZWRzKVxuICAgICAgICApIHtcbiAgICAgICAgICBwYWdlLmNhdXNlID0gXCJkZXBlbmRlbmNpZXNcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBmbUF0ID0gZm0uYXQ7XG4gICAgICAgICAgY29uc3QgY3VycmVudEF0ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICBjb25zdCBmbUFmdGVyID0gZm0uYWZ0ZXI7XG5cbiAgICAgICAgICBpZiAoZm0uZm0uYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm1BdC5zZXRIb3VycygwKTtcbiAgICAgICAgICAgIGZtQXQuc2V0TWludXRlcygwKTtcbiAgICAgICAgICAgIGZtQXQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgICAgIGZtQXQuc2V0TWlsbGlzZWNvbmRzKDApO1xuICAgICAgICAgICAgY3VycmVudEF0LnNldEhvdXJzKDApO1xuICAgICAgICAgICAgY3VycmVudEF0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgICAgICBjdXJyZW50QXQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgICAgIGN1cnJlbnRBdC5zZXRNaWxsaXNlY29uZHMoMCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChmbS5hZnRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmbUFmdGVyLnNldEhvdXJzKDApO1xuICAgICAgICAgICAgZm1BZnRlci5zZXRNaW51dGVzKDApO1xuICAgICAgICAgICAgZm1BZnRlci5zZXRTZWNvbmRzKDApO1xuICAgICAgICAgICAgZm1BZnRlci5zZXRNaWxsaXNlY29uZHMoMCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc29sZS5sb2coYGN1cnJlbnQ6ICR7Y3VycmVudEF0LmdldFRpbWUoKX1gKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgYXQ6ICR7Zm0uYXQuZ2V0VGltZSgpfWApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBhZnRlcjogJHtmbS5hZnRlci5nZXRUaW1lKCl9YCk7XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBmbS5mbS5hdCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBmbUF0LmdldFRpbWUoKSA+IGN1cnJlbnRBdC5nZXRUaW1lKClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHBhZ2UuY2F1c2UgPSBcImF0XCI7XG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIGZtLmZtLmFmdGVyICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGZtQWZ0ZXIuZ2V0VGltZSgpIDwgY3VycmVudEF0LmdldFRpbWUoKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcGFnZS5jYXVzZSA9IFwiYWZ0ZXJcIjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFnZS5jYXVzZSA9IFwidW5rbm93blwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGJpbnMud2FpdGluZ0Zvci5wdXNoKHBhZ2UpO1xuICAgICAgICAvLyBhdFxuICAgICAgICAvLyBhZnRlclxuICAgICAgICAvLyBuZWVkc1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChiaW5zLm5leHRBY3Rpb24ubGVuZ3RoID4gMCkge1xuICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgYE5leHQgQWN0aW9ucyAoJHtiaW5zLm5leHRBY3Rpb24ubGVuZ3RofSlgXSk7XG4gICAgICBiaW5zLm5leHRBY3Rpb24uc29ydChIZWxwZXIuc29ydEJ5UHJpb3JpdHlBbmREdXJhdGlvbkFuZEFnZSk7XG4gICAgICBycy5wdXNoKFtcbiAgICAgICAgXCJhcnJheVwiLFxuICAgICAgICBSZW5kZXJlci5iYXNpY1Rhc2tKb3VybmFsTmV4dEFjdGlvbixcbiAgICAgICAgYmlucy5uZXh0QWN0aW9uLFxuICAgICAgXSk7XG4gICAgfVxuXG4gICAgaWYgKGJpbnMud2FpdGluZ0Zvci5sZW5ndGggPiAwKSB7XG4gICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCBgV2FpdGluZyAoJHtiaW5zLndhaXRpbmdGb3IubGVuZ3RofSlgXSk7XG4gICAgICBiaW5zLndhaXRpbmdGb3Iuc29ydChIZWxwZXIuc29ydEJ5UHJpb3JpdHlBbmREdXJhdGlvbkFuZEFnZSk7XG4gICAgICBycy5wdXNoKFtcbiAgICAgICAgXCJhcnJheVwiLFxuICAgICAgICBSZW5kZXJlci5iYXNpY1Rhc2tKb3VybmFsV2FpdGluZyxcbiAgICAgICAgYmlucy53YWl0aW5nRm9yLFxuICAgICAgXSk7XG4gICAgfVxuXG4gICAgaWYgKGJpbnMuc29tZWRheU1heWJlLmxlbmd0aCA+IDApIHtcbiAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIGBNYXliZSAoJHtiaW5zLnNvbWVkYXlNYXliZS5sZW5ndGh9KWBdKTtcbiAgICAgIGJpbnMuc29tZWRheU1heWJlLnNvcnQoSGVscGVyLnNvcnRCeVByaW9yaXR5QW5kRHVyYXRpb25BbmRBZ2UpO1xuICAgICAgcnMucHVzaChbXCJhcnJheVwiLCBSZW5kZXJlci5iYXNpY1Rhc2tKb3VybmFsLCBiaW5zLnNvbWVkYXlNYXliZV0pO1xuICAgIH1cblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIHByb2plY3RMb2dzU2hlZXRSZWxhdGlvbihkdikge1xuICAgIGNvbnN0IHByb2plY3QgPSB0aGlzLnByb2plY3RUYXNrc1NoZWV0UmVsYXRpb25Gcm9udG1hdHRlcihkdik7XG5cbiAgICBjb25zdCBmaWx0ZXJCeSA9IFtdO1xuICAgIGNvbnN0IHJzID0gW107XG5cbiAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCBcIkxvZ3NcIl0pO1xuXG4gICAgY29uc3QgbG9ncyA9IHRoaXMuZHYucGFnZXMoYFwiJHtQYXRocy5Mb2dzfVwiYCkud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgIGlmIChwYWdlLnR5cGUgIT09IFR5cGVzLkxvZykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAocGFnZS5maWxlLmZyb250bWF0dGVyLnJldmlld2VkID4gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGJ1ZmYgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgbG9ncykge1xuICAgICAgY29uc3QgZm0gPSBlLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBpZiAoZmlsdGVyQnkubGVuZ3RoID4gMCAmJiAhdGhpcy5uYW1lSW5OYW1lc3BhY2UoZm0sIGZpbHRlckJ5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgZm0uY3JlYXRlZEF0ID0gdGhpcy5mcm9udG1hdHRlci5nZXRDcmVhdGVkQXQoZS5maWxlKTtcbiAgICAgIEFzc2VydC5UcnVlKFxuICAgICAgICAhSGVscGVyLm5pbENoZWNrKGZtLnBhcmVudF9pZCksXG4gICAgICAgIGBNaXNzaW5nIGZpZWxkIFwicGFyZW50X2lkXCIgZnJvbSBsb2c6IFwiJHtmbS51dWlkfVwiYCxcbiAgICAgICk7XG4gICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmR2XG4gICAgICAgIC5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfS8ke2ZtLnBhcmVudF9pZH1cImApXG4gICAgICAgIC5hcnJheSgpO1xuICAgICAgaWYgKHBhcmVudC5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgcGFyZW50Lmxlbmd0aCA9PT0gMSxcbiAgICAgICAgYFBhcmVudDogJHtmbS5wYXJlbnRfaWR9IG5vdCBmb3VuZCBmb3IgbG9nOiBcIiR7Zm0udXVpZH1cImAsXG4gICAgICApO1xuICAgICAgZm0ucHJvamVjdCA9IEhlbHBlci5nZXRQcm9qZWN0KHBhcmVudFswXS5maWxlLmZyb250bWF0dGVyKTtcbiAgICAgIGZtLmFyZWEgPSBIZWxwZXIuZ2V0QXJlYShwYXJlbnRbMF0uZmlsZS5mcm9udG1hdHRlciwgdHJ1ZSk7XG4gICAgICBpZiAoXG4gICAgICAgIGZtLnByb2plY3QgIT09XG4gICAgICAgIGBwcm9qZWN0LyR7cHJvamVjdC5uYW1lID09PSBcImFkaG9jXCIgPyBcIm5vbmVcIiA6IHByb2plY3QubmFtZX1gXG4gICAgICApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChIZWxwZXIubmlsQ2hlY2soZm0uZG9uZV9hdCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBkYXRlID0gZm0uZG9uZV9hdC5zbGljZSgwLCAxMCk7XG5cbiAgICAgIGlmIChidWZmW2RhdGVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYnVmZltkYXRlXSA9IFtlXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ1ZmZbZGF0ZV0ucHVzaChlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYnVmZik7XG4gICAga2V5cy5zb3J0KCk7XG4gICAgZm9yIChjb25zdCBkYXRlIG9mIGtleXMpIHtcbiAgICAgIGJ1ZmZbZGF0ZV0uc29ydChcbiAgICAgICAgKGEsIGIpID0+XG4gICAgICAgICAgYi5maWxlLmZyb250bWF0dGVyLmNyZWF0ZWRBdC5nZXRUaW1lKCkgLVxuICAgICAgICAgIGEuZmlsZS5mcm9udG1hdHRlci5jcmVhdGVkQXQuZ2V0VGltZSgpLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGRhdGUgb2Yga2V5cy5yZXZlcnNlKCkpIHtcbiAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDMsIGRhdGVdKTtcbiAgICAgIHJzLnB1c2goW1wiYXJyYXlcIiwgUmVuZGVyZXIucHJvamVjdExvZ3MsIGJ1ZmZbZGF0ZV1dKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcnM7XG4gIH1cblxuICBnZXRQcm9qZWN0TG9ncyhkdiwgcHJvamVjdCkge1xuICAgIGNvbnN0IGxvZ3MgPSB0aGlzLmR2LnBhZ2VzKGBcIiR7UGF0aHMuTG9nc31cImApLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICBpZiAocGFnZS50eXBlICE9PSBUeXBlcy5Mb2cpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICBjb25zdCBidWZmID0gW107XG4gICAgZm9yIChjb25zdCBlIG9mIGxvZ3MpIHtcbiAgICAgIGNvbnN0IGZtID0gZS5maWxlLmZyb250bWF0dGVyO1xuICAgICAgQXNzZXJ0LlRydWUoXG4gICAgICAgICFIZWxwZXIubmlsQ2hlY2soZm0ucGFyZW50X2lkKSxcbiAgICAgICAgYE1pc3NpbmcgZmllbGQgXCJwYXJlbnRfaWRcIiBmcm9tIGxvZzogXCIke2ZtLnV1aWR9XCJgLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZHZcbiAgICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9LyR7Zm0ucGFyZW50X2lkfVwiYClcbiAgICAgICAgLmFycmF5KCk7XG4gICAgICBpZiAocGFyZW50Lmxlbmd0aCAhPT0gMSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vIEFzc2VydC5UcnVlKFxuICAgICAgLy8gXHRwYXJlbnQubGVuZ3RoID09PSAxLFxuICAgICAgLy8gXHRgUGFyZW50OiAke2ZtLnBhcmVudF9pZH0gbm90IGZvdW5kIGZvciBsb2c6IFwiJHtmbS51dWlkfVwiYCxcbiAgICAgIC8vICk7XG4gICAgICBmbS5wcm9qZWN0ID0gSGVscGVyLmdldFByb2plY3QocGFyZW50WzBdLmZpbGUuZnJvbnRtYXR0ZXIpO1xuICAgICAgZm0uYXJlYSA9IEhlbHBlci5nZXRBcmVhKHBhcmVudFswXS5maWxlLmZyb250bWF0dGVyLCB0cnVlKTtcbiAgICAgIGlmIChcbiAgICAgICAgZm0ucHJvamVjdCAhPT1cbiAgICAgICAgYHByb2plY3QvJHtwcm9qZWN0Lm5hbWUgPT09IFwiYWRob2NcIiA/IFwibm9uZVwiIDogcHJvamVjdC5uYW1lfWBcbiAgICAgICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKEhlbHBlci5uaWxDaGVjayhmbS5kb25lX2F0KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGJ1ZmYucHVzaChlKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ1ZmY7XG4gIH1cblxuICBwcm9qZWN0TG9nc1NoZWV0KGR2KSB7XG4gICAgY29uc3QgcHJvamVjdCA9IHRoaXMuZnJvbnRtYXR0ZXIucHJvamVjdFBhcnNlTWV0YShkdik7XG4gICAgY29uc3QgZm1sID0gdGhpcy5mcm9udG1hdHRlci5nZXRDdXJyZW50RnJvbnRtYXR0ZXIoKTtcbiAgICBpZiAoZm1sID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBmcm9udG1hdHRlciwgY2Fubm90IHByb2NlZWRgKTtcbiAgICB9XG5cbiAgICBjb25zdCBiZWZvcmUgPSBIZWxwZXIubmlsQ2hlY2soZm1sLmJlZm9yZSlcbiAgICAgID8gbmV3IERhdGUoMClcbiAgICAgIDogbmV3IERhdGUoZm1sLmJlZm9yZSk7XG4gICAgY29uc3QgYWZ0ZXIgPSBIZWxwZXIubmlsQ2hlY2soZm1sLmFmdGVyKVxuICAgICAgPyBuZXcgRGF0ZSgpXG4gICAgICA6IG5ldyBEYXRlKGZtbC5hZnRlcik7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhgYmVmb3JlOiAnJHtiZWZvcmV9J2ApO1xuICAgIC8vIGNvbnNvbGUubG9nKGBhZnRlcjogJyR7YWZ0ZXJ9J2ApO1xuICAgIGNvbnN0IGZpbHRlckJ5ID0gdGhpcy5mcm9udG1hdHRlci5wYXJzZUxpc3RGaWx0ZXJCeShmbWwpO1xuICAgIGNvbnN0IHJzID0gW107XG4gICAgbGV0IHRvdGFsVGltZSA9IDA7XG4gICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMSwgcHJvamVjdC5uYW1lXSk7XG5cbiAgICBjb25zdCBsb2dzID0gdGhpcy5kdi5wYWdlcyhgXCIke1BhdGhzLkxvZ3N9XCJgKS53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgaWYgKHBhZ2UudHlwZSAhPT0gVHlwZXMuTG9nKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgY29uc3QgYnVmZiA9IHt9O1xuICAgIGZvciAoY29uc3QgZSBvZiBsb2dzKSB7XG4gICAgICBjb25zdCBmbSA9IGUuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGlmIChmaWx0ZXJCeS5sZW5ndGggPiAwICYmICF0aGlzLm5hbWVJbk5hbWVzcGFjZShmbSwgZmlsdGVyQnkpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBmbS5jcmVhdGVkQXQgPSB0aGlzLmZyb250bWF0dGVyLmdldENyZWF0ZWRBdChlLmZpbGUpO1xuICAgICAgQXNzZXJ0LlRydWUoXG4gICAgICAgICFIZWxwZXIubmlsQ2hlY2soZm0ucGFyZW50X2lkKSxcbiAgICAgICAgYE1pc3NpbmcgZmllbGQgXCJwYXJlbnRfaWRcIiBmcm9tIGxvZzogXCIke2ZtLnV1aWR9XCJgLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZHZcbiAgICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9LyR7Zm0ucGFyZW50X2lkfVwiYClcbiAgICAgICAgLmFycmF5KCk7XG4gICAgICBpZiAocGFyZW50Lmxlbmd0aCAhPT0gMSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vIEFzc2VydC5UcnVlKFxuICAgICAgLy8gXHRwYXJlbnQubGVuZ3RoID09PSAxLFxuICAgICAgLy8gXHRgUGFyZW50OiAke2ZtLnBhcmVudF9pZH0gbm90IGZvdW5kIGZvciBsb2c6IFwiJHtmbS51dWlkfVwiYCxcbiAgICAgIC8vICk7XG4gICAgICBmbS5wcm9qZWN0ID0gSGVscGVyLmdldFByb2plY3QocGFyZW50WzBdLmZpbGUuZnJvbnRtYXR0ZXIpO1xuICAgICAgZm0uYXJlYSA9IEhlbHBlci5nZXRBcmVhKHBhcmVudFswXS5maWxlLmZyb250bWF0dGVyLCB0cnVlKTtcbiAgICAgIGlmIChcbiAgICAgICAgZm0ucHJvamVjdCAhPT1cbiAgICAgICAgYHByb2plY3QvJHtwcm9qZWN0Lm5hbWUgPT09IFwiYWRob2NcIiA/IFwibm9uZVwiIDogcHJvamVjdC5uYW1lfWBcbiAgICAgICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKEhlbHBlci5uaWxDaGVjayhmbS5kb25lX2F0KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0ZSA9IGZtLmRvbmVfYXQuc2xpY2UoMCwgMTApO1xuICAgICAgY29uc3QgY3JlYXRlZEF0ID0gbmV3IERhdGUoZm0uY3JlYXRlZF9hdCk7XG4gICAgICBjb25zdCBkb25lQXQgPSBuZXcgRGF0ZShmbS5kb25lX2F0KTtcblxuICAgICAgaWYgKGNyZWF0ZWRBdCA+IGJlZm9yZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNyZWF0ZWRBdCA8IGFmdGVyKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoYnVmZltkYXRlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJ1ZmZbZGF0ZV0gPSBbZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidWZmW2RhdGVdLnB1c2goZSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRlbHRhID0gZG9uZUF0LmdldFRpbWUoKSAtIGNyZWF0ZWRBdC5nZXRUaW1lKCk7XG5cbiAgICAgIHRvdGFsVGltZSArPSBkZWx0YTtcbiAgICB9XG5cbiAgICBkdi5wYXJhZ3JhcGgoXG4gICAgICBgX3RvdGFsVGltZSAoaCk6XyAke01hdGgucm91bmQoKHRvdGFsVGltZSAvICgxMDAwICogNjAgKiA2MCkpICogMTApIC8gMTB9YCxcbiAgICApO1xuXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGJ1ZmYpO1xuICAgIGtleXMuc29ydCgpO1xuICAgIGZvciAoY29uc3QgZGF0ZSBvZiBrZXlzKSB7XG4gICAgICBidWZmW2RhdGVdLnNvcnQoXG4gICAgICAgIChhLCBiKSA9PlxuICAgICAgICAgIGIuZmlsZS5mcm9udG1hdHRlci5jcmVhdGVkQXQuZ2V0VGltZSgpIC1cbiAgICAgICAgICBhLmZpbGUuZnJvbnRtYXR0ZXIuY3JlYXRlZEF0LmdldFRpbWUoKSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBkYXRlIG9mIGtleXMucmV2ZXJzZSgpKSB7XG4gICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAzLCBkYXRlXSk7XG4gICAgICBycy5wdXNoKFtcImFycmF5XCIsIFJlbmRlcmVyLnByb2plY3RMb2dzLCBidWZmW2RhdGVdXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgbG9ncygpIHtcbiAgICBjb25zdCBbZ3JvdXBCeSwgZmlsdGVyQnksIGJlZm9yZSwgYWZ0ZXJdID1cbiAgICAgIHRoaXMuZnJvbnRtYXR0ZXIucGFyc2VBbGxQcm9ncmVzc2VkVGFza3MoKTtcblxuICAgIGNvbnN0IHRhc2tzID0gdGhpcy5kdlxuICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKVxuICAgICAgLndoZXJlKChwYWdlKSA9PiBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuc3RhdHVzICE9PSBcImRvaW5nXCIpO1xuXG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xuICAgICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBpZiAoZmlsdGVyQnkubGVuZ3RoID4gMCAmJiAhdGhpcy5uYW1lSW5OYW1lc3BhY2UoZm0sIGZpbHRlckJ5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGltZUVzdGltYXRlID0gSGVscGVyLmR1cmF0aW9uU3RyaW5nVG9TZWMoZm0udGltZV9lc3RpbWF0ZSk7XG4gICAgICBpZiAodGltZUVzdGltYXRlID09PSB1bmRlZmluZWQgJiYgZm0udGltZV9lc3RpbWF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgSW52YWxpZCB2YWx1ZTogXCIke2ZtLnRpbWVfZXN0aW1hdGV9XCIgZm9yIGVudHJ5OiBcIiR7Zm0udXVpZH1cImAsXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmbS50aW1lRXN0aW1hdGUgPSB0aW1lRXN0aW1hdGU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxvZ3MgPSB0aGlzLmR2XG4gICAgICAgIC5wYWdlcyhgXCIke1BhdGhzLkxvZ3N9LyR7Zm0udXVpZH1cImApXG4gICAgICAgIC53aGVyZSgocGFnZSkgPT4gcGFnZS50eXBlID09PSBUeXBlcy5Mb2cpXG4gICAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiYXNjXCIpO1xuXG4gICAgICAvLyBkaXNjYXJkIHRhc2tzIHdpdGhvdXQgbG9nIGVudHJ5XG4gICAgICBpZiAobG9ncy5sZW5ndGggPCAxKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBmbS50b29rID0gMDtcbiAgICAgIGNvbnN0IHByb2plY3QgPSBIZWxwZXIuZ2V0RmllbGQoSGVscGVyLmdldFByb2plY3QoZm0sIHRydWUpLCBcIlwiKTtcbiAgICAgIGNvbnN0IGFyZWEgPSBIZWxwZXIuZ2V0RmllbGQoSGVscGVyLmdldEFyZWEoZm0sIHRydWUpLCBcIlwiKTtcblxuICAgICAgZm9yIChjb25zdCBsb2cgb2YgbG9ncykge1xuICAgICAgICBjb25zdCBmbWwgPSBsb2cuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgICAgY29uc3QgZW50cnkgPSB7XG4gICAgICAgICAgYWxpYXM6IGZtLmFsaWFzLFxuICAgICAgICAgIHV1aWQ6IGZtLnV1aWQsXG4gICAgICAgICAgbG9nSWQ6IGZtbC51dWlkLFxuICAgICAgICAgIGVzdGltYXRlOiBmbS50aW1lRXN0aW1hdGUsXG4gICAgICAgICAgcHJvamVjdDogcHJvamVjdCxcbiAgICAgICAgICBhcmVhOiBhcmVhLFxuICAgICAgICAgIGRvbWFpbjogSGVscGVyLmdldEZpZWxkKEhlbHBlci5nZXREb21haW4oZm0sIHRydWUpLCBcIlwiKSxcbiAgICAgICAgICBwYXRoOiB0YXNrLmZpbGUucGF0aCxcbiAgICAgICAgICBsb2dQYXRoOiBsb2cuZmlsZS5wYXRoLFxuICAgICAgICAgIGNyZWF0ZWRBdDogdW5kZWZpbmVkLFxuICAgICAgICAgIGRvbmVBdDogdW5kZWZpbmVkLFxuICAgICAgICAgIHRvb2s6IHVuZGVmaW5lZCxcbiAgICAgICAgICB0b29rQWNjOiB1bmRlZmluZWQsXG4gICAgICAgICAgZGVsdGFBY2M6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGZtbC5jcmVhdGVkX2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGxvZyk7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYHRhc2s6ICR7Zm0udXVpZH0gbGFzdCBlbnRyeSBpcyBtaXNzaW5nICdjcmVhdGVkX2F0JyBmaWVsZGAsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmbWwuZG9uZV9hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihsb2cpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGB0YXNrOiAke2ZtLnV1aWR9IGxhc3QgZW50cnkgaXMgbWlzc2luZyAnZG9uZV9hdCcgZmllbGRgLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBlbnRyeS5jcmVhdGVkQXQgPSBuZXcgRGF0ZShmbWwuY3JlYXRlZF9hdCk7XG4gICAgICAgIGVudHJ5LmRvbmVBdCA9IG5ldyBEYXRlKGZtbC5kb25lX2F0KTtcbiAgICAgICAgaWYgKCF0aGlzLmZpbHRlckJ5RGF0ZShlbnRyeS5kb25lQXQsIGJlZm9yZSwgYWZ0ZXIpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0b29rID1cbiAgICAgICAgICAoZW50cnkuZG9uZUF0LmdldFRpbWUoKSAtIGVudHJ5LmNyZWF0ZWRBdC5nZXRUaW1lKCkpIC8gMTAwMDtcbiAgICAgICAgZm0udG9vayArPSB0b29rO1xuICAgICAgICBlbnRyeS50b29rID0gdG9vaztcbiAgICAgICAgZW50cnkudG9va0FjYyA9IGZtLnRvb2s7XG4gICAgICAgIGVudHJ5LmRlbHRhQWNjID0gdGltZUVzdGltYXRlIC0gZm0udG9vaztcbiAgICAgICAgYnVmZi5wdXNoKGVudHJ5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBrZXlHZXR0ZXIgPSBIZWxwZXIuZ2V0S2V5KGdyb3VwQnkpO1xuICAgIGNvbnN0IGJpbnMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGJ1ZmYpIHtcbiAgICAgIGxldCBkID0gdW5kZWZpbmVkO1xuXG4gICAgICB0cnkge1xuICAgICAgICBkID0ga2V5R2V0dGVyKGVudHJ5KTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZW50cnkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYmluc1tkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbZF0gPSBbZW50cnldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmluc1tkXS5wdXNoKGVudHJ5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYmlucyk7XG4gICAga2V5cy5zb3J0KCk7XG5cbiAgICAvLyBidWlsZHMgcmVuZGVyaW5nIGFycmF5XG4gICAgY29uc3QgcnMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzLnJldmVyc2UoKSkge1xuICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwga2V5XSk7XG4gICAgICBjb25zdCBhcnIgPSBbXTtcbiAgICAgIGxldCB0b3RhbFRpbWUgPSAwO1xuXG4gICAgICAvLyBkYXkgbG9vcFxuICAgICAgZm9yIChjb25zdCBlIG9mIGJpbnNba2V5XSkge1xuICAgICAgICBjb25zdCBidWZmID0gW107XG4gICAgICAgIGJ1ZmYucHVzaChcbiAgICAgICAgICBSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChcbiAgICAgICAgICAgIHRoaXMuZHYsXG4gICAgICAgICAgICB7IHBhdGg6IGUucGF0aCwgZnJvbnRtYXR0ZXI6IHsgdXVpZDogZS51dWlkIH0gfSxcbiAgICAgICAgICAgIFwiVGFza1wiLFxuICAgICAgICAgICksXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gYnVmZi5wdXNoKFxuICAgICAgICAvLyBcdHRoaXMuZHYuc2VjdGlvbkxpbmsoXG4gICAgICAgIC8vIFx0XHRlLnBhdGgsXG4gICAgICAgIC8vIFx0XHRcIlRhc2tcIixcbiAgICAgICAgLy8gXHRcdGZhbHNlLFxuICAgICAgICAvLyBcdFx0YCR7ZS51dWlkLnNsaWNlKDAsIDgpfWAsXG4gICAgICAgIC8vIFx0KSxcbiAgICAgICAgLy8gKTtcblxuICAgICAgICBidWZmLnB1c2goXG4gICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtTaG9ydFVVSUQoXG4gICAgICAgICAgICB0aGlzLmR2LFxuICAgICAgICAgICAgeyBwYXRoOiBlLmxvZ1BhdGgsIGZyb250bWF0dGVyOiB7IHV1aWQ6IGUubG9nSWQgfSB9LFxuICAgICAgICAgICAgXCJDb250ZW50XCIsXG4gICAgICAgICAgKSxcbiAgICAgICAgKTtcbiAgICAgICAgLy8gYnVmZi5wdXNoKFxuICAgICAgICAvLyBcdHRoaXMuZHYuc2VjdGlvbkxpbmsoXG4gICAgICAgIC8vIFx0XHRlLmxvZ1BhdGgsXG4gICAgICAgIC8vIFx0XHRcIkNvbnRlbnRcIixcbiAgICAgICAgLy8gXHRcdGZhbHNlLFxuICAgICAgICAvLyBcdFx0YCR7ZS5sb2dJZC5zbGljZSgwLCA4KX1gLFxuICAgICAgICAvLyBcdCksXG4gICAgICAgIC8vICk7XG5cbiAgICAgICAgLy8gYnVmZi5wdXNoKGAke2UuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTYpfWApO1xuICAgICAgICAvLyBidWZmLnB1c2goYCR7ZS5kb25lQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxNil9YCk7XG5cbiAgICAgICAgY29uc3QgY29udmVydFNlY29uZHNUb0hvdXJzID0gKHQpID0+IHtcbiAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgodCAvIDM2MDApICogMTApIC8gMTA7XG4gICAgICAgIH07XG4gICAgICAgIGJ1ZmYucHVzaChgJHtjb252ZXJ0U2Vjb25kc1RvSG91cnMoZS50b29rKX1gKTtcbiAgICAgICAgYnVmZi5wdXNoKGAke2UucHJvamVjdH1gKTtcblxuICAgICAgICBhcnIucHVzaChidWZmKTtcbiAgICAgICAgdG90YWxUaW1lICs9IGUudG9vaztcbiAgICAgIH1cblxuICAgICAgLy8gdGFza1xuICAgICAgdG90YWxUaW1lID0gTWF0aC5yb3VuZCgodG90YWxUaW1lIC8gMzYwMCkgKiAxMCkgLyAxMDtcbiAgICAgIHJzLnB1c2goW1wic3RhdHNcIiwgXCJ0b3RhbFRpbWVcIiwgXCJoXCIsIHRvdGFsVGltZV0pO1xuICAgICAgcnMucHVzaChbXCJhcnJheVwiLCBSZW5kZXJlci5iYXNpY1Byb2dyZXNzZWRUYXNrV2l0aExvZywgYXJyXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgaW5ib3goZHYpIHtcbiAgICBjb25zdCBycyA9IFtdO1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICAvLyBmb25jdGlvbiBkJ2V4dHJhY3Rpb24gZXQgZCdpbml0aWFsaXNhdGlvbiBkZXMgcGFyYW1ydHJlcyBkdSBmcm9udG1hdHRlclxuICAgIC8vIGZvbmN0aW9uIGZpbHRlciwgKHRhc2spIC0+IGJvb2xcblxuICAgIGNvbnN0IGZpbHRlckJ5ID0gW107XG4gICAgY29uc3QgbWluU2l6ZSA9IDA7XG4gICAgY29uc3QgbWF4U2l6ZSA9IDQyOTQ5NjcyOTU7XG5cbiAgICBjb25zdCBmbGVldGluZ3MgPSB0aGlzLmR2LnBhZ2VzKGBcIiR7UGF0aHMuSW5ib3h9XCJgKS5hcnJheSgpO1xuICAgIGZvciAoY29uc3QgZSBvZiBmbGVldGluZ3MpIHtcbiAgICAgIGNvbnN0IGZtID0gZS5maWxlLmZyb250bWF0dGVyO1xuICAgICAgZS5maWxlLmZyb250bWF0dGVyLmNyZWF0ZWRBdCA9IHRoaXMuZnJvbnRtYXR0ZXIuZ2V0Q3JlYXRlZEF0KFxuICAgICAgICBlLmZpbGUsXG4gICAgICApO1xuICAgICAgbGV0IGZtanMgPSBudWxsO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm1qcyA9IG5ldyBGcm9udG1hdHRlckpTKGUpO1xuICAgICAgfSBjYXRjaCAoVmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICBkdi5wYXJhZ3JhcGgoUmVuZGVyZXIubWFrZUxpbmsoZHYsIGUuZmlsZSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgZm0ucHJvamVjdCA9IEhlbHBlci5nZXRQcm9qZWN0KGZtLCB0cnVlKTtcbiAgICAgIGZtLmRvbWFpbiA9IGBkb21haW4vJHtmbWpzLmdldERvbWFpbigpfWA7XG4gICAgICBmbS5jb21wb25lbnRzID0gSGVscGVyLmdldENvbXBvbmVudHMoZm0pO1xuXG4gICAgICBpZiAoZS5maWxlLnNpemUgPCBtaW5TaXplKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGUuZmlsZS5zaXplID4gbWF4U2l6ZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgYnVmZi5wdXNoKGUpO1xuICAgIH1cblxuICAgIGNvbnN0IGxvZ3MgPSBbXTtcblxuICAgIGZvciAoY29uc3QgZSBvZiBsb2dzKSB7XG4gICAgICBjb25zdCBmbSA9IGUuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGZtLmNyZWF0ZWRBdCA9IHRoaXMuZnJvbnRtYXR0ZXIuZ2V0Q3JlYXRlZEF0KGUuZmlsZSk7XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgIUhlbHBlci5uaWxDaGVjayhmbS5wYXJlbnRfaWQpLFxuICAgICAgICBgTWlzc2luZyBmaWVsZCBcInBhcmVudF9pZFwiIGZyb20gbG9nOiBcIiR7Zm0udXVpZH1cImAsXG4gICAgICApO1xuICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5kdlxuICAgICAgICAucGFnZXMoYFwiJHtQYXRocy5UYXNrc30vJHtmbS5wYXJlbnRfaWR9XCJgKVxuICAgICAgICAuYXJyYXkoKTtcbiAgICAgIEFzc2VydC5UcnVlKFxuICAgICAgICBwYXJlbnQubGVuZ3RoID09PSAxLFxuICAgICAgICBgUGFyZW50OiAke2ZtLnBhcmVudF9pZH0gbm90IGZvdW5kIGZvciBsb2c6IFwiJHtmbS51dWlkfVwiYCxcbiAgICAgICk7XG4gICAgICBmbS5wcm9qZWN0ID0gSGVscGVyLmdldFByb2plY3QocGFyZW50WzBdLmZpbGUuZnJvbnRtYXR0ZXIsIHRydWUpO1xuICAgICAgZm0uZG9tYWluID0gdW5kZWZpbmVkO1xuICAgICAgZm0uY29tcG9uZW50cyA9IFtdO1xuXG4gICAgICBpZiAoZS5maWxlLnNpemUgPCBtaW5TaXplKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGUuZmlsZS5zaXplID4gbWF4U2l6ZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgYnVmZi5wdXNoKGUpO1xuICAgIH1cblxuICAgIGNvbnN0IHNvcnRCeVNpemVUaGVuRGF0ZSA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIGNvbnN0IGZBID0gYS5maWxlO1xuICAgICAgY29uc3QgZkIgPSBiLmZpbGU7XG4gICAgICBpZiAoZkEuc2l6ZSAhPT0gZkIuc2l6ZSkge1xuICAgICAgICByZXR1cm4gZkIuc2l6ZSAtIGZBLnNpemU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGZBLmZyb250bWF0dGVyLmNyZWF0ZWRBdC5nZXRUaW1lKCkgLVxuICAgICAgICAgIGZCLmZyb250bWF0dGVyLmNyZWF0ZWRBdC5nZXRUaW1lKClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3Qgc29ydEJ5QWdlID0gKGEsIGIpID0+XG4gICAgICBhLmZpbGUuZnJvbnRtYXR0ZXIuY3JlYXRlZEF0LmdldFRpbWUoKSAtXG4gICAgICBiLmZpbGUuZnJvbnRtYXR0ZXIuY3JlYXRlZEF0LmdldFRpbWUoKTtcblxuICAgIGJ1ZmYuc29ydChzb3J0QnlBZ2UpO1xuICAgIHJzLnB1c2goW1wiYXJyYXlcIiwgUmVuZGVyZXIuaW5ib3hFbnRyeSwgYnVmZl0pO1xuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgcHJvamVjdHMoKSB7XG4gICAgY29uc3QgcnMgPSBbXTtcbiAgICBjb25zdCBiaW5zID0ge1xuICAgICAgYWN0aXZlOiBbXSxcbiAgICAgIGluYWN0aXZlOiBbXSxcbiAgICB9O1xuXG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLmR2LnBhZ2VzKGBcIlByb2plY3RzXCJgKS5zb3J0KChrKSA9PiBrLm5hbWUsIFwiYXNjXCIpO1xuICAgIGZvciAoY29uc3QgcHJvamVjdCBvZiBwYWdlcykge1xuICAgICAgY29uc3QgZm1Qcm9qZWN0ID0gbmV3IEZyb250bWF0dGVySlMocHJvamVjdCk7XG4gICAgICBpZiAoZm1Qcm9qZWN0LmZtLmFjdGl2ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgYmlucy5pbmFjdGl2ZS5wdXNoKHByb2plY3QpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAoZm1Qcm9qZWN0LmdldE5hbWUoKSA9PT0gXCJhZGhvY1wiKSB7XG4gICAgICAgIGJpbnMuYWN0aXZlLnB1c2gocHJvamVjdCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgW1wieWVhcmx5XCIsIFwibW9udGhseVwiLCBcIndlZWtseVwiLCBcImRhaWx5XCJdLmNvbnRhaW5zKFxuICAgICAgICAgIGZtUHJvamVjdC5nZXROYW1lKCksXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGFza3MgPSB0aGlzLmR2XG4gICAgICAgIC5wYWdlcyhgI3Byb2plY3QvJHtmbVByb2plY3QuZ2V0TmFtZSgpfWApXG4gICAgICAgIC53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgICAgIGlmIChwYWdlLmZpbGUuZm9sZGVyICE9PSBgJHtQYXRocy5UYXNrc31gKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgZm1UYXNrID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgICAgaWYgKGZtVGFzay5mbS5wcmlvcml0eSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIFtcInRvZG9cIiwgXCJkb2luZ1wiLCBcIndhaXRpbmdcIl0uY29udGFpbnMoZm1UYXNrLmZtLnN0YXR1cylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgIGlmICh0YXNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGJpbnMuYWN0aXZlLnB1c2gocHJvamVjdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiaW5zLmluYWN0aXZlLnB1c2gocHJvamVjdCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgXCJBY3RpdmVcIl0pO1xuICAgIHJzLnB1c2goW1wiYXJyYXlcIiwgUmVuZGVyZXIucHJvamVjdHMsIGJpbnMuYWN0aXZlXSk7XG4gICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgXCJJbmFjdGl2ZVwiXSk7XG4gICAgcnMucHVzaChbXCJhcnJheVwiLCBSZW5kZXJlci5wcm9qZWN0cywgYmlucy5pbmFjdGl2ZV0pO1xuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgcHJheGlzKCkge1xuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5kdlxuICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKVxuICAgICAgLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICAgIGlmIChwYWdlLmZpbGUuZnJvbnRtYXR0ZXIudHlwZSAhPT0gVHlwZXMuUHJheGlzKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhZ2UuZmlsZS5mcm9udG1hdHRlci5zdGF0dXMgIT09IFN0YXR1cy5Ub2RvKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KVxuICAgICAgLmFycmF5KCk7XG5cbiAgICBjb25zdCBycyA9IFtdO1xuICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDEsIFwiUHJheGlzXCJdKTtcbiAgICBycy5wdXNoKFtcImFycmF5XCIsIFJlbmRlcmVyLmJhc2ljVGFzaywgcGFnZXNdKTtcblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIHBsYW5uaW5nKGxhc3RXZWVrID0gMikge1xuICAgIGNvbnN0IHJzID0gW107XG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLmR2XG4gICAgICAucGFnZXMoYFwiJHtQYXRocy5UYXNrc31cImApXG4gICAgICAud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgaWYgKGZtLmF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm0uZ2V0UHJvamVjdCgpICE9PSBcImRhaWx5XCIpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pXG4gICAgICAuc29ydCgocGFnZSkgPT4gcGFnZS5maWxlLmZyb250bWF0dGVyLmF0LCBcImRlc2NcIik7XG5cbiAgICBjb25zdCBiaW5zID0ge307XG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgbGV0IGF0ID0gdW5kZWZpbmVkO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXQgPSBmbS5hdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZGF0ZTogJyR7Zm0uZm0udXVpZH0nYCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHdlZWtOdW1iZXIgPSB0aGlzLmdldFdlZWtOdW1iZXIoZm0uYXQpO1xuICAgICAgaWYgKGJpbnNbd2Vla051bWJlcl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW3dlZWtOdW1iZXJdID0gW2ZtXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJpbnNbd2Vla051bWJlcl0ucHVzaChmbSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBjdXJyZW50V2Vla051bWJlciA9IHRoaXMuZ2V0V2Vla051bWJlcihub3cpO1xuICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGJpbnMpKSB7XG4gICAgICBjb25zdCB3ZWVrTnVtYmVyID0gTnVtYmVyKGtleSk7XG4gICAgICBpZiAod2Vla051bWJlciArIGxhc3RXZWVrIDwgY3VycmVudFdlZWtOdW1iZXIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAod2Vla051bWJlciA8IGN1cnJlbnRXZWVrTnVtYmVyKSB7XG4gICAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIGB+fndlZWsgJHtrZXl9fn5gXSk7XG4gICAgICB9IGVsc2UgaWYgKHdlZWtOdW1iZXIgPT09IGN1cnJlbnRXZWVrTnVtYmVyKSB7XG4gICAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIGAqd2VlayAke2tleX0qYF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgYHdlZWsgJHtrZXl9YF0pO1xuICAgICAgfVxuXG4gICAgICBiaW5zW2tleV0uc29ydCgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYS5hdC5nZXRUaW1lKCkgLSBiLmF0LmdldFRpbWUoKTtcbiAgICAgIH0pO1xuXG4gICAgICBmb3IgKGNvbnN0IHRhc2sgb2YgYmluc1trZXldKSB7XG4gICAgICAgIGNvbnN0IGRheSA9IFtcIlN1blwiLCBcIk1vblwiLCBcIlR1ZVwiLCBcIldlZFwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiXVtcbiAgICAgICAgICB0YXNrLmF0LmdldERheSgpXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IHRleHQgPSBSZW5kZXJlci5tYWtlTGluayhcbiAgICAgICAgICB0aGlzLmR2LFxuICAgICAgICAgIHRhc2suZixcbiAgICAgICAgICBgJHt0YXNrLmF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApfSwgJHtkYXl9YCxcbiAgICAgICAgICBcIlRhc2tcIixcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAod2Vla051bWJlciA8IGN1cnJlbnRXZWVrTnVtYmVyKSB7XG4gICAgICAgICAgcnMucHVzaChbXCJwYXJhZ3JhcGhcIiwgYH5+JHt0ZXh0fX5+YF0pO1xuICAgICAgICB9IGVsc2UgaWYgKHdlZWtOdW1iZXIgPT09IGN1cnJlbnRXZWVrTnVtYmVyKSB7XG4gICAgICAgICAgaWYgKHRoaXMuZGF5T2ZZZWFyKHRhc2suYXQpIDwgdGhpcy5kYXlPZlllYXIobm93KSkge1xuICAgICAgICAgICAgcnMucHVzaChbXCJwYXJhZ3JhcGhcIiwgYH5+JHt0ZXh0fX5+YF0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBycy5wdXNoKFtcInBhcmFncmFwaFwiLCBgJHt0ZXh0fWBdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcnMucHVzaChbXCJwYXJhZ3JhcGhcIiwgYCR7dGV4dH1gXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcnM7XG4gIH1cblxuICBkYXlPZlllYXIoZHQpOiBudW1iZXIge1xuICAgIGNvbnN0IHllYXIgPSBkdC5nZXRGdWxsWWVhcigpO1xuICAgIGNvbnN0IG1vbnRoID0gZHQuZ2V0TW9udGgoKSArIDE7XG4gICAgY29uc3QgZGF5ID0gZHQuZ2V0RGF0ZSgpO1xuXG4gICAgY29uc3QgTjEgPSBNYXRoLmZsb29yKCgyNzUgKiBtb250aCkgLyA5KTtcbiAgICBjb25zdCBOMiA9IE1hdGguZmxvb3IoKG1vbnRoICsgOSkgLyAxMik7XG4gICAgY29uc3QgTjMgPSAxICsgTWF0aC5mbG9vcigoeWVhciAtIDQgKiBNYXRoLmZsb29yKHllYXIgLyA0KSArIDIpIC8gMyk7XG4gICAgcmV0dXJuIE4xIC0gTjIgKiBOMyArIGRheSAtIDMwO1xuICB9XG5cbiAgZ2V0V2Vla051bWJlcihkKSB7XG4gICAgLy8gQ29weSBkYXRlIHNvIGRvbid0IG1vZGlmeSBvcmlnaW5hbFxuICAgIGQgPSBuZXcgRGF0ZShEYXRlLlVUQyhkLmdldEZ1bGxZZWFyKCksIGQuZ2V0TW9udGgoKSwgZC5nZXREYXRlKCkpKTtcbiAgICAvLyBTZXQgdG8gbmVhcmVzdCBUaHVyc2RheTogY3VycmVudCBkYXRlICsgNCAtIGN1cnJlbnQgZGF5IG51bWJlclxuICAgIC8vIE1ha2UgU3VuZGF5J3MgZGF5IG51bWJlciA3XG4gICAgZC5zZXRVVENEYXRlKGQuZ2V0VVRDRGF0ZSgpICsgNCAtIChkLmdldFVUQ0RheSgpIHx8IDcpKTtcbiAgICAvLyBHZXQgZmlyc3QgZGF5IG9mIHllYXJcbiAgICBjb25zdCB5ZWFyU3RhcnQ6IGFueSA9IG5ldyBEYXRlKERhdGUuVVRDKGQuZ2V0VVRDRnVsbFllYXIoKSwgMCwgMSkpO1xuICAgIC8vIENhbGN1bGF0ZSBmdWxsIHdlZWtzIHRvIG5lYXJlc3QgVGh1cnNkYXlcbiAgICByZXR1cm4gTWF0aC5jZWlsKCgoZCAtIHllYXJTdGFydCkgLyA4NjQwMDAwMCArIDEpIC8gNyk7XG4gIH1cblxuICBnZXRXZWVrTnVtYmVyNChkKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGQgPSBuZXcgRGF0ZShEYXRlLlVUQyhkLmdldEZ1bGxZZWFyKCksIGQuZ2V0TW9udGgoKSwgZC5nZXREYXRlKCkpKTtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgeWVhclN0YXJ0ID0gbmV3IERhdGUoRGF0ZS5VVEMoZC5nZXRVVENGdWxsWWVhcigpLCAwLCAxKSk7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IGZpcnN0U3VuZGF5ID1cbiAgICAgIHllYXJTdGFydC5nZXRVVENEYXkoKSA9PT0gMFxuICAgICAgICA/IHllYXJTdGFydFxuICAgICAgICA6IG5ldyBEYXRlKFxuICAgICAgICAgIERhdGUuVVRDKFxuICAgICAgICAgICAgZC5nZXRVVENGdWxsWWVhcigpLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDEgKyAoNyAtIHllYXJTdGFydC5nZXRVVENEYXkoKSksXG4gICAgICAgICAgKSxcbiAgICAgICAgKTtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgZGF5c1NpbmNlRmlyc3RTdW5kYXkgPSAoZCAtIGZpcnN0U3VuZGF5ICsgODY0MDAwMDApIC8gODY0MDAwMDA7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJldHVybiBNYXRoLmNlaWwoZGF5c1NpbmNlRmlyc3RTdW5kYXkgLyA3KTtcbiAgfVxuXG4gIGdldE1vbnRoKHllYXIsIHdlZWtOdW1iZXIpIHtcbiAgICAvLyBDcmVhdGUgYSBkYXRlIG9iamVjdCBmb3IgdGhlIGZpcnN0IGRheSBvZiB0aGUgeWVhclxuICAgIGNvbnN0IGZpcnN0RGF5T2ZZZWFyID0gbmV3IERhdGUoeWVhciwgMCwgMSk7XG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIGRheSBvZiB0aGUgd2VlayBmb3IgdGhlIGZpcnN0IGRheSBvZiB0aGUgeWVhclxuICAgIGNvbnN0IGZpcnN0RGF5T2ZXZWVrID0gZmlyc3REYXlPZlllYXIuZ2V0RGF5KCk7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIG51bWJlciBvZiBkYXlzIHRvIGFkZCB0byB0aGUgZmlyc3QgZGF5IG9mIHRoZSB5ZWFyXG4gICAgLy8gdG8gZ2V0IHRvIHRoZSBzdGFydCBvZiB0aGUgc3BlY2lmaWVkIHdlZWtcbiAgICAvLyBXZWVrcyBzdGFydCBvbiBNb25kYXk7IGlmIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHllYXIgaXMgYSBNb25kYXksXG4gICAgLy8gbm8gYWRqdXN0bWVudCBpcyBuZWVkZWQsIG90aGVyd2lzZSBhZGp1c3QgdG8gdGhlIG5leHQgTW9uZGF5XG4gICAgY29uc3QgZGF5c1RvQWRkID1cbiAgICAgICh3ZWVrTnVtYmVyIC0gMSkgKiA3IC1cbiAgICAgIGZpcnN0RGF5T2ZXZWVrICtcbiAgICAgIChmaXJzdERheU9mV2VlayA9PT0gMCA/IDEgOiAwKTtcblxuICAgIC8vIEFkanVzdCB0aGUgZGF0ZSB0byB0aGUgc3RhcnQgb2YgdGhlIHNwZWNpZmllZCB3ZWVrXG4gICAgY29uc3Qgd2Vla1N0YXJ0RGF0ZSA9IG5ldyBEYXRlKFxuICAgICAgZmlyc3REYXlPZlllYXIuc2V0RGF0ZShmaXJzdERheU9mWWVhci5nZXREYXRlKCkgKyBkYXlzVG9BZGQpLFxuICAgICk7XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgd2Vla1N0YXJ0RGF0ZSBpcyBvbiB0aGUgbGFzdCBkYXkgb2YgdGhlIG1vbnRoLFxuICAgIC8vIGlmIHNvLCBtb3ZlIHRvIHRoZSBuZXh0IG1vbnRoIHRvIHJvdW5kIHVwIGZvciBhIHdlZWsgdGhhdCBzcGFucyBhIG1vbnRoIHRyYW5zaXRpb25cbiAgICBpZiAod2Vla1N0YXJ0RGF0ZS5nZXREYXRlKCkgPiAyNCkge1xuICAgICAgd2Vla1N0YXJ0RGF0ZS5zZXREYXRlKHdlZWtTdGFydERhdGUuZ2V0RGF0ZSgpICsgNyk7XG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCB0aGUgbW9udGggbnVtYmVyICgwLTExIGZvciBKYW4tRGVjKSBmcm9tIHRoZSB3ZWVrU3RhcnREYXRlXG4gICAgY29uc3QgbW9udGhOdW1iZXIgPSB3ZWVrU3RhcnREYXRlLmdldE1vbnRoKCk7XG5cbiAgICByZXR1cm4gbW9udGhOdW1iZXIgKyAxOyAvLyBSZXR1cm4gbW9udGggbnVtYmVyICgxLTEyKVxuICB9XG5cbiAgZ2V0TW9udGhOYW1lKG1vbnRoTnVtYmVyKSB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKDIwMDAsIG1vbnRoTnVtYmVyIC0gMSk7IC8vIFllYXIgMjAwMCBpcyB1c2VkIGFyYml0cmFyaWx5OyBhbnkgbm9uLWxlYXAgeWVhciB3aWxsIGRvXG4gICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVTdHJpbmcoXCJkZWZhdWx0XCIsIHsgbW9udGg6IFwibG9uZ1wiIH0pO1xuICB9XG5cbiAgZW5lcmd5KGR2KSB7XG4gICAgY29uc3QgY3VycmVudCA9IGR2LmN1cnJlbnQoKTtcbiAgICBpZiAoY3VycmVudC5lbmVyZ3kgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY3VycmVudC5lbmVyZ3kgPSAwO1xuICAgIH1cbiAgICBsZXQgY29tcCA9IHVuZGVmaW5lZDtcbiAgICBzd2l0Y2ggKGN1cnJlbnQub3ApIHtcbiAgICAgIGNhc2UgXCI+XCI6XG4gICAgICAgIGNvbXAgPSAoYSwgYikgPT4gYSA+IGI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIj49XCI6XG4gICAgICAgIGNvbXAgPSAoYSwgYikgPT4gYSA+PSBiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCI8XCI6XG4gICAgICAgIGNvbXAgPSAoYSwgYikgPT4gYSA8IGI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIjw9XCI6XG4gICAgICAgIGNvbXAgPSAoYSwgYikgPT4gYSA8PSBiO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbXAgPSAoYSwgYikgPT4gYSA9PT0gYjtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY29uc3QgcnMgPSBbXTtcbiAgICBjb25zdCBwYWdlcyA9IGR2LnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKS53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGlmIChmbS5nZXRQcm9qZWN0KCkgPT09IFwiZGFpbHlcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChmbS5mbS5zdGF0dXMgIT09IFwidG9kb1wiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbXAoZm0uZW5lcmd5LCBjdXJyZW50LmVuZXJneSk7XG4gICAgfSk7XG5cbiAgICBycy5wdXNoKFtcbiAgICAgIFwiYXJyYXlcIixcbiAgICAgIChkdiwgZGF0YSkgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGRhdGEpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlbnRyeSk7XG4gICAgICAgICAgZHYucGFyYWdyYXBoKFxuICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtBbGlhcyhkdiwgZW50cnkuZmlsZSwgXCIjIyBUYXNrXCIpLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBwYWdlcyxcbiAgICBdKTtcblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIG1hbmRhbGEoZHYpIHtcbiAgICBsZXQgbWFuZGFsYUxvID0gLTE7XG4gICAgbGV0IG1hbmRhbGFIaSA9IC0xO1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAge1xuICAgICAgY29uc3Qgd2Vla051bWJlciA9IHRoaXMuZ2V0V2Vla051bWJlcjQobm93KTtcbiAgICAgIG1hbmRhbGFMbyA9IHdlZWtOdW1iZXIgLSA2O1xuICAgICAgbWFuZGFsYUhpID0gd2Vla051bWJlciAtIDU7XG4gICAgICBpZiAobWFuZGFsYUxvIDwgMCB8fCBtYW5kYWxhSGkgPCAwKSB7XG4gICAgICAgIGR2LnBhcmFncmFwaChgd2Vla051bWJlcjogJHt3ZWVrTnVtYmVyfWApO1xuICAgICAgICBkdi5wYXJhZ3JhcGgoYG1hbmRhbGFMbzogJHttYW5kYWxhTG99YCk7XG4gICAgICAgIGR2LnBhcmFncmFwaChgbWFuZGFsYUhpOiAke21hbmRhbGFIaX1gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZHYucGFyYWdyYXBoKGB3ZWVrTnVtYmVyOiAke3dlZWtOdW1iZXJ9YCk7XG4gICAgICBkdi5wYXJhZ3JhcGgoYG1hbmRhbGFMbzogJHttYW5kYWxhTG99YCk7XG4gICAgICBkdi5wYXJhZ3JhcGgoYG1hbmRhbGFIaTogJHttYW5kYWxhSGl9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgcnMgPSBbXTtcbiAgICBjb25zdCBiaW5zID0ge307XG4gICAgY29uc3Qgc3VpdmlXZWVrbHkgPSB7fTtcbiAgICBjb25zdCBzdWl2aU1vbnRobHkgPSB7fTtcbiAgICBjb25zdCBzdWl2aVllYXJseSA9IHt9O1xuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5kdlxuICAgICAgLnBhZ2VzKGBcIkpvdXJuYWxcImApXG4gICAgICAud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgY29uc3Qgd2Vla051bWJlciA9IHRoaXMuZ2V0V2Vla051bWJlcjQoZm0uY3JlYXRlZEF0KTtcbiAgICAgICAgY29uc29sZS5sb2cod2Vla051bWJlcik7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB3ZWVrTnVtYmVyID49IG1hbmRhbGFMbyAmJlxuICAgICAgICAgIHdlZWtOdW1iZXIgPD0gbWFuZGFsYUhpICYmXG4gICAgICAgICAgZm0uY3JlYXRlZEF0LmdldEZ1bGxZZWFyKCkgPT09IG5vdy5nZXRGdWxsWWVhcigpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSlcbiAgICAgIC5zb3J0KChwYWdlKSA9PiBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuY3JlYXRlZF9hdCwgXCJkZXNjXCIpO1xuICAgIGNvbnNvbGUubG9nKHBhZ2VzLmxlbmd0aCk7XG5cbiAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgcGFnZXMpIHtcbiAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAvLyBjb25zdCB3ZWVrTnVtYmVyID0gdGhpcy5nZXRXZWVrTnVtYmVyKGZtLmNyZWF0ZWRBdCk7XG4gICAgICBjb25zdCB3ZWVrTnVtYmVyID0gdGhpcy5nZXRXZWVrTnVtYmVyNChmbS5jcmVhdGVkQXQpO1xuICAgICAgY29uc3QgeWVhciA9IGZtLmNyZWF0ZWRBdC5nZXRGdWxsWWVhcigpO1xuICAgICAgY29uc3QgbW9udGggPSBmbS5jcmVhdGVkQXQuZ2V0TW9udGgoKSArIDE7XG5cbiAgICAgIGxldCBtc2cgPSBcIlwiO1xuICAgICAgbXNnICs9IGBjcmVhdGVkQXQ6ICR7Zm0uY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApfVxcbmA7XG4gICAgICBtc2cgKz0gYHdlZWtOdW1iZXI6ICR7d2Vla051bWJlcn1cXG5gO1xuICAgICAgbXNnICs9IGB5ZWFyOiAke3llYXJ9XFxuYDtcbiAgICAgIG1zZyArPSBgbW9udGg6ICR7bW9udGh9XFxuYDtcbiAgICAgIG1zZyArPSBgZGF5OiAke2ZtLmNyZWF0ZWRBdC5nZXREYXkoKX1cXG5gO1xuICAgICAgY29uc3QgZGF5ID0gW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdW1xuICAgICAgICBmbS5jcmVhdGVkQXQuZ2V0RGF5KClcbiAgICAgIF07XG4gICAgICBtc2cgKz0gYGRheTogJHtkYXl9XFxuYDtcblxuICAgICAgY29uc29sZS5sb2cobXNnKTtcblxuICAgICAgaWYgKGJpbnNbeWVhcl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW3llYXJdID0ge307XG4gICAgICB9XG4gICAgICBpZiAoYmluc1t5ZWFyXVt3ZWVrTnVtYmVyLnRvU3RyaW5nKCldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t5ZWFyXVt3ZWVrTnVtYmVyLnRvU3RyaW5nKCldID0ge307XG4gICAgICB9XG4gICAgICBpZiAoc3VpdmlNb250aGx5W3llYXJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3VpdmlNb250aGx5W3llYXJdID0ge307XG4gICAgICB9XG4gICAgICBpZiAoc3VpdmlXZWVrbHlbeWVhcl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdWl2aVdlZWtseVt5ZWFyXSA9IHt9O1xuICAgICAgfVxuXG4gICAgICBsZXQgdGFnID0gXCJcIjtcbiAgICAgIGlmIChmbS5nZXREb21haW4oKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRhZyA9IGZtLmdldERvbWFpbigpO1xuICAgICAgfSBlbHNlIGlmIChmbS5nZXRQcm9qZWN0KCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0YWcgPSBmbS5nZXRQcm9qZWN0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YWcgPSBcImFkaG9jXCI7XG4gICAgICB9XG5cbiAgICAgIGlmICh0YWcgPT0gXCJ3ZWVrbHlcIikge1xuICAgICAgICBpZiAoc3VpdmlXZWVrbHlbeWVhcl1bd2Vla051bWJlcl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHN1aXZpV2Vla2x5W3llYXJdW3dlZWtOdW1iZXJdID0gW3BhZ2VdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN1aXZpV2Vla2x5W3llYXJdW3dlZWtOdW1iZXJdLnB1c2gocGFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2UgaWYgKHRhZyA9PT0gXCJtb250aGx5XCIpIHtcbiAgICAgICAgaWYgKHN1aXZpTW9udGhseVt5ZWFyXVttb250aF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHN1aXZpTW9udGhseVt5ZWFyXVttb250aF0gPSBbcGFnZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VpdmlNb250aGx5W3llYXJdW21vbnRoXS5wdXNoKHBhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIGlmICh0YWcgPT09IFwieWVhcmx5XCIpIHtcbiAgICAgICAgaWYgKHN1aXZpWWVhcmx5W3llYXJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzdWl2aVllYXJseVt5ZWFyXSA9IFtwYWdlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdWl2aVllYXJseVt5ZWFyXS5wdXNoKHBhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoYmluc1t5ZWFyXVt3ZWVrTnVtYmVyXVt0YWddID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t5ZWFyXVt3ZWVrTnVtYmVyXVt0YWddID0gW3BhZ2VdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmluc1t5ZWFyXVt3ZWVrTnVtYmVyXVt0YWddLnB1c2gocGFnZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAge1xuICAgICAgY29uc3QgeWVhcnMgPSBPYmplY3Qua2V5cyhiaW5zKTtcbiAgICAgIGxldCBsYXN0WWVhciA9IDk5OTk7XG4gICAgICBsZXQgbGFzdE1vbnRoID0gMTM7XG4gICAgICB5ZWFycy5zb3J0KCkucmV2ZXJzZSgpO1xuXG4gICAgICBmb3IgKGNvbnN0IHllYXIgb2YgeWVhcnMpIHtcbiAgICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgeWVhcl0pO1xuXG4gICAgICAgIGlmIChwYXJzZUludCh5ZWFyLCAxMCkgPCBsYXN0WWVhcikge1xuICAgICAgICAgIGxhc3RNb250aCA9IDEzO1xuICAgICAgICAgIGxhc3RZZWFyID0gcGFyc2VJbnQoeWVhciwgMTApO1xuICAgICAgICAgIGlmIChzdWl2aVllYXJseVt5ZWFyXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2Ygc3VpdmlZZWFybHlbeWVhcl0pIHtcbiAgICAgICAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgICAgICAgcnMucHVzaChbXG4gICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgICAgICAgICBSZW5kZXJlci5tYWtlTGlua0FsaWFzKHRoaXMuZHYsIGZtLmYpLFxuICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCB3ZWVrID0gNTI7IHdlZWsgPiAwOyB3ZWVrLS0pIHtcbiAgICAgICAgICBjb25zdCB0aGlzTW9udGggPSB0aGlzLmdldE1vbnRoKHllYXIsIHdlZWspO1xuXG4gICAgICAgICAgaWYgKHN1aXZpTW9udGhseVt5ZWFyXVt0aGlzTW9udGhdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChsYXN0TW9udGggIT09IHRoaXNNb250aCkge1xuICAgICAgICAgICAgICBsYXN0TW9udGggPSB0aGlzTW9udGg7XG4gICAgICAgICAgICAgIHJzLnB1c2goW1xuICAgICAgICAgICAgICAgIFwiaGVhZGVyXCIsXG4gICAgICAgICAgICAgICAgMyxcbiAgICAgICAgICAgICAgICB0aGlzLmdldE1vbnRoTmFtZShsYXN0TW9udGgpLFxuICAgICAgICAgICAgICBdKTtcblxuICAgICAgICAgICAgICBpZiAoc3VpdmlNb250aGx5W3llYXJdW3RoaXNNb250aF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBzdWl2aU1vbnRobHlbeWVhcl1bXG4gICAgICAgICAgICAgICAgICB0aGlzTW9udGhcbiAgICAgICAgICAgICAgICBdKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICAgICAgICAgICAgcnMucHVzaChbXG4gICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rQWxpYXModGhpcy5kdiwgZm0uZiksXG4gICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBzdWl2aVdlZWtseVt5ZWFyXVt3ZWVrXSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBiaW5zW3llYXJdW3dlZWtdID09PSB1bmRlZmluZWRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDQsIGB3ZWVrICR7d2Vlay50b1N0cmluZygpfWBdKTtcbiAgICAgICAgICBpZiAoc3VpdmlXZWVrbHlbeWVhcl1bd2Vla10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIHN1aXZpV2Vla2x5W3llYXJdW3dlZWtdKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgICAgICAgIHJzLnB1c2goW1xuICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtBbGlhcyh0aGlzLmR2LCBmbS5mKSxcbiAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGJpbnNbeWVhcl1bd2Vla10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gZG9tYWluID4gcHJvamVjdFxuICAgICAgICAgIGNvbnN0IHRhZ3MgPSBPYmplY3Qua2V5cyhiaW5zW3llYXJdW3dlZWtdKTtcbiAgICAgICAgICB0YWdzLnNvcnQoKTtcblxuICAgICAgICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAgICAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDUsIHRhZ10pO1xuICAgICAgICAgICAgYmluc1t5ZWFyXVt3ZWVrXVt0YWddLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZm1BID0gbmV3IEZyb250bWF0dGVySlMoYSk7XG4gICAgICAgICAgICAgIGNvbnN0IGZtQiA9IG5ldyBGcm9udG1hdHRlckpTKGIpO1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIGZtQi5jcmVhdGVkQXQuZ2V0VGltZSgpIC1cbiAgICAgICAgICAgICAgICBmbUEuY3JlYXRlZEF0LmdldFRpbWUoKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBiaW5zW3llYXJdW3dlZWtdW3RhZ10pIHtcbiAgICAgICAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgICAgICAgaWYgKGZtLnR5cGUgPT09IDYpIHtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkID0gZm0uY3JlYXRlZEF0XG4gICAgICAgICAgICAgICAgICAudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIDEwKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXkgPSBbXG4gICAgICAgICAgICAgICAgICBcIlN1blwiLFxuICAgICAgICAgICAgICAgICAgXCJNb25cIixcbiAgICAgICAgICAgICAgICAgIFwiVHVlXCIsXG4gICAgICAgICAgICAgICAgICBcIldlZFwiLFxuICAgICAgICAgICAgICAgICAgXCJUaHVcIixcbiAgICAgICAgICAgICAgICAgIFwiRnJpXCIsXG4gICAgICAgICAgICAgICAgICBcIlNhdFwiLFxuICAgICAgICAgICAgICAgIF1bZm0uY3JlYXRlZEF0LmdldERheSgpXTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYCR7ZH0sICR7ZGF5fWA7XG4gICAgICAgICAgICAgICAgcnMucHVzaChbXG4gICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiLFxuICAgICAgICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmsodGhpcy5kdiwgZm0uZiwgdGV4dCksXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcnM7XG4gIH1cblxuICBqb3VybmFsKCkge1xuICAgIGNvbnN0IHJzID0gW107XG4gICAgY29uc3QgYmlucyA9IHt9O1xuICAgIGNvbnN0IHN1aXZpV2Vla2x5ID0ge307XG4gICAgY29uc3Qgc3VpdmlNb250aGx5ID0ge307XG4gICAgY29uc3Qgc3VpdmlZZWFybHkgPSB7fTtcbiAgICBjb25zdCBwYWdlcyA9IHRoaXMuZHZcbiAgICAgIC5wYWdlcyhgXCJKb3VybmFsXCJgKVxuICAgICAgLnNvcnQoKHBhZ2UpID0+IHBhZ2UuZmlsZS5mcm9udG1hdHRlci5jcmVhdGVkX2F0LCBcImRlc2NcIik7XG5cbiAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgcGFnZXMpIHtcbiAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAvLyBjb25zdCB3ZWVrTnVtYmVyID0gdGhpcy5nZXRXZWVrTnVtYmVyKGZtLmNyZWF0ZWRBdCk7XG4gICAgICBjb25zdCB3ZWVrTnVtYmVyID0gdGhpcy5nZXRXZWVrTnVtYmVyNChmbS5jcmVhdGVkQXQpO1xuICAgICAgY29uc3QgeWVhciA9IGZtLmNyZWF0ZWRBdC5nZXRGdWxsWWVhcigpO1xuICAgICAgY29uc3QgbW9udGggPSBmbS5jcmVhdGVkQXQuZ2V0TW9udGgoKSArIDE7XG5cbiAgICAgIGxldCBtc2cgPSBcIlwiO1xuICAgICAgbXNnICs9IGBjcmVhdGVkQXQ6ICR7Zm0uY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApfVxcbmA7XG4gICAgICBtc2cgKz0gYHdlZWtOdW1iZXI6ICR7d2Vla051bWJlcn1cXG5gO1xuICAgICAgbXNnICs9IGB5ZWFyOiAke3llYXJ9XFxuYDtcbiAgICAgIG1zZyArPSBgbW9udGg6ICR7bW9udGh9XFxuYDtcbiAgICAgIG1zZyArPSBgZGF5OiAke2ZtLmNyZWF0ZWRBdC5nZXREYXkoKX1cXG5gO1xuICAgICAgY29uc3QgZGF5ID0gW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdW1xuICAgICAgICBmbS5jcmVhdGVkQXQuZ2V0RGF5KClcbiAgICAgIF07XG4gICAgICBtc2cgKz0gYGRheTogJHtkYXl9XFxuYDtcblxuICAgICAgLy8gY29uc29sZS5sb2cobXNnKTtcblxuICAgICAgaWYgKGJpbnNbeWVhcl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW3llYXJdID0ge307XG4gICAgICB9XG4gICAgICBpZiAoYmluc1t5ZWFyXVt3ZWVrTnVtYmVyLnRvU3RyaW5nKCldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t5ZWFyXVt3ZWVrTnVtYmVyLnRvU3RyaW5nKCldID0ge307XG4gICAgICB9XG4gICAgICBpZiAoc3VpdmlNb250aGx5W3llYXJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3VpdmlNb250aGx5W3llYXJdID0ge307XG4gICAgICB9XG4gICAgICBpZiAoc3VpdmlXZWVrbHlbeWVhcl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdWl2aVdlZWtseVt5ZWFyXSA9IHt9O1xuICAgICAgfVxuXG4gICAgICBsZXQgdGFnID0gXCJcIjtcbiAgICAgIGlmIChmbS5nZXREb21haW4oKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRhZyA9IGZtLmdldERvbWFpbigpO1xuICAgICAgfSBlbHNlIGlmIChmbS5nZXRQcm9qZWN0KCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0YWcgPSBmbS5nZXRQcm9qZWN0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YWcgPSBcImFkaG9jXCI7XG4gICAgICB9XG5cbiAgICAgIGlmICh0YWcgPT0gXCJ3ZWVrbHlcIikge1xuICAgICAgICBpZiAoc3VpdmlXZWVrbHlbeWVhcl1bd2Vla051bWJlcl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHN1aXZpV2Vla2x5W3llYXJdW3dlZWtOdW1iZXJdID0gW3BhZ2VdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN1aXZpV2Vla2x5W3llYXJdW3dlZWtOdW1iZXJdLnB1c2gocGFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2UgaWYgKHRhZyA9PT0gXCJtb250aGx5XCIpIHtcbiAgICAgICAgaWYgKHN1aXZpTW9udGhseVt5ZWFyXVttb250aF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHN1aXZpTW9udGhseVt5ZWFyXVttb250aF0gPSBbcGFnZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VpdmlNb250aGx5W3llYXJdW21vbnRoXS5wdXNoKHBhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIGlmICh0YWcgPT09IFwieWVhcmx5XCIpIHtcbiAgICAgICAgaWYgKHN1aXZpWWVhcmx5W3llYXJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzdWl2aVllYXJseVt5ZWFyXSA9IFtwYWdlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdWl2aVllYXJseVt5ZWFyXS5wdXNoKHBhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoYmluc1t5ZWFyXVt3ZWVrTnVtYmVyXVt0YWddID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t5ZWFyXVt3ZWVrTnVtYmVyXVt0YWddID0gW3BhZ2VdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmluc1t5ZWFyXVt3ZWVrTnVtYmVyXVt0YWddLnB1c2gocGFnZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAge1xuICAgICAgY29uc3QgeWVhcnMgPSBPYmplY3Qua2V5cyhiaW5zKTtcbiAgICAgIGxldCBsYXN0WWVhciA9IDk5OTk7XG4gICAgICBsZXQgbGFzdE1vbnRoID0gMTM7XG4gICAgICB5ZWFycy5zb3J0KCkucmV2ZXJzZSgpO1xuXG4gICAgICBmb3IgKGNvbnN0IHllYXIgb2YgeWVhcnMpIHtcbiAgICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgeWVhcl0pO1xuXG4gICAgICAgIGlmIChwYXJzZUludCh5ZWFyLCAxMCkgPCBsYXN0WWVhcikge1xuICAgICAgICAgIGxhc3RNb250aCA9IDEzO1xuICAgICAgICAgIGxhc3RZZWFyID0gcGFyc2VJbnQoeWVhciwgMTApO1xuICAgICAgICAgIGlmIChzdWl2aVllYXJseVt5ZWFyXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2Ygc3VpdmlZZWFybHlbeWVhcl0pIHtcbiAgICAgICAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgICAgICAgcnMucHVzaChbXG4gICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgICAgICAgICBSZW5kZXJlci5tYWtlTGlua0FsaWFzKHRoaXMuZHYsIGZtLmYpLFxuICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCB3ZWVrID0gNTI7IHdlZWsgPiAwOyB3ZWVrLS0pIHtcbiAgICAgICAgICBjb25zdCB0aGlzTW9udGggPSB0aGlzLmdldE1vbnRoKHllYXIsIHdlZWspO1xuXG4gICAgICAgICAgaWYgKHN1aXZpTW9udGhseVt5ZWFyXVt0aGlzTW9udGhdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChsYXN0TW9udGggIT09IHRoaXNNb250aCkge1xuICAgICAgICAgICAgICBsYXN0TW9udGggPSB0aGlzTW9udGg7XG4gICAgICAgICAgICAgIHJzLnB1c2goW1xuICAgICAgICAgICAgICAgIFwiaGVhZGVyXCIsXG4gICAgICAgICAgICAgICAgMyxcbiAgICAgICAgICAgICAgICB0aGlzLmdldE1vbnRoTmFtZShsYXN0TW9udGgpLFxuICAgICAgICAgICAgICBdKTtcblxuICAgICAgICAgICAgICBpZiAoc3VpdmlNb250aGx5W3llYXJdW3RoaXNNb250aF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBzdWl2aU1vbnRobHlbeWVhcl1bXG4gICAgICAgICAgICAgICAgICB0aGlzTW9udGhcbiAgICAgICAgICAgICAgICBdKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICAgICAgICAgICAgcnMucHVzaChbXG4gICAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rQWxpYXModGhpcy5kdiwgZm0uZiksXG4gICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBzdWl2aVdlZWtseVt5ZWFyXVt3ZWVrXSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBiaW5zW3llYXJdW3dlZWtdID09PSB1bmRlZmluZWRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDQsIGB3ZWVrICR7d2Vlay50b1N0cmluZygpfWBdKTtcbiAgICAgICAgICBpZiAoc3VpdmlXZWVrbHlbeWVhcl1bd2Vla10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIHN1aXZpV2Vla2x5W3llYXJdW3dlZWtdKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgICAgICAgIHJzLnB1c2goW1xuICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtBbGlhcyh0aGlzLmR2LCBmbS5mKSxcbiAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGJpbnNbeWVhcl1bd2Vla10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gZG9tYWluID4gcHJvamVjdFxuICAgICAgICAgIGNvbnN0IHRhZ3MgPSBPYmplY3Qua2V5cyhiaW5zW3llYXJdW3dlZWtdKTtcbiAgICAgICAgICB0YWdzLnNvcnQoKTtcblxuICAgICAgICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAgICAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDUsIHRhZ10pO1xuICAgICAgICAgICAgYmluc1t5ZWFyXVt3ZWVrXVt0YWddLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZm1BID0gbmV3IEZyb250bWF0dGVySlMoYSk7XG4gICAgICAgICAgICAgIGNvbnN0IGZtQiA9IG5ldyBGcm9udG1hdHRlckpTKGIpO1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIGZtQi5jcmVhdGVkQXQuZ2V0VGltZSgpIC1cbiAgICAgICAgICAgICAgICBmbUEuY3JlYXRlZEF0LmdldFRpbWUoKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBiaW5zW3llYXJdW3dlZWtdW3RhZ10pIHtcbiAgICAgICAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgICAgICAgaWYgKGZtLnR5cGUgPT09IDYpIHtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkID0gZm0uY3JlYXRlZEF0XG4gICAgICAgICAgICAgICAgICAudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIDEwKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXkgPSBbXG4gICAgICAgICAgICAgICAgICBcIlN1blwiLFxuICAgICAgICAgICAgICAgICAgXCJNb25cIixcbiAgICAgICAgICAgICAgICAgIFwiVHVlXCIsXG4gICAgICAgICAgICAgICAgICBcIldlZFwiLFxuICAgICAgICAgICAgICAgICAgXCJUaHVcIixcbiAgICAgICAgICAgICAgICAgIFwiRnJpXCIsXG4gICAgICAgICAgICAgICAgICBcIlNhdFwiLFxuICAgICAgICAgICAgICAgIF1bZm0uY3JlYXRlZEF0LmdldERheSgpXTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYCR7ZH0sICR7ZGF5fWA7XG4gICAgICAgICAgICAgICAgcnMucHVzaChbXG4gICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiLFxuICAgICAgICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmsodGhpcy5kdiwgZm0uZiwgdGV4dCksXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcnM7XG4gIH1cblxuICBjYWxlbmRhcigpIHtcbiAgICBjb25zdCBycyA9IFtdO1xuICAgIGNvbnN0IGJpbnMgPSB7fTtcbiAgICBjb25zdCBwYWdlcyA9IHRoaXMuZHYucGFnZXMoYFwiJHtQYXRocy5UYXNrc31cImApLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgaWYgKFxuICAgICAgICBmbS5mbS5hdCA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgIGZtLmZtLmJlZm9yZSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgIGZtLmZtLmFmdGVyID09PSB1bmRlZmluZWRcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChmbS5mbS5zdGF0dXMgIT09IFwidG9kb1wiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZtLmdldFByb2plY3QoKSA9PT0gXCJkYWlseVwiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgcGFnZXMpIHtcbiAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICBsZXQgeWVhciA9IDA7XG4gICAgICBsZXQgbW9udGggPSAwO1xuICAgICAgbGV0IGRheSA9IDA7XG5cbiAgICAgIGlmIChmbS5mbS5iZWZvcmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB5ZWFyID0gZm0uYmVmb3JlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIG1vbnRoID0gZm0uYmVmb3JlLmdldE1vbnRoKCk7XG4gICAgICAgIGRheSA9IGZtLmJlZm9yZS5nZXRVVENEYXRlKCk7XG4gICAgICB9IGVsc2UgaWYgKGZtLmZtLmF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgeWVhciA9IGZtLmF0LmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIG1vbnRoID0gZm0uYXQuZ2V0TW9udGgoKTtcbiAgICAgICAgZGF5ID0gZm0uYXQuZ2V0VVRDRGF0ZSgpO1xuICAgICAgfSBlbHNlIGlmIChmbS5hZnRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHllYXIgPSBmbS5hZnRlci5nZXRGdWxsWWVhcigpO1xuICAgICAgICBtb250aCA9IGZtLmFmdGVyLmdldE1vbnRoKCk7XG4gICAgICAgIGRheSA9IGZtLmFmdGVyLmdldFVUQ0RhdGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYmluc1t5ZWFyXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbeWVhcl0gPSB7fTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJpbnNbeWVhcl1bbW9udGhdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t5ZWFyXVttb250aF0gPSB7fTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJpbnNbeWVhcl1bbW9udGhdW2RheV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW3llYXJdW21vbnRoXVtkYXldID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmIChiaW5zW3llYXJdW21vbnRoXVtkYXldW1wiYXRcIl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW3llYXJdW21vbnRoXVtkYXldW1wiYXRcIl0gPSBbXTtcbiAgICAgIH1cbiAgICAgIGlmIChiaW5zW3llYXJdW21vbnRoXVtkYXldW1wiYmVmb3JlXCJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t5ZWFyXVttb250aF1bZGF5XVtcImJlZm9yZVwiXSA9IFtdO1xuICAgICAgfVxuICAgICAgaWYgKGJpbnNbeWVhcl1bbW9udGhdW2RheV1bXCJhZnRlclwiXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbeWVhcl1bbW9udGhdW2RheV1bXCJhZnRlclwiXSA9IFtdO1xuICAgICAgfVxuXG4gICAgICBpZiAoZm0uZm0uYmVmb3JlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t5ZWFyXVttb250aF1bZGF5XVtcImJlZm9yZVwiXS5wdXNoKHBhZ2UpO1xuICAgICAgfSBlbHNlIGlmIChmbS5mbS5hdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbeWVhcl1bbW9udGhdW2RheV1bXCJhdFwiXS5wdXNoKHBhZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmluc1t5ZWFyXVttb250aF1bZGF5XVtcImFmdGVyXCJdLnB1c2gocGFnZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAge1xuICAgICAgY29uc3QgeWVhcnMgPSBPYmplY3Qua2V5cyhiaW5zKTtcbiAgICAgIHllYXJzLnNvcnQoKGEsIGIpID0+IHBhcnNlSW50KGEpIC0gcGFyc2VJbnQoYikpO1xuXG4gICAgICBmb3IgKGNvbnN0IHllYXIgb2YgeWVhcnMpIHtcbiAgICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgeWVhcl0pO1xuICAgICAgICBjb25zdCBtb250aHMgPSBPYmplY3Qua2V5cyhiaW5zW3llYXJdKTtcbiAgICAgICAgbW9udGhzLnNvcnQoKGEsIGIpID0+IHBhcnNlSW50KGEpIC0gcGFyc2VJbnQoYikpO1xuICAgICAgICBmb3IgKGNvbnN0IG1vbnRoIG9mIG1vbnRocykge1xuICAgICAgICAgIHJzLnB1c2goW1xuICAgICAgICAgICAgXCJoZWFkZXJcIixcbiAgICAgICAgICAgIDMsXG4gICAgICAgICAgICBgJHtbXCJKYW51YXJ5XCIsIFwiRmVidWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiLCBcIkF1Z3VzdFwiLCBcIlNlcHRlbWJlclwiLCBcIk9jdG9iZXJcIiwgXCJOb3ZlbWJlclwiLCBcIkRlY2VtYmVyXCJdW21vbnRoXX1gLFxuICAgICAgICAgIF0pO1xuXG4gICAgICAgICAgY29uc3QgZGF5cyA9IE9iamVjdC5rZXlzKGJpbnNbeWVhcl1bbW9udGhdKTtcbiAgICAgICAgICBkYXlzLnNvcnQoKGEsIGIpID0+IHBhcnNlSW50KGEpIC0gcGFyc2VJbnQoYikpO1xuICAgICAgICAgIGZvciAoY29uc3QgZGF5IG9mIGRheXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHdlZWtzID0gW1xuICAgICAgICAgICAgICBcIlN1blwiLFxuICAgICAgICAgICAgICBcIk1vblwiLFxuICAgICAgICAgICAgICBcIlR1ZVwiLFxuICAgICAgICAgICAgICBcIldlZFwiLFxuICAgICAgICAgICAgICBcIlRodVwiLFxuICAgICAgICAgICAgICBcIkZyaVwiLFxuICAgICAgICAgICAgICBcIlNhdFwiLFxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgY29uc3QgYmVmb3JlID0gYmluc1t5ZWFyXVttb250aF1bZGF5XVtcImJlZm9yZVwiXTtcbiAgICAgICAgICAgIGNvbnN0IGF0ID0gYmluc1t5ZWFyXVttb250aF1bZGF5XVtcImF0XCJdO1xuICAgICAgICAgICAgY29uc3QgYWZ0ZXIgPSBiaW5zW3llYXJdW21vbnRoXVtkYXldW1wiYWZ0ZXJcIl07XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICBgeWVhcjogJHt5ZWFyfVxcbm1vbnRoOiAke21vbnRofVxcbmRheTogJHtkYXl9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoYmVmb3JlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIGJlZm9yZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiLS0tIGJlZm9yZSAtLS1cIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocGFnZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCItLS0tLS1cIik7XG4gICAgICAgICAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYGJlZm9yZTogJHt3ZWVrc1tmbS5iZWZvcmUuZ2V0RGF5KCldfSAke2RheX0gJHtmbS5hdC50b0lTT1N0cmluZygpLnNsaWNlKDExLCAxNil9IHwgJHtmbS5nZXRQcm9qZWN0KCl9YDtcbiAgICAgICAgICAgICAgICBycy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgICAgICAgICBSZW5kZXJlci5tYWtlTGluayhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kdixcbiAgICAgICAgICAgICAgICAgICAgZm0uZixcbiAgICAgICAgICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICAgICAgICAgICAgXCJUYXNrXCIsXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGF0LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmbUEgPSBuZXcgRnJvbnRtYXR0ZXJKUyhhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmbUIgPSBuZXcgRnJvbnRtYXR0ZXJKUyhiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm1CLmF0LmdldFRpbWUoKSAtIGZtQS5hdC5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgYXQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIi0tLSBhdCAtLS1cIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocGFnZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCItLS0tLS1cIik7XG4gICAgICAgICAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYGF0OiAke3dlZWtzW2ZtLmF0LmdldERheSgpXX0gJHtkYXl9ICR7Zm0uYXQudG9JU09TdHJpbmcoKS5zbGljZSgxMSwgMTYpfSB8ICR7Zm0uZ2V0UHJvamVjdCgpfWA7XG4gICAgICAgICAgICAgICAgcnMucHVzaChbXG4gICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiLFxuICAgICAgICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmsoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHYsXG4gICAgICAgICAgICAgICAgICAgIGZtLmYsXG4gICAgICAgICAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICAgICAgICAgIFwiVGFza1wiLFxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYWZ0ZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgYWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIi0tLSBhZnRlciAtLS1cIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocGFnZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCItLS0tLS1cIik7XG4gICAgICAgICAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYCBhZnRlcjogJHt3ZWVrc1tmbS5hZnRlci5nZXREYXkoKV19ICR7ZGF5fSAke2ZtLmF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMTEsIDE2KX0gfCAke2ZtLmdldFByb2plY3QoKX1gO1xuICAgICAgICAgICAgICAgIHJzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmR2LFxuICAgICAgICAgICAgICAgICAgICBmbS5mLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0LFxuICAgICAgICAgICAgICAgICAgICBcIlRhc2tcIixcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcnM7XG4gIH1cblxuICBnbG9iYWxUYXNrTGlzdChwYWdlcykge1xuICAgIGNvbnN0IHJzID0gW107XG4gICAgY29uc3QgYmlucyA9IHt9O1xuXG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgaWYgKGZtLmdldFByb2plY3QoKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZtLnByb2plY3RzID0gW1wiYWRob2NcIl07XG4gICAgICB9XG5cbiAgICAgIGlmIChiaW5zW2ZtLmdldFByb2plY3QoKV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW2ZtLmdldFByb2plY3QoKV0gPSBbcGFnZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiaW5zW2ZtLmdldFByb2plY3QoKV0ucHVzaChwYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwcm9qZWN0cyA9IE9iamVjdC5rZXlzKGJpbnMpO1xuICAgIHByb2plY3RzLnNvcnQoKTtcbiAgICBmb3IgKGNvbnN0IHByb2plY3Qgb2YgcHJvamVjdHMpIHtcbiAgICAgIGNvbnN0IHRhc2tzID0gYmluc1twcm9qZWN0XTtcbiAgICAgIHRhc2tzLnNvcnQoSGVscGVyLnNvcnRCeVByaW9yaXR5QW5kRHVyYXRpb25BbmRBZ2UpO1xuICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgYCR7cHJvamVjdH1gXSk7XG4gICAgICBycy5wdXNoKFtcImFycmF5XCIsIFJlbmRlcmVyLmJhc2ljVGFza0pvdXJuYWwsIHRhc2tzXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgbmV4dEFjdGlvbnMoZHYpIHtcbiAgICBjb25zdCBwYWdlcyA9IHRoaXMuZHYucGFnZXMoYFwiJHtQYXRocy5UYXNrc31cImApLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgaWYgKFxuICAgICAgICBbXCJkYWlseVwiLCBcIndlZWtseVwiLCBcIm1vbnRobHlcIiwgXCJ5ZWFybHlcIl0uY29udGFpbnMoXG4gICAgICAgICAgZm0uZ2V0UHJvamVjdCgpLFxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMucHJvamVjdElzQWN0aXZlKGZtLmdldFByb2plY3QoKSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBleGNsdWRlIHRhc2tzIHdpdGggdW5mdWxmaWxsZWQgZGVwZW5kZW5jaWVzXG4gICAgICBpZiAoIXRoaXMubm90ZUhlbHBlci5pc0RvYWJsZShwYWdlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4Y2x1ZGUgc29tZWRheSBtYXliZSB0YXNrc1xuICAgICAgaWYgKGZtLmZtLnByaW9yaXR5ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5nbG9iYWxUYXNrTGlzdChwYWdlcyk7XG4gIH1cblxuICB3YWl0aW5nRm9yKGR2KSB7XG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLmR2LnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKS53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGlmIChcbiAgICAgICAgW1wiZGFpbHlcIiwgXCJ3ZWVrbHlcIiwgXCJtb250aGx5XCIsIFwieWVhcmx5XCJdLmNvbnRhaW5zKFxuICAgICAgICAgIGZtLmdldFByb2plY3QoKSxcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFbXCJ0b2RvXCIsIFwid2FpdGluZ1wiXS5jb250YWlucyhmbS5mbS5zdGF0dXMpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLnByb2plY3RJc0FjdGl2ZShmbS5nZXRQcm9qZWN0KCkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gZXhjbHVkZSB0YXNrcyB3aXRoIGZ1bGZpbGxlZCBkZXBlbmRlbmNpZXMgYW5kIHNvbWVkYXkgbWF5YmVcbiAgICAgIGlmICh0aGlzLm5vdGVIZWxwZXIuaXNEb2FibGUocGFnZSkgfHwgZm0uZm0ucHJpb3JpdHkgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmdsb2JhbFRhc2tMaXN0KHBhZ2VzKTtcbiAgfVxuXG4gIHByb2plY3RJc0FjdGl2ZShuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBwcm9qZWN0ID0gdGhpcy5kdi5wYWdlcyhgXCJQcm9qZWN0c1wiYCkud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICBpZiAoZm0uZ2V0TmFtZSgpICE9PSBuYW1lKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZtLmZtLmFjdGl2ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiBwcm9qZWN0Lmxlbmd0aCA+IDA7XG4gIH1cblxuICBzb21lZGF5TWF5YmUoZHYpIHtcbiAgICBjb25zdCBwYWdlcyA9IHRoaXMuZHYucGFnZXMoYFwiJHtQYXRocy5UYXNrc31cImApLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgaWYgKFxuICAgICAgICBbXCJkYWlseVwiLCBcIndlZWtseVwiLCBcIm1vbnRobHlcIiwgXCJ5ZWFybHlcIl0uY29udGFpbnMoXG4gICAgICAgICAgZm0uZ2V0UHJvamVjdCgpLFxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMucHJvamVjdElzQWN0aXZlKGZtLmdldFByb2plY3QoKSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBleGNsdWRlIHRhc2tzIHdpdGggdW5mdWxmaWxsZWQgZGVwZW5kZW5jaWVzXG4gICAgICBpZiAoIXRoaXMubm90ZUhlbHBlci5pc0RvYWJsZShwYWdlKSB8fCBmbS5mbS5wcmlvcml0eSA+IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmdsb2JhbFRhc2tMaXN0KHBhZ2VzKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRHZMaWIge1xuICB0YXNrRGlyID0gXCI4MTMgVGFza3NcIjtcbiAgaW5ib3hEaXIgPSBcIjgwMCBJbmJveFwiO1xuICByZWZEaXIgPSBcIjgwMiBSZWZzXCI7XG4gIGxvZ0RpciA9IFwiNjAwIExvZ1wiO1xuXG4gIFRhc2sgPSB7XG4gICAgQkFTRTogMyxcbiAgICBEQUlMWTogNCxcbiAgfTtcblxuICBUeXBlID0ge1xuICAgIFRBU0s6IDMsXG4gICAgREFJTFk6IDQsXG4gICAgTE9HOiA2LFxuICB9O1xuXG4gIFN0YXR1cyA9IHtcbiAgICBUT0RPOiBcInRvZG9cIixcbiAgICBET05FOiBcImRvbmVcIixcbiAgICBET0lORzogXCJkb2luZ1wiLFxuICAgIFRSQVNIOiBcInRyYXNoXCIsXG4gICAgTUFZQkU6IFwibWF5YmVcIixcbiAgICBTVEFOREJZOiBcInN0YW5kYnlcIixcbiAgfTtcblxuICBOYW1lc3BhY2UgPSB7XG4gICAgQVJFQTogXCJhcmVhXCIsXG4gICAgQ09OVEVYVDogXCJjb250ZXh0XCIsXG4gICAgTEFZRVI6IFwibGF5ZXJcIixcbiAgICBPUkc6IFwib3JnXCIsXG4gICAgUFJPSkVDVDogXCJwcm9qZWN0XCIsXG4gIH07XG5cbiAgRGVmYXVsdCA9IHtcbiAgICBBUkVBOiBcIm5vbmVcIixcbiAgICBDT05URVhUOiBcImFueVwiLFxuICAgIExBWUVSOiBcIm5vbmVcIixcbiAgICBPUkc6IFwibm9uZVwiLFxuICAgIFBST0pFQ1Q6IFwibm9uZVwiLFxuICB9O1xuXG4gIF9kdiA9IFwiXCI7XG5cbiAgc2V0IGR2KG1vZCkge1xuICAgIHRoaXMuX2R2ID0gbW9kO1xuICB9XG5cbiAgZ2V0IGR2KCkge1xuICAgIHJldHVybiB0aGlzLl9kdjtcbiAgfVxuXG4gIGlzQ2hpbGRUYWcocGFyZW50LCBjaGlsZCkge1xuICAgIGlmIChjaGlsZC5sZW5ndGggPD0gcGFyZW50Lmxlbmd0aCArIDEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKGNoaWxkLnNsaWNlKDAsIHBhcmVudC5sZW5ndGggKyAxKSAhPSBgJHtwYXJlbnR9L2ApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBzdHJpcFRhZyh0YWcpIHtcbiAgICBsZXQgdCA9IFwiXCI7XG4gICAgaWYgKHRhZy5zbGljZSgtMSkgPT09IFwiL1wiKSB7XG4gICAgICB0ID0gdGFnLnNsaWNlKDAsIC0xKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdCA9IHRhZztcbiAgICB9XG4gICAgaWYgKHQuc2xpY2UoMCwgMSkgPT09IFwiI1wiKSB7XG4gICAgICB0ID0gdC5zbGljZSgxLCB0Lmxlbmd0aCk7XG4gICAgfVxuICAgIHJldHVybiB0O1xuICB9XG5cbiAgZ2V0VGFza0Zyb21VVUlEKGR2LCB1dWlkKSB7XG4gICAgY29uc3QgbiA9IGR2LnBhZ2VzKGBcIiR7dGhpcy50YXNrRGlyfS8ke3V1aWR9XCJgKTtcbiAgICBpZiAobi5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIHNob3VsZCB3YXJuLCB0aGlzIG1lYW5zIG5vdGUgZGVwZW5kcyBvbiBhIG5vbi1leGlzdGluZyB0YXNrXG4gICAgICBjb25zb2xlLndhcm4oYFwiJHt0aGlzLnRhc2tEaXJ9LyR7dXVpZH1cIiB0YXNrIGRvZXMgbm90IGV4aXN0c2ApO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIG5bMF07XG4gIH1cblxuICBoYXNWYWxpZEZvcm1hdCh0YXNrKSB7XG4gICAgLy8gZHYucGFnZXMgcmV0dXJucyBhbiBhcnJheSB3ZXRoZXIgaXQgZmluZHMgMSBvciBtb3JlIG5vdGVzXG4gICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIHRoaXMgc2hvdWxkIHdhcm4sIGFsbCB0YXNrcyBzaG91bGQgaGF2ZSBhIGZyb250bWF0dGVyXG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBcIiR7dGhpcy50YXNrRGlyfS8ke3Rhc2sudXVpZH1cIiB0YXNrIGRvZXMgbm90IGhhdmUgYSBmcm9udG1hdHRlcmAsXG4gICAgICApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChmbS50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGFsbCB0YXNrcyBtdXN0IGhhdmUgYSBgdHlwZWAgZmllbGRcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFwiJHt0aGlzLnRhc2tEaXJ9LyR7dGFzay51dWlkfVwiIHRhc2sgZG9lcyBub3QgaGF2ZSBhIFxcYHR5cGVcXGAgZmllbGRgLFxuICAgICAgKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZm0uc3RhdHVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGFsbCB0YXNrcyBtdXN0IGhhdmUgYSBgc3RhdHVzYCBmaWVsZFxuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgXCIke3RoaXMudGFza0Rpcn0vJHt0YXNrLnV1aWR9XCIgdGFzayBkb2VzIG5vdCBoYXZlIGEgXFxgc3RhdHVzXFxgIGZpZWxkYCxcbiAgICAgICk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaGFzUGVuZGluZ0RlcGVuZGVuY2llcyhkdiwgZGVwcykge1xuICAgIGZvciAoY29uc3QgZGVwIG9mIGRlcHMpIHtcbiAgICAgIGNvbnN0IHRhc2sgPSB0aGlzLmdldFRhc2tGcm9tVVVJRChkdiwgZGVwKTtcbiAgICAgIGlmICh0YXNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuaGFzVmFsaWRGb3JtYXQodGFzaykpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBmbSA9IHRhc2suZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGlmIChmbS50eXBlICE9PSB0aGlzLlRhc2suQkFTRSAmJiBmbS50eXBlICE9PSB0aGlzLlRhc2suREFJTFkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoZm0uc3RhdHVzID09PSB0aGlzLlN0YXR1cy5UT0RPKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpc0RvYWJsZShkdiwgdGFzaykge1xuICAgIGNvbnN0IGZtID0gdGFzay5maWxlLmZyb250bWF0dGVyO1xuXG4gICAgaWYgKGZtLnN0YXR1cyAhPT0gdGhpcy5TdGF0dXMuVE9ETykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChmbS5hZnRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBhZnRlciA9IG5ldyBEYXRlKGZtLmFmdGVyKTtcbiAgICAgIGlmIChEYXRlLm5vdygpIDw9IGFmdGVyLmdldFRpbWUoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGVwcyA9IGZtLm5lZWRzO1xuICAgIGlmIChkZXBzID09PSB1bmRlZmluZWQgfHwgZGVwcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmhhc1BlbmRpbmdEZXBlbmRlbmNpZXMoZHYsIGRlcHMpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBnZXROYW1lc3BhY2VDb250ZW50KGR2LCBucykge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gW107XG4gICAgY29uc3QgcmVzcCA9IGR2LnBhZ2VzKGAjJHtuc31gKTtcbiAgICBmb3IgKGNvbnN0IGYgb2YgcmVzcCkge1xuICAgICAgY29uc3QgdGFncyA9IGYudGFncztcbiAgICAgIGlmICh0YWdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNDaGlsZFRhZyhucywgdGFnKSkge1xuICAgICAgICAgIGNvbnN0IHQgPSB0YWcuc2xpY2UobnMubGVuZ3RoICsgMSk7XG4gICAgICAgICAgaWYgKCFjaGlsZHJlbi5pbmNsdWRlcyh0KSkge1xuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaCh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cblxuICBpc0RvbmUoZHYsIGRlcCkge1xuICAgIGNvbnN0IHRhc2sgPSB0aGlzLmdldFRhc2tGcm9tVVVJRChkdiwgZGVwKTtcbiAgICBpZiAodGFzayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmhhc1ZhbGlkRm9ybWF0KHRhc2spKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgaWYgKGZtLnN0YXR1cyA9PT0gdGhpcy5TdGF0dXMuRE9ORSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZ2V0VGFza3MoXG4gICAgZHYsXG4gICAgdGFnLFxuICAgIHRhc2tUeXBlID0gW3RoaXMuVGFzay5CQVNFLCB0aGlzLlRhc2suREFJTFldLFxuICAgIHN0YXR1cyA9IHRoaXMuU3RhdHVzLlRPRE8sXG4gICkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBjb25zdCB0YXNrcyA9IGR2LnBhZ2VzKHRhZyk7XG5cbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcbiAgICAgIGNvbnN0IGZtID0gdGFzay5maWxlLmZyb250bWF0dGVyO1xuICAgICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoZm0uc3RhdHVzID09PSB1bmRlZmluZWQgfHwgZm0uc3RhdHVzICE9PSBzdGF0dXMpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoZm0udHlwZSA9PT0gdW5kZWZpbmVkIHx8ICF0YXNrVHlwZS5jb250YWlucyhmbS50eXBlKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGJ1ZmYucHVzaCh0YXNrKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVmZjtcbiAgfVxuXG4gIGZvcm1hdFRhc2soZHYsIHRhc2spIHtcbiAgICByZXR1cm4gZHYuZmlsZUxpbmsodGFzay5maWxlLnBhdGgpO1xuICB9XG5cbiAgZm9ybWF0VGFza0JpcyhkdiwgdGFzaykge1xuICAgIGNvbnN0IGYgPSB0YXNrLmZpbGU7XG4gICAgbGV0IGN0eCA9IFwiXCI7XG5cbiAgICBmb3IgKGNvbnN0IHRhZyBvZiBmLnRhZ3MpIHtcbiAgICAgIGlmICh0YWcuc2xpY2UoMCwgOSkgPT0gXCIjY29udGV4dC9cIikge1xuICAgICAgICBjdHggPSB0YWcuc2xpY2UoOSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFtcbiAgICAgIGR2LmZpbGVMaW5rKGYucGF0aCksXG4gICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgZi5mcm9udG1hdHRlci50aW1lX2VzdGltYXRlLFxuICAgICAgY3R4LFxuICAgIF07XG4gIH1cblxuICBmb3JtYXRUYXNrQmFzZShkdiwgdGFzaykge1xuICAgIGNvbnN0IGYgPSB0YXNrLmZpbGU7XG4gICAgY29uc3QgZm0gPSBmLmZyb250bWF0dGVyO1xuICAgIGNvbnN0IHRhZ3MgPSBmbS50YWdzO1xuXG4gICAgY29uc3QgYXJlYSA9IHRoaXMuZ2V0QXJlYSh0YWdzKTtcblxuICAgIHJldHVybiBbXG4gICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgIGR2Lm1hcmtkb3duVGFza0xpc3QoZi50YXNrcyksXG4gICAgICBmbS50aW1lX2VzdGltYXRlLFxuICAgICAgYXJlYSxcbiAgICBdO1xuICB9XG5cbiAgZm9ybWF0VGFza1dhaXRpbmcoZHYsIHRhc2spIHtcbiAgICBjb25zdCBmID0gdGFzay5maWxlO1xuICAgIGNvbnN0IGZtID0gZi5mcm9udG1hdHRlcjtcbiAgICBjb25zdCBkZXBzID0gW107XG5cbiAgICBpZiAoZm0ubmVlZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZm9yIChjb25zdCBkZXAgb2YgZm0ubmVlZHMpIHtcbiAgICAgICAgZGVwcy5wdXNoKGR2LmZpbGVMaW5rKGAke3RoaXMudGFza0Rpcn0vJHtkZXB9YCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvcm1hdFRhc2tNYXliZShkdiwgdGFzaykge1xuICAgIGNvbnN0IGYgPSB0YXNrLmZpbGU7XG4gICAgY29uc3QgZm0gPSBmLmZyb250bWF0dGVyO1xuICAgIGNvbnN0IGRlcHMgPSBbXTtcblxuICAgIHJldHVybiBbZHYuZmlsZUxpbmsoZi5wYXRoKV07XG4gIH1cblxuICBtYWtlQXN5bmNSZXF1ZXN0KGR2LCB1dWlkKSB7XG4gICAgcmV0dXJuIGR2XG4gICAgICAucXVlcnkoYExJU1QgV0hFUkUgbmVlZHMgQU5EIGNvbnRhaW5zKG5lZWRzLCBcIiR7dXVpZH1cIilgKVxuICAgICAgLnRoZW4oKHZhbHVlKSA9PiB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZ2V0RGVwZW5kYW50VGFza3MoZHYsIHRhc2spIHtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgY29uc3QgdXVpZCA9IHRhc2suZmlsZS5uYW1lO1xuXG4gICAgaWYgKHRhc2suZmlsZS5mcm9udG1hdHRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gYnVmZjtcbiAgICB9XG5cbiAgICBjb25zdCB0YXNrcyA9IGR2XG4gICAgICAucGFnZXMoYFwiJHt0aGlzLnRhc2tEaXJ9XCJgKVxuICAgICAgLndoZXJlKChwKSA9PiBwLm5lZWRzICE9PSB1bmRlZmluZWQgJiYgcC5uZWVkcy5jb250YWlucyh1dWlkKSk7XG4gICAgZm9yIChjb25zdCB0ayBvZiB0YXNrcykge1xuICAgICAgY29uc3QgdCA9IGR2LnBhZ2VzKGBcIiR7dGsuZmlsZS5wYXRofVwiYCk7XG4gICAgICBidWZmLnB1c2godFswXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1ZmY7XG4gIH1cblxuICBieURlcGVuZGVuY3lBbmRQcmlvcml0eUFuZENyZWF0ZWRBdChkdiwgYSwgYikge1xuICAgIGNvbnN0IGZ0QSA9IGEuZmlsZS5mcm9udG1hdHRlcjtcbiAgICBjb25zdCBmdEIgPSBiLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgY29uc3QgcHJpb0EgPSBmdEEucHJpb3JpdHk7XG4gICAgY29uc3QgcHJpb0IgPSBmdEIucHJpb3JpdHk7XG4gICAgLy8gYmVmb3JlID4gZGVwcyA+IHByaW8gPiBjcmVhdGVkX2F0XG4gICAgLy8gbGV0IGJlZm9yZUEgPSBmdEEuYmVmb3JlO1xuICAgIC8vIGxldCBiZWZvcmVCID0gZnRCLmJlZm9yZTtcblxuICAgIGNvbnN0IGRlcHNBID0gdGhpcy5nZXREZXBlbmRhbnRUYXNrcyhkdiwgYSk7XG4gICAgY29uc3QgZGVwc0IgPSB0aGlzLmdldERlcGVuZGFudFRhc2tzKGR2LCBiKTtcblxuICAgIGlmIChkZXBzQS5sZW5ndGggLSBkZXBzQi5sZW5ndGggIT09IDApIHtcbiAgICAgIHJldHVybiBkZXBzQS5sZW5ndGggLSBkZXBzQi5sZW5ndGg7XG4gICAgfVxuXG4gICAgaWYgKHByaW9BIC0gcHJpb0IgIT09IDApIHtcbiAgICAgIHJldHVybiBwcmlvQSAtIHByaW9CO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGVBID0gbmV3IERhdGUoZnRBLmNyZWF0ZWRfYXQpO1xuICAgIGNvbnN0IGRhdGVCID0gbmV3IERhdGUoZnRCLmNyZWF0ZWRfYXQpO1xuXG4gICAgcmV0dXJuIChkYXRlQS5nZXRUaW1lKCkgLSBkYXRlQi5nZXRUaW1lKCkpICogLTE7XG4gIH1cblxuICBmb3JtYXRUYXNrUGxhbm5pbmdXYWl0aW5nKGR2LCB0YXNrKSB7XG4gICAgY29uc3QgZiA9IHRhc2suZmlsZTtcblxuICAgIHJldHVybiBbXG4gICAgICAvLyBham91dGVyIGFsaWFzIHN1ciBsZSBsaW5rXG4gICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgZHYuZmlsZUxpbmsoZi5wYXRoLCBmYWxzZSwgZi5uYW1lLnNsaWNlKDAsIDgpKSxcbiAgICAgIGYuZnJvbnRtYXR0ZXIudGltZV9lc3RpbWF0ZSxcbiAgICAgIGYuZnJvbnRtYXR0ZXIuY2F1c2UsXG4gICAgXTtcbiAgfVxuXG4gIHJlbmRlckJhc2VBc0FycmF5KGR2LCB0YXNrcykge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIHRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgIGFyci5wdXNoKHRoaXMuZm9ybWF0VGFza0Jhc2UoZHYsIHRhc2spKTtcbiAgICB9KTtcbiAgICBkdi50YWJsZShbXCJ1dWlkXCIsIFwidGFza3NcIiwgXCJlc3RpbWF0ZVwiLCBcImFyZWFcIl0sIGFycik7XG4gIH1cblxuICByZW5kZXJQbGFubmluZ1dhaXRpbmcoZHYsIHRhc2tzKSB7XG4gICAgY29uc3QgYXJyID0gW107XG4gICAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgYXJyLnB1c2godGhpcy5mb3JtYXRUYXNrUGxhbm5pbmdXYWl0aW5nKGR2LCB0YXNrKSk7XG4gICAgfSk7XG4gICAgZHYudGFibGUoW1widGFza3NcIiwgXCJ1dWlkXCIsIFwiZXN0aW1hdGVcIiwgXCJjYXVzZVwiXSwgYXJyKTtcbiAgfVxuXG4gIHJlbmRlck1heWJlQXNBcnJheShkdiwgdGFza3MpIHtcbiAgICBjb25zdCBhcnIgPSBbXTtcbiAgICB0YXNrcy5mb3JFYWNoKCh7IHJlZiwgdGFzayB9KSA9PiB7XG4gICAgICBpZiAodGFzayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFyci5wdXNoKHRoaXMuZm9ybWF0VGFza01heWJlKGR2LCB0YXNrKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZHYudGFibGUoW1widXVpZFwiXSwgYXJyKTtcbiAgfVxuXG4gIGZvcm1hdFRhc2tEYWlseShkdiwgdGFzaykge1xuICAgIGNvbnN0IGYgPSB0YXNrLmZpbGU7XG4gICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgY29uc3QgdGFncyA9IHRhc2suZmlsZS50YWdzO1xuICAgIGNvbnN0IGFyZWFzID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgICBpZiAodGFnLnNsaWNlKDAsIDYpID09IFwiI2FyZWEvXCIpIHtcbiAgICAgICAgYXJlYXMucHVzaCh0YWcuc2xpY2UoNikpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGxpbmtzID0gW107XG4gICAgZm9yIChjb25zdCBsaW5rIG9mIGYub3V0bGlua3MpIHtcbiAgICAgIGxpbmtzLnB1c2gobGluayk7XG4gICAgfVxuXG4gICAgY29uc3QgdGFza3MgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZi50YXNrcykge1xuICAgICAgdGFza3MucHVzaCh0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gW1xuICAgICAgZHYuZmlsZUxpbmsoZi5wYXRoKSxcbiAgICAgIGxpbmtzLmxlbmd0aCA+IDBcbiAgICAgICAgPyBkdi5tYXJrZG93bkxpc3QobGlua3MpXG4gICAgICAgIDogZHYubWFya2Rvd25UYXNrTGlzdCh0YXNrcyksXG4gICAgICBmbS50aW1lX2FsbG9jYXRlZCxcbiAgICAgIGFyZWFzLmxlbmd0aCA+IDAgPyBkdi5tYXJrZG93bkxpc3QoYXJlYXMpIDogXCJcIixcbiAgICBdO1xuICB9XG5cbiAgZm9ybWF0RmxlZXRpbmcoZHYsIHRhc2spIHtcbiAgICBjb25zdCBmID0gdGFzay5maWxlO1xuICAgIGNvbnN0IGZtID0gdGFzay5maWxlLmZyb250bWF0dGVyO1xuICAgIGNvbnN0IHRhZ3MgPSB0YXNrLmZpbGUudGFncztcbiAgICBjb25zdCBob3VycyA9IDM2MDA7XG4gICAgY29uc3QgZGF5cyA9IDg2NDAwO1xuXG4gICAgbGV0IGR0ID0gbmV3IERhdGUoKTtcbiAgICBpZiAoZm0gIT09IHVuZGVmaW5lZCAmJiBmbS5jcmVhdGVkX2F0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGR0ID0gbmV3IERhdGUoZm0uY3JlYXRlZF9hdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGR0ID0gbmV3IERhdGUoZi5jdGltZS50cyk7XG4gICAgfVxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZGVsdGEgPSAobm93LmdldFRpbWUoKSAtIGR0LmdldFRpbWUoKSkgLyAxMDAwO1xuICAgIGxldCBzaW5jZSA9IFwiXCI7XG4gICAgY29uc3QgdG9EdCA9ICh0KSA9PiB7XG4gICAgICByZXR1cm4gU3RyaW5nKE1hdGgucm91bmQodCAqIDEwKSAvIDEwKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgfTtcbiAgICBpZiAoZGVsdGEgPj0gZGF5cykge1xuICAgICAgLy8gZGF5cyBhZ29cbiAgICAgIHNpbmNlID0gdG9EdChkZWx0YSAvIGRheXMpICsgXCJkXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGhvdXJzIGFnb1xuICAgICAgc2luY2UgPSB0b0R0KGRlbHRhIC8gaG91cnMpICsgXCJoXCI7XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFtkdi5maWxlTGluayhgJHtmLnBhdGh9I0NvbnRlbnRgKSwgc2luY2UsIGYuc2l6ZV07XG4gICAgaWYgKGZtLmFsaWFzID09PSB1bmRlZmluZWQgfHwgZm0uYWxpYXMgPT09IFwiXCIpIHtcbiAgICAgIHJldHVybiBbZHYuZmlsZUxpbmsoYCR7Zi5wYXRofWApLCBzaW5jZSwgZi5zaXplXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtkdi5maWxlTGluayhgJHtmLnBhdGh9YCwgZmFsc2UsIGZtLmFsaWFzKSwgc2luY2UsIGYuc2l6ZV07XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyRGFpbHlBc0FycmF5KGR2LCB0YXNrcykge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIHRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgIGFyci5wdXNoKHRoaXMuZm9ybWF0VGFza0RhaWx5KGR2LCB0YXNrKSk7XG4gICAgfSk7XG4gICAgZHYudGFibGUoW1widXVpZFwiLCBcImNvbnRlbnRcIiwgXCJkdXJhdGlvblwiLCBcImFyZWFcIl0sIGFycik7XG4gIH1cblxuICByZW5kZXJGbGVldGluZ0FzQXJyYXkoZHYsIHRhc2tzKSB7XG4gICAgY29uc3QgYXJyID0gW107XG4gICAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgYXJyLnB1c2godGhpcy5mb3JtYXRGbGVldGluZyhkdiwgdGFzaykpO1xuICAgIH0pO1xuICAgIGR2LnRhYmxlKFtcImNvbnRlbnRcIiwgXCJhZ2VcIiwgXCJzaXplXCJdLCBhcnIpO1xuICB9XG5cbiAgYXV0b0ZpZWxkTmVlZChkdiwgZm0pIHtcbiAgICBpZiAoZm0ubmVlZHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBidWZmID0gW107XG4gICAgZm9yIChjb25zdCBkZXAgb2YgZm0ubmVlZHMpIHtcbiAgICAgIGlmICghdGhpcy5pc0RvbmUoZHYsIGRlcCkpIHtcbiAgICAgICAgYnVmZi5wdXNoKGR2LmZpbGVMaW5rKGAke3RoaXMudGFza0Rpcn0vJHtkZXB9YCkpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYnVmZi5sZW5ndGggPiAwKSB7XG4gICAgICBkdi5oZWFkZXIoMiwgXCJOZWVkc1wiKTtcbiAgICAgIGR2Lmxpc3QoYnVmZik7XG4gICAgfVxuICB9XG5cbiAgYXV0b0ZpZWxkTmVlZGVkQnkoZHYsIGN1cnJlbnQpIHtcbiAgICBjb25zdCB0YXNrcyA9IHRoaXMuZ2V0RGVwZW5kYW50VGFza3MoZHYsIGN1cnJlbnQpO1xuICAgIGlmICh0YXNrcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBidWZmID0gW107XG4gICAgZm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XG4gICAgICBpZiAoIXRoaXMuaXNEb25lKGR2LCB0YXNrLnV1aWQpKSB7XG4gICAgICAgIGJ1ZmYucHVzaChkdi5maWxlTGluayh0YXNrLmZpbGUucGF0aCkpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYnVmZi5sZW5ndGggPiAwKSB7XG4gICAgICBkdi5oZWFkZXIoMiwgXCJOZWVkZWRCeVwiKTtcbiAgICAgIGR2Lmxpc3QoYnVmZik7XG4gICAgfVxuICB9XG5cbiAgYXV0b0ZpZWxkVGFncyhkdiwgZm0pIHtcbiAgICBjb25zdCB0YWdzID0gZm0udGFncztcbiAgICBpZiAodGFncyA9PSB1bmRlZmluZWQgfHwgdGFncy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0YWdzLnNvcnQoKTtcbiAgICBkdi5oZWFkZXIoMiwgXCJUYWdzXCIpO1xuICAgIGxldCBzID0gXCJcIjtcbiAgICBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgICBzICs9IGAgIyR7dGFnfWA7XG4gICAgfVxuICAgIGR2LnBhcmFncmFwaChzKTtcblxuICAgIC8vIGR2LnBhcmFncmFwaChzKTtcbiAgICAvLyBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgLy8gICBkdi5wYXJhZ3JhcGgoYCMke3RhZ31gKTtcbiAgICAvLyB9XG4gIH1cblxuICBhdXRvRmllbGRUYXNrQmFzZShkdikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBkdi5jdXJyZW50KCk7XG4gICAgY29uc3QgZm0gPSBjdXJyZW50LmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnNvbGUud2FybihcImZtIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHByb2plY3ROYW1lID0gSGVscGVyLmdldFByb2plY3QoZm0pO1xuICAgIGlmIChwcm9qZWN0TmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBwcm9qZWN0cyA9IGR2LnBhZ2VzKGBcIlByb2plY3RzXCJgKS53aGVyZSgoZm1QKSA9PiB7XG4gICAgICAgIGlmIChmbVAubmFtZSA9PT0gcHJvamVjdE5hbWUuc2xpY2UoOCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHByb2plY3RzLmxlbmd0aCkge1xuICAgICAgICBkdi5oZWFkZXIoMiwgXCJQcm9qZWN0XCIpO1xuICAgICAgICBkdi5wYXJhZ3JhcGgoUmVuZGVyZXIubWFrZUxpbmtOYW1lKGR2LCBwcm9qZWN0c1swXS5maWxlKSk7XG4gICAgICAgIC8vIGR2LnBhcmFncmFwaChkdi5maWxlTGluayhgUHJvamVjdHMvJHtwcm9qZWN0c1swXS5maWxlLmZyb250bWF0dGVyLnV1aWR9YCkpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmF1dG9GaWVsZE5lZWQoZHYsIGZtKTtcbiAgICB0aGlzLmF1dG9GaWVsZE5lZWRlZEJ5KGR2LCBjdXJyZW50KTtcbiAgICAvLyB0aGlzLmF1dG9GaWVsZFRhZ3MoZHYsIGZtKTtcblxuICAgIGNvbnN0IGxvZ0VudHJpZXMgPSBkdlxuICAgICAgLnBhZ2VzKGBcIiR7dGhpcy5sb2dEaXJ9LyR7Zm0udXVpZH1cImApXG4gICAgICAud2hlcmUoKHApID0+IHAudHlwZSA9PT0gNilcbiAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiZGVzY1wiKTtcblxuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBsZXQgdG90YWxUaW1lID0gMDtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGxvZ0VudHJpZXMpIHtcbiAgICAgIGNvbnN0IGZtZSA9IGVudHJ5LmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBjb25zdCBlID0gW107XG4gICAgICBsZXQgc3RhcnQ6IGFueSA9IDA7XG4gICAgICBsZXQgc3RvcDogYW55ID0gMDtcblxuICAgICAgaWYgKGZtZSA9PT0gdW5kZWZpbmVkIHx8IGZtZS5jcmVhdGVkX2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGZyb250bWF0dGVyOiAke2ZtZS51dWlkfWApO1xuICAgICAgfVxuXG4gICAgICBzdGFydCA9IG5ldyBEYXRlKGZtZS5jcmVhdGVkX2F0KTtcbiAgICAgIGUucHVzaChzdGFydC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKSk7XG5cbiAgICAgIGlmIChmbWUuZG9uZV9hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHN0b3AgPSBEYXRlLm5vdygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RvcCA9IG5ldyBEYXRlKGZtZS5kb25lX2F0KTtcbiAgICAgIH1cbiAgICAgIHRvdGFsVGltZSArPSBzdG9wIC0gc3RhcnQ7XG5cbiAgICAgIGUucHVzaChcbiAgICAgICAgZHYuc2VjdGlvbkxpbmsoXG4gICAgICAgICAgZm1lLnV1aWQsXG4gICAgICAgICAgXCIjIyBDb250ZW50XCIsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgZm1lLnV1aWQuc2xpY2UoMCwgOCksXG4gICAgICAgICksXG4gICAgICApO1xuICAgICAgZS5wdXNoKE1hdGgucm91bmQoKChzdG9wIC0gc3RhcnQpIC8gKDEwMDAgKiA2MCAqIDYwKSkgKiAxMCkgLyAxMCk7XG4gICAgICBpZiAoZm1lLnJldmlld2VkID09PSB1bmRlZmluZWQgfHwgZm1lLnJldmlld2VkID09PSAwKSB7XG4gICAgICAgIGUucHVzaCgwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGUucHVzaChmbWUucmV2aWV3ZWQpO1xuICAgICAgfVxuXG4gICAgICBidWZmLnB1c2goZSk7XG4gICAgfVxuXG4gICAgaWYgKGJ1ZmYubGVuZ3RoID4gMCkge1xuICAgICAgZHYuaGVhZGVyKDIsIFwiTG9nc1wiKTtcbiAgICAgIGR2LnRhYmxlKFtcImNyZWF0ZWRfYXRcIiwgXCJ1dWlkXCIsIFwic2Vzc2lvblwiLCBcInJldmlld2VkXCJdLCBidWZmKTtcbiAgICAgIGlmICh0b3RhbFRpbWUgPiAwKSB7XG4gICAgICAgIGR2LnBhcmFncmFwaChcbiAgICAgICAgICBgX3RvdGFsVGltZSAoaCk6XyAke01hdGgucm91bmQoKHRvdGFsVGltZSAvICgxMDAwICogNjAgKiA2MCkpICogMTApIC8gMTBcbiAgICAgICAgICB9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhdXRvRmllbGRMb2coZHYpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gZHYuY3VycmVudCgpO1xuICAgIGNvbnN0IGZtID0gY3VycmVudC5maWxlLmZyb250bWF0dGVyO1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZHYuaGVhZGVyKDIsIFwiUGFyZW50XCIpO1xuICAgIGR2LnBhcmFncmFwaChkdi5maWxlTGluayhgJHt0aGlzLnRhc2tEaXJ9LyR7Zm0ucGFyZW50X2lkfWApKTtcbiAgfVxuXG4gIGF1dG9GaWVsZEF1dGhvcnMoZHYsIGZtKSB7XG4gICAgY29uc3QgYXV0aG9ycyA9IGZtLmF1dGhvcnM7XG4gICAgaWYgKGF1dGhvcnMgPT09IHVuZGVmaW5lZCB8fCBhdXRob3JzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkdi5oZWFkZXIoMiwgXCJBdXRob3JzXCIpO1xuICAgIGR2Lmxpc3QoYXV0aG9ycyk7XG4gIH1cblxuICBhdXRvRmllbGRUaXRsZShkdiwgZm0pIHtcbiAgICBjb25zdCB0aXRsZSA9IGZtLmFsaWFzO1xuICAgIGlmICh0aXRsZSA9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkdi5oZWFkZXIoMSwgdGl0bGUpO1xuICB9XG5cbiAgYXV0b0ZpZWxkTGl0ZXJhdHVyZU5vdGUoZHYpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gZHYuY3VycmVudCgpO1xuICAgIGNvbnN0IGZtID0gY3VycmVudC5maWxlLmZyb250bWF0dGVyO1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5hdXRvRmllbGRUaXRsZShkdiwgZm0pO1xuICAgIHRoaXMuYXV0b0ZpZWxkQXV0aG9ycyhkdiwgZm0pO1xuICAgIHRoaXMuYXV0b0ZpZWxkVGFncyhkdiwgZm0pO1xuICB9XG5cbiAgYXV0b0ZpZWxkUGVybWFuZW50KGR2KSB7XG4gICAgY29uc3QgY3VycmVudCA9IGR2LmN1cnJlbnQoKTtcbiAgICBjb25zdCBmbSA9IGN1cnJlbnQuZmlsZS5mcm9udG1hdHRlcjtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuYXV0b0ZpZWxkVGFncyhkdiwgZm0pO1xuICB9XG5cbiAgYXV0b0ZpZWxkVGFzayhkdikge1xuICAgIHJldHVybiB0aGlzLmF1dG9GaWVsZFRhc2tCYXNlKGR2KTtcbiAgfVxuXG4gIGF1dG9GaWVsZExpdGVyYXR1cmUoZHYpIHtcbiAgICByZXR1cm4gdGhpcy5hdXRvRmllbGRMaXRlcmF0dXJlTm90ZShkdik7XG4gIH1cblxuICBhdXRvRmllbGRGbGVldGluZyhkdikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGF1dG9GaWVsZFN1cHBseShkdikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZpbmRUYXNrc0J5UHJvamVjdChkdiwgbmFtZSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcblxuICAgIGlmIChuYW1lICE9PSBcIlwiICYmIG5hbWUgIT09IFwibm9uZVwiKSB7XG4gICAgICBjb25zdCB0YXNrcyA9IHRoaXMuZ2V0VGFza3MoZHYsIGAke3RoaXMuTmFtZXNwYWNlLlBST0pFQ1R9L25vbmVgLCBbXG4gICAgICAgIHRoaXMuVGFzay5CQVNFLFxuICAgICAgXSk7XG4gICAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcbiAgICAgICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICAgIGlmICh0aGlzLmlzRG9hYmxlKGR2LCB0YXNrKSkge1xuICAgICAgICAgIGJ1ZmYucHVzaCh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0YXNrcyA9IHRoaXMuZ2V0VGFza3MoZHYsIFwiXCIsIFt0aGlzLlRhc2suQkFTRV0pO1xuICAgICAgZm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XG4gICAgICAgIGNvbnN0IGZtID0gdGFzay5maWxlLmZyb250bWF0dGVyO1xuICAgICAgICBjb25zdCB0YWdzID0gZm0udGFncztcbiAgICAgICAgaWYgKFxuICAgICAgICAgIChmbS50YWdzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChuYW1lID09PSBcIlwiIHx8IG5hbWUgPT09IFwibm9uZVwiKSkgfHxcbiAgICAgICAgICBmbS50YWdzLmNvbnRhaW5zKGAke3RoaXMuTmFtZXNwYWNlLlBST0pFQ1R9L25vbmVgKVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodGhpcy5pc0RvYWJsZShkdiwgdGFzaykpIHtcbiAgICAgICAgICAgIGJ1ZmYucHVzaCh0YXNrKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBidWZmLnNvcnQoKTtcbiAgICByZXR1cm4gYnVmZjtcbiAgfVxuXG4gIGdldFRhZyh0YWdzLCB0eXBlKSB7XG4gICAgbGV0IG5hbWUgPSBcIlwiO1xuICAgIGxldCBkZWZhdWx0VmFsdWUgPSBcIlwiO1xuXG4gICAgaWYgKHR5cGUgPT09IFwiYXJlYVwiKSB7XG4gICAgICBuYW1lID0gdGhpcy5OYW1lc3BhY2UuQVJFQTtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IHRoaXMuRGVmYXVsdC5BUkVBO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJjb250ZXh0XCIpIHtcbiAgICAgIG5hbWUgPSB0aGlzLk5hbWVzcGFjZS5DT05URVhUO1xuICAgICAgZGVmYXVsdFZhbHVlID0gdGhpcy5EZWZhdWx0LkNPTlRFWFQ7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcImxheWVyXCIpIHtcbiAgICAgIG5hbWUgPSB0aGlzLk5hbWVzcGFjZS5MQVlFUjtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IHRoaXMuRGVmYXVsdC5MQVlFUjtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwib3JnXCIpIHtcbiAgICAgIG5hbWUgPSB0aGlzLk5hbWVzcGFjZS5PUkc7XG4gICAgICBkZWZhdWx0VmFsdWUgPSB0aGlzLkRlZmF1bHQuT1JHO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJwcm9qZWN0XCIpIHtcbiAgICAgIG5hbWUgPSB0aGlzLk5hbWVzcGFjZS5QUk9KRUNUO1xuICAgICAgZGVmYXVsdFZhbHVlID0gdGhpcy5EZWZhdWx0LlBST0pFQ1Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgZ2V0VGFnIGdvdCB1bnN1cG9ydGVkIHR5cGU6ICR7dHlwZX1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBsZW4gPSBuYW1lLmxlbmd0aCArIDE7XG4gICAgY29uc3QgZGVmYXVsdFRhZyA9IGAke25hbWV9LyR7ZGVmYXVsdFZhbHVlfWA7XG4gICAgaWYgKHRhZ3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRUYWc7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgaWYgKHRhZy5sZW5ndGggPiBsZW4gJiYgdGFnLnNsaWNlKDAsIGxlbikgPT0gYCR7bmFtZX0vYCkge1xuICAgICAgICByZXR1cm4gdGFnO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkZWZhdWx0VGFnO1xuICB9XG5cbiAgZ2V0QXJlYSh0YWdzKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGFnKHRhZ3MsIFwiYXJlYVwiKTtcbiAgfVxuXG4gIGdldENvbnRleHQodGFncykge1xuICAgIHJldHVybiB0aGlzLmdldFRhZyh0YWdzLCBcImNvbnRleHRcIik7XG4gIH1cbiAgZ2V0TGF5ZXIodGFncykge1xuICAgIHJldHVybiB0aGlzLmdldFRhZyh0YWdzLCBcImxheWVyXCIpO1xuICB9XG5cbiAgZ2V0T3JnKHRhZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRUYWcodGFncywgXCJvcmdcIik7XG4gIH1cblxuICBnZXRQcm9qZWN0KHRhZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRUYWcodGFncywgXCJwcm9qZWN0XCIpO1xuICB9XG5cbiAgcGFyc2VMaXN0RnJvbnRtYXR0ZXIoZm0pIHtcbiAgICBsZXQgbWluUHJpb3JpdHkgPSAwO1xuICAgIGlmIChmbS5taW5fcHJpb3JpdHkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgbWluUHJpb3JpdHkgPSBmbS5taW5fcHJpb3JpdHk7XG4gICAgfVxuXG4gICAgbGV0IGlnbm9yZSA9IFtdO1xuICAgIGlmIChmbS5pZ25vcmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWdub3JlID0gZm0uaWdub3JlO1xuICAgIH1cblxuICAgIGxldCBieUFyZWFzID0gW107XG4gICAgaWYgKGZtLmJ5X2FyZWFzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGJ5QXJlYXMgPSBmbS5ieV9hcmVhcztcbiAgICB9XG5cbiAgICBsZXQgYnlQcm9qZWN0cyA9IFtdO1xuICAgIGlmIChmbS5ieV9wcm9qZWN0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBieVByb2plY3RzID0gZm0uYnlfcHJvamVjdHM7XG4gICAgfVxuICAgIHJldHVybiBbbWluUHJpb3JpdHksIGlnbm9yZSwgYnlBcmVhcywgYnlQcm9qZWN0c107XG4gIH1cblxuICByZW5kZXJOYW1lc3BhY2VDb250ZW50KGR2KSB7XG4gICAgY29uc3Qgc2VsZiA9IGR2LmN1cnJlbnQoKTtcbiAgICBjb25zdCBuYW1lID0gc2VsZi5maWxlLm5hbWUudG9Mb3dlckNhc2UoKS5zbGljZSgwLCAtMSk7XG5cbiAgICBkdi5oZWFkZXIoMSwgXCJJbmRleFwiKTtcbiAgICBkdi5oZWFkZXIoMiwgYCR7c2VsZi5maWxlLm5hbWV9YCk7XG5cbiAgICBjb25zdCB0YWdzID0gdGhpcy5nZXROYW1lc3BhY2VDb250ZW50KGR2LCBuYW1lKTtcbiAgICB0YWdzLnNvcnQoKTtcblxuICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAgIGR2LnBhcmFncmFwaChgIyR7bmFtZX0vJHt0YWd9YCk7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyVW5wcm9jZXNzZWRMb2dzKGR2KSB7XG4gICAgY29uc3QgbG9ncyA9IGR2XG4gICAgICAucGFnZXMoYFwiJHt0aGlzLmxvZ0Rpcn1cImApXG4gICAgICAud2hlcmUoXG4gICAgICAgIChwKSA9PlxuICAgICAgICAgIHAudHlwZSA9PT0gdGhpcy5UeXBlLkxPRyAmJlxuICAgICAgICAgIChwLnJldmlld2QgPT09IHVuZGVmaW5lZCB8fCBwLnJldmlld2VkIDwgMSksXG4gICAgICApXG4gICAgICAuc29ydCgoaykgPT4gay5jcmVhdGVkX2F0LCBcImFzY1wiKTtcblxuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcblxuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGxvZ3MuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgIGNvbnN0IGZtID0gZW50cnkuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFyZW50SWQgPSBmbS5wYXJlbnRfaWQ7XG4gICAgICBpZiAocGFyZW50SWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgbG9nIGVudHJ5OiAke2VudHJ5LmZpbGUucGF0aH1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFyZW50ID0gZHYucGFnZXMoYFwiJHt0aGlzLnRhc2tEaXJ9LyR7cGFyZW50SWR9XCJgKTtcbiAgICAgIGNvbnN0IHBhcmVudEZtID0gcGFyZW50LmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBpZiAocGFyZW50Rm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdGFzazogJHtwYXJlbnQuZmlsZS5wYXRofWApO1xuICAgICAgfVxuXG4gICAgICBsZXQgcHJvamVjdCA9IHRoaXMuZ2V0UHJvamVjdChwYXJlbnRGbS50YWdzKTtcbiAgICAgIGlmIChcbiAgICAgICAgcHJvamVjdCA9PT0gYCR7dGhpcy5OYW1lc3BhY2UuUFJPSkVDVH0vJHt0aGlzLkRlZmF1bHQuUFJPSkVDVH1gXG4gICAgICApIHtcbiAgICAgICAgcHJvamVjdCA9IFwiXCI7XG4gICAgICB9XG5cbiAgICAgIGxldCBhcmVhID0gdGhpcy5nZXRBcmVhKHBhcmVudEZtLnRhZ3MpO1xuICAgICAgaWYgKGFyZWEgPT09IGAke3RoaXMuTmFtZXNwYWNlLkFSRUF9LyR7dGhpcy5EZWZhdWx0LkFSRUF9YCkge1xuICAgICAgICBhcmVhID0gXCJcIjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZm9ybWF0ZWQgPSBbXTtcblxuICAgICAgZm9ybWF0ZWQucHVzaChcbiAgICAgICAgZHYuc2VjdGlvbkxpbmsoXG4gICAgICAgICAgZW50cnkuZmlsZS5wYXRoLFxuICAgICAgICAgIFwiQ29udGVudFwiLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIGAke2ZtLnV1aWQuc2xpY2UoMCwgOCl9YCxcbiAgICAgICAgKSxcbiAgICAgICk7XG4gICAgICBjb25zdCBjcmVhdGVkQXQgPSBuZXcgRGF0ZShmbS5jcmVhdGVkX2F0KTtcbiAgICAgIGZvcm1hdGVkLnB1c2goY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApKTtcbiAgICAgIGZvcm1hdGVkLnB1c2gocHJvamVjdCk7XG4gICAgICBmb3JtYXRlZC5wdXNoKGFyZWEpO1xuICAgICAgYXJyLnB1c2goZm9ybWF0ZWQpO1xuICAgIH0pO1xuXG4gICAgZHYudGFibGUoW1widXVpZFwiLCBcImNyZWF0ZWRfYXRcIiwgXCJwcm9qZWN0XCIsIFwiYXJlYVwiXSwgYXJyKTtcbiAgfVxuXG4gIGFzc2VydFRhc2tEb25lQXQoZHYsIHRhc2tJZCkge1xuICAgIGNvbnN0IHRhc2sgPSBkdi5wYWdlcyhgXCIke3RoaXMudGFza0Rpcn0vJHt0YXNrSWR9XCJgKTtcbiAgICBpZiAodGFzay5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdGFzazogJHt0YXNrSWR9IGRvZXN0IG5vdCBleGlzdHNgKTtcbiAgICB9XG5cbiAgICBjb25zdCBmbSA9IHRhc2suZmlsZS5mcm9udG1hdHRlcjtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB0YXNrOiAke3Rhc2tJZH0gZG9lcyBub3QgaGF2ZSBhIGZyb250bWF0dGVyYCk7XG4gICAgfVxuXG4gICAgY29uc3QgbG9ncyA9IGR2XG4gICAgICAucGFnZXMoYFwiJHt0aGlzLmxvZ0Rpcn0vJHt0YXNrSWR9XCJgKVxuICAgICAgLnNvcnQoKGspID0+IGsuY3JlYXRlZF9hdCwgXCJhc2NcIik7XG4gICAgaWYgKGxvZ3MubGVuZ3RoIDwgMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB0YXNrOiAke3Rhc2tJZH0gaGFzIG5vIExvZ3NgKTtcbiAgICB9XG5cbiAgICBjb25zdCBsYXN0RW50cnkgPSBsb2dzW2xvZ3MubGVuZ3RoIC0gMV07XG4gICAgaWYgKGxhc3RFbnRyeS5maWxlLmZyb250bWF0dGVyLmRvbmVfYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgdGFzazogJHt0YXNrSWR9IGxhc3QgZW50cnkgaXMgbWlzc2luZyAnZG9uZV9hdCcgZmllbGRgLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBkb25lQXQgPSBuZXcgRGF0ZShsYXN0RW50cnkuZmlsZS5mcm9udG1hdHRlci5kb25lX2F0KTtcbiAgICByZXR1cm4gW1xuICAgICAgZHYuc2VjdGlvbkxpbmsoXG4gICAgICAgIHRhc2suZmlsZS5wYXRoLFxuICAgICAgICBcIkNvbnRlbnRcIixcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIGAke3Rhc2suZmlsZS5mcm9udG1hdHRlci51dWlkLnNsaWNlKDAsIDgpfWAsXG4gICAgICApLFxuICAgICAgYCR7ZG9uZUF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApfWAsXG4gICAgXTtcbiAgfVxuXG4gIGdldERvbmVUaW1lbGluZShkdikge1xuICAgIC8vIHByZW5kcyBlbiBjb21wdGUgZG9pbmcgLT4gZG9uZSwgcGFzIGxlcyB0YXNrIHN1ciBsZXF1ZWxsZXMgZHUgdHJhdmFpbCBhIFx1MDBFOXRcdTAwRTkgZmFpdCBtYWlzIHF1aSBvbnQgXHUwMEU5dFx1MDBFOSBzdXNwZW5kXG4gICAgLy8gZGFpbHksIHRhc2sgdHJvcCBsb25ndWUgcG91ciBldHJlIGZhaXRlIGVuIHVuIHNpdHRpbmdcbiAgICBjb25zdCB0YXNrcyA9IGR2XG4gICAgICAucGFnZXMoYFwiJHt0aGlzLnRhc2tEaXJ9XCJgKVxuICAgICAgLndoZXJlKChwKSA9PiBwLnN0YXR1cyA9PT0gXCJkb25lXCIpO1xuXG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xuICAgICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHRhc2s6ICR7Zm0udXVpZH0gZG9lcyBub3QgaGF2ZSBhIGZyb250bWF0dGVyYCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxvZ3MgPSBkdlxuICAgICAgICAucGFnZXMoYFwiJHt0aGlzLmxvZ0Rpcn0vJHtmbS51dWlkfVwiYClcbiAgICAgICAgLnNvcnQoKGspID0+IGsuY3JlYXRlZF9hdCwgXCJhc2NcIik7XG4gICAgICBpZiAobG9ncy5sZW5ndGggPCAxKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgdGFzazogJHtmbS51dWlkfSBoYXMgbm8gTG9nc2ApO1xuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoYHRhc2s6ICR7dGFza0lkfSBoYXMgbm8gTG9nc2ApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsYXN0RW50cnkgPSBsb2dzW2xvZ3MubGVuZ3RoIC0gMV07XG4gICAgICBpZiAobGFzdEVudHJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAobGFzdEVudHJ5LmZpbGUuZnJvbnRtYXR0ZXIuZG9uZV9hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgdGFzazogJHtmbS51dWlkfSBsYXN0IGVudHJ5IGlzIG1pc3NpbmcgJ2RvbmVfYXQnIGZpZWxkYCxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgZm0uZG9uZUF0ID0gbmV3IERhdGUobGFzdEVudHJ5LmZpbGUuZnJvbnRtYXR0ZXIuZG9uZV9hdCk7XG4gICAgICBidWZmLnB1c2godGFzayk7XG4gICAgfVxuXG4gICAgYnVmZi5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBjb25zdCBkYXRlQSA9IG5ldyBEYXRlKGEuZmlsZS5mcm9udG1hdHRlci5kb25lQXQpO1xuICAgICAgY29uc3QgZGF0ZUIgPSBuZXcgRGF0ZShiLmZpbGUuZnJvbnRtYXR0ZXIuZG9uZUF0KTtcbiAgICAgIHJldHVybiAoZGF0ZUEuZ2V0VGltZSgpIC0gZGF0ZUIuZ2V0VGltZSgpKSAqIC0xO1xuICAgIH0pO1xuXG4gICAgY29uc3QgYXJyID0gW107XG4gICAgYnVmZi5mb3JFYWNoKChlKSA9PiB7XG4gICAgICBhcnIucHVzaChbXG4gICAgICAgIGR2LnNlY3Rpb25MaW5rKFxuICAgICAgICAgIGUuZmlsZS5wYXRoLFxuICAgICAgICAgIFwiQ29udGVudFwiLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIGAke2UuZmlsZS5mcm9udG1hdHRlci51dWlkLnNsaWNlKDAsIDgpfWAsXG4gICAgICAgICksXG4gICAgICAgIGAke2UuZmlsZS5mcm9udG1hdHRlci5kb25lQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxNil9YCxcbiAgICAgIF0pO1xuICAgIH0pO1xuXG4gICAgZHYudGFibGUoW1widXVpZFwiLCBcImRvbmVBdFwiXSwgYXJyKTtcbiAgfVxuXG4gIGR1cmF0aW9uU3RyaW5nVG9TZWModmFsKSB7XG4gICAgY29uc3QgbXVsdCA9IHZhbC5zbGljZSgtMSk7XG4gICAgbGV0IG0gPSAwO1xuICAgIGlmIChtdWx0ID09PSBcImhcIikge1xuICAgICAgbSA9IDYwICogNjA7XG4gICAgfSBlbHNlIGlmIChtdWx0ID09PSBcIm1cIikge1xuICAgICAgbSA9IDYwO1xuICAgIH0gZWxzZSBpZiAobXVsdCA9PT0gXCJkXCIpIHtcbiAgICAgIG0gPSAyNCAqIDYwICogNjA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybihgVW5oYW5kbGVkIGNhc2UgbXVsdDogJHttdWx0fWApO1xuICAgIH1cblxuICAgIHJldHVybiBtICogcGFyc2VJbnQodmFsLnNsaWNlKDAsIC0xKSk7XG4gIH1cblxuICB0ZXN0RHZGdW5jKCkge1xuICAgIC8vIHByZW5kcyBlbiBjb21wdGUgZG9pbmcgLT4gZG9uZSwgcGFzIGxlcyB0YXNrIHN1ciBsZXF1ZWxsZXMgZHUgdHJhdmFpbCBhIFx1MDBFOXRcdTAwRTkgZmFpdCBtYWlzIHF1aSBvbnQgXHUwMEU5dFx1MDBFOSBzdXNwZW5kXG4gICAgLy8gZGFpbHksIHRhc2sgdHJvcCBsb25ndWUgcG91ciBldHJlIGZhaXRlIGVuIHVuIHNpdHRpbmdcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgZHYgPSBhcHAucGx1Z2lucy5wbHVnaW5zLmRhdGF2aWV3LmFwaTtcbiAgICBjb25zdCB0YXNrcyA9IGR2XG4gICAgICAucGFnZXMoYFwiJHt0aGlzLnRhc2tEaXJ9XCJgKVxuICAgICAgLndoZXJlKChwKSA9PiBwLnN0YXR1cyA9PT0gXCJkb25lXCIpO1xuXG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xuICAgICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHRhc2s6ICR7Zm0udXVpZH0gZG9lcyBub3QgaGF2ZSBhIGZyb250bWF0dGVyYCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxvZ3MgPSBkdlxuICAgICAgICAucGFnZXMoYFwiJHt0aGlzLmxvZ0Rpcn0vJHtmbS51dWlkfVwiYClcbiAgICAgICAgLnNvcnQoKGspID0+IGsuY3JlYXRlZF9hdCwgXCJhc2NcIik7XG4gICAgICBpZiAobG9ncy5sZW5ndGggPCAxKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgdGFzazogJHtmbS51dWlkfSBoYXMgbm8gTG9nc2ApO1xuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoYHRhc2s6ICR7dGFza0lkfSBoYXMgbm8gTG9nc2ApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsYXN0RW50cnkgPSBsb2dzW2xvZ3MubGVuZ3RoIC0gMV07XG4gICAgICBpZiAobGFzdEVudHJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAobGFzdEVudHJ5LmZpbGUuZnJvbnRtYXR0ZXIuZG9uZV9hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgdGFzazogJHtmbS51dWlkfSBsYXN0IGVudHJ5IGlzIG1pc3NpbmcgJ2RvbmVfYXQnIGZpZWxkYCxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgZm0uZG9uZUF0ID0gbmV3IERhdGUobGFzdEVudHJ5LmZpbGUuZnJvbnRtYXR0ZXIuZG9uZV9hdCk7XG4gICAgICBidWZmLnB1c2godGFzayk7XG4gICAgfVxuXG4gICAgYnVmZi5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBjb25zdCBkYXRlQSA9IG5ldyBEYXRlKGEuZmlsZS5mcm9udG1hdHRlci5kb25lQXQpO1xuICAgICAgY29uc3QgZGF0ZUIgPSBuZXcgRGF0ZShiLmZpbGUuZnJvbnRtYXR0ZXIuZG9uZUF0KTtcbiAgICAgIHJldHVybiAoZGF0ZUEuZ2V0VGltZSgpIC0gZGF0ZUIuZ2V0VGltZSgpKSAqIC0xO1xuICAgIH0pO1xuXG4gICAgY29uc3QgYXJyID0gW107XG4gICAgYnVmZi5mb3JFYWNoKChlKSA9PiB7XG4gICAgICBhcnIucHVzaChbXG4gICAgICAgIGR2LnNlY3Rpb25MaW5rKFxuICAgICAgICAgIGUuZmlsZS5wYXRoLFxuICAgICAgICAgIFwiQ29udGVudFwiLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIGAke2UuZmlsZS5mcm9udG1hdHRlci51dWlkLnNsaWNlKDAsIDgpfWAsXG4gICAgICAgICksXG4gICAgICAgIGAke2UuZmlsZS5mcm9udG1hdHRlci5kb25lQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxNil9YCxcbiAgICAgIF0pO1xuICAgIH0pO1xuXG4gICAgLy8gZHYudGFibGUoW1widXVpZFwiLCBcImRvbmVBdFwiXSwgYXJyKTtcbiAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0Esc0JBWU87OztBQ2JBLElBQU0sUUFBUTtBQUFBLEVBQ3BCLE9BQU87QUFBQSxFQUNQLFlBQVk7QUFBQSxFQUNaLE9BQU87QUFBQSxFQUNQLFNBQVM7QUFBQSxFQUNULE9BQU87QUFBQSxFQUNQLE1BQU07QUFBQSxFQUNOLFVBQVU7QUFBQSxFQUNWLE1BQU07QUFBQSxFQUNOLGFBQWE7QUFBQSxFQUNiLFNBQVM7QUFBQSxFQUNULFdBQVc7QUFBQSxFQUNYLFVBQVU7QUFBQSxFQUNWLFNBQVM7QUFBQSxFQUNULE9BQU87QUFDUjtBQUVPLElBQU0sU0FBUztBQUFBLEVBQ3JCLE1BQU07QUFBQSxFQUNOLE9BQU87QUFBQSxFQUNQLE1BQU07QUFBQSxFQUNOLE9BQU87QUFBQSxFQUNQLFNBQVM7QUFBQSxFQUNULE9BQU87QUFDUjtBQUNPLElBQU0sYUFBYTtBQUFBLEVBQ3pCLFNBQVM7QUFBQSxFQUNULFVBQVU7QUFBQSxFQUNWLGdCQUFnQjtBQUFBLEVBQ2hCLFNBQVM7QUFBQSxFQUNULFdBQVc7QUFBQSxFQUNYLFFBQVE7QUFBQSxFQUNSLFFBQVE7QUFBQSxFQUNSLFNBQVM7QUFDVjtBQUVPLElBQU0sUUFBUTtBQUFBLEVBQ3BCLFVBQVU7QUFBQSxFQUNWLFlBQVk7QUFBQSxFQUNaLFdBQVc7QUFBQSxFQUNYLE1BQU07QUFBQSxFQUNOLFFBQVE7QUFBQSxFQUNSLFdBQVc7QUFBQSxFQUNYLEtBQUs7QUFBQSxFQUNMLFVBQVU7QUFBQSxFQUNWLE9BQU87QUFBQSxF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
