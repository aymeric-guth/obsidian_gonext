/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// constants.ts
var Paths = {
  Tasks: "Actions",
  Components: "Components",
  Goals: "Goals",
  Slipbox: "Notes",
  Inbox: "800 Inbox",
  Refs: "802 Refs",
  Archives: "400 Archives",
  Logs: "600 Log",
  Attachments: "000 Attachments",
  Journal: "Journal",
  Resources: "Resources",
  Projects: "100 Projects",
  Domains: "Domains",
  Names: "Names"
};
var Status = {
  Todo: "todo",
  Doing: "doing",
  Done: "done",
  Maybe: "maybe",
  Standby: "standby",
  Trash: "trash"
};
var GoalStatus = {
  Reframe: "reframe",
  Research: "research",
  Operationalize: "operationalize",
  Planify: "planify",
  Dependant: "dependant",
  Active: "active",
  Failed: "failed",
  Success: "success"
};
var Types = {
  Fleeting: 13,
  Literature: 1,
  Permanent: 2,
  Task: 3,
  Praxis: 4,
  Provision: 5,
  Log: 6,
  Resource: 7,
  Media: 8,
  Project: 12,
  Org: 9,
  Domain: 10,
  Component: 11
};
var Namespace = {
  Area: "area",
  Context: "context",
  Layer: "layer",
  Org: "org",
  Project: "project"
};
var Default = {
  Area: "none",
  Context: "any",
  Layer: "none",
  Org: "none",
  Project: "none"
};

// node_modules/uuid/dist/esm-browser/stringify.js
var byteToHex = [];
for (i = 0; i < 256; ++i) {
  byteToHex.push((i + 256).toString(16).slice(1));
}
var i;
function unsafeStringify(arr, offset = 0) {
  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + "-" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + "-" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + "-" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + "-" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
}

// node_modules/uuid/dist/esm-browser/rng.js
var getRandomValues;
var rnds8 = new Uint8Array(16);
function rng() {
  if (!getRandomValues) {
    getRandomValues = typeof crypto !== "undefined" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);
    if (!getRandomValues) {
      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    }
  }
  return getRandomValues(rnds8);
}

// node_modules/uuid/dist/esm-browser/native.js
var randomUUID = typeof crypto !== "undefined" && crypto.randomUUID && crypto.randomUUID.bind(crypto);
var native_default = {
  randomUUID
};

// node_modules/uuid/dist/esm-browser/v4.js
function v4(options, buf, offset) {
  if (native_default.randomUUID && !buf && !options) {
    return native_default.randomUUID();
  }
  options = options || {};
  var rnds = options.random || (options.rng || rng)();
  rnds[6] = rnds[6] & 15 | 64;
  rnds[8] = rnds[8] & 63 | 128;
  if (buf) {
    offset = offset || 0;
    for (var i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }
    return buf;
  }
  return unsafeStringify(rnds);
}
var v4_default = v4;

// api.ts
var FrontmatterJS = class {
  singular(values, field) {
    if (!Helper.nilCheck(this.fm[field])) {
      const value = this.fm[field];
      if (typeof value === "string") {
        if (!values.contains(value)) {
          values.push(value);
        }
      } else {
        console.warn(
          `'${field}' is ignored, invalid data-type: '${typeof this.fm[field]}'`
        );
      }
    }
  }
  plural(values, field) {
    if (!Helper.nilCheck(this.fm[field])) {
      if (!Array.isArray(this.fm[field])) {
        console.warn(
          `'${field}' is ignored, invalid data-type: '${field}'`
        );
      } else {
        for (const value of this.fm[field]) {
          if (typeof value === "string") {
            if (!values.contains(value)) {
              values.push(value);
            }
          } else {
            console.warn(
              `'${value}s.${value}' is ignored, invalid data-type: '${typeof value}'`
            );
          }
        }
      }
    }
  }
  constructor(page) {
    Assert.True(page !== void 0, "'page' is undefined");
    this.f = page.file;
    const f = this.f;
    Assert.True(f !== void 0, "'f' is undefined");
    this.fm = f.frontmatter;
    Assert.True(this.fm !== void 0, "'fm' is undefined");
    Assert.True(
      this.fm.uuid !== void 0,
      `'uuid' is undefined for '${this.f.path}'`
    );
    this.uuid = this.fm.uuid;
    this.version = this.fm.version;
    this.type = this.fm.type;
    this.createdAt = new Date(this.fm.created_at);
    this.at = this.fm.at !== void 0 ? new Date(this.fm.at) : new Date();
    this.before = this.fm.before !== void 0 ? new Date(this.fm.before) : new Date();
    this.after = this.fm.after !== void 0 ? new Date(this.fm.after) : new Date();
    this.components = [];
    this.domains = [];
    this.projects = [];
    this.contexts = [];
    this.traits = [];
    this.energy = this.fm.energy !== void 0 ? this.fm.energy : 9;
    const domains = [];
    const components = [];
    const projects = [];
    const names = [];
    const contexts = [];
    const contents = [];
    const traits = [];
    if (!Helper.nilCheck(this.fm.tags)) {
      if (!Array.isArray(this.fm.tags)) {
        console.warn("'tags' is ignored, invalid data-type");
        this.fm.tags = [];
      }
      for (const tag of this.fm.tags) {
        if (tag.slice(0, 7) === "domain/") {
          domains.push(tag.slice(7));
        } else if (tag.slice(0, 10) === "component/") {
          components.push(tag.slice(10));
        } else if (tag.slice(0, 8) === "project/") {
          projects.push(tag.slice(8));
        } else if (tag.slice(0, 5) === "name/") {
          names.push(tag.slice(5));
        } else if (tag.slice(0, 8) == "context/") {
          contexts.push(tag.slice(8));
        } else if (tag.slice(0, 8) == "content/") {
          contents.push(tag.slice(8));
        } else if (tag.slice(0, 6) == "trait/") {
          traits.push(tag.slice(6));
        }
      }
    }
    this.singular(domains, "domain");
    this.plural(domains, "domains");
    this.singular(components, "components");
    this.plural(components, "components");
    this.singular(projects, "project");
    this.plural(projects, "projects");
    this.singular(contents, "contents");
    this.plural(contents, "contents");
    this.singular(names, "name");
    this.plural(names, "names");
    this.plural(names, "alias");
    this.singular(traits, "trait");
    this.plural(traits, "traits");
    this.domains = domains;
    this.components = components;
    this.projects = projects;
    this.names = names;
    this.contexts = contexts;
    this.contents = contents;
    this.traits = traits;
  }
  getDomain(emptyDefault = true) {
    if (emptyDefault) {
      return this.domains[0];
    } else {
      return this.domains[0] === void 0 ? "unknown" : this.domains[0];
    }
  }
  getDomains() {
    return this.domains;
  }
  getTraits() {
    return this.traits;
  }
  getComponents() {
    return this.components;
  }
  getProject(emptyDefault = true) {
    if (emptyDefault) {
      return this.projects[0];
    } else {
      return this.projects[0] === void 0 ? "" : this.projects[0];
    }
  }
  getProjects() {
    return this.projects;
  }
  getName(emptyDefault = true) {
    if (emptyDefault) {
      return this.names[0];
    } else {
      return this.names[0] === void 0 ? "" : this.names[0];
    }
  }
  getContent(emptyDefault = true) {
    if (emptyDefault) {
      return this.contents[0];
    } else {
      return this.contents[0] === void 0 ? "" : this.contents[0];
    }
  }
  getNames() {
    return this.names;
  }
  getContext(emptyDefault = true) {
    if (emptyDefault) {
      return this.contexts[0];
    } else {
      return this.contexts[0] === void 0 ? "" : this.contexts[0];
    }
  }
  resolve(dv) {
    const domains = [];
    for (const domain of this.domains) {
      if (Helper.isUUID(domain)) {
        const pages = dv.pages(`"${Paths.Domains}"`).where((page) => page.file.frontmatter.uuid === domain);
        if (pages.length > 1) {
          throw new Error();
        } else if (pages.length === 1) {
          const page = pages[0];
          domains.push(page.file.frontmatter.name);
        }
      } else {
        const pages = dv.pages(`"${Paths.Domains}"`).where((page) => page.file.frontmatter.name === domain);
        if (pages.length > 1) {
          throw new Error();
        } else if (pages.length === 1) {
          const page = pages[0];
          domains.push(page.file.frontmatter.name);
        }
      }
    }
    if (domains.length !== this.domains.length) {
      console.warn(`Domain resolution failed for: ${this.domains}`);
    }
    this.domains = domains;
  }
};
var ValidationError = class extends Error {
  constructor(message) {
    super(message);
    this.name = "ValidationError";
  }
};
var Assert = {
  True(predicate, message, strict = true) {
    if (!predicate) {
      if (strict) {
        throw new ValidationError(message);
      } else {
        console.error(message);
      }
    }
  },
  False(predicate, message, strict = false) {
    if (predicate) {
      if (strict) {
        throw new ValidationError(message);
      } else {
        console.error(message);
      }
    }
  }
};
var Helper = {
  nilCheck(val) {
    return val === void 0 || val === null;
  },
  getKeyFuck(groupBy) {
    switch (groupBy) {
      default:
      case "doneAt":
        return (entry) => entry.file.frontmatter.doneAt.toISOString().slice(0, 10);
        break;
      case "createdAt":
        return (entry) => entry.file.frontmatter.createdAt.toISOString().slice(0, 10);
        break;
      case "project":
        return (entry) => entry.file.frontmatter.project;
        break;
      case "area":
        return (entry) => entry.file.frontmatter.area;
        break;
    }
  },
  getKey(groupBy) {
    switch (groupBy) {
      default:
      case "doneAt":
        return (entry) => entry.doneAt.toISOString().slice(0, 10);
        break;
      case "createdAt":
        return (entry) => entry.createdAt.toISOString().slice(0, 10);
        break;
      case "project":
        return (entry) => entry.project;
        break;
      case "area":
        return (entry) => entry.area;
        break;
    }
  },
  numberTypeToString(val) {
    switch (val.type) {
      case Types.Fleeting:
        return "fleeting";
      case Types.Log:
        return "log";
      case Types.Project:
        return "project";
      case Types.Org:
        return "org";
      case Types.Domain:
        return "domain";
      case Types.Component:
        return "component";
      default:
        throw new Error(
          `numberTypeToString: type: "${val.type}" not implemented "${val.uuid}"`
        );
    }
  },
  roundToOneDecimal(val) {
    return Math.round(val * 10) / 10;
  },
  isChildTag(parent, child) {
    if (child.length <= parent.length + 1) {
      return false;
    } else if (child.slice(0, parent.length + 1) != `${parent}/`) {
      return false;
    }
    return true;
  },
  getField(field, defaultValue) {
    if (field === void 0 || field === null) {
      return defaultValue;
    } else {
      return field;
    }
  },
  getDate(dt) {
    if (dt === "" || dt === null) {
      return void 0;
    } else if (dt !== void 0) {
      dt = new Date(dt);
      if (isNaN(dt)) {
        return void 0;
      } else {
        return dt;
      }
    } else {
      return void 0;
    }
  },
  getTag(fm, type, emptyDefault = void 0) {
    let name = "";
    let defaultValue = "";
    if (type === "area") {
      name = Namespace.Area;
      defaultValue = Default.Area;
    } else if (type === "context") {
      name = Namespace.Context;
      defaultValue = Default.Context;
    } else if (type === "layer") {
      name = Namespace.Layer;
      defaultValue = Default.Layer;
    } else if (type === "org") {
      name = Namespace.Org;
      defaultValue = Default.Org;
    } else if (type === "project") {
      name = Namespace.Project;
      defaultValue = Default.Project;
    } else if (type == "domain") {
      name = "domain";
      defaultValue = "none";
    } else {
      throw new Error(`getTag got unsuported type: '${type}'`);
    }
    const len = name.length + 1;
    const defaultTag = `${name}/${defaultValue}`;
    let defaultRetVal = defaultTag;
    if (emptyDefault) {
      defaultRetVal = void 0;
    }
    if (fm === void 0) {
      return defaultRetVal;
    }
    const tags = fm.tags;
    if (tags === void 0 || tags.length === 0) {
      return defaultRetVal;
    }
    for (const tag of tags) {
      if (tag == defaultTag) {
        return defaultRetVal;
      }
      if (tag.length > len && tag.slice(0, len) == `${name}/`) {
        return tag;
      }
    }
    return defaultRetVal;
  },
  getName(fm) {
    const components = Helper.getComponents(fm);
    if (components.length < 1) {
      throw new Error(`Helper.getName() ${fm}`);
    }
    let name = void 0;
    let occurences = 0;
    for (const component of components) {
      if (component.slice(0, 15) === "component/name/") {
        name = component.slice(15);
        occurences += 1;
      }
    }
    if (occurences > 1) {
      throw new Error(
        `Helper.getName() ${fm} multiple occurences of 'component/name'`
      );
    }
    if (name === void 0) {
      throw new Error(
        `Helper.getName() ${fm} 'component/name' undefined`
      );
    }
    return name;
  },
  getComponents(fm) {
    const components = [];
    if (Helper.nilCheck(fm.tags)) {
      return [];
    }
    for (const tag of fm.tags) {
      if (tag.length > 10 && tag.slice(0, 10) === "component/") {
        components.push(tag);
      }
    }
    return components;
  },
  getArea(fm, emptyDefault = false) {
    return Helper.getTag(fm, "area", emptyDefault);
  },
  getContext(fm, emptyDefault = false) {
    return Helper.getTag(fm, "context", emptyDefault);
  },
  getDomain(fm, emptyDefault = false) {
    return Helper.getTag(fm, "domain", emptyDefault);
  },
  getLayer(fm, emptyDefault = false) {
    return Helper.getTag(fm, "layer", emptyDefault);
  },
  getOrg(fm, emptyDefault = false) {
    return Helper.getTag(fm, "org", emptyDefault);
  },
  getProject(fm, emptyDefault = false) {
    return Helper.getTag(fm, "project", emptyDefault);
  },
  durationStringToSec(val) {
    if (val === void 0 || val.length === 0) {
      return 0;
    }
    const mult = val.slice(-1);
    let m = 0;
    if (mult === "h") {
      m = 60 * 60;
    } else if (mult === "m") {
      m = 60;
    } else if (mult === "d") {
      m = 24 * 60 * 60;
    } else if (mult == "w") {
      m = 24 * 60 * 60 * 7;
    } else {
      console.warn(`Unhandled case val: ${val}`);
      return void 0;
    }
    return m * parseInt(val.slice(0, -1));
  },
  msecToStringDuration(val) {
    const oneHourInMsec = 36e5;
    const oneDayInMsec = 864e5;
    if (val >= 24 * oneHourInMsec) {
      return String(Helper.roundToOneDecimal(val / oneDayInMsec)).padStart(
        2,
        "0"
      ) + " d";
    } else {
      return String(Helper.roundToOneDecimal(val / oneHourInMsec)).padStart(
        2,
        "0"
      ) + " h";
    }
  },
  isUUID(val) {
    if (typeof val !== "string") {
      return false;
    }
    return val.length === 36;
  },
  sortByAge(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    return fmA.createdAt.getTime() - fmB.createdAt.getTime();
  },
  sortByPriority(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    return fmB.fm.priority - fmA.fm.priority;
  },
  sortByPriorityAndAge(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    if (fmA.fm.priority !== fmB.fm.priority.priority) {
      return Helper.sortByPriority(a, b);
    } else {
      return Helper.sortByAge(a, b);
    }
  },
  sortByDuration(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    return Helper.durationStringToSec(fmA.fm.time_estimate) - Helper.durationStringToSec(fmB.fm.time_estimate);
  },
  sortByPriorityAndDuration(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    if (fmA.fm.priority !== fmB.fm.priority) {
      return Helper.sortByPriority(a, b);
    } else {
      return Helper.sortByDuration(a, b);
    }
  },
  sortByPriorityAndDurationAndAge(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    if (fmA.fm.priority !== fmB.fm.priority) {
      return Helper.sortByPriority(a, b);
    } else if (fmA.fm.time_estimate !== fmB.fm.time_estimate) {
      return Helper.sortByDuration(a, b);
    } else {
      return Helper.sortByAge(a, b);
    }
  }
};
var AutoField = {
  tags(dv, fm, level = 2) {
    const tags = fm.tags;
    if (tags == void 0 || tags.length === 0) {
      return;
    }
    tags.sort();
    dv.header(level, "Tags");
    let s = "";
    for (const tag of tags) {
      s += ` #${tag}`;
    }
    dv.paragraph(s);
  },
  healmon(dv) {
    const fm = new FrontmatterJS(dv.current());
    const current = fm.createdAt.toISOString().slice(0, 10);
    const pages = dv.pages(`"${Paths.Journal}"`).where((page) => {
      const jFm = new FrontmatterJS(page);
      if (jFm.getProject() !== "homecook") {
        return false;
      }
      let jCurrent = null;
      const currentMinusOne = new Date(
        fm.createdAt.getTime() - 24 * 60 * 60 * 1e3
      );
      try {
        jCurrent = jFm.createdAt.toISOString().slice(0, 10);
      } catch (e) {
        dv.paragraph(
          `Invalid date: ${Renderer.makeLinkShortUUID(dv, page.file)}`
        );
        console.error(jFm);
      }
      if (currentMinusOne.toISOString().slice(0, 10) !== jCurrent) {
        return false;
      }
      return true;
    });
    dv.header(4, "repas (veille)");
    if (pages.length) {
      for (const page of pages) {
        dv.paragraph(Renderer.makeLinkShortUUID(dv, page.file));
      }
    }
  },
  authors(dv, fm) {
    const authors = fm.authors;
    if (authors === void 0 || authors.length === 0) {
      return;
    }
    dv.header(3, "Authors");
    dv.list(authors);
  },
  title(dv, fm) {
    const title = fm.alias;
    if (title === void 0 || title.length === 0) {
      return;
    }
    dv.header(3, title);
  },
  logs(dv, entries) {
    console.log("coucou, tu veux voir ma bite?");
    const buff = [];
    let totalTime = 0;
    for (const entry of entries) {
      const fme = entry.file.frontmatter;
      const e = [];
      let start = 0;
      let stop = 0;
      if (fme === void 0 || fme.created_at === void 0) {
        throw new Error(`Invalid frontmatter: ${fme.uuid}`);
      }
      start = new Date(fme.created_at);
      e.push(start.toISOString().slice(0, 10));
      if (fme.done_at === void 0) {
        stop = Date.now();
      } else {
        stop = new Date(fme.done_at);
      }
      totalTime += stop - start;
      e.push(
        dv.sectionLink(
          fme.uuid,
          "## Content",
          false,
          fme.uuid.slice(0, 8)
        )
      );
      e.push(Math.round((stop - start) / (1e3 * 60 * 60) * 10) / 10);
      if (fme.reviewed === void 0 || fme.reviewed === 0) {
        e.push(0);
      } else {
        e.push(fme.reviewed);
      }
      buff.push(e);
    }
    if (buff.length > 0) {
      dv.header(2, "Logs");
      dv.table(["created_at", "uuid", "session", "reviewed"], buff);
      if (totalTime > 0) {
        dv.paragraph(
          `_totalTime (h):_ ${Math.round(totalTime / (1e3 * 60 * 60) * 10) / 10}`
        );
      }
    }
  },
  media(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    const pages = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
    if (pages.length !== 1) {
      return;
    }
    const media = pages[0];
    const mediaFm = media.file.frontmatter;
    AutoField.title(dv, mediaFm);
    dv.paragraph(Renderer.makeLinkAlias(dv, media.file));
    AutoField.authors(dv, mediaFm);
    AutoField.tags(dv, mediaFm, 3);
    const logEntries = dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((p) => p.type === 6).sort((k) => k.created_at, "desc");
    AutoField.logs(dv, logEntries);
  },
  autoFieldTitle(dv, fm) {
    const title = fm.alias;
    if (title == void 0) {
      return;
    }
    dv.header(1, title);
  },
  autoFieldAuthors(dv, fm) {
    const authors = fm.authors;
    if (authors === void 0 || authors.length === 0) {
      return;
    }
    dv.header(2, "Authors");
    dv.list(authors);
  },
  autoFieldTags(dv, fm) {
    const tags = fm.tags;
    if (tags == void 0 || tags.length === 0) {
      return;
    }
    tags.sort();
    dv.header(2, "Tags");
    let s = "";
    for (const tag of tags) {
      s += ` #${tag}`;
    }
    dv.paragraph(s);
  },
  literature(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      return;
    }
    if (Helper.nilCheck(fm.authors)) {
    } else {
      this.autoFieldTitle(dv, fm);
      this.autoFieldAuthors(dv, fm);
      this.autoFieldTags(dv, fm);
    }
  },
  goal(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      console.warn("fm is required");
      return;
    }
    const created_at = new Date(fm.created_at);
    const logEntries = dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((p) => p.type === 6).sort((k) => k.created_at, "desc");
    const buff = [];
    for (const entry of logEntries) {
      const fme = entry.file.frontmatter;
      const e = [];
      if (fme === void 0 || fme.created_at === void 0) {
        throw new Error(`Invalid frontmatter: ${fme.uuid}`);
      }
      const start = new Date(fme.created_at);
      e.push(start.toISOString().slice(0, 10));
      e.push(
        dv.sectionLink(
          fme.uuid,
          "## Content",
          false,
          fme.uuid.slice(0, 8)
        )
      );
      buff.push(e);
    }
    const before = new Date(fm.before);
    const timeframe = (before.getTime() - created_at.getTime()) / (1e3 * 3600 * 24);
    let timeframeText = "";
    dv.header(3, "Timeframe");
    if (timeframe > 0 && timeframe < 30) {
      timeframeText = "runaway";
    } else if (timeframe < 60) {
      timeframeText = "10,000 feet";
    } else if (timeframe < 360) {
      timeframeText = "20,000 feet";
    } else if (timeframe < 720) {
      timeframeText = "30,000 feet";
    } else if (timeframe < 1080) {
      timeframeText = "40,000 feet";
    } else {
      timeframeText = "50,000 feet";
    }
    dv.paragraph(timeframeText);
    if (buff.length > 0) {
      dv.header(2, "Reviews");
      dv.table(["reviewed_at", "uuid"], buff);
    }
  },
  daily(dv) {
    const current = dv.current().file.frontmatter;
    const currentAt = new Date(current.at);
    const currentAtShort = currentAt.toISOString().slice(0, 7);
    const gonext = app.plugins.plugins.obsidian_gonext;
    const noteHelper = new NoteHelper(gonext, dv, new Frontmatter(gonext));
    const pages = dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (current.uuid === fm.uuid) {
        return false;
      }
      if (fm.fm.status !== "todo" || fm.getProject() === "daily") {
        return false;
      }
      const now = currentAt;
      let fmAtShort = void 0;
      try {
        fmAtShort = fm.at.toISOString().slice(0, 10);
      } catch (e) {
        throw new Error(`${fm.uuid}`);
      }
      if (!noteHelper.isDoable(page, currentAt)) {
        return false;
      }
      if (page.file.frontmatter.at !== void 0 && fmAtShort === currentAtShort) {
        return true;
      }
      if (page.file.frontmatter.at !== void 0 && fm.at.getTime() < now.getTime()) {
        return true;
      }
      if (page.file.frontmatter.before !== void 0 && fm.before.getTime() > now.getTime()) {
        return true;
      }
      if (page.file.frontmatter.after !== void 0 && fm.after.getTime() < now.getTime()) {
        return true;
      }
      return false;
    }).sort((k) => k.at, "asc");
    if (pages.length > 0) {
      const buff = [];
      for (const page of pages) {
        const fm = new FrontmatterJS(page);
        const h = String(fm.at.getHours()).padStart(2, "0");
        const m = String(fm.at.getMinutes()).padStart(2, "0");
        if (page.file.frontmatter.status === "done") {
          buff.push([
            `~~${Renderer.makeLinkShortUUID(dv, page.file, "Task")}~~`,
            `~~${h}:${m}~~`
          ]);
        } else {
          buff.push([
            `${Renderer.makeLinkShortUUID(dv, page.file, "Task")}`,
            `${h}:${m}`
          ]);
        }
      }
      dv.table(["uuid", "at"], buff);
    }
    AutoField.dailyJoural(dv);
  },
  monthlyJoural(dv) {
    const current = new FrontmatterJS(dv.current());
    const currentAtShort = current.at.toISOString().slice(0, 7);
    const pages = dv.pages(`"Journal"`).where((page) => {
      const fm = new FrontmatterJS(page);
      const atShort = fm.createdAt.toISOString().slice(0, 7);
      if (atShort === currentAtShort && fm.getProject() === "monthly") {
        return true;
      }
      return false;
    }).sort((k) => k.created_at, "asc");
    dv.header(2, "Journal");
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      if (page.file.frontmatter.alias !== void 0) {
        page.file.frontmatter.name = page.file.frontmatter.alias;
      } else if (fm.getProject() !== void 0) {
        page.file.frontmatter.name = fm.getProject();
      } else if (fm.getDomain() !== void 0) {
        page.file.frontmatter.name = fm.getDomain();
      }
      dv.paragraph(Renderer.makeLinkName(dv, page.file));
    }
  },
  dailyJoural(dv) {
    const current = new FrontmatterJS(dv.current());
    const currentAtShort = current.at.toISOString().slice(0, 10);
    console.log(currentAtShort);
    const pages = dv.pages(`"Journal"`).where((page) => {
      const fm = new FrontmatterJS(page);
      const atShort = fm.createdAt.toISOString().slice(0, 10);
      if (atShort === currentAtShort) {
        return true;
      }
      return false;
    }).sort((k) => k.created_at, "asc");
    dv.header(2, "Journal");
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      if (page.file.frontmatter.alias !== void 0) {
        page.file.frontmatter.name = page.file.frontmatter.alias;
      } else if (fm.getProject() !== void 0) {
        page.file.frontmatter.name = fm.getProject();
      } else if (fm.getDomain() !== void 0) {
        page.file.frontmatter.name = fm.getDomain();
      }
      dv.paragraph(Renderer.makeLinkName(dv, page.file));
    }
  },
  dailyGoals(dv) {
    const current = dv.current().file.frontmatter;
    const currentAt = new Date(current.at);
    const pages = dv.pages(`"${Paths.Goals}"`).where((page) => {
      if (page.file.frontmatter.status !== "active") {
        return false;
      } else {
        return true;
      }
    }).sort((k) => k.at, "asc");
    if (pages.length === 0) {
      return;
    }
    for (const page of pages) {
      dv.paragraph(Renderer.makeLinkShortUUID(dv, page.file));
    }
  },
  task(dv) {
    const dvLib = new DvLib();
    dvLib.autoFieldTask(dv);
  },
  log(dv) {
    const current = dv.current();
    const curFm = new FrontmatterJS(current);
    const currentId = curFm.uuid;
    const currentParentId = current.file.path.split("/")[1];
    Assert.True(
      currentParentId !== void 0,
      `currentParentId undefined for ${curFm.uuid}`
    );
    const pages = dv.pages(`"${Paths.Logs}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      const parentId = page.file.path.split("/")[1];
      Assert.True(
        parentId !== void 0,
        `parentId undefined for ${fm.uuid}`
      );
      if (parentId !== currentParentId) {
        return false;
      }
      return true;
    }).sort((k) => k.created_at, "asc");
    for (let i = 0; i < pages.length; i++) {
      const page = pages[i];
      Assert.True(page !== void 0, "ass ert failed");
      const fm = new FrontmatterJS(page);
      if (fm.uuid === currentId) {
        if (i === 0) {
          const dvLib = new DvLib();
          dvLib.autoFieldLog(dv);
        } else {
          dv.paragraph(
            Renderer.makeLinkShortUUID(dv, pages[i - 1].file)
          );
        }
      }
    }
  }
};
var Renderer = {
  makeLinkName(dv, f, anchor = "Content") {
    if (Helper.nilCheck(f.frontmatter.name)) {
      return Renderer.makeLinkShortUUID(dv, f, anchor);
    }
    return dv.sectionLink(f.path, anchor, false, `${f.frontmatter.name}`);
  },
  makeLinkAlias(dv, f, anchor = "Content") {
    if (Helper.nilCheck(f.frontmatter.alias)) {
      return Renderer.makeLinkShortUUID(dv, f, anchor);
    }
    return dv.sectionLink(f.path, anchor, false, `${f.frontmatter.alias}`);
  },
  makeLinkShortUUID(dv, f, anchor = "Content") {
    return dv.sectionLink(
      f.path,
      anchor,
      false,
      `${f.frontmatter.uuid.slice(0, 8)}`
    );
  },
  makeLink(dv, f, name = void 0, anchor = "Content") {
    return dv.sectionLink(f.path, anchor, false, name);
  },
  projectLogs(dv, data) {
    const cols = ["type", "task_id", "log_id", "took", "reviewed"];
    const buff = [];
    let totalTime = 0;
    for (const d of data) {
      const f = d.file;
      const fm = d.file.frontmatter;
      Assert.True(
        !Helper.nilCheck(fm.uuid),
        `"uuid" id not defined for: ${f.path}`
      );
      Assert.True(
        !Helper.nilCheck(fm.type),
        `"type" id not defined for: ${f.path}`
      );
      const createdAt = new Date(fm.created_at);
      const doneAt = new Date(fm.done_at);
      const delta = doneAt.getTime() - createdAt.getTime();
      totalTime += delta;
      const record = {
        taskId: "",
        logId: Renderer.makeLinkAlias(dv, f),
        took: Math.round(delta / (1e3 * 60 * 60) * 10) / 10,
        reviewed: Helper.nilCheck(fm.reviewed) ? 0 : fm.reviewed,
        type: void 0
      };
      const pages = dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
      if (pages.length !== 1) {
        throw new Error(
          `parent task with id: "${fm.parent_id}" does not exists`
        );
      }
      const parent = pages[0];
      switch (parent.file.frontmatter.type) {
        case Types.Task:
          record.type = `<font color=8B0000>task</font>`;
          record.taskId = Renderer.makeLinkShortUUID(
            dv,
            parent.file,
            "Task"
          );
          break;
        case Types.Media:
          record.type = `<font color=00008B>media</font>`;
          record.taskId = Renderer.makeLinkShortUUID(
            dv,
            parent.file,
            "Content"
          );
          break;
        case Types.Praxis:
          record.type = `<font color=FF8C00>praxis</font>`;
          record.taskId = Renderer.makeLinkShortUUID(
            dv,
            parent.file,
            "Content"
          );
          break;
        case Types.Provision:
          record.type = `<font color=DC143C>provision</font>`;
          record.taskId = Renderer.makeLinkShortUUID(
            dv,
            parent.file,
            "Content"
          );
          break;
        default:
          throw new Error(
            `Renderer.projectLogs: type "${parent.file.frontmatter.type}" not implemented`
          );
      }
      buff.push([
        record.type,
        record.taskId,
        record.logId,
        record.took,
        record.reviewed
      ]);
    }
    dv.table(cols, buff);
  },
  goal(dv, data) {
    const buff = [];
    for (const fm of data) {
      const created_at = fm.createdAt;
      const logEntries = dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((p) => p.type === 6).sort((k) => k.created_at, "desc");
      const before = new Date(fm.fm.before);
      const timeframe = (before.getTime() - created_at.getTime()) / (1e3 * 3600 * 24);
      let timeframeText = "";
      if (timeframe > 0 && timeframe < 30) {
        timeframeText = "runaway";
      } else if (timeframe < 60) {
        timeframeText = "10,000 feet";
      } else if (timeframe < 360) {
        timeframeText = "20,000 feet";
      } else if (timeframe < 720) {
        timeframeText = "30,000 feet";
      } else if (timeframe < 1080) {
        timeframeText = "40,000 feet";
      } else {
        timeframeText = "50,000 feet";
      }
      buff.push([
        before.toISOString().slice(0, 10),
        dv.sectionLink(
          fm.uuid,
          "## Content",
          false,
          fm.uuid.slice(0, 8)
        ),
        fm.getDomain(),
        timeframeText
      ]);
    }
    dv.table(["deadline", "uuid", "domain", "timeframe"], buff);
  },
  inboxEntry(dv, data) {
    const cols = [
      "uuid",
      // "type",
      // "age",
      // "size",
      "name"
      // "project",
      // "domain",
      // "components",
    ];
    const buff = [];
    for (const d of data) {
      const f = d.file;
      const fm = d.file.frontmatter;
      Assert.True(
        !Helper.nilCheck(fm.uuid),
        `"uuid" id not defined for: ${f.path}`
      );
      Assert.True(
        !Helper.nilCheck(fm.type),
        `"type" id not defined for: ${f.path}`
      );
      const now = new Date();
      const delta = now.getTime() - fm.createdAt.getTime();
      const since = Helper.msecToStringDuration(delta);
      let name = "";
      if (fm.domain !== "domain/undefined") {
        name = fm.domain;
      } else if (fm.project !== void 0) {
        name = fm.project;
      } else {
        name = "\\-";
      }
      const record = {
        uuid: Helper.numberTypeToString(fm) === "fleeting" ? `&#128196 ${Renderer.makeLinkAlias(dv, f)}` : Renderer.makeLinkAlias(dv, f),
        // uuid: `&#9728 ${Renderer.makeLinkAlias(dv, f)}`,
        type: Helper.numberTypeToString(fm),
        since: `${since}`,
        size: f.size,
        project: fm.project === void 0 ? "\\-" : fm.project.slice(8),
        domain: fm.domain === void 0 ? "\\-" : fm.domain.slice(7),
        //Renderer.domainBase(dv, fm.domain),
        name
      };
      if (record.type === "log") {
        const pages = dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
        if (pages.length !== 1) {
          throw new Error(`${fm.parent_id} ${fm.id}`);
        }
        const parent = pages[0];
        switch (parent.type) {
          case Types.Task:
            record.uuid = `&#128211 ${record.uuid}`;
            record.type = `<font color=8B0000>task</font>`;
            break;
          case Types.Praxis:
            record.uuid = `&#128188 ${record.uuid}`;
            record.type = `<font color=FF8C00>praxis</font>`;
            break;
          case Types.Media:
            record.uuid = `&#128191 ${record.uuid}`;
            record.type = `<font color=00008B>media</font>`;
            break;
          case Types.Provision:
            record.type = `<font color=DC143C>provision</font>`;
            break;
          default:
            break;
        }
      }
      buff.push([
        record.uuid,
        // record.type,
        // record.since,
        // record.size,
        record.name
        // record.project,
        // record.domain,
      ]);
    }
    dv.table(cols, buff);
  },
  resourceBase(dv, data) {
    const cols = ["uuid"];
    const buff = [];
    for (const d of data) {
      const f = d.file;
      const fm = d.file.frontmatter;
      Assert.True(
        !Helper.nilCheck(fm.uuid),
        `"uuid" id not defined for: ${f.path}`
      );
      buff.push([Renderer.makeLinkAlias(dv, f)]);
    }
    dv.table(cols, buff);
  },
  basicRelation(dv, data) {
    const cols = ["uuid", "name"];
    const buff = [];
    for (const d of data) {
      const f = d.file;
      const fm = d.file.frontmatter;
      Assert.True(
        !Helper.nilCheck(fm.uuid),
        `"uuid" id not defined for: ${f.path}`
      );
      buff.push([Renderer.makeLinkAlias(dv, f), fm.name]);
    }
    dv.table(cols, buff);
  },
  praxisBase(dv, data) {
    const buff = [];
    const cols = ["tasks", "uuid", "estimate"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      buff.push([
        dv.markdownTaskList(f.tasks),
        dv.fileLink(f.path, false, f.name.slice(0, 8)),
        fm.time_estimate
      ]);
    }
    dv.table(cols, buff);
  },
  waitingTask(dv, data) {
    const buff = [];
    const cols = ["tasks", "uuid", "estimate", "cause"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      buff.push([
        dv.markdownTaskList(f.tasks),
        dv.fileLink(f.path, false, f.name.slice(0, 8)),
        fm.time_estimate,
        fm.cause
      ]);
    }
    dv.table(cols, buff);
  },
  readyTask(dv, data) {
    const buff = [];
    const cols = ["uuid", "task", "estimate", "area"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      buff.push([
        Renderer.makeLinkAlias(dv, f, "Task"),
        dv.markdownTaskList(f.tasks),
        fm.time_estimate,
        Helper.getField(Helper.getArea(fm, true), "\\-")
      ]);
    }
    dv.table(cols, buff);
  },
  provisionBase(dv, data) {
    const buff = [];
    const cols = ["uuid", "supplier", "content", "estimate"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      buff.push([
        dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
        fm.supplier,
        dv.markdownTaskList(f.tasks),
        fm.time_estimate
      ]);
    }
    dv.table(cols, buff);
  },
  basicTaskJournalNextAction(dv, data) {
    const buff = [];
    const cols = ["uuid", "priority", "estimate", "tasks"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const domain = Helper.getDomain(fm, true) === void 0 ? "\\-" : Helper.getDomain(fm);
      if (fm.ref_id === void 0) {
        buff.push([
          // journal.contains(fm.uuid) ? "->" : "\\-",
          dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
          fm.priority,
          fm.time_estimate,
          dv.markdownTaskList(f.tasks)
        ]);
      } else {
        const ref = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
        if (ref.length === 0) {
          throw new Error(
            `task: '${fm.uuid}' has an undefined ref_id: '${fm.ref_id}'`
          );
        } else {
          buff.push([
            dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
            Renderer.makeLinkAlias(dv, ref[0].file),
            fm.time_estimate,
            domain
          ]);
        }
      }
    }
    dv.table(cols, buff);
  },
  basicTaskJournalWaiting(dv, data) {
    const buff = [];
    const cols = ["uuid", "cause", "tasks"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const domain = Helper.getDomain(fm, true) === void 0 ? "\\-" : Helper.getDomain(fm);
      if (fm.ref_id === void 0) {
        buff.push([
          // journal.contains(fm.uuid) ? "->" : "\\-",
          dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
          d.cause,
          dv.markdownTaskList(f.tasks)
        ]);
      } else {
        const ref = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
        if (ref.length === 0) {
          throw new Error(
            `task: '${fm.uuid}' has an undefined ref_id: '${fm.ref_id}'`
          );
        } else {
          buff.push([
            dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
            Renderer.makeLinkAlias(dv, ref[0].file),
            fm.time_estimate,
            domain
          ]);
        }
      }
    }
    dv.table(cols, buff);
  },
  basicTaskJournal(dv, data) {
    const buff = [];
    const cols = ["uuid", "tasks", "estimate"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const domain = Helper.getDomain(fm, true) === void 0 ? "\\-" : Helper.getDomain(fm);
      if (fm.ref_id === void 0) {
        buff.push([
          // journal.contains(fm.uuid) ? "->" : "\\-",
          dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
          dv.markdownTaskList(f.tasks),
          fm.time_estimate
        ]);
      } else {
        const ref = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
        if (ref.length === 0) {
          throw new Error(
            `task: '${fm.uuid}' has an undefined ref_id: '${fm.ref_id}'`
          );
        } else {
          buff.push([
            dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
            Renderer.makeLinkAlias(dv, ref[0].file),
            fm.time_estimate,
            domain
          ]);
        }
      }
    }
    dv.table(cols, buff);
  },
  activeTask(dv, data) {
    const buff = [];
    const cols = ["uuid", "tasks", "session"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const logs = dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((p) => p.type === 6).sort((k) => k.created_at, "desc");
      const last = logs[0];
      const createdAt = new Date(last.created_at);
      const now = new Date();
      buff.push([
        dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
        dv.markdownTaskList(f.tasks),
        ((t) => {
          return Math.round(t / (3600 * 1e3) * 10) / 10;
        })(now.getTime() - createdAt.getTime())
      ]);
    }
    dv.table(cols, buff);
  },
  basicTask(dv, data) {
    const buff = [];
    const cols = ["uuid", "tasks", "estimate", "domain"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const domain = Helper.getDomain(fm, true) === void 0 ? "\\-" : Helper.getDomain(fm);
      if (fm.ref_id === void 0) {
        buff.push([
          dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
          dv.markdownTaskList(f.tasks),
          fm.time_estimate,
          domain
        ]);
      } else {
        const ref = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
        if (ref.length === 0) {
          throw new Error(
            `task: '${fm.uuid}' has an undefined ref_id: '${fm.ref_id}'`
          );
        } else {
          buff.push([
            dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
            Renderer.makeLinkAlias(dv, ref[0].file),
            fm.time_estimate,
            domain
          ]);
        }
      }
    }
    dv.table(cols, buff);
  },
  logs(dv, entries) {
    const buff = [];
    let totalTime = 0;
    for (const entry of entries) {
      const fme = entry.file.frontmatter;
      const e = [];
      let start = 0;
      let stop = 0;
      if (fme === void 0 || fme.created_at === void 0) {
        throw new Error(`Invalid frontmatter: ${fme.uuid}`);
      }
      start = new Date(fme.created_at);
      e.push(start.toISOString().slice(0, 10));
      if (fme.done_at === void 0) {
        stop = Date.now();
      } else {
        stop = new Date(fme.done_at);
      }
      totalTime += stop - start;
      e.push(
        dv.sectionLink(
          fme.uuid,
          "## Content",
          false,
          fme.uuid.slice(0, 8)
        )
      );
      e.push(Math.round((stop - start) / (1e3 * 60 * 60) * 10) / 10);
      if (fme.reviewed === void 0 || fme.reviewed === 0) {
        e.push(0);
      } else {
        e.push(fme.reviewed);
      }
      buff.push(e);
    }
    if (buff.length > 0) {
      dv.header(2, "Logs");
      dv.table(["created_at", "uuid", "session", "reviewed"], buff);
      if (totalTime > 0) {
        dv.paragraph(
          `_totalTime (h):_ ${Math.round(totalTime / (1e3 * 60 * 60) * 10) / 10}`
        );
      }
    }
  },
  mediaWithLogs(dv, data) {
    const buff = [];
    const cols = ["uuid", "tasks", "estimate", "current", "domain"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const ref = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
      if (ref.length === 0) {
        throw new Error(
          `task: '${fm.uuid}' has an undefined ref_id: '${fm.ref_id}'`
        );
      }
      const domain = Helper.getDomain(fm, true) === void 0 ? "\\-" : Helper.getDomain(fm);
      const logEntries = dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((p) => p.type === Types.Log).sort((k) => k.created_at, "desc");
      let totalTime = 0;
      for (const entry of logEntries) {
        const fme = entry.file.frontmatter;
        const e = [];
        let start = 0;
        let stop = 0;
        if (fme === void 0 || fme.created_at === void 0) {
          throw new Error(`Invalid frontmatter: ${fme.uuid}`);
        }
        start = new Date(fme.created_at);
        try {
          e.push(start.toISOString().slice(0, 10));
        } catch (e2) {
          console.error(entry.uuid);
        }
        if (fme.done_at === void 0) {
          stop = Date.now();
        } else {
          stop = new Date(fme.done_at);
        }
        totalTime += stop - start;
      }
      buff.push([
        dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
        Renderer.makeLinkAlias(dv, ref[0].file),
        fm.time_estimate,
        `${Math.round(totalTime / (1e3 * 60 * 60) * 10) / 10}h`,
        domain
      ]);
    }
    dv.table(cols, buff);
  },
  taskDoneWithLogs(dv, data) {
    const buff = [];
    const cols = [
      "taskId",
      "logId",
      "createdAt",
      "doneAt",
      "timeEstimate",
      "took",
      "project"
    ];
    for (const d of data) {
      const f = d.file;
      const fm = d.file.frontmatter;
      const createdAt = new Date(fm.created_at);
      const doneAt = new Date(fm.done_at);
      const timeEstimate = "";
      const took = (doneAt - createdAt) / (1e3 * 3600);
      const pages = dv.pages(`"${Paths.Tasks}"`).where((page) => page.file.frontmatter.uuid === fm.parent_id);
      if (pages.length !== 1) {
        throw new Error();
      }
      const parent = pages[0];
      const parentFm = parent.file.frontmatter;
      const parentF = parent.file;
      buff.push([
        Renderer.makeLinkShortUUID(dv, parent.file, "Task"),
        Renderer.makeLinkShortUUID(dv, f),
        createdAt.toISOString().slice(0, 10),
        doneAt.toISOString().slice(0, 10),
        timeEstimate,
        ((t) => {
          return Math.round(t * 10) / 10;
        })(took),
        Helper.getProject(parentFm)
      ]);
    }
    dv.table(cols, buff);
  },
  projects(dv, pages) {
    const cols = ["name"];
    const buff = [];
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      buff.push([Renderer.makeLink(dv, page.file, fm.getName())]);
    }
    dv.table(cols, buff);
  },
  basicDoneTaskWithLogs(dv, data) {
    const cols = [
      "uuid",
      "createdAt",
      "doneAt",
      "timeEstimate",
      "took",
      "delta",
      "project",
      "area"
    ];
    dv.table(cols, data);
  },
  basicDoneTaskWithoutLogs(dv, data) {
    const cols = ["taskId", "createdAt", "project", "area"];
    dv.table(cols, data);
  },
  basicProgressedTaskWithLog(dv, data) {
    const cols = [
      "taskId",
      "logId",
      // "createdAt",
      // "doneAt",
      "took",
      // "tookAcc",
      "project"
      // "domain",
    ];
    dv.table(cols, data);
  },
  // dailyTask(dv, data) {
  // 	Renderer.makeLinkShortUUID(this.dv, page.file),
  // 	dv.
  // 				rs.push([
  // 					"paragraph",
  // 					Renderer.makeLinkShortUUID(this.dv, page.file),
  // 				]);
  // }
  do(dv, rs) {
    for (const row of rs) {
      switch (row[0]) {
        case "header":
          const [, level, heading] = row;
          dv.header(level, heading);
          break;
        case "paragraph":
          const [, text] = row;
          dv.paragraph(text);
          break;
        case "array":
          const [, renderer, data] = row;
          renderer(dv, data);
          break;
        case "stats":
          const [, name, unit, value] = row;
          dv.paragraph(`${name} (${unit}): ${value}`);
          break;
        default:
          throw new Error(`Unsuported opcode: "fuckoff"`);
      }
    }
  }
};
var Frontmatter = class {
  constructor(gonext) {
    this.gonext = gonext;
  }
  projectParseMeta(dv) {
    const current = dv.current();
    const projectName = current.file.folder.slice(
      Paths.Projects.length + 1
    );
    const projectDir = current.file.folder;
    if (projectName.contains("/")) {
      throw new Error(
        `projectDir: ${projectDir} folder: ${current.file.folder}`
      );
    }
    const pages = dv.pages(`"${projectDir}/meta"`).array();
    if (pages.length !== 1) {
      throw new Error(`len: ${pages.length}`);
    }
    const fm = pages[0].file.frontmatter;
    const uuid = fm.uuid;
    if (Helper.nilCheck(uuid)) {
      throw new Error(`project 'uuid' is not defined`);
    }
    const name = fm.name;
    if (Helper.nilCheck(name)) {
      throw new Error(`'name' is not defined`);
    }
    const domains = fm.domains;
    if (!Array.isArray(domains)) {
      throw new Error(`'domains' must be of array type`);
    }
    return {
      uuid,
      name,
      domains
    };
  }
  getCreatedAt(f) {
    return Helper.nilCheck(f.frontmatter.created_at) ? new Date(f.ctime.ts) : new Date(f.frontmatter.created_at);
  }
  getCurrentFrontmatter() {
    const file = this.gonext.workspace.getActiveFile();
    const fileContent = this.gonext.metadataCache.getFileCache(file);
    if (fileContent === void 0) {
      return void 0;
    }
    const fm = fileContent.frontmatter;
    if (fm === void 0) {
      return void 0;
    }
    return fm;
  }
  parseListByNamespace(fm) {
    const byAreas = fm.by_areas === void 0 ? [] : fm.by_areas;
    const byContexts = fm.by_contexts === void 0 ? [] : fm.by_contexts;
    const byLayers = fm.by_layers === void 0 ? [] : fm.by_layers;
    const byOrgs = fm.by_orgs === void 0 ? [] : fm.by_orgs;
    const byProjects = fm.by_projects === void 0 ? [] : fm.by_projects;
    return [byAreas, byContexts, byLayers, byOrgs, byProjects];
  }
  parseListBeforeAfter(fm) {
    const before = Helper.getDate(fm.before);
    const after = Helper.getDate(fm.after);
    return [before, after];
  }
  parseListFilterBy(fm) {
    if (fm === void 0) {
      return [];
    }
    const filterBy = fm.filter_by;
    if (!Array.isArray(filterBy)) {
      return [];
    }
    return filterBy;
  }
  parseListGroupBy(fm) {
    if (fm === void 0) {
      return "";
    }
    const groupBy = fm.group_by;
    if (!(typeof groupBy === "undefined") && !(typeof groupBy === "string")) {
      return "";
    }
    return groupBy;
  }
  parseAllProgressedTasks() {
    const fm = this.getCurrentFrontmatter();
    if (fm === void 0) {
      throw new Error(`Invalid frontmatter, cannot proceed`);
    }
    const groupBy = this.parseListGroupBy(fm);
    const filterBy = this.parseListFilterBy(fm);
    const [before, after] = this.parseListBeforeAfter(fm);
    return [groupBy, filterBy, before, after];
  }
  parseAllDoneTasks() {
    return this.parseAllProgressedTasks();
  }
  parseAllDoneTaskWithoutLog() {
    return this.parseAllProgressedTasks();
  }
  parseAllTodoAdHoc() {
    const fm = this.getCurrentFrontmatter();
    if (fm === void 0) {
      throw new Error(`Invalid frontmatter, cannot proceed`);
    }
    const groupBy = this.parseListGroupBy(fm);
    const filterBy = this.parseListFilterBy(fm);
    const [before, after] = this.parseListBeforeAfter(fm);
    const minPriority = Helper.getField(fm.min_priority, 0);
    return [groupBy, filterBy, before, after, minPriority];
  }
  parseInbox() {
    const fm = this.getCurrentFrontmatter();
    if (fm === void 0) {
      return [[], [], 0, 4294967295];
    }
    const source = Helper.nilCheck(fm.source) ? ["logs", "fleeting"] : fm.source;
    const groupBy = Helper.nilCheck(fm.group_by) ? "none" : fm.group_by;
    const filterBy = this.parseListFilterBy(fm);
    const minSize = Helper.nilCheck(fm.min_size) ? 0 : fm.min_size;
    const maxSize = Helper.nilCheck(fm.max_size) ? 4294967295 : fm.max_size;
    return [source, groupBy, filterBy, minSize, maxSize];
  }
  parseTodoList() {
    const fm = this.getCurrentFrontmatter();
    if (fm === void 0) {
      return [[], [], [], [], [], 0];
    }
    const [byAreas, byContexts, byLayers, byOrgs, byProjects] = this.parseListByNamespace(fm);
    const minPriority = Helper.getField(fm.min_priority, 0);
    return [byAreas, byContexts, byLayers, byOrgs, byProjects, minPriority];
  }
  parseDoneList() {
    const fm = this.getCurrentFrontmatter();
    if (fm === void 0) {
      return [[], [], [], [], [], [], []];
    }
    const [byAreas, byContexts, byLayers, byOrgs, byProjects] = this.parseListByNamespace(fm);
    const [before, after] = this.parseListBeforeAfter(fm);
    const fields = Helper.getField(fm.fields, []);
    const stats = Helper.getField(fm.stats, []);
    return [
      byAreas,
      byContexts,
      byLayers,
      byOrgs,
      byProjects,
      fields,
      stats,
      before,
      after
    ];
  }
};
var NoteHelper = class {
  constructor(gonext, dv, frontmatter) {
    this.gonext = gonext;
    this.dv = dv;
    this.frontmatter = frontmatter;
  }
  isDoable(task, at = void 0) {
    const fm = task.file.frontmatter;
    if (fm.status !== Status.Todo) {
      return false;
    }
    if (fm.after !== void 0) {
      const after = new Date(fm.after);
      if (Date.now() <= after.getTime()) {
        return false;
      }
    }
    if (at !== void 0) {
      const fmAt = new Date(fm.at);
      fmAt.setHours(0);
      fmAt.setMinutes(0);
      fmAt.setSeconds(0);
      if (at.getTime() < fmAt.getTime()) {
        return false;
      }
    } else {
      if (fm.at !== void 0) {
        const at2 = new Date(fm.at);
        if (Date.now() <= at2.getTime()) {
          return false;
        }
      }
    }
    const deps = fm.needs;
    if (deps === void 0 || deps.length === 0) {
      return true;
    }
    if (this.hasPendingDependencies(deps)) {
      return false;
    }
    return true;
  }
  hasPendingDependencies(deps) {
    for (const dep of deps) {
      const task = this.dv.pages(`"${Paths.Tasks}/${dep}"`).array();
      if (task.length === 0) {
        console.warn(
          `hasPendingDependencies: "${Paths.Tasks}/${dep}" task does not exists`
        );
        continue;
      }
      const fm = task[0].file.frontmatter;
      if (fm.type !== Types.Task && fm.type !== Types.Provision && fm.type !== Types.Praxis) {
        continue;
      }
      if (fm.status === Status.Todo) {
        return true;
      }
    }
    return false;
  }
  isChildTag(parent, child) {
    if (child.length <= parent.length + 1) {
      return false;
    } else if (child.slice(0, parent.length + 1) != `${parent}/`) {
      return false;
    }
    return true;
  }
  getNamespaceContent(ns) {
    const children = [];
    const pages = this.dv.pages(`#${ns}`);
    for (const p of pages) {
      const tags = p.file.frontmatter.tags;
      if (tags === void 0 || tags.length === 0) {
        continue;
      }
      for (const tag of tags) {
        if (this.isChildTag(ns, tag)) {
          const t = tag.slice(ns.length + 1);
          if (!children.contains(t)) {
            children.push(t);
          }
        }
      }
    }
    return children;
  }
  isLastRevision(page) {
    const revisionList = (dv, root, current) => {
      let head = current;
      while (true) {
        const pages = dv.pages(`"${root}"`).where(
          (page2) => page2.file.frontmatter.next === head.file.frontmatter.uuid
        );
        if (pages.length > 1) {
          throw new Error();
        } else if (pages.length === 0) {
          break;
        }
        head = pages[0];
      }
      const buff = [];
      let cur = head;
      while (true) {
        buff.push(cur);
        const fm2 = cur.file.frontmatter;
        if (fm2.next === void 0) {
          break;
        }
        const pages = dv.pages(`"${root}/${fm2.next}"`);
        if (pages.length === 0) {
          break;
        }
        cur = pages[0];
      }
      return buff;
    };
    const note = page;
    const fm = note.file.frontmatter;
    let revisions = [];
    switch (fm.type) {
      case Types.Permanena:
        revisions = revisionList(this.dv, Paths.Slipbox, note);
        break;
      case Types.Resource:
        revisions = revisionList(this.dv, Paths.Resources, note);
        break;
      default:
        throw new Error();
    }
    if (revisions.length <= 1) {
      return true;
    }
    return revisions[0].file.frontmatter.uuid === fm.uuid;
  }
};
var Generator = class {
  constructor(app2) {
    this.app = app2;
    this.dv = app2.dv;
    this.gonext = app2.gonext;
  }
  journalDaily() {
    const now = new Date();
    const nowDate = now.toISOString().slice(0, 10);
    const pages = this.dv.pages(`"${Paths.Journal}"`).where((page) => {
      const fmp = new FrontmatterJS(page);
      if (fmp.getProject() !== "daily") {
        return false;
      }
      if (fmp.createdAt.toISOString().slice(0, 10) !== nowDate) {
        return false;
      }
      return true;
    });
    for (const page of pages) {
      console.log(page);
    }
  }
  fleeting() {
    const dt = new Date();
    const note = {
      uuid: v4_default(),
      type: 13,
      version: "0.0.4",
      created_at: dt.toISOString(),
      path: "",
      data: ""
    };
    note.path = `800 Inbox/${note.uuid}.md`;
    note.data = `---
type: 13
uuid: "${note.uuid}"
created_at: "${note.created_at}"
version: "0.0.4"
---
## Content
`;
    const f = this.app.vault.create(note.path, note.data).then((f2) => {
      return f2;
    });
    const active = this.app.workspace.activeLeaf;
    const root = active.parent;
    this.app.workspace.createLeafInParent(root, root.children.length + 1);
    const leaf = root.children[root.children.length - 1];
    f.then((file) => {
      leaf.openFile(file, { active: true });
    });
  }
  daily() {
    const dt = new Date();
    const note = {
      uuid: v4_default(),
      type: 3,
      version: "0.0.6",
      status: "todo",
      created_at: dt.toISOString(),
      at: dt.toISOString(),
      path: "",
      data: ""
    };
    note.path = `${Paths.Tasks}/${note.uuid}.md`;
    note.data = `---
type: ${note.type}
uuid: "${note.uuid}"
created_at: "${note.created_at}"
version: "${note.version}"
status: "todo"
priority: 0
at: "${note.at}"
tags: 
  - project/daily
---
## Task
`;
    const f = this.app.vault.create(note.path, note.data).then((f2) => {
      return f2;
    });
    const active = this.app.workspace.activeLeaf;
    const root = active.parent;
    this.app.workspace.createLeafInParent(root, root.children.length + 1);
    const leaf = root.children[root.children.length - 1];
    f.then((file) => {
      leaf.openFile(file, { active: true });
    });
  }
  permanent(name) {
    const dt = new Date();
    const note = {
      uuid: v4_default(),
      type: 2,
      version: "0.0.3",
      created_at: dt.toISOString(),
      path: "",
      data: ""
    };
    note.path = `${Paths.Slipbox}/${note.uuid}.md`;
    if (name === void 0) {
      note.data = `---
type: 2
uuid: "${note.uuid}"
created_at: "${note.created_at}"
version: "0.0.3"
---
## Content
`;
    } else {
      note.data = `---
type: 2
uuid: "${note.uuid}"
created_at: "${note.created_at}"
version: "0.0.3"
---
# ${name}
## Content
`;
    }
    const f = this.app.vault.create(note.path, note.data).then((f2) => {
      return f2;
    });
    const active = this.app.workspace.activeLeaf;
    const root = active.parent;
    this.app.workspace.createLeafInParent(root, root.children.length + 1);
    const leaf = root.children[root.children.length - 1];
    f.then((file) => {
      leaf.openFile(file, { active: true });
    });
  }
  // @ts-ignore
  journalEntry(dt) {
    if (dt === void 0) {
      dt = new Date();
    }
    const note = {
      uuid: v4_default(),
      type: 20,
      version: "0.0.4",
      created_at: dt.toISOString(),
      path: "",
      data: ""
    };
    note.path = `Journal/${note.uuid}.md`;
    note.data = `---
type: 20
uuid: "${note.uuid}"
created_at: "${note.created_at}"
version: "0.0.4"
tags:
    - project/daily
---
## Content
### entry
`;
    return this.app.vault.create(note.path, note.data).then((f) => {
      return f;
    });
  }
};
var ListMaker = class {
  constructor(gonext, dv, frontmatter) {
    this.gonext = gonext;
    this.dv = dv;
    this.frontmatter = frontmatter;
    this.noteHelper = new NoteHelper(gonext, dv, frontmatter);
  }
  nameInNamespace(fm, ns) {
    let found = false;
    if (ns.length === 0) {
      return true;
    }
    for (const a of ns) {
      const root = a.split("/");
      Assert.True(root.length === 2, `Invalid tag: '${a}'`);
      const parent = root[0].slice(0, 1) === "!" ? root[0].slice(1) : root[0];
      const name = Helper.getTag(fm, parent);
      if (a.slice(0, 1) === "!") {
        if (name === a.slice(1)) {
          return false;
        } else {
          found = true;
        }
      } else {
        if (name === a) {
          found = true;
        } else {
          found = false;
        }
      }
    }
    return found;
  }
  myNameInNamespace(name, ns) {
    let found = false;
    if (ns.length === 0) {
      return true;
    }
    for (const a of ns) {
      if (a.slice(0, 1) === "!") {
        if (name === a.slice(1)) {
          return false;
        } else {
          found = true;
        }
      } else {
        if (name === a) {
          found = true;
        } else {
          found = false;
        }
      }
    }
    return found;
  }
  filterByNamespace(fm, byAreas, byContexts, byLayers, byOrgs, byProjects) {
    if (!this.myNameInNamespace(Helper.getArea(fm), byAreas)) {
      return false;
    }
    if (!this.myNameInNamespace(Helper.getContext(fm), byContexts)) {
      return false;
    }
    if (!this.myNameInNamespace(Helper.getLayer(fm), byLayers)) {
      return false;
    }
    if (!this.myNameInNamespace(Helper.getOrg(fm), byOrgs)) {
      return false;
    }
    if (!this.myNameInNamespace(Helper.getProject(fm), byProjects)) {
      return false;
    }
    return true;
  }
  filterByDate(dt, before, after) {
    if (before !== void 0 && dt.getTime() > before.getTime()) {
      return false;
    }
    if (after !== void 0 && dt.getTime() < after.getTime()) {
      return false;
    }
    return true;
  }
  goals() {
    const rs = [];
    const bins = {};
    bins[GoalStatus.Reframe] = [];
    bins[GoalStatus.Research] = [];
    bins[GoalStatus.Operationalize] = [];
    bins[GoalStatus.Planify] = [];
    bins[GoalStatus.Dependant] = [];
    bins[GoalStatus.Active] = [];
    bins[GoalStatus.Success] = [];
    bins[GoalStatus.Failed] = [];
    const pages = this.dv.pages(`"${Paths.Goals}"`).where((page) => {
      const fmp = page.file.frontmatter;
      if (bins[fmp.status] === void 0) {
        return true;
      } else {
        const fm = new FrontmatterJS(page);
        bins[fmp.status].push(fm);
        return false;
      }
    });
    const keys = Object.keys(bins);
    keys.sort();
    for (const k of keys) {
      const buff = bins[k];
      buff.sort((a, b) => {
        const dta = new Date(a.fm.before);
        const dtb = new Date(b.fm.before);
        return dta.getTime() - dtb.getTime();
      });
    }
    const displayGoals = (k, rs2) => {
      rs2.push(["header", 3, k]);
      const buff = bins[k];
      rs2.push(["array", Renderer.goal, buff]);
    };
    rs.push(["header", 2, "operational"]);
    displayGoals("active", rs);
    displayGoals("planify", rs);
    rs.push(["header", 2, "non-operational"]);
    displayGoals("reframe", rs);
    displayGoals("research", rs);
    displayGoals("operationalize", rs);
    rs.push(["header", 2, "done"]);
    displayGoals("success", rs);
    displayGoals("failed", rs);
    return rs;
  }
  projectTasksSheetRelationFrontmatter(dv) {
    const current = dv.current();
    const fm = new FrontmatterJS(current);
    return {
      name: fm.getName(),
      uuid: fm.uuid,
      active: fm.fm.active === void 0 || fm.fm.active === true ? true : false
    };
  }
  projectTasksSheetRelation(dv) {
    const project = this.projectTasksSheetRelationFrontmatter(dv);
    const rs = [];
    const bins = {
      nextAction: [],
      waitingFor: [],
      somedayMaybe: []
    };
    {
      const pages2 = dv.pages(`"Journal"`).where((page) => {
        const fm = new FrontmatterJS(page);
        return fm.getProject() === project.name;
      }).sort((k) => k.created_at, "desc");
      if (pages2.length > 0) {
        rs.push(["header", 2, `Journal (${pages2.length})`]);
        for (const page of pages2) {
          const fm = new FrontmatterJS(page);
          const text = Renderer.makeLink(
            dv,
            fm.f,
            `${fm.createdAt.toISOString().slice(0, 10)}`,
            "entry"
          );
          rs.push(["paragraph", text]);
        }
      }
    }
    const pages = dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (fm.fm.status === "done") {
        return false;
      }
      if (["daily", "weekly", "monthly"].contains(project.name)) {
        return false;
      } else if (project.name === "adhoc" && fm.getProject() === void 0) {
        page.file.frontmatter.project = "adhoc";
        return true;
      } else if (project.name === fm.getProject()) {
        return true;
      } else {
        return false;
      }
    });
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      if (this.noteHelper.isDoable(page)) {
        if (fm.fm.priority > 0) {
          bins.nextAction.push(page);
        } else {
          bins.somedayMaybe.push(page);
        }
      } else {
        if (fm.fm.needs !== void 0 && this.noteHelper.hasPendingDependencies(fm.fm.needs)) {
          page.cause = "dependencies";
        } else {
          const fmAt = fm.at;
          const currentAt = new Date();
          const fmAfter = fm.after;
          if (fm.fm.at !== void 0) {
            fmAt.setHours(0);
            fmAt.setMinutes(0);
            fmAt.setSeconds(0);
            fmAt.setMilliseconds(0);
            currentAt.setHours(0);
            currentAt.setMinutes(0);
            currentAt.setSeconds(0);
            currentAt.setMilliseconds(0);
          }
          if (fm.after !== void 0) {
            fmAfter.setHours(0);
            fmAfter.setMinutes(0);
            fmAfter.setSeconds(0);
            fmAfter.setMilliseconds(0);
          }
          console.log(`current: ${currentAt.getTime()}`);
          console.log(`at: ${fm.at.getTime()}`);
          console.log(`after: ${fm.after.getTime()}`);
          if (fm.fm.at !== void 0 && fmAt.getTime() > currentAt.getTime()) {
            page.cause = "at";
          } else if (fm.fm.after !== void 0 && fmAfter.getTime() < currentAt.getTime()) {
            page.cause = "after";
          } else {
            page.cause = "unknown";
          }
        }
        bins.waitingFor.push(page);
      }
    }
    if (bins.nextAction.length > 0) {
      rs.push(["header", 2, `Next Actions (${bins.nextAction.length})`]);
      bins.nextAction.sort(Helper.sortByPriorityAndDurationAndAge);
      rs.push([
        "array",
        Renderer.basicTaskJournalNextAction,
        bins.nextAction
      ]);
    }
    if (bins.waitingFor.length > 0) {
      rs.push(["header", 2, `Waiting (${bins.waitingFor.length})`]);
      bins.waitingFor.sort(Helper.sortByPriorityAndDurationAndAge);
      rs.push([
        "array",
        Renderer.basicTaskJournalWaiting,
        bins.waitingFor
      ]);
    }
    if (bins.somedayMaybe.length > 0) {
      rs.push(["header", 2, `Maybe (${bins.somedayMaybe.length})`]);
      bins.somedayMaybe.sort(Helper.sortByPriorityAndDurationAndAge);
      rs.push(["array", Renderer.basicTaskJournal, bins.somedayMaybe]);
    }
    return rs;
  }
  projectLogsSheetRelation(dv) {
    const project = this.projectTasksSheetRelationFrontmatter(dv);
    const filterBy = [];
    const rs = [];
    rs.push(["header", 2, "Logs"]);
    const logs = this.dv.pages(`"${Paths.Logs}"`).where((page) => {
      if (page.type !== Types.Log) {
        return false;
      }
      if (page.file.frontmatter.reviewed > 0) {
        return false;
      }
      return true;
    });
    const buff = {};
    for (const e of logs) {
      const fm = e.file.frontmatter;
      if (filterBy.length > 0 && !this.nameInNamespace(fm, filterBy)) {
        continue;
      }
      fm.createdAt = this.frontmatter.getCreatedAt(e.file);
      Assert.True(
        !Helper.nilCheck(fm.parent_id),
        `Missing field "parent_id" from log: "${fm.uuid}"`
      );
      const parent = this.dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
      if (parent.length !== 1) {
        continue;
      }
      Assert.True(
        parent.length === 1,
        `Parent: ${fm.parent_id} not found for log: "${fm.uuid}"`
      );
      fm.project = Helper.getProject(parent[0].file.frontmatter);
      fm.area = Helper.getArea(parent[0].file.frontmatter, true);
      if (fm.project !== `project/${project.name === "adhoc" ? "none" : project.name}`) {
        continue;
      }
      if (Helper.nilCheck(fm.done_at)) {
        continue;
      }
      const date = fm.done_at.slice(0, 10);
      if (buff[date] === void 0) {
        buff[date] = [e];
      } else {
        buff[date].push(e);
      }
    }
    const keys = Object.keys(buff);
    keys.sort();
    for (const date of keys) {
      buff[date].sort(
        (a, b) => b.file.frontmatter.createdAt.getTime() - a.file.frontmatter.createdAt.getTime()
      );
    }
    for (const date of keys.reverse()) {
      rs.push(["header", 3, date]);
      rs.push(["array", Renderer.projectLogs, buff[date]]);
    }
    return rs;
  }
  getProjectLogs(dv, project) {
    const logs = this.dv.pages(`"${Paths.Logs}"`).where((page) => {
      if (page.type !== Types.Log) {
        return false;
      }
      return true;
    });
    const buff = [];
    for (const e of logs) {
      const fm = e.file.frontmatter;
      Assert.True(
        !Helper.nilCheck(fm.parent_id),
        `Missing field "parent_id" from log: "${fm.uuid}"`
      );
      const parent = this.dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
      if (parent.length !== 1) {
        continue;
      }
      fm.project = Helper.getProject(parent[0].file.frontmatter);
      fm.area = Helper.getArea(parent[0].file.frontmatter, true);
      if (fm.project !== `project/${project.name === "adhoc" ? "none" : project.name}`) {
        continue;
      }
      if (Helper.nilCheck(fm.done_at)) {
        continue;
      }
      buff.push(e);
    }
    return buff;
  }
  projectLogsSheet(dv) {
    const project = this.frontmatter.projectParseMeta(dv);
    const fml = this.frontmatter.getCurrentFrontmatter();
    if (fml === void 0) {
      throw new Error(`Invalid frontmatter, cannot proceed`);
    }
    const before = Helper.nilCheck(fml.before) ? new Date(0) : new Date(fml.before);
    const after = Helper.nilCheck(fml.after) ? new Date() : new Date(fml.after);
    const filterBy = this.frontmatter.parseListFilterBy(fml);
    const rs = [];
    let totalTime = 0;
    rs.push(["header", 1, project.name]);
    const logs = this.dv.pages(`"${Paths.Logs}"`).where((page) => {
      if (page.type !== Types.Log) {
        return false;
      }
      return true;
    });
    const buff = {};
    for (const e of logs) {
      const fm = e.file.frontmatter;
      if (filterBy.length > 0 && !this.nameInNamespace(fm, filterBy)) {
        continue;
      }
      fm.createdAt = this.frontmatter.getCreatedAt(e.file);
      Assert.True(
        !Helper.nilCheck(fm.parent_id),
        `Missing field "parent_id" from log: "${fm.uuid}"`
      );
      const parent = this.dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
      if (parent.length !== 1) {
        continue;
      }
      fm.project = Helper.getProject(parent[0].file.frontmatter);
      fm.area = Helper.getArea(parent[0].file.frontmatter, true);
      if (fm.project !== `project/${project.name === "adhoc" ? "none" : project.name}`) {
        continue;
      }
      if (Helper.nilCheck(fm.done_at)) {
        continue;
      }
      const date = fm.done_at.slice(0, 10);
      const createdAt = new Date(fm.created_at);
      const doneAt = new Date(fm.done_at);
      if (createdAt > before) {
        continue;
      }
      if (createdAt < after) {
        continue;
      }
      if (buff[date] === void 0) {
        buff[date] = [e];
      } else {
        buff[date].push(e);
      }
      const delta = doneAt.getTime() - createdAt.getTime();
      totalTime += delta;
    }
    dv.paragraph(
      `_totalTime (h):_ ${Math.round(totalTime / (1e3 * 60 * 60) * 10) / 10}`
    );
    const keys = Object.keys(buff);
    keys.sort();
    for (const date of keys) {
      buff[date].sort(
        (a, b) => b.file.frontmatter.createdAt.getTime() - a.file.frontmatter.createdAt.getTime()
      );
    }
    for (const date of keys.reverse()) {
      rs.push(["header", 3, date]);
      rs.push(["array", Renderer.projectLogs, buff[date]]);
    }
    return rs;
  }
  logs() {
    const [groupBy, filterBy, before, after] = this.frontmatter.parseAllProgressedTasks();
    const tasks = this.dv.pages(`"${Paths.Tasks}"`).where((page) => page.file.frontmatter.status !== "doing");
    const buff = [];
    for (const task of tasks) {
      const fm = task.file.frontmatter;
      if (filterBy.length > 0 && !this.nameInNamespace(fm, filterBy)) {
        continue;
      }
      const timeEstimate = Helper.durationStringToSec(fm.time_estimate);
      if (timeEstimate === void 0 && fm.time_estimate !== void 0) {
        throw new Error(
          `Invalid value: "${fm.time_estimate}" for entry: "${fm.uuid}"`
        );
      } else {
        fm.timeEstimate = timeEstimate;
      }
      const logs = this.dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((page) => page.type === Types.Log).sort((k) => k.created_at, "asc");
      if (logs.length < 1) {
        continue;
      }
      fm.took = 0;
      const project = Helper.getField(Helper.getProject(fm, true), "");
      const area = Helper.getField(Helper.getArea(fm, true), "");
      for (const log of logs) {
        const fml = log.file.frontmatter;
        const entry = {
          alias: fm.alias,
          uuid: fm.uuid,
          logId: fml.uuid,
          estimate: fm.timeEstimate,
          project,
          area,
          domain: Helper.getField(Helper.getDomain(fm, true), ""),
          path: task.file.path,
          logPath: log.file.path,
          createdAt: void 0,
          doneAt: void 0,
          took: void 0,
          tookAcc: void 0,
          deltaAcc: void 0
        };
        if (fml.created_at === void 0) {
          console.error(log);
          throw new Error(
            `task: ${fm.uuid} last entry is missing 'created_at' field`
          );
        }
        if (fml.done_at === void 0) {
          console.error(log);
          throw new Error(
            `task: ${fm.uuid} last entry is missing 'done_at' field`
          );
        }
        entry.createdAt = new Date(fml.created_at);
        entry.doneAt = new Date(fml.done_at);
        if (!this.filterByDate(entry.doneAt, before, after)) {
          continue;
        }
        const took = (entry.doneAt.getTime() - entry.createdAt.getTime()) / 1e3;
        fm.took += took;
        entry.took = took;
        entry.tookAcc = fm.took;
        entry.deltaAcc = timeEstimate - fm.took;
        buff.push(entry);
      }
    }
    const keyGetter = Helper.getKey(groupBy);
    const bins = {};
    for (const entry of buff) {
      let d = void 0;
      try {
        d = keyGetter(entry);
      } catch (e) {
        throw new Error(entry);
      }
      if (bins[d] === void 0) {
        bins[d] = [entry];
      } else {
        bins[d].push(entry);
      }
    }
    const keys = Object.keys(bins);
    keys.sort();
    const rs = [];
    for (const key of keys.reverse()) {
      rs.push(["header", 2, key]);
      const arr = [];
      let totalTime = 0;
      for (const e of bins[key]) {
        const buff2 = [];
        buff2.push(
          Renderer.makeLinkShortUUID(
            this.dv,
            { path: e.path, frontmatter: { uuid: e.uuid } },
            "Task"
          )
        );
        buff2.push(
          Renderer.makeLinkShortUUID(
            this.dv,
            { path: e.logPath, frontmatter: { uuid: e.logId } },
            "Content"
          )
        );
        const convertSecondsToHours = (t) => {
          return Math.round(t / 3600 * 10) / 10;
        };
        buff2.push(`${convertSecondsToHours(e.took)}`);
        buff2.push(`${e.project}`);
        arr.push(buff2);
        totalTime += e.took;
      }
      totalTime = Math.round(totalTime / 3600 * 10) / 10;
      rs.push(["stats", "totalTime", "h", totalTime]);
      rs.push(["array", Renderer.basicProgressedTaskWithLog, arr]);
    }
    return rs;
  }
  inbox(dv) {
    const rs = [];
    const buff = [];
    const filterBy = [];
    const minSize = 0;
    const maxSize = 4294967295;
    const fleetings = this.dv.pages(`"${Paths.Inbox}"`).array();
    for (const e of fleetings) {
      const fm = e.file.frontmatter;
      e.file.frontmatter.createdAt = this.frontmatter.getCreatedAt(
        e.file
      );
      let fmjs = null;
      try {
        fmjs = new FrontmatterJS(e);
      } catch (ValidationError2) {
        console.log(e);
        dv.paragraph(Renderer.makeLink(dv, e.file));
        break;
      }
      fm.project = Helper.getProject(fm, true);
      fm.domain = `domain/${fmjs.getDomain()}`;
      fm.components = Helper.getComponents(fm);
      if (e.file.size < minSize) {
        continue;
      }
      if (e.file.size > maxSize) {
        continue;
      }
      buff.push(e);
    }
    const logs = [];
    for (const e of logs) {
      const fm = e.file.frontmatter;
      fm.createdAt = this.frontmatter.getCreatedAt(e.file);
      Assert.True(
        !Helper.nilCheck(fm.parent_id),
        `Missing field "parent_id" from log: "${fm.uuid}"`
      );
      const parent = this.dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
      Assert.True(
        parent.length === 1,
        `Parent: ${fm.parent_id} not found for log: "${fm.uuid}"`
      );
      fm.project = Helper.getProject(parent[0].file.frontmatter, true);
      fm.domain = void 0;
      fm.components = [];
      if (e.file.size < minSize) {
        continue;
      }
      if (e.file.size > maxSize) {
        continue;
      }
      buff.push(e);
    }
    const sortBySizeThenDate = function(a, b) {
      const fA = a.file;
      const fB = b.file;
      if (fA.size !== fB.size) {
        return fB.size - fA.size;
      } else {
        return fA.frontmatter.createdAt.getTime() - fB.frontmatter.createdAt.getTime();
      }
    };
    const sortByAge = (a, b) => a.file.frontmatter.createdAt.getTime() - b.file.frontmatter.createdAt.getTime();
    buff.sort(sortByAge);
    rs.push(["array", Renderer.inboxEntry, buff]);
    return rs;
  }
  projects() {
    const rs = [];
    const bins = {
      active: [],
      inactive: []
    };
    const pages = this.dv.pages(`"Projects"`).sort((k) => k.name, "asc");
    for (const project of pages) {
      const fmProject = new FrontmatterJS(project);
      if (fmProject.fm.active === false) {
        bins.inactive.push(project);
        continue;
      } else if (fmProject.getName() === "adhoc") {
        bins.active.push(project);
        continue;
      } else if (["yearly", "monthly", "weekly", "daily"].contains(
        fmProject.getName()
      )) {
        continue;
      }
      const tasks = this.dv.pages(`#project/${fmProject.getName()}`).where((page) => {
        if (page.file.folder !== `${Paths.Tasks}`) {
          return false;
        }
        const fmTask = new FrontmatterJS(page);
        if (fmTask.fm.priority === 0) {
          return false;
        }
        if (["todo", "doing", "waiting"].contains(fmTask.fm.status)) {
          return true;
        }
        return false;
      });
      if (tasks.length > 0) {
        bins.active.push(project);
      } else {
        bins.inactive.push(project);
      }
    }
    rs.push(["header", 2, "Active"]);
    rs.push(["array", Renderer.projects, bins.active]);
    rs.push(["header", 2, "Inactive"]);
    rs.push(["array", Renderer.projects, bins.inactive]);
    return rs;
  }
  praxis() {
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      if (page.file.frontmatter.type !== Types.Praxis) {
        return false;
      }
      if (page.file.frontmatter.status !== Status.Todo) {
        return false;
      }
      return true;
    }).array();
    const rs = [];
    rs.push(["header", 1, "Praxis"]);
    rs.push(["array", Renderer.basicTask, pages]);
    return rs;
  }
  planning(lastWeek = 1) {
    const rs = [];
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (fm.at === void 0) {
        return false;
      }
      if (fm.getProject() !== "daily") {
        return false;
      }
      return true;
    }).sort((page) => page.file.frontmatter.at, "desc");
    const now = new Date();
    const bins = {};
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      let at = void 0;
      try {
        at = fm.at.toISOString().slice(0, 10);
      } catch (e) {
        throw new Error(`Invalid date: '${fm.fm.uuid}'`);
      }
      const weekNumber = this.getWeekNumber5(fm.at);
      if (fm.at.getFullYear() < now.getFullYear()) {
        if (weekNumber > 1) {
          continue;
        }
      }
      if (bins[weekNumber] === void 0) {
        bins[weekNumber] = [fm];
      } else {
        bins[weekNumber].push(fm);
      }
    }
    const currentWeekNumber = this.getWeekNumber5(now);
    for (const key of Object.keys(bins)) {
      const weekNumber = Number(key);
      if (weekNumber + lastWeek < currentWeekNumber) {
        continue;
      }
      if (weekNumber < currentWeekNumber) {
        rs.push(["header", 2, `~~week ${key}~~`]);
      } else if (weekNumber === currentWeekNumber) {
        rs.push(["header", 2, `*week ${key}*`]);
      } else {
        rs.push(["header", 2, `week ${key}`]);
      }
      bins[key].sort((a, b) => {
        return a.at.getTime() - b.at.getTime();
      });
      for (const task of bins[key]) {
        const day = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][task.at.getDay()];
        const text = Renderer.makeLink(
          this.dv,
          task.f,
          `${task.at.toISOString().slice(0, 10)}, ${day}`,
          "Task"
        );
        if (weekNumber < currentWeekNumber) {
          rs.push(["paragraph", `~~${text}~~`]);
        } else if (weekNumber === currentWeekNumber) {
          if (this.dayOfYear(task.at) < this.dayOfYear(now)) {
            rs.push(["paragraph", `~~${text}~~`]);
          } else {
            rs.push(["paragraph", `${text}`]);
          }
        } else {
          rs.push(["paragraph", `${text}`]);
        }
      }
    }
    return rs;
  }
  dayOfYear(dt) {
    const year = dt.getFullYear();
    const month = dt.getMonth() + 1;
    const day = dt.getDate();
    const N1 = Math.floor(275 * month / 9);
    const N2 = Math.floor((month + 9) / 12);
    const N3 = 1 + Math.floor((year - 4 * Math.floor(year / 4) + 2) / 3);
    return N1 - N2 * N3 + day - 30;
  }
  getWeekNumber(d) {
    d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
    d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));
    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
    return Math.ceil(((d - yearStart) / 864e5 + 1) / 7);
  }
  // https://codepen.io/ldijkman/pen/LYdNJvM
  getWeekNumber5(dt) {
    const tdt = new Date(dt.valueOf());
    const dayn = dt.getDay();
    tdt.setDate(tdt.getDate() - dayn + 3);
    const firstThursday = tdt.valueOf();
    tdt.setMonth(0, 1);
    if (tdt.getDay() !== 4) {
      tdt.setMonth(0, 1 + (4 - tdt.getDay() + 7) % 7);
    }
    return 1 + Math.ceil((firstThursday - tdt) / 6048e5);
  }
  getWeekNumber4(d) {
    d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
    const firstSunday = yearStart.getUTCDay() === 0 ? yearStart : new Date(
      Date.UTC(
        d.getUTCFullYear(),
        0,
        1 + (7 - yearStart.getUTCDay())
      )
    );
    const daysSinceFirstSunday = (d - firstSunday + 864e5) / 864e5;
    return Math.ceil(daysSinceFirstSunday / 7);
  }
  getMonth(year, weekNumber) {
    const firstDayOfYear = new Date(year, 0, 1);
    const firstDayOfWeek = firstDayOfYear.getDay();
    const daysToAdd = (weekNumber - 1) * 7 - firstDayOfWeek + (firstDayOfWeek === 0 ? 1 : 0);
    const weekStartDate = new Date(
      firstDayOfYear.setDate(firstDayOfYear.getDate() + daysToAdd)
    );
    if (weekStartDate.getDate() > 24) {
      weekStartDate.setDate(weekStartDate.getDate() + 7);
    }
    const monthNumber = weekStartDate.getMonth();
    return monthNumber + 1;
  }
  getMonthName(monthNumber) {
    const date = new Date(2e3, monthNumber - 1);
    return date.toLocaleString("default", { month: "long" });
  }
  energy(dv) {
    const current = dv.current();
    if (current.energy === void 0) {
      current.energy = 0;
    }
    let comp = void 0;
    switch (current.op) {
      case ">":
        comp = (a, b) => a > b;
        break;
      case ">=":
        comp = (a, b) => a >= b;
        break;
      case "<":
        comp = (a, b) => a < b;
        break;
      case "<=":
        comp = (a, b) => a <= b;
        break;
      default:
        comp = (a, b) => a === b;
        break;
    }
    const rs = [];
    const pages = dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (fm.getProject() === "daily") {
        return false;
      }
      if (fm.fm.status !== "todo") {
        return false;
      }
      return comp(fm.energy, current.energy);
    });
    rs.push([
      "array",
      (dv2, data) => {
        for (const entry of data) {
          console.log(entry);
          dv2.paragraph(
            Renderer.makeLinkAlias(dv2, entry.file, "## Task")
          );
        }
      },
      pages
    ]);
    return rs;
  }
  mandala(dv) {
    let mandalaLo = -1;
    let mandalaHi = -1;
    const now = new Date();
    {
      const weekNumber = this.getWeekNumber4(now);
      mandalaLo = weekNumber - 6;
      mandalaHi = weekNumber - 5;
      if (mandalaLo < 0 || mandalaHi < 0) {
        dv.paragraph(`weekNumber: ${weekNumber}`);
        dv.paragraph(`mandalaLo: ${mandalaLo}`);
        dv.paragraph(`mandalaHi: ${mandalaHi}`);
        return;
      }
      dv.paragraph(`weekNumber: ${weekNumber}`);
      dv.paragraph(`mandalaLo: ${mandalaLo}`);
      dv.paragraph(`mandalaHi: ${mandalaHi}`);
    }
    const rs = [];
    const bins = {};
    const suiviWeekly = {};
    const suiviMonthly = {};
    const suiviYearly = {};
    const pages = this.dv.pages(`"Journal"`).where((page) => {
      const fm = new FrontmatterJS(page);
      const weekNumber = this.getWeekNumber4(fm.createdAt);
      console.log(weekNumber);
      if (weekNumber >= mandalaLo && weekNumber <= mandalaHi && fm.createdAt.getFullYear() === now.getFullYear()) {
        return true;
      }
      return false;
    }).sort((page) => page.file.frontmatter.created_at, "desc");
    console.log(pages.length);
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      const weekNumber = this.getWeekNumber4(fm.createdAt);
      const year = fm.createdAt.getFullYear();
      const month = fm.createdAt.getMonth() + 1;
      let msg = "";
      msg += `createdAt: ${fm.createdAt.toISOString().slice(0, 10)}
`;
      msg += `weekNumber: ${weekNumber}
`;
      msg += `year: ${year}
`;
      msg += `month: ${month}
`;
      msg += `day: ${fm.createdAt.getDay()}
`;
      const day = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][fm.createdAt.getDay()];
      msg += `day: ${day}
`;
      console.log(msg);
      if (bins[year] === void 0) {
        bins[year] = {};
      }
      if (bins[year][weekNumber.toString()] === void 0) {
        bins[year][weekNumber.toString()] = {};
      }
      if (suiviMonthly[year] === void 0) {
        suiviMonthly[year] = {};
      }
      if (suiviWeekly[year] === void 0) {
        suiviWeekly[year] = {};
      }
      let tag = "";
      if (fm.getDomain() !== void 0) {
        tag = fm.getDomain();
      } else if (fm.getProject() !== void 0) {
        tag = fm.getProject();
      } else {
        tag = "adhoc";
      }
      if (tag == "weekly") {
        if (suiviWeekly[year][weekNumber] === void 0) {
          suiviWeekly[year][weekNumber] = [page];
        } else {
          suiviWeekly[year][weekNumber].push(page);
        }
        continue;
      } else if (tag === "monthly") {
        if (suiviMonthly[year][month] === void 0) {
          suiviMonthly[year][month] = [page];
        } else {
          suiviMonthly[year][month].push(page);
        }
        continue;
      } else if (tag === "yearly") {
        if (suiviYearly[year] === void 0) {
          suiviYearly[year] = [page];
        } else {
          suiviYearly[year].push(page);
        }
        continue;
      }
      if (bins[year][weekNumber][tag] === void 0) {
        bins[year][weekNumber][tag] = [page];
      } else {
        bins[year][weekNumber][tag].push(page);
      }
    }
    {
      const years = Object.keys(bins);
      let lastYear = 9999;
      let lastMonth = 13;
      years.sort().reverse();
      for (const year of years) {
        rs.push(["header", 2, year]);
        if (parseInt(year, 10) < lastYear) {
          lastMonth = 13;
          lastYear = parseInt(year, 10);
          if (suiviYearly[year] !== void 0) {
            for (const page of suiviYearly[year]) {
              const fm = new FrontmatterJS(page);
              rs.push([
                "paragraph",
                Renderer.makeLinkAlias(this.dv, fm.f)
              ]);
            }
          }
        }
        for (let week = 52; week > 0; week--) {
          const thisMonth = this.getMonth(year, week);
          if (suiviMonthly[year][thisMonth] !== void 0) {
            if (lastMonth !== thisMonth) {
              lastMonth = thisMonth;
              rs.push([
                "header",
                3,
                this.getMonthName(lastMonth)
              ]);
              if (suiviMonthly[year][thisMonth] !== void 0) {
                for (const page of suiviMonthly[year][thisMonth]) {
                  const fm = new FrontmatterJS(page);
                  rs.push([
                    "paragraph",
                    Renderer.makeLinkAlias(this.dv, fm.f)
                  ]);
                }
              }
            }
          }
          if (suiviWeekly[year][week] === void 0 && bins[year][week] === void 0) {
            continue;
          }
          rs.push(["header", 4, `week ${week.toString()}`]);
          if (suiviWeekly[year][week] !== void 0) {
            for (const page of suiviWeekly[year][week]) {
              const fm = new FrontmatterJS(page);
              rs.push([
                "paragraph",
                Renderer.makeLinkAlias(this.dv, fm.f)
              ]);
            }
          }
          if (bins[year][week] === void 0) {
            continue;
          }
          const tags = Object.keys(bins[year][week]);
          tags.sort();
          for (const tag of tags) {
            rs.push(["header", 5, tag]);
            bins[year][week][tag].sort((a, b) => {
              const fmA = new FrontmatterJS(a);
              const fmB = new FrontmatterJS(b);
              return fmB.createdAt.getTime() - fmA.createdAt.getTime();
            });
            for (const page of bins[year][week][tag]) {
              const fm = new FrontmatterJS(page);
              if (fm.type === 6) {
              } else {
                const d = fm.createdAt.toISOString().slice(0, 10);
                const day = [
                  "Sun",
                  "Mon",
                  "Tue",
                  "Wed",
                  "Thu",
                  "Fri",
                  "Sat"
                ][fm.createdAt.getDay()];
                const text = `${d}, ${day}`;
                rs.push([
                  "paragraph",
                  Renderer.makeLink(this.dv, fm.f, text)
                ]);
              }
            }
          }
        }
      }
    }
    return rs;
  }
  journal() {
    const rs = [];
    const bins = {};
    const suiviWeekly = {};
    const suiviMonthly = {};
    const suiviYearly = {};
    const pages = this.dv.pages(`"Journal"`).sort((page) => page.file.frontmatter.created_at, "desc");
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      const weekNumber = this.getWeekNumber4(fm.createdAt);
      const year = fm.createdAt.getFullYear();
      const month = fm.createdAt.getMonth() + 1;
      let msg = "";
      msg += `createdAt: ${fm.createdAt.toISOString().slice(0, 10)}
`;
      msg += `weekNumber: ${weekNumber}
`;
      msg += `year: ${year}
`;
      msg += `month: ${month}
`;
      msg += `day: ${fm.createdAt.getDay()}
`;
      const day = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][fm.createdAt.getDay()];
      msg += `day: ${day}
`;
      if (bins[year] === void 0) {
        bins[year] = {};
      }
      if (bins[year][weekNumber.toString()] === void 0) {
        bins[year][weekNumber.toString()] = {};
      }
      if (suiviMonthly[year] === void 0) {
        suiviMonthly[year] = {};
      }
      if (suiviWeekly[year] === void 0) {
        suiviWeekly[year] = {};
      }
      let tag = "";
      if (fm.getDomain() !== void 0) {
        tag = fm.getDomain();
      } else if (fm.getProject() !== void 0) {
        tag = fm.getProject();
      } else {
        tag = "adhoc";
      }
      if (tag == "weekly") {
        if (suiviWeekly[year][weekNumber] === void 0) {
          suiviWeekly[year][weekNumber] = [page];
        } else {
          suiviWeekly[year][weekNumber].push(page);
        }
        continue;
      } else if (tag === "monthly") {
        if (suiviMonthly[year][month] === void 0) {
          suiviMonthly[year][month] = [page];
        } else {
          suiviMonthly[year][month].push(page);
        }
        continue;
      } else if (tag === "yearly") {
        if (suiviYearly[year] === void 0) {
          suiviYearly[year] = [page];
        } else {
          suiviYearly[year].push(page);
        }
        continue;
      }
      if (bins[year][weekNumber][tag] === void 0) {
        bins[year][weekNumber][tag] = [page];
      } else {
        bins[year][weekNumber][tag].push(page);
      }
    }
    {
      const years = Object.keys(bins);
      let lastYear = 9999;
      let lastMonth = 13;
      years.sort().reverse();
      for (const year of years) {
        rs.push(["header", 2, year]);
        if (parseInt(year, 10) < lastYear) {
          lastMonth = 13;
          lastYear = parseInt(year, 10);
          if (suiviYearly[year] !== void 0) {
            for (const page of suiviYearly[year]) {
              const fm = new FrontmatterJS(page);
              rs.push([
                "paragraph",
                Renderer.makeLinkAlias(this.dv, fm.f)
              ]);
            }
          }
        }
        for (let week = 52; week > 0; week--) {
          const thisMonth = this.getMonth(year, week);
          if (suiviMonthly[year][thisMonth] !== void 0) {
            if (lastMonth !== thisMonth) {
              lastMonth = thisMonth;
              rs.push([
                "header",
                3,
                this.getMonthName(lastMonth)
              ]);
              if (suiviMonthly[year][thisMonth] !== void 0) {
                for (const page of suiviMonthly[year][thisMonth]) {
                  const fm = new FrontmatterJS(page);
                  rs.push([
                    "paragraph",
                    Renderer.makeLinkAlias(this.dv, fm.f)
                  ]);
                }
              }
            }
          }
          if (suiviWeekly[year][week] === void 0 && bins[year][week] === void 0) {
            continue;
          }
          rs.push(["header", 4, `week ${week.toString()}`]);
          if (suiviWeekly[year][week] !== void 0) {
            for (const page of suiviWeekly[year][week]) {
              const fm = new FrontmatterJS(page);
              rs.push([
                "paragraph",
                Renderer.makeLinkAlias(this.dv, fm.f)
              ]);
            }
          }
          if (bins[year][week] === void 0) {
            continue;
          }
          const tags = Object.keys(bins[year][week]);
          tags.sort();
          for (const tag of tags) {
            rs.push(["header", 5, tag]);
            bins[year][week][tag].sort((a, b) => {
              const fmA = new FrontmatterJS(a);
              const fmB = new FrontmatterJS(b);
              return fmB.createdAt.getTime() - fmA.createdAt.getTime();
            });
            for (const page of bins[year][week][tag]) {
              const fm = new FrontmatterJS(page);
              if (fm.type === 6) {
              } else {
                const d = fm.createdAt.toISOString().slice(0, 10);
                const day = [
                  "Sun",
                  "Mon",
                  "Tue",
                  "Wed",
                  "Thu",
                  "Fri",
                  "Sat"
                ][fm.createdAt.getDay()];
                const text = `${d}, ${day}`;
                rs.push([
                  "paragraph",
                  Renderer.makeLink(this.dv, fm.f, text)
                ]);
              }
            }
          }
        }
      }
    }
    return rs;
  }
  calendar() {
    const rs = [];
    const bins = {};
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (fm.fm.at === void 0 && fm.fm.before === void 0 && fm.fm.after === void 0) {
        return false;
      }
      if (fm.fm.status !== "todo") {
        return false;
      }
      if (fm.getProject() === "daily") {
        return false;
      }
      return true;
    });
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      let year = 0;
      let month = 0;
      let day = 0;
      if (fm.fm.before !== void 0) {
        year = fm.before.getFullYear();
        month = fm.before.getMonth();
        day = fm.before.getUTCDate();
      } else if (fm.fm.at !== void 0) {
        year = fm.at.getFullYear();
        month = fm.at.getMonth();
        day = fm.at.getUTCDate();
      } else if (fm.after !== void 0) {
        year = fm.after.getFullYear();
        month = fm.after.getMonth();
        day = fm.after.getUTCDate();
      } else {
        throw new Error();
      }
      if (bins[year] === void 0) {
        bins[year] = {};
      }
      if (bins[year][month] === void 0) {
        bins[year][month] = {};
      }
      if (bins[year][month][day] === void 0) {
        bins[year][month][day] = {};
      }
      if (bins[year][month][day]["at"] === void 0) {
        bins[year][month][day]["at"] = [];
      }
      if (bins[year][month][day]["before"] === void 0) {
        bins[year][month][day]["before"] = [];
      }
      if (bins[year][month][day]["after"] === void 0) {
        bins[year][month][day]["after"] = [];
      }
      if (fm.fm.before !== void 0) {
        bins[year][month][day]["before"].push(page);
      } else if (fm.fm.at !== void 0) {
        bins[year][month][day]["at"].push(page);
      } else {
        bins[year][month][day]["after"].push(page);
      }
    }
    {
      const years = Object.keys(bins);
      years.sort((a, b) => parseInt(a) - parseInt(b));
      for (const year of years) {
        rs.push(["header", 2, year]);
        const months = Object.keys(bins[year]);
        months.sort((a, b) => parseInt(a) - parseInt(b));
        for (const month of months) {
          rs.push([
            "header",
            3,
            `${["January", "Febuary", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"][month]}`
          ]);
          const days = Object.keys(bins[year][month]);
          days.sort((a, b) => parseInt(a) - parseInt(b));
          for (const day of days) {
            const weeks = [
              "Sun",
              "Mon",
              "Tue",
              "Wed",
              "Thu",
              "Fri",
              "Sat"
            ];
            const before = bins[year][month][day]["before"];
            const at = bins[year][month][day]["at"];
            const after = bins[year][month][day]["after"];
            console.log(
              `year: ${year}
month: ${month}
day: ${day}`
            );
            if (before.length > 0) {
              for (const page of before) {
                console.log("--- before ---");
                console.log(page);
                console.log("------");
                const fm = new FrontmatterJS(page);
                const text = `before: ${weeks[fm.before.getDay()]} ${day} ${fm.at.toISOString().slice(11, 16)} | ${fm.getProject()}`;
                rs.push([
                  "paragraph",
                  Renderer.makeLink(
                    this.dv,
                    fm.f,
                    text,
                    "Task"
                  )
                ]);
              }
            }
            if (at.length > 0) {
              at.sort((a, b) => {
                const fmA = new FrontmatterJS(a);
                const fmB = new FrontmatterJS(b);
                return fmB.at.getTime() - fmA.at.getTime();
              });
              for (const page of at) {
                console.log("--- at ---");
                console.log(page);
                console.log("------");
                const fm = new FrontmatterJS(page);
                const text = `at: ${weeks[fm.at.getDay()]} ${day} ${fm.at.toISOString().slice(11, 16)} | ${fm.getProject()}`;
                rs.push([
                  "paragraph",
                  Renderer.makeLink(
                    this.dv,
                    fm.f,
                    text,
                    "Task"
                  )
                ]);
              }
            }
            if (after.length > 0) {
              for (const page of after) {
                console.log("--- after ---");
                console.log(page);
                console.log("------");
                const fm = new FrontmatterJS(page);
                const text = ` after: ${weeks[fm.after.getDay()]} ${day} ${fm.at.toISOString().slice(11, 16)} | ${fm.getProject()}`;
                rs.push([
                  "paragraph",
                  Renderer.makeLink(
                    this.dv,
                    fm.f,
                    text,
                    "Task"
                  )
                ]);
              }
            }
          }
        }
      }
    }
    return rs;
  }
  globalTaskList(pages) {
    const rs = [];
    const bins = {};
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      if (fm.getProject() === void 0) {
        fm.projects = ["adhoc"];
      }
      if (bins[fm.getProject()] === void 0) {
        bins[fm.getProject()] = [page];
      } else {
        bins[fm.getProject()].push(page);
      }
    }
    const projects = Object.keys(bins);
    projects.sort();
    for (const project of projects) {
      const tasks = bins[project];
      tasks.sort(Helper.sortByPriorityAndDurationAndAge);
      rs.push(["header", 2, `${project}`]);
      rs.push(["array", Renderer.basicTaskJournal, tasks]);
    }
    return rs;
  }
  nextActions(dv) {
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (["daily", "weekly", "monthly", "yearly"].contains(
        fm.getProject()
      )) {
        return false;
      }
      if (!this.projectIsActive(fm.getProject())) {
        return false;
      }
      if (!this.noteHelper.isDoable(page)) {
        return false;
      }
      if (fm.fm.priority === 0) {
        return false;
      }
      return true;
    });
    return this.globalTaskList(pages);
  }
  waitingFor(dv) {
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (["daily", "weekly", "monthly", "yearly"].contains(
        fm.getProject()
      )) {
        return false;
      }
      if (!["todo", "waiting"].contains(fm.fm.status)) {
        return false;
      }
      if (!this.projectIsActive(fm.getProject())) {
        return false;
      }
      if (this.noteHelper.isDoable(page) || fm.fm.priority === 0) {
        return false;
      }
      return true;
    });
    return this.globalTaskList(pages);
  }
  projectIsActive(name) {
    const project = this.dv.pages(`"Projects"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (fm.getName() !== name) {
        return false;
      }
      if (fm.fm.active === false) {
        return false;
      }
      return true;
    });
    return project.length > 0;
  }
  somedayMaybe(dv) {
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (["daily", "weekly", "monthly", "yearly"].contains(
        fm.getProject()
      )) {
        return false;
      }
      if (!this.projectIsActive(fm.getProject())) {
        return false;
      }
      if (!this.noteHelper.isDoable(page) || fm.fm.priority > 0) {
        return false;
      }
      return true;
    });
    return this.globalTaskList(pages);
  }
};
var DvLib = class {
  constructor() {
    this.taskDir = "813 Tasks";
    this.inboxDir = "800 Inbox";
    this.refDir = "802 Refs";
    this.logDir = "600 Log";
    this.Task = {
      BASE: 3,
      DAILY: 4
    };
    this.Type = {
      TASK: 3,
      DAILY: 4,
      LOG: 6
    };
    this.Status = {
      TODO: "todo",
      DONE: "done",
      DOING: "doing",
      TRASH: "trash",
      MAYBE: "maybe",
      STANDBY: "standby"
    };
    this.Namespace = {
      AREA: "area",
      CONTEXT: "context",
      LAYER: "layer",
      ORG: "org",
      PROJECT: "project"
    };
    this.Default = {
      AREA: "none",
      CONTEXT: "any",
      LAYER: "none",
      ORG: "none",
      PROJECT: "none"
    };
    this._dv = "";
  }
  set dv(mod) {
    this._dv = mod;
  }
  get dv() {
    return this._dv;
  }
  isChildTag(parent, child) {
    if (child.length <= parent.length + 1) {
      return false;
    } else if (child.slice(0, parent.length + 1) != `${parent}/`) {
      return false;
    }
    return true;
  }
  stripTag(tag) {
    let t = "";
    if (tag.slice(-1) === "/") {
      t = tag.slice(0, -1);
    } else {
      t = tag;
    }
    if (t.slice(0, 1) === "#") {
      t = t.slice(1, t.length);
    }
    return t;
  }
  getTaskFromUUID(dv, uuid) {
    const n = dv.pages(`"${this.taskDir}/${uuid}"`);
    if (n.length === 0) {
      console.warn(`"${this.taskDir}/${uuid}" task does not exists`);
      return void 0;
    }
    return n[0];
  }
  hasValidFormat(task) {
    const fm = task.file.frontmatter;
    if (fm === void 0) {
      console.warn(
        `"${this.taskDir}/${task.uuid}" task does not have a frontmatter`
      );
      return false;
    }
    if (fm.type === void 0) {
      console.warn(
        `"${this.taskDir}/${task.uuid}" task does not have a \`type\` field`
      );
      return false;
    }
    if (fm.status === void 0) {
      console.warn(
        `"${this.taskDir}/${task.uuid}" task does not have a \`status\` field`
      );
      return false;
    }
    return true;
  }
  hasPendingDependencies(dv, deps) {
    for (const dep of deps) {
      const task = this.getTaskFromUUID(dv, dep);
      if (task === void 0) {
        continue;
      }
      if (!this.hasValidFormat(task)) {
        continue;
      }
      const fm = task.file.frontmatter;
      if (fm.type !== this.Task.BASE && fm.type !== this.Task.DAILY) {
        continue;
      }
      if (fm.status === this.Status.TODO) {
        return true;
      }
    }
    return false;
  }
  isDoable(dv, task) {
    const fm = task.file.frontmatter;
    if (fm.status !== this.Status.TODO) {
      return false;
    }
    if (fm.after !== void 0) {
      const after = new Date(fm.after);
      if (Date.now() <= after.getTime()) {
        return false;
      }
    }
    const deps = fm.needs;
    if (deps === void 0 || deps.length === 0) {
      return true;
    }
    if (this.hasPendingDependencies(dv, deps)) {
      return false;
    }
    return true;
  }
  getNamespaceContent(dv, ns) {
    const children = [];
    const resp = dv.pages(`#${ns}`);
    for (const f of resp) {
      const tags = f.tags;
      if (tags === void 0) {
        continue;
      }
      for (const tag of tags) {
        if (this.isChildTag(ns, tag)) {
          const t = tag.slice(ns.length + 1);
          if (!children.includes(t)) {
            children.push(t);
          }
        }
      }
    }
    return children;
  }
  isDone(dv, dep) {
    const task = this.getTaskFromUUID(dv, dep);
    if (task === void 0) {
      return false;
    }
    if (!this.hasValidFormat(task)) {
      return false;
    }
    const fm = task.file.frontmatter;
    if (fm.status === this.Status.DONE) {
      return true;
    }
    return false;
  }
  getTasks(dv, tag, taskType = [this.Task.BASE, this.Task.DAILY], status = this.Status.TODO) {
    const buff = [];
    const tasks = dv.pages(tag);
    for (const task of tasks) {
      const fm = task.file.frontmatter;
      if (fm === void 0) {
        continue;
      }
      if (fm.status === void 0 || fm.status !== status) {
        continue;
      }
      if (fm.type === void 0 || !taskType.contains(fm.type)) {
        continue;
      }
      buff.push(task);
    }
    return buff;
  }
  formatTask(dv, task) {
    return dv.fileLink(task.file.path);
  }
  formatTaskBis(dv, task) {
    const f = task.file;
    let ctx = "";
    for (const tag of f.tags) {
      if (tag.slice(0, 9) == "#context/") {
        ctx = tag.slice(9);
      }
    }
    return [
      dv.fileLink(f.path),
      dv.markdownTaskList(f.tasks),
      f.frontmatter.time_estimate,
      ctx
    ];
  }
  formatTaskBase(dv, task) {
    const f = task.file;
    const fm = f.frontmatter;
    const tags = fm.tags;
    const area = this.getArea(tags);
    return [
      dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
      dv.markdownTaskList(f.tasks),
      fm.time_estimate,
      area
    ];
  }
  formatTaskWaiting(dv, task) {
    const f = task.file;
    const fm = f.frontmatter;
    const deps = [];
    if (fm.needs !== void 0) {
      for (const dep of fm.needs) {
        deps.push(dv.fileLink(`${this.taskDir}/${dep}`));
      }
    }
  }
  formatTaskMaybe(dv, task) {
    const f = task.file;
    const fm = f.frontmatter;
    const deps = [];
    return [dv.fileLink(f.path)];
  }
  makeAsyncRequest(dv, uuid) {
    return dv.query(`LIST WHERE needs AND contains(needs, "${uuid}")`).then((value) => {
      return value;
    });
  }
  getDependantTasks(dv, task) {
    const buff = [];
    const uuid = task.file.name;
    if (task.file.frontmatter === void 0) {
      return buff;
    }
    const tasks = dv.pages(`"${this.taskDir}"`).where((p) => p.needs !== void 0 && p.needs.contains(uuid));
    for (const tk of tasks) {
      const t = dv.pages(`"${tk.file.path}"`);
      buff.push(t[0]);
    }
    return buff;
  }
  byDependencyAndPriorityAndCreatedAt(dv, a, b) {
    const ftA = a.file.frontmatter;
    const ftB = b.file.frontmatter;
    const prioA = ftA.priority;
    const prioB = ftB.priority;
    const depsA = this.getDependantTasks(dv, a);
    const depsB = this.getDependantTasks(dv, b);
    if (depsA.length - depsB.length !== 0) {
      return depsA.length - depsB.length;
    }
    if (prioA - prioB !== 0) {
      return prioA - prioB;
    }
    const dateA = new Date(ftA.created_at);
    const dateB = new Date(ftB.created_at);
    return (dateA.getTime() - dateB.getTime()) * -1;
  }
  formatTaskPlanningWaiting(dv, task) {
    const f = task.file;
    return [
      // ajouter alias sur le link
      dv.markdownTaskList(f.tasks),
      dv.fileLink(f.path, false, f.name.slice(0, 8)),
      f.frontmatter.time_estimate,
      f.frontmatter.cause
    ];
  }
  renderBaseAsArray(dv, tasks) {
    const arr = [];
    tasks.forEach((task) => {
      arr.push(this.formatTaskBase(dv, task));
    });
    dv.table(["uuid", "tasks", "estimate", "area"], arr);
  }
  renderPlanningWaiting(dv, tasks) {
    const arr = [];
    tasks.forEach((task) => {
      arr.push(this.formatTaskPlanningWaiting(dv, task));
    });
    dv.table(["tasks", "uuid", "estimate", "cause"], arr);
  }
  renderMaybeAsArray(dv, tasks) {
    const arr = [];
    tasks.forEach(({ ref, task }) => {
      if (task !== void 0) {
        arr.push(this.formatTaskMaybe(dv, task));
      }
    });
    dv.table(["uuid"], arr);
  }
  formatTaskDaily(dv, task) {
    const f = task.file;
    const fm = task.file.frontmatter;
    const tags = task.file.tags;
    const areas = [];
    for (const tag of tags) {
      if (tag.slice(0, 6) == "#area/") {
        areas.push(tag.slice(6));
      }
    }
    const links = [];
    for (const link of f.outlinks) {
      links.push(link);
    }
    const tasks = [];
    for (const t of f.tasks) {
      tasks.push(t);
    }
    return [
      dv.fileLink(f.path),
      links.length > 0 ? dv.markdownList(links) : dv.markdownTaskList(tasks),
      fm.time_allocated,
      areas.length > 0 ? dv.markdownList(areas) : ""
    ];
  }
  formatFleeting(dv, task) {
    const f = task.file;
    const fm = task.file.frontmatter;
    const tags = task.file.tags;
    const hours = 3600;
    const days = 86400;
    let dt = new Date();
    if (fm !== void 0 && fm.created_at !== void 0) {
      dt = new Date(fm.created_at);
    } else {
      dt = new Date(f.ctime.ts);
    }
    const now = new Date();
    const delta = (now.getTime() - dt.getTime()) / 1e3;
    let since = "";
    const toDt = (t) => {
      return String(Math.round(t * 10) / 10).padStart(2, "0");
    };
    if (delta >= days) {
      since = toDt(delta / days) + "d";
    } else {
      since = toDt(delta / hours) + "h";
    }
    if (fm.alias === void 0 || fm.alias === "") {
      return [dv.fileLink(`${f.path}`), since, f.size];
    } else {
      return [dv.fileLink(`${f.path}`, false, fm.alias), since, f.size];
    }
  }
  renderDailyAsArray(dv, tasks) {
    const arr = [];
    tasks.forEach((task) => {
      arr.push(this.formatTaskDaily(dv, task));
    });
    dv.table(["uuid", "content", "duration", "area"], arr);
  }
  renderFleetingAsArray(dv, tasks) {
    const arr = [];
    tasks.forEach((task) => {
      arr.push(this.formatFleeting(dv, task));
    });
    dv.table(["content", "age", "size"], arr);
  }
  autoFieldNeed(dv, fm) {
    if (fm.needs === void 0) {
      return;
    }
    const buff = [];
    for (const dep of fm.needs) {
      if (!this.isDone(dv, dep)) {
        buff.push(dv.fileLink(`${this.taskDir}/${dep}`));
      }
    }
    if (buff.length > 0) {
      dv.header(2, "Needs");
      dv.list(buff);
    }
  }
  autoFieldNeededBy(dv, current) {
    const tasks = this.getDependantTasks(dv, current);
    if (tasks.length === 0) {
      return;
    }
    const buff = [];
    for (const task of tasks) {
      if (!this.isDone(dv, task.uuid)) {
        buff.push(dv.fileLink(task.file.path));
      }
    }
    if (buff.length > 0) {
      dv.header(2, "NeededBy");
      dv.list(buff);
    }
  }
  autoFieldTags(dv, fm) {
    const tags = fm.tags;
    if (tags == void 0 || tags.length === 0) {
      return;
    }
    tags.sort();
    dv.header(2, "Tags");
    let s = "";
    for (const tag of tags) {
      s += ` #${tag}`;
    }
    dv.paragraph(s);
  }
  autoFieldTaskBase(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      console.warn("fm is required");
      return;
    }
    const projectName = Helper.getProject(fm);
    if (projectName !== void 0) {
      const projects = dv.pages(`"Projects"`).where((fmP) => {
        if (fmP.name === projectName.slice(8)) {
          return true;
        }
        return false;
      });
      if (projects.length) {
        dv.header(2, "Project");
        dv.paragraph(Renderer.makeLinkName(dv, projects[0].file));
      }
    }
    this.autoFieldNeed(dv, fm);
    this.autoFieldNeededBy(dv, current);
    const logEntries = dv.pages(`"${this.logDir}/${fm.uuid}"`).where((p) => p.type === 6).sort((k) => k.created_at, "desc");
    const buff = [];
    let totalTime = 0;
    for (const entry of logEntries) {
      const fme = entry.file.frontmatter;
      const e = [];
      let start = 0;
      let stop = 0;
      if (fme === void 0 || fme.created_at === void 0) {
        throw new Error(`Invalid frontmatter: ${fme.uuid}`);
      }
      start = new Date(fme.created_at);
      e.push(start.toISOString().slice(0, 10));
      if (fme.done_at === void 0) {
        stop = Date.now();
      } else {
        stop = new Date(fme.done_at);
      }
      totalTime += stop - start;
      e.push(
        dv.sectionLink(
          fme.uuid,
          "## Content",
          false,
          fme.uuid.slice(0, 8)
        )
      );
      e.push(Math.round((stop - start) / (1e3 * 60 * 60) * 10) / 10);
      if (fme.reviewed === void 0 || fme.reviewed === 0) {
        e.push(0);
      } else {
        e.push(fme.reviewed);
      }
      buff.push(e);
    }
    if (buff.length > 0) {
      dv.header(2, "Logs");
      dv.table(["created_at", "uuid", "session", "reviewed"], buff);
      if (totalTime > 0) {
        dv.paragraph(
          `_totalTime (h):_ ${Math.round(totalTime / (1e3 * 60 * 60) * 10) / 10}`
        );
      }
    }
  }
  autoFieldLog(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      return;
    }
    dv.header(2, "Parent");
    dv.paragraph(dv.fileLink(`${this.taskDir}/${fm.parent_id}`));
  }
  autoFieldAuthors(dv, fm) {
    const authors = fm.authors;
    if (authors === void 0 || authors.length === 0) {
      return;
    }
    dv.header(2, "Authors");
    dv.list(authors);
  }
  autoFieldTitle(dv, fm) {
    const title = fm.alias;
    if (title == void 0) {
      return;
    }
    dv.header(1, title);
  }
  autoFieldLiteratureNote(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      return;
    }
    this.autoFieldTitle(dv, fm);
    this.autoFieldAuthors(dv, fm);
    this.autoFieldTags(dv, fm);
  }
  autoFieldPermanent(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      return;
    }
    this.autoFieldTags(dv, fm);
  }
  autoFieldTask(dv) {
    return this.autoFieldTaskBase(dv);
  }
  autoFieldLiterature(dv) {
    return this.autoFieldLiteratureNote(dv);
  }
  autoFieldFleeting(dv) {
    return;
  }
  autoFieldSupply(dv) {
    return;
  }
  findTasksByProject(dv, name) {
    const buff = [];
    if (name !== "" && name !== "none") {
      const tasks = this.getTasks(dv, `${this.Namespace.PROJECT}/none`, [
        this.Task.BASE
      ]);
      for (const task of tasks) {
        const fm = task.file.frontmatter;
        if (this.isDoable(dv, task)) {
          buff.push(task);
        }
      }
    } else {
      const tasks = this.getTasks(dv, "", [this.Task.BASE]);
      for (const task of tasks) {
        const fm = task.file.frontmatter;
        const tags = fm.tags;
        if (fm.tags === void 0 && (name === "" || name === "none") || fm.tags.contains(`${this.Namespace.PROJECT}/none`)) {
          if (this.isDoable(dv, task)) {
            buff.push(task);
          }
        }
      }
    }
    buff.sort();
    return buff;
  }
  getTag(tags, type) {
    let name = "";
    let defaultValue = "";
    if (type === "area") {
      name = this.Namespace.AREA;
      defaultValue = this.Default.AREA;
    } else if (type === "context") {
      name = this.Namespace.CONTEXT;
      defaultValue = this.Default.CONTEXT;
    } else if (type === "layer") {
      name = this.Namespace.LAYER;
      defaultValue = this.Default.LAYER;
    } else if (type === "org") {
      name = this.Namespace.ORG;
      defaultValue = this.Default.ORG;
    } else if (type === "project") {
      name = this.Namespace.PROJECT;
      defaultValue = this.Default.PROJECT;
    } else {
      throw new Error(`getTag got unsuported type: ${type}`);
    }
    const len = name.length + 1;
    const defaultTag = `${name}/${defaultValue}`;
    if (tags === void 0) {
      return defaultTag;
    }
    for (const tag of tags) {
      if (tag.length > len && tag.slice(0, len) == `${name}/`) {
        return tag;
      }
    }
    return defaultTag;
  }
  getArea(tags) {
    return this.getTag(tags, "area");
  }
  getContext(tags) {
    return this.getTag(tags, "context");
  }
  getLayer(tags) {
    return this.getTag(tags, "layer");
  }
  getOrg(tags) {
    return this.getTag(tags, "org");
  }
  getProject(tags) {
    return this.getTag(tags, "project");
  }
  parseListFrontmatter(fm) {
    let minPriority = 0;
    if (fm.min_priority !== void 0) {
      minPriority = fm.min_priority;
    }
    let ignore = [];
    if (fm.ignore !== void 0) {
      ignore = fm.ignore;
    }
    let byAreas = [];
    if (fm.by_areas !== void 0) {
      byAreas = fm.by_areas;
    }
    let byProjects = [];
    if (fm.by_projects !== void 0) {
      byProjects = fm.by_projects;
    }
    return [minPriority, ignore, byAreas, byProjects];
  }
  renderNamespaceContent(dv) {
    const self = dv.current();
    const name = self.file.name.toLowerCase().slice(0, -1);
    dv.header(1, "Index");
    dv.header(2, `${self.file.name}`);
    const tags = this.getNamespaceContent(dv, name);
    tags.sort();
    for (const tag of tags) {
      dv.paragraph(`#${name}/${tag}`);
    }
  }
  renderUnprocessedLogs(dv) {
    const logs = dv.pages(`"${this.logDir}"`).where(
      (p) => p.type === this.Type.LOG && (p.reviewd === void 0 || p.reviewed < 1)
    ).sort((k) => k.created_at, "asc");
    const buff = [];
    const arr = [];
    logs.forEach((entry) => {
      const fm = entry.file.frontmatter;
      if (fm === void 0) {
        return;
      }
      const parentId = fm.parent_id;
      if (parentId === void 0) {
        throw new Error(`Invalid log entry: ${entry.file.path}`);
      }
      const parent = dv.pages(`"${this.taskDir}/${parentId}"`);
      const parentFm = parent.file.frontmatter;
      if (parentFm === void 0) {
        throw new Error(`Invalid task: ${parent.file.path}`);
      }
      let project = this.getProject(parentFm.tags);
      if (project === `${this.Namespace.PROJECT}/${this.Default.PROJECT}`) {
        project = "";
      }
      let area = this.getArea(parentFm.tags);
      if (area === `${this.Namespace.AREA}/${this.Default.AREA}`) {
        area = "";
      }
      const formated = [];
      formated.push(
        dv.sectionLink(
          entry.file.path,
          "Content",
          false,
          `${fm.uuid.slice(0, 8)}`
        )
      );
      const createdAt = new Date(fm.created_at);
      formated.push(createdAt.toISOString().slice(0, 10));
      formated.push(project);
      formated.push(area);
      arr.push(formated);
    });
    dv.table(["uuid", "created_at", "project", "area"], arr);
  }
  assertTaskDoneAt(dv, taskId) {
    const task = dv.pages(`"${this.taskDir}/${taskId}"`);
    if (task.length === 0) {
      throw new Error(`task: ${taskId} doest not exists`);
    }
    const fm = task.file.frontmatter;
    if (fm === void 0) {
      throw new Error(`task: ${taskId} does not have a frontmatter`);
    }
    const logs = dv.pages(`"${this.logDir}/${taskId}"`).sort((k) => k.created_at, "asc");
    if (logs.length < 1) {
      throw new Error(`task: ${taskId} has no Logs`);
    }
    const lastEntry = logs[logs.length - 1];
    if (lastEntry.file.frontmatter.done_at === void 0) {
      throw new Error(
        `task: ${taskId} last entry is missing 'done_at' field`
      );
    }
    const doneAt = new Date(lastEntry.file.frontmatter.done_at);
    return [
      dv.sectionLink(
        task.file.path,
        "Content",
        false,
        `${task.file.frontmatter.uuid.slice(0, 8)}`
      ),
      `${doneAt.toISOString().slice(0, 10)}`
    ];
  }
  getDoneTimeline(dv) {
    const tasks = dv.pages(`"${this.taskDir}"`).where((p) => p.status === "done");
    const buff = [];
    for (const task of tasks) {
      const fm = task.file.frontmatter;
      if (fm === void 0) {
        throw new Error(`task: ${fm.uuid} does not have a frontmatter`);
      }
      const logs = dv.pages(`"${this.logDir}/${fm.uuid}"`).sort((k) => k.created_at, "asc");
      if (logs.length < 1) {
        console.warn(`task: ${fm.uuid} has no Logs`);
      }
      const lastEntry = logs[logs.length - 1];
      if (lastEntry === void 0) {
        continue;
      }
      if (lastEntry.file.frontmatter.done_at === void 0) {
        throw new Error(
          `task: ${fm.uuid} last entry is missing 'done_at' field`
        );
      }
      fm.doneAt = new Date(lastEntry.file.frontmatter.done_at);
      buff.push(task);
    }
    buff.sort((a, b) => {
      const dateA = new Date(a.file.frontmatter.doneAt);
      const dateB = new Date(b.file.frontmatter.doneAt);
      return (dateA.getTime() - dateB.getTime()) * -1;
    });
    const arr = [];
    buff.forEach((e) => {
      arr.push([
        dv.sectionLink(
          e.file.path,
          "Content",
          false,
          `${e.file.frontmatter.uuid.slice(0, 8)}`
        ),
        `${e.file.frontmatter.doneAt.toISOString().slice(0, 16)}`
      ]);
    });
    dv.table(["uuid", "doneAt"], arr);
  }
  durationStringToSec(val) {
    const mult = val.slice(-1);
    let m = 0;
    if (mult === "h") {
      m = 60 * 60;
    } else if (mult === "m") {
      m = 60;
    } else if (mult === "d") {
      m = 24 * 60 * 60;
    } else {
      console.warn(`Unhandled case mult: ${mult}`);
    }
    return m * parseInt(val.slice(0, -1));
  }
  testDvFunc() {
    const dv = app.plugins.plugins.dataview.api;
    const tasks = dv.pages(`"${this.taskDir}"`).where((p) => p.status === "done");
    const buff = [];
    for (const task of tasks) {
      const fm = task.file.frontmatter;
      if (fm === void 0) {
        throw new Error(`task: ${fm.uuid} does not have a frontmatter`);
      }
      const logs = dv.pages(`"${this.logDir}/${fm.uuid}"`).sort((k) => k.created_at, "asc");
      if (logs.length < 1) {
        console.warn(`task: ${fm.uuid} has no Logs`);
      }
      const lastEntry = logs[logs.length - 1];
      if (lastEntry === void 0) {
        continue;
      }
      if (lastEntry.file.frontmatter.done_at === void 0) {
        throw new Error(
          `task: ${fm.uuid} last entry is missing 'done_at' field`
        );
      }
      fm.doneAt = new Date(lastEntry.file.frontmatter.done_at);
      buff.push(task);
    }
    buff.sort((a, b) => {
      const dateA = new Date(a.file.frontmatter.doneAt);
      const dateB = new Date(b.file.frontmatter.doneAt);
      return (dateA.getTime() - dateB.getTime()) * -1;
    });
    const arr = [];
    buff.forEach((e) => {
      arr.push([
        dv.sectionLink(
          e.file.path,
          "Content",
          false,
          `${e.file.frontmatter.uuid.slice(0, 8)}`
        ),
        `${e.file.frontmatter.doneAt.toISOString().slice(0, 16)}`
      ]);
    });
  }
};

// main.ts
var dayShort = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
var monthShort = [
  "Jan",
  "Feb",
  "Mar",
  "Apr",
  "May",
  "Jun",
  "Jul",
  "Aug",
  "Sep",
  "Oct",
  "Nov",
  "Dec"
];
var DEFAULT_SETTINGS = {
  mySetting: "default"
};
var MyPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.vaultContent = [];
    this.vaultContentDict = {};
  }
  openViewInNewTabIfNotOpened(name) {
    const f = app.vault.getAbstractFileByPath(name);
    if (f === void 0 || f === null) {
      console.warn(`file not found ${name}`);
      return;
    }
    const active = this.app.workspace.activeLeaf;
    const root = active.parent;
    let found = false;
    let node = void 0;
    const emptyTabs = [];
    for (const leaf of root.children) {
      const file = this.getFileFromLeaf(leaf);
      if (file === void 0 || file === null) {
        emptyTabs.push(leaf);
        continue;
      }
      if (file.name === f.name) {
        found = true;
        node = leaf;
      }
    }
    if (!found) {
      if (emptyTabs.length > 0) {
        node = emptyTabs[0];
      } else {
        this.app.workspace.createLeafInParent(
          root,
          root.children.length + 1
        );
        node = root.children[root.children.length - 1];
      }
    }
    node.openFile(f, {
      active: true
    });
  }
  openInNewTabIfNotOpened(page) {
    const active = this.app.workspace.activeLeaf;
    const root = active.parent;
    let found = false;
    let node = void 0;
    const emptyTabs = [];
    for (const leaf of root.children) {
      const file = this.getFileCacheFromLeaf(leaf);
      if (file === void 0 || file === null) {
        emptyTabs.push(leaf);
        continue;
      }
      if (file.frontmatter !== void 0 && file.frontmatter.uuid === page.file.frontmatter.uuid) {
        found = true;
        node = leaf;
        break;
      }
    }
    if (!found) {
      if (emptyTabs.length > 0) {
        node = emptyTabs[0];
      } else {
        this.app.workspace.createLeafInParent(
          root,
          root.children.length + 1
        );
        node = root.children[root.children.length - 1];
      }
    }
    node.openFile(this.app.vault.getAbstractFileByPath(page.file.path), {
      active: true
    });
  }
  getFileCacheFromLeaf(leaf) {
    let file = void 0;
    try {
      file = leaf.view.file;
    } catch (e) {
      return void 0;
    }
    if (file === void 0 || file === null) {
      return void 0;
    }
    const abstractPath = app.vault.getAbstractFileByPath(file);
    return app.metadataCache.getFileCache(abstractPath);
  }
  getFileFromLeaf(leaf) {
    let file = void 0;
    try {
      file = leaf.view.file;
    } catch (e) {
      return void 0;
    }
    return this.app.vault.getAbstractFileByPath(file);
  }
  extractUUIDFromLink(link) {
    Assert.True(
      link.length >= 36,
      `extractUUIDFromLink: Invalid parameter type: link: "${link}"`
    );
    Assert.True(
      Helper.isUUID(link.slice(0, 36)),
      `extractUUIDFromLink: Invalid parameter type: link: "${link}"`
    );
    if (link.length === 36) {
      return link;
    } else {
      return link.slice(0, 36);
    }
  }
  grugAlias(_id) {
    const cache = this.getFileCacheFromUUID(_id);
    if (cache === void 0) {
      console.error(`grugAlias: file not found in grug cache ${_id}`);
      return "";
    }
    console.log(cache);
    console.log();
    let targetName = void 0;
    const fm = cache.frontmatter;
    if (cache.headings.length > 0 && cache.headings[0].level === 1) {
      targetName = cache.headings[0].heading;
    } else if (fm.alias !== void 0) {
      if (Array.isArray(fm.alias) && fm.alias.length > 0) {
        targetName = cache.frontmatter.alias[0];
      } else {
        targetName = cache.frontmatter.alias;
      }
    } else {
      targetName = _id;
    }
    const file = this.getFileFromUUID(_id);
    if (file === void 0) {
      console.error(`grugAlias: Cannot grug this id: ${_id}`);
      return "";
    }
    const path = `${file.path.split("/").slice(0, -1)}/${_id}`;
    return `[[${path}|${targetName}]]`;
  }
  getFileFromUUID(_id) {
    return this.vaultContentDict[_id];
  }
  getFileCacheFromUUID(_id) {
    const f = this.vaultContentDict[_id];
    if (f === void 0) {
      return void 0;
    }
    return app.metadataCache.getFileCache(f);
  }
  async onload() {
    var _a, _b;
    console.log("gonext - onload()");
    await this.loadSettings();
    this.metadataCache = this.app.metadataCache;
    this.workspace = this.app.workspace;
    this.dv = this.app.plugins.plugins.dataview.api;
    this.frontmatter = new Frontmatter(this);
    this.listMaker = new ListMaker(this, this.dv, this.frontmatter);
    this.generate = new Generator(this.app);
    this.files = {};
    this.api = {
      getArea: Helper.getArea,
      getContext: Helper.getContext,
      getDomain: Helper.getDomain,
      getLayer: Helper.getLayer,
      getOrg: Helper.getOrg,
      getProject: Helper.getProject,
      durationStringToSec: Helper.durationStringToSec,
      paths: Paths,
      types: Types,
      status: Status,
      namespace: Namespace,
      default: Default,
      frontmatter: this.frontmatter,
      listMaker: this.listMaker,
      renderer: Renderer,
      autoField: AutoField,
      dvLib: new DvLib(),
      FrontmatterJS
    };
    window.gonext = {
      // @ts-ignore
      state: (_b = (_a = window.gonext) == null ? void 0 : _a.state) != null ? _b : {},
      // @ts-ignore
      app: this.app
    };
    (0, import_obsidian.addIcon)(
      "GoNextIcon",
      `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="currentColor" d="M20 12V2h2v10zm4 0V2h2v10zm4 0V2h2v10zm-12 8a3.912 3.912 0 0 1-4-4a3.912 3.912 0 0 1 4-4v-2a6 6 0 1 0 6 6h-2a3.912 3.912 0 0 1-4 4"></path><path fill="currentColor" d="M28.893 18.454L26.098 16l-1.318 1.504l2.792 2.452l-2.36 4.088l-3.427-1.16a9.032 9.032 0 0 1-2.714 1.565L18.36 28h-4.72l-.71-3.55a9.095 9.095 0 0 1-2.695-1.572l-3.447 1.166l-2.36-4.088l2.725-2.395a8.926 8.926 0 0 1-.007-3.128l-2.718-2.39l2.36-4.087l3.427 1.16A9.03 9.03 0 0 1 12.93 7.55L13.64 4H16V2h-2.36a2 2 0 0 0-1.961 1.608l-.504 2.519a10.967 10.967 0 0 0-1.327.753l-2.42-.819a1.998 1.998 0 0 0-2.372.895l-2.36 4.088a2 2 0 0 0 .411 2.502l1.931 1.697C5.021 15.495 5 15.745 5 16c0 .258.01.513.028.766l-1.92 1.688a2 2 0 0 0-.413 2.502l2.36 4.088a1.998 1.998 0 0 0 2.374.895l2.434-.824a10.974 10.974 0 0 0 1.312.759l.503 2.518A2 2 0 0 0 13.64 30h4.72a2 2 0 0 0 1.961-1.608l.504-2.519a10.967 10.967 0 0 0 1.327-.753l2.419.818a1.998 1.998 0 0 0 2.373-.894l2.36-4.088a2 2 0 0 0-.411-2.502"></path></svg>`
    );
    this.addCommand({
      id: "open-index",
      name: "Open Index",
      // @ts-ignore
      callback: () => {
        this.openViewInNewTabIfNotOpened("INDEX.md");
      }
    });
    this.addCommand({
      id: "open-inbox",
      name: "Open Inbox",
      // @ts-ignore
      callback: () => {
        this.openViewInNewTabIfNotOpened("INBOX.md");
      }
    });
    this.addCommand({
      id: "open-projects",
      name: "Open Projects",
      // @ts-ignore
      callback: () => {
        this.openViewInNewTabIfNotOpened(
          "803 Slipbox/664dc855-eabe-40dc-90b8-006223457953.md"
        );
      }
    });
    this.addCommand({
      id: "open-planning",
      name: "Open Planning",
      // @ts-ignore
      callback: () => {
        this.openViewInNewTabIfNotOpened("Planning.md");
      }
    });
    this.addCommand({
      id: "open-journal",
      name: "Open Journal",
      // @ts-ignore
      callback: () => {
        this.openViewInNewTabIfNotOpened(
          "803 Slipbox/67fb49c2-05d1-48be-98ce-27b269660957.md"
        );
      }
    });
    this.addCommand({
      id: "open-next_actions",
      name: "Open Next Actions",
      // @ts-ignore
      callback: () => {
        this.openViewInNewTabIfNotOpened("NEXT ACTIONS.md");
      }
    });
    this.addCommand({
      id: "open-someday_maybe",
      name: "Open Someday Maybe",
      // @ts-ignore
      callback: () => {
        this.openViewInNewTabIfNotOpened("SOMEDAY MAYBE.md");
      }
    });
    this.addCommand({
      id: "open-waiting_for",
      name: "Open Waiting For",
      // @ts-ignore
      callback: () => {
        this.openViewInNewTabIfNotOpened("WAITING FOR.md");
      }
    });
    this.addCommand({
      id: "open-todays-log",
      name: "Open Today's Logs",
      // @ts-ignore
      callback: () => {
        const now = new Date();
        const nowIso = now.toISOString().slice(0, 10);
        const pages = this.dv.pages(`"${Paths.Slipbox}"`).where((page) => {
          const fm = new FrontmatterJS(page);
          const cache = this.getFileCacheFromUUID(fm.uuid);
          const nameHeading = this.getResourceName(cache);
          if (nameHeading === void 0) {
            return false;
          }
          if (nameHeading !== nowIso) {
            return false;
          }
          return true;
        });
        if (pages.length === 0) {
          this.generate.permanent(nowIso);
        } else if (pages.length > 1) {
          console.warn(`more than one occurence for ${nowIso}: ${pages.length}`);
          this.openInNewTabIfNotOpened(pages[0]);
        } else {
          this.openInNewTabIfNotOpened(pages[0]);
        }
      }
    });
    this.addCommand({
      id: "check-duplicates",
      name: "Check for Duplicates",
      // @ts-ignore
      callback: () => {
        const res = {};
        let i = 0;
        const pages = this.dv.pages(`"${Paths.Slipbox}"`);
        for (const page of pages) {
          const fm = new FrontmatterJS(page);
          const cache = this.getFileCacheFromUUID(fm.uuid);
          const [start, end] = this.getContentBoundaries(cache);
          const nameHeading = this.getResourceName(
            cache
          );
          if (nameHeading === void 0 || nameHeading === "") {
            continue;
          }
          if (nameHeading.length !== 10 || nameHeading[0] !== "2") {
            continue;
          }
          if (res[nameHeading] === void 0 || res[nameHeading] === null) {
            res[nameHeading] = [fm.uuid];
          } else {
            res[nameHeading].push(fm.uuid);
          }
        }
        const keys = Object.keys(res);
        keys.sort();
        for (const key of keys) {
          if (res[key].length > 1) {
            console.log(key);
            for (const page of res[key]) {
              console.log(`	${page}`);
            }
          }
        }
      }
    });
    this.addCommand({
      id: "open-yesterdays-logs",
      name: "Open Yesterday's Logs",
      // @ts-ignore
      callback: () => {
        const now = new Date();
        now.setDate(now.getDate() - 1);
        const nowIso = now.toISOString().slice(0, 10);
        const pages = this.dv.pages(`"${Paths.Slipbox}"`).where((page) => {
          const fm = new FrontmatterJS(page);
          const cache = this.getFileCacheFromUUID(fm.uuid);
          const [start, end] = this.getContentBoundaries(cache);
          if (start === 0 && end === 0) {
            return false;
          }
          const nameHeading = this.getResourceName(
            cache
          );
          if (nameHeading === void 0) {
            return false;
          }
          if (nameHeading !== nowIso) {
            return false;
          }
          return true;
        });
        if (pages.length === 0) {
          return;
        }
        this.openInNewTabIfNotOpened(pages[0]);
      }
    });
    this.addCommand({
      id: "list-index-content",
      name: "List Index Content",
      // @ts-ignore
      callback: () => {
        const abstractPath = this.app.vault.getAbstractFileByPath("INDEX.md");
        const cache = this.app.metadataCache.getFileCache(abstractPath);
        for (const link of cache.links) {
          console.log(link.displayText);
        }
      }
    });
    this.addCommand({
      id: "open-todays-daily",
      name: "Open Today's Daily",
      // @ts-ignore
      callback: () => {
        const now = new Date();
        const nowIso = now.toISOString().slice(0, 10);
        const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
          if (page.file.frontmatter.at === void 0) {
            return false;
          }
          const fm = new FrontmatterJS(page);
          if (fm.getProject() !== "daily") {
            return false;
          }
          let fmIso = void 0;
          try {
            fmIso = fm.at.toISOString().slice(0, 10);
          } catch (e) {
            console.warn(`possible invalid data in ${fm.uuid}`);
            return false;
          }
          if (fmIso === nowIso) {
            return true;
          }
          return false;
        });
        if (pages.length === 0) {
          return;
        }
        this.openInNewTabIfNotOpened(pages[0]);
      }
    });
    this.addCommand({
      id: "open-tomorrows-daily",
      name: "Open Tomorrow's Daily",
      // @ts-ignore
      callback: () => {
        const now = new Date();
        now.setDate(now.getDate() + 1);
        const nowIso = now.toISOString().slice(0, 10);
        const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
          if (page.file.frontmatter.at === void 0) {
            return false;
          }
          const fm = new FrontmatterJS(page);
          if (fm.getProject() !== "daily") {
            return false;
          }
          let fmIso = void 0;
          try {
            fmIso = fm.at.toISOString().slice(0, 10);
          } catch (e) {
            console.warn(`possible invalid data in ${fm.uuid}`);
            return false;
          }
          if (fmIso === nowIso) {
            return true;
          }
          return false;
        });
        if (pages.length === 0) {
          return;
        }
        this.openInNewTabIfNotOpened(pages[0]);
      }
    });
    this.addCommand({
      id: "open-yesterdays-daily",
      name: "Open Yesterday's Daily",
      // @ts-ignore
      callback: () => {
        const now = new Date();
        now.setDate(now.getDate() - 1);
        const nowIso = now.toISOString().slice(0, 10);
        const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
          if (page.file.frontmatter.at === void 0) {
            return false;
          }
          const fm = new FrontmatterJS(page);
          if (fm.getProject() !== "daily") {
            return false;
          }
          let fmIso = void 0;
          try {
            fmIso = fm.at.toISOString().slice(0, 10);
          } catch (e) {
            console.warn(`possible invalid data in ${fm.uuid}`);
            return false;
          }
          if (fmIso === nowIso) {
            return true;
          }
          return false;
        });
        if (pages.length === 0) {
          return;
        }
        this.openInNewTabIfNotOpened(pages[0]);
      }
    });
    this.addCommand({
      id: "generate-note",
      name: "Generate Note",
      // @ts-ignore
      callback: () => {
        this.generate.permanent();
      }
    });
    this.addCommand({
      id: "generate-action",
      name: "Generate Action",
      // @ts-ignore
      callback: () => {
        this.generate.daily();
      }
    });
    this.addCommand({
      id: "clippy-the-clipper",
      name: "Clippy Clip",
      // @ts-ignore
      callback: () => {
        navigator.clipboard.readText().then((text) => {
          let _id = void 0;
          try {
            _id = this.extractUUIDFromLink(text);
          } catch (e) {
            return;
          }
          const file = this.getFileFromUUID(_id);
          Assert.True(
            file !== void 0,
            `getFileFromUUID: returned undefined for uuid: ${_id}`
          );
          const rootDir = file.path.split("/")[0];
          const authorized = [Paths.Slipbox, Paths.Refs];
          const alias = this.grugAlias(_id);
          const activeLeaf = this.app.workspace.activeLeaf;
          if (activeLeaf) {
            const editor = activeLeaf.view.sourceMode.cmEditor;
            const cursor = editor.getCursor();
            editor.replaceRange(alias, cursor);
          }
        });
      }
    });
    this.addCommand({
      id: "safe-delete",
      name: "Safe Delete",
      // @ts-ignore
      callback: () => {
        const file = this.app.workspace.getActiveFile();
        if (file === void 0) {
          return;
        }
        const safeFromHarm = [
          "INBOX.md",
          "INDEX.md",
          "Logs.md",
          "NEXT ACTIONS.md",
          "SOMEDAY MAYBE.md",
          "WAITING FOR.md",
          "Planning.md"
        ];
        const fm = this.app.metadataCache.getFileCache(file).frontmatter;
        if (safeFromHarm.contains(file.path)) {
          console.log(
            "Oopsie, almost did an oopsie. Got your back bro"
          );
          return;
        }
        if (fm.tags !== void 0 && fm.tags.length >= 0) {
          for (const tag of fm.tags) {
            if (tag === "project/daily") {
              console.log(
                "Hey George What's up George, You cannot do that George"
              );
              return;
            }
          }
        }
        console.log(`deleted file: ${file.path}`);
        this.app.vault.delete(file);
      }
    });
    this.addCommand({
      id: "append-to-inbox",
      name: "Append to Inbox",
      // @ts-ignore
      callback: () => {
        const f = this.app.vault.getAbstractFileByPath("INBOX.md");
        if (f === void 0 || f === null) {
          console.warn(`file not found INBOX.md`);
          return;
        }
        const active = this.app.workspace.getLeaf();
        const root = active.parent;
        let found = false;
        let node = void 0;
        const emptyTabs = [];
        for (const leaf of root.children) {
          const file = this.getFileFromLeaf(leaf);
          if (file === void 0 || file === null) {
            emptyTabs.push(leaf);
            continue;
          }
          if (file.name === f.name) {
            found = true;
            node = leaf;
          }
        }
        if (!found) {
          if (emptyTabs.length > 0) {
            node = emptyTabs[0];
          } else {
            this.app.workspace.createLeafInParent(
              root,
              root.children.length + 1
            );
            node = root.children[root.children.length - 1];
          }
        }
        const editorAction = (node2) => {
          const editor = node2.view.sourceMode.cmEditor;
          editor.insertText("\n\n---\n\n", editor.lastLine());
          editor.setCursor(editor.lastLine(), 0);
        };
        if (this.app.workspace.getActiveFile() === null || this.app.workspace.getActiveFile().name !== "INBOX.md") {
          node.openFile(f, {
            active: true
          }).then((_) => editorAction(node));
        } else {
          editorAction(node);
        }
      }
    });
    this.app.workspace.onLayoutReady(() => {
      console.log("workspace - layout-ready");
      for (const f of this.app.vault.getFiles()) {
        if (!Helper.isUUID(f.basename)) {
          continue;
        }
        this.vaultContentDict[f.basename] = f;
      }
    });
    this.app.metadataCache.on(
      "changed",
      (file, data, cache) => {
        if (Helper.isUUID(file.basename)) {
          this.vaultContentDict[file.basename] = file;
        }
      }
    );
    this.app.workspace.on("active-leaf-change", () => {
      return this.sneakyTabRenamer(this.app);
    });
    this.app.workspace.on("quick-preview", () => {
      return this.sneakyTabRenamer(this.app);
    });
    this.app.workspace.on("resize", () => {
      return this.sneakyTabRenamer(this.app);
    });
  }
  sneakyTabRenamer(app2) {
    const root = app2.workspace.getLeaf().parent;
    for (const leaf of root.children) {
      const file = leaf.view.file;
      if (file === void 0) {
        continue;
      }
      const cache = app2.metadataCache.getFileCache(file);
      const fm = cache.frontmatter;
      if (fm === void 0) {
        continue;
      }
      let text = "";
      if (fm.type === void 0) {
        console.warn(`type undefined for fm: ${fm}`);
        return;
      }
      if (fm.type === 3 && Helper.getProject(fm) === "project/daily") {
        const at = new Date(fm.at);
        text = `${dayShort[at.getDay()]}. ${at.getDate()} ${monthShort[at.getMonth()]}`;
      } else if (fm.type === 2 || fm.type === 1) {
        if (!Helper.nilCheck(fm.alias)) {
          if (typeof fm.alias === "string") {
            text = fm.alias;
          } else {
            for (const alias of fm.alias) {
              if (text.length === 0 || alias.length < text.length) {
                text = alias;
              }
            }
          }
        } else {
          if (cache.headings.length > 0 && cache.headings[0].level === 1) {
            text = cache.headings[0].heading;
          } else if (fm.alias !== void 0) {
            if (Array.isArray(fm.alias) && fm.alias.length > 0) {
              text = cache.frontmatter.alias[0];
            } else {
              text = cache.frontmatter.alias;
            }
          } else {
            text = fm.uuid;
          }
        }
      } else {
      }
      text = text === "" ? fm.uuid : text;
      if (fm.type === 1) {
        text = `(V) ${text}`;
      } else if (fm.type === 2) {
        text = `(N) ${text}`;
      } else if (fm.type === 3) {
        text = `(A) ${text}`;
      } else {
      }
      leaf.tabHeaderInnerTitleEl.innerText = text;
      leaf.tabHeaderInnerTitleEl.innerHTML = text;
    }
  }
  getContentBoundaries(note) {
    let fm = void 0;
    try {
      fm = note.frontmatter;
    } catch (e) {
      return [0, 0];
    }
    let found = false;
    let start = 0;
    let end = 0;
    for (const heading of note.headings) {
      if (heading.level === 2 && heading.heading.toLowerCase() === "content") {
        found = true;
        start = heading.position.end.offset;
        continue;
      }
      if (found && heading.level === 2 && heading.heading.toLowerCase() !== "content") {
        end = heading.position.start.offset;
      }
    }
    Assert.True(found, `Resource does not declares content: ${fm.uuid}`);
    if (end === 0) {
      end = note.sections[note.sections.length - 1].position.end.offset;
    }
    return [start, end];
  }
  getResourceName(cache) {
    let resourceName = "";
    if (cache.headings.length > 0 && cache.headings[0].level === 1) {
      resourceName = cache.headings[0].heading;
    } else if (cache.frontmatter.alias !== void 0) {
      if (Array.isArray(cache.frontmatter.alias) && cache.frontmatter.alias.length > 0) {
        resourceName = cache.frontmatter.alias[0];
      } else {
        resourceName = cache.frontmatter.alias;
      }
    } else {
      resourceName = cache.frontmatter.uuid;
    }
    return resourceName;
  }
  onunload() {
    console.log("gonext - onunload()");
    delete window.gonext;
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJjb25zdGFudHMudHMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9zdHJpbmdpZnkuanMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9ybmcuanMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9uYXRpdmUuanMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92NC5qcyIsICJhcGkudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7XG5cdEFwcCxcblx0TW9kYWwsXG5cdFBsdWdpbixcblx0V29ya3NwYWNlLFxuXHQvLyBAdHMtaWdub3JlXG5cdEhUTUxFbGVtZW50LFxuXHRhZGRJY29uLFxuXHRDYWNoZWRNZXRhZGF0YSxcblx0VEZpbGUsXG5cdFRBYnN0cmFjdEZpbGUsXG59IGZyb20gXCJvYnNpZGlhblwiO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHtcblx0SGVscGVyLFxuXHRGcm9udG1hdHRlcixcblx0TGlzdE1ha2VyLFxuXHQvLyBAdHMtaWdub3JlXG5cdE5hbWVzcGFjZSxcblx0Ly8gQHRzLWlnbm9yZVxuXHRSZW5kZXJlcixcblx0Ly8gQHRzLWlnbm9yZVxuXHRBdXRvRmllbGQsXG5cdC8vIEB0cy1pZ25vcmVcblx0RnJvbnRtYXR0ZXJKUyxcblx0RHZMaWIsXG5cdC8vIEB0cy1pZ25vcmVcblx0R2VuZXJhdG9yLFxuXHQvLyBAdHMtaWdub3JlXG5cdEFzc2VydCxcbn0gZnJvbSBcIi4vYXBpXCI7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBQYXRocywgU3RhdHVzLCBUeXBlcywgTmFtZXNwYWNlLCBEZWZhdWx0IH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5cbmNvbnN0IGRheVNob3J0ID0gW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdO1xuY29uc3QgbW9udGhTaG9ydCA9IFtcblx0XCJKYW5cIixcblx0XCJGZWJcIixcblx0XCJNYXJcIixcblx0XCJBcHJcIixcblx0XCJNYXlcIixcblx0XCJKdW5cIixcblx0XCJKdWxcIixcblx0XCJBdWdcIixcblx0XCJTZXBcIixcblx0XCJPY3RcIixcblx0XCJOb3ZcIixcblx0XCJEZWNcIixcbl07XG5cbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxuaW50ZXJmYWNlIE15UGx1Z2luU2V0dGluZ3Mge1xuXHRteVNldHRpbmc6IHN0cmluZztcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTXlQbHVnaW5TZXR0aW5ncyA9IHtcblx0bXlTZXR0aW5nOiBcImRlZmF1bHRcIixcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE15UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3M7XG5cdHdvcmtzcGFjZTogV29ya3NwYWNlO1xuXHRtZXRhZGF0YUNhY2hlOiBhbnk7XG5cdGR2OiBhbnk7XG5cdC8vIEB0cy1pZ25vcmVcblx0cmVuZGVyOiBSZW5kZXI7XG5cdGRlYnVnOiBib29sZWFuO1xuXHR0YXNrSW5TdGF0dXNCYXI6IEhUTUxFbGVtZW50O1xuXHRhcGk6IGFueTtcblx0bGlzdE1ha2VyOiBMaXN0TWFrZXI7XG5cdGZyb250bWF0dGVyOiBGcm9udG1hdHRlcjtcblx0Z2VuZXJhdGU6IEdlbmVyYXRvcjtcblx0dmF1bHRDb250ZW50OiBURmlsZVtdID0gW107XG5cdHZhdWx0Q29udGVudERpY3Q6IHsgW2lkOiBzdHJpbmddOiBURmlsZSB9ID0ge307XG5cblx0b3BlblZpZXdJbk5ld1RhYklmTm90T3BlbmVkKG5hbWU6IHN0cmluZykge1xuXHRcdGNvbnN0IGYgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5hbWUpO1xuXHRcdGlmIChmID09PSB1bmRlZmluZWQgfHwgZiA9PT0gbnVsbCkge1xuXHRcdFx0Y29uc29sZS53YXJuKGBmaWxlIG5vdCBmb3VuZCAke25hbWV9YCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgYWN0aXZlID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnN0IHJvb3QgPSBhY3RpdmUucGFyZW50O1xuXHRcdC8vIHJlY2hlcmNoZXIgc2kgcGFzIGRcdTAwRTlqYSBvdXZlcnQgZGFucyBsZXMgb25nbGV0cyBhY3RpZnNcblx0XHQvLyBzaW5vbiBjclx1MDBFOWVyIHVuIG5vdXZlbCBvbmdsZXQsIG91dnJpciBsZSBmaWNoaWVyLCBldCBlbiBmYWlyZSBsJ29uZ2xldCBhY3RpZlxuXHRcdGxldCBmb3VuZCA9IGZhbHNlO1xuXHRcdGxldCBub2RlID0gdW5kZWZpbmVkO1xuXHRcdGNvbnN0IGVtcHR5VGFicyA9IFtdO1xuXG5cdFx0Zm9yIChjb25zdCBsZWFmIG9mIHJvb3QuY2hpbGRyZW4pIHtcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmdldEZpbGVGcm9tTGVhZihsZWFmKTtcblx0XHRcdGlmIChmaWxlID09PSB1bmRlZmluZWQgfHwgZmlsZSA9PT0gbnVsbCkge1xuXHRcdFx0XHRlbXB0eVRhYnMucHVzaChsZWFmKTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChmaWxlLm5hbWUgPT09IGYubmFtZSkge1xuXHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHRcdG5vZGUgPSBsZWFmO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIWZvdW5kKSB7XG5cdFx0XHRpZiAoZW1wdHlUYWJzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0bm9kZSA9IGVtcHR5VGFic1swXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5jcmVhdGVMZWFmSW5QYXJlbnQoXG5cdFx0XHRcdFx0cm9vdCxcblx0XHRcdFx0XHRyb290LmNoaWxkcmVuLmxlbmd0aCArIDEsXG5cdFx0XHRcdCk7XG5cdFx0XHRcdG5vZGUgPSByb290LmNoaWxkcmVuW3Jvb3QuY2hpbGRyZW4ubGVuZ3RoIC0gMV07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bm9kZS5vcGVuRmlsZShmLCB7XG5cdFx0XHRhY3RpdmU6IHRydWUsXG5cdFx0fSk7XG5cdH1cblxuXHRvcGVuSW5OZXdUYWJJZk5vdE9wZW5lZChwYWdlKSB7XG5cdFx0Y29uc3QgYWN0aXZlID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnN0IHJvb3QgPSBhY3RpdmUucGFyZW50O1xuXHRcdC8vIHJlY2hlcmNoZXIgc2kgcGFzIGRcdTAwRTlqYSBvdXZlcnQgZGFucyBsZXMgb25nbGV0cyBhY3RpZnNcblx0XHQvLyBzaW5vbiBjclx1MDBFOWVyIHVuIG5vdXZlbCBvbmdsZXQsIG91dnJpciBsZSBmaWNoaWVyLCBldCBlbiBmYWlyZSBsJ29uZ2xldCBhY3RpZlxuXHRcdGxldCBmb3VuZCA9IGZhbHNlO1xuXHRcdGxldCBub2RlID0gdW5kZWZpbmVkO1xuXHRcdGNvbnN0IGVtcHR5VGFicyA9IFtdO1xuXG5cdFx0Zm9yIChjb25zdCBsZWFmIG9mIHJvb3QuY2hpbGRyZW4pIHtcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmdldEZpbGVDYWNoZUZyb21MZWFmKGxlYWYpO1xuXHRcdFx0aWYgKGZpbGUgPT09IHVuZGVmaW5lZCB8fCBmaWxlID09PSBudWxsKSB7XG5cdFx0XHRcdGVtcHR5VGFicy5wdXNoKGxlYWYpO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKFxuXHRcdFx0XHRmaWxlLmZyb250bWF0dGVyICE9PSB1bmRlZmluZWQgJiZcblx0XHRcdFx0ZmlsZS5mcm9udG1hdHRlci51dWlkID09PSBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIudXVpZFxuXHRcdFx0KSB7XG5cdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0bm9kZSA9IGxlYWY7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICghZm91bmQpIHtcblx0XHRcdGlmIChlbXB0eVRhYnMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRub2RlID0gZW1wdHlUYWJzWzBdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmNyZWF0ZUxlYWZJblBhcmVudChcblx0XHRcdFx0XHRyb290LFxuXHRcdFx0XHRcdHJvb3QuY2hpbGRyZW4ubGVuZ3RoICsgMSxcblx0XHRcdFx0KTtcblx0XHRcdFx0bm9kZSA9IHJvb3QuY2hpbGRyZW5bcm9vdC5jaGlsZHJlbi5sZW5ndGggLSAxXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRub2RlLm9wZW5GaWxlKHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYWdlLmZpbGUucGF0aCksIHtcblx0XHRcdGFjdGl2ZTogdHJ1ZSxcblx0XHR9KTtcblx0fVxuXG5cdGdldEZpbGVDYWNoZUZyb21MZWFmKGxlYWYpOiBDYWNoZWRNZXRhZGF0YSB7XG5cdFx0bGV0IGZpbGUgPSB1bmRlZmluZWQ7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGZpbGUgPSBsZWFmLnZpZXcuZmlsZTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmIChmaWxlID09PSB1bmRlZmluZWQgfHwgZmlsZSA9PT0gbnVsbCkge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnN0IGFic3RyYWN0UGF0aCA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZSk7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdHJldHVybiBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWJzdHJhY3RQYXRoKTtcblx0fVxuXG5cdGdldEZpbGVGcm9tTGVhZihsZWFmKTogVEFic3RyYWN0RmlsZSB7XG5cdFx0bGV0IGZpbGUgPSB1bmRlZmluZWQ7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGZpbGUgPSBsZWFmLnZpZXcuZmlsZTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHRyZXR1cm4gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGUpO1xuXHR9XG5cblx0ZXh0cmFjdFVVSURGcm9tTGluayhsaW5rOiBzdHJpbmcpIHtcblx0XHRBc3NlcnQuVHJ1ZShcblx0XHRcdGxpbmsubGVuZ3RoID49IDM2LFxuXHRcdFx0YGV4dHJhY3RVVUlERnJvbUxpbms6IEludmFsaWQgcGFyYW1ldGVyIHR5cGU6IGxpbms6IFwiJHtsaW5rfVwiYCxcblx0XHQpO1xuXG5cdFx0Ly8gYXQgdGhpcyBwb2ludCBsaW5rIGlzIGVpdGhlciBmb3JtIHV1aWQjaGVhZGluZyB8fCBpbnZhbGlkXG5cdFx0Ly8gd2UgY2FuIHNhZmVseSBhc3N1bWUgMDozNiBpcyB0aGUgdXVpZFxuXHRcdEFzc2VydC5UcnVlKFxuXHRcdFx0SGVscGVyLmlzVVVJRChsaW5rLnNsaWNlKDAsIDM2KSksXG5cdFx0XHRgZXh0cmFjdFVVSURGcm9tTGluazogSW52YWxpZCBwYXJhbWV0ZXIgdHlwZTogbGluazogXCIke2xpbmt9XCJgLFxuXHRcdCk7XG5cdFx0aWYgKGxpbmsubGVuZ3RoID09PSAzNikge1xuXHRcdFx0cmV0dXJuIGxpbms7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBsaW5rLnNsaWNlKDAsIDM2KTtcblx0XHR9XG5cdH1cblxuXHRncnVnQWxpYXMoX2lkOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGNvbnN0IGNhY2hlID0gdGhpcy5nZXRGaWxlQ2FjaGVGcm9tVVVJRChfaWQpO1xuXHRcdGlmIChjYWNoZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGBncnVnQWxpYXM6IGZpbGUgbm90IGZvdW5kIGluIGdydWcgY2FjaGUgJHtfaWR9YCk7XG5cdFx0XHRyZXR1cm4gXCJcIjtcblx0XHR9XG5cblx0XHRjb25zb2xlLmxvZyhjYWNoZSk7XG5cdFx0Y29uc29sZS5sb2coKTtcblx0XHQvLyBjb25zdCBbc3RhcnQsIGVuZF0gPSB0aGlzLmdldENvbnRlbnRCb3VuZGFyaWVzKGNhY2hlKTtcblx0XHQvLyB3aGF0IGlzIHRoZSBuYW1pbmcgcHJlZmVyZW5jZT9cblx0XHQvLyBhbGlhcyA+IG5hbWUgaGVhZGluZ1xuXHRcdGxldCB0YXJnZXROYW1lID0gdW5kZWZpbmVkO1xuXHRcdGNvbnN0IGZtID0gY2FjaGUuZnJvbnRtYXR0ZXI7XG5cblx0XHRpZiAoY2FjaGUuaGVhZGluZ3MubGVuZ3RoID4gMCAmJiBjYWNoZS5oZWFkaW5nc1swXS5sZXZlbCA9PT0gMSkge1xuXHRcdFx0dGFyZ2V0TmFtZSA9IGNhY2hlLmhlYWRpbmdzWzBdLmhlYWRpbmc7XG5cdFx0fSBlbHNlIGlmIChmbS5hbGlhcyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheShmbS5hbGlhcykgJiYgZm0uYWxpYXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHQvLyBwcm9ibGVtIGF0aGVpc3RzP1xuXHRcdFx0XHR0YXJnZXROYW1lID0gY2FjaGUuZnJvbnRtYXR0ZXIuYWxpYXNbMF07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0YXJnZXROYW1lID0gY2FjaGUuZnJvbnRtYXR0ZXIuYWxpYXM7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRhcmdldE5hbWUgPSBfaWQ7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMuZ2V0RmlsZUZyb21VVUlEKF9pZCk7XG5cdFx0aWYgKGZpbGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Y29uc29sZS5lcnJvcihgZ3J1Z0FsaWFzOiBDYW5ub3QgZ3J1ZyB0aGlzIGlkOiAke19pZH1gKTtcblx0XHRcdHJldHVybiBcIlwiO1xuXHRcdH1cblx0XHRjb25zdCBwYXRoID0gYCR7ZmlsZS5wYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSl9LyR7X2lkfWA7XG5cblx0XHRyZXR1cm4gYFtbJHtwYXRofXwke3RhcmdldE5hbWV9XV1gO1xuXHR9XG5cblx0Z2V0RmlsZUZyb21VVUlEKF9pZDogc3RyaW5nKTogVEFic3RyYWN0RmlsZSB7XG5cdFx0cmV0dXJuIHRoaXMudmF1bHRDb250ZW50RGljdFtfaWRdO1xuXHR9XG5cblx0Z2V0RmlsZUNhY2hlRnJvbVVVSUQoX2lkOiBzdHJpbmcpOiBDYWNoZWRNZXRhZGF0YSB7XG5cdFx0Y29uc3QgZiA9IHRoaXMudmF1bHRDb250ZW50RGljdFtfaWRdO1xuXHRcdGlmIChmID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmKTtcblx0fVxuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRjb25zb2xlLmxvZyhcImdvbmV4dCAtIG9ubG9hZCgpXCIpO1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cdFx0dGhpcy5tZXRhZGF0YUNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZTtcblx0XHR0aGlzLndvcmtzcGFjZSA9IHRoaXMuYXBwLndvcmtzcGFjZTtcblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0dGhpcy5kdiA9IHRoaXMuYXBwLnBsdWdpbnMucGx1Z2lucy5kYXRhdmlldy5hcGk7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdHRoaXMuZnJvbnRtYXR0ZXIgPSBuZXcgRnJvbnRtYXR0ZXIodGhpcyk7XG5cdFx0dGhpcy5saXN0TWFrZXIgPSBuZXcgTGlzdE1ha2VyKHRoaXMsIHRoaXMuZHYsIHRoaXMuZnJvbnRtYXR0ZXIpO1xuXHRcdHRoaXMuZ2VuZXJhdGUgPSBuZXcgR2VuZXJhdG9yKHRoaXMuYXBwKTtcblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0dGhpcy5maWxlcyA9IHt9O1xuXG5cdFx0dGhpcy5hcGkgPSB7XG5cdFx0XHRnZXRBcmVhOiBIZWxwZXIuZ2V0QXJlYSxcblx0XHRcdGdldENvbnRleHQ6IEhlbHBlci5nZXRDb250ZXh0LFxuXHRcdFx0Z2V0RG9tYWluOiBIZWxwZXIuZ2V0RG9tYWluLFxuXHRcdFx0Z2V0TGF5ZXI6IEhlbHBlci5nZXRMYXllcixcblx0XHRcdGdldE9yZzogSGVscGVyLmdldE9yZyxcblx0XHRcdGdldFByb2plY3Q6IEhlbHBlci5nZXRQcm9qZWN0LFxuXHRcdFx0ZHVyYXRpb25TdHJpbmdUb1NlYzogSGVscGVyLmR1cmF0aW9uU3RyaW5nVG9TZWMsXG5cdFx0XHRwYXRoczogUGF0aHMsXG5cdFx0XHR0eXBlczogVHlwZXMsXG5cdFx0XHRzdGF0dXM6IFN0YXR1cyxcblx0XHRcdG5hbWVzcGFjZTogTmFtZXNwYWNlLFxuXHRcdFx0ZGVmYXVsdDogRGVmYXVsdCxcblx0XHRcdGZyb250bWF0dGVyOiB0aGlzLmZyb250bWF0dGVyLFxuXHRcdFx0bGlzdE1ha2VyOiB0aGlzLmxpc3RNYWtlcixcblx0XHRcdHJlbmRlcmVyOiBSZW5kZXJlcixcblx0XHRcdGF1dG9GaWVsZDogQXV0b0ZpZWxkLFxuXHRcdFx0ZHZMaWI6IG5ldyBEdkxpYigpLFxuXHRcdFx0RnJvbnRtYXR0ZXJKUzogRnJvbnRtYXR0ZXJKUyxcblx0XHR9O1xuXG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdHdpbmRvdy5nb25leHQgPSB7XG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRzdGF0ZTogd2luZG93LmdvbmV4dD8uc3RhdGUgPz8ge30sXG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRhcHA6IHRoaXMuYXBwLFxuXHRcdH07XG5cdFx0YWRkSWNvbihcblx0XHRcdFwiR29OZXh0SWNvblwiLFxuXHRcdFx0YDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMzJcIiBoZWlnaHQ9XCIzMlwiIHZpZXdCb3g9XCIwIDAgMzIgMzJcIj48cGF0aCBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0yMCAxMlYyaDJ2MTB6bTQgMFYyaDJ2MTB6bTQgMFYyaDJ2MTB6bS0xMiA4YTMuOTEyIDMuOTEyIDAgMCAxLTQtNGEzLjkxMiAzLjkxMiAwIDAgMSA0LTR2LTJhNiA2IDAgMSAwIDYgNmgtMmEzLjkxMiAzLjkxMiAwIDAgMS00IDRcIj48L3BhdGg+PHBhdGggZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNMjguODkzIDE4LjQ1NEwyNi4wOTggMTZsLTEuMzE4IDEuNTA0bDIuNzkyIDIuNDUybC0yLjM2IDQuMDg4bC0zLjQyNy0xLjE2YTkuMDMyIDkuMDMyIDAgMCAxLTIuNzE0IDEuNTY1TDE4LjM2IDI4aC00LjcybC0uNzEtMy41NWE5LjA5NSA5LjA5NSAwIDAgMS0yLjY5NS0xLjU3MmwtMy40NDcgMS4xNjZsLTIuMzYtNC4wODhsMi43MjUtMi4zOTVhOC45MjYgOC45MjYgMCAwIDEtLjAwNy0zLjEyOGwtMi43MTgtMi4zOWwyLjM2LTQuMDg3bDMuNDI3IDEuMTZBOS4wMyA5LjAzIDAgMCAxIDEyLjkzIDcuNTVMMTMuNjQgNEgxNlYyaC0yLjM2YTIgMiAwIDAgMC0xLjk2MSAxLjYwOGwtLjUwNCAyLjUxOWExMC45NjcgMTAuOTY3IDAgMCAwLTEuMzI3Ljc1M2wtMi40Mi0uODE5YTEuOTk4IDEuOTk4IDAgMCAwLTIuMzcyLjg5NWwtMi4zNiA0LjA4OGEyIDIgMCAwIDAgLjQxMSAyLjUwMmwxLjkzMSAxLjY5N0M1LjAyMSAxNS40OTUgNSAxNS43NDUgNSAxNmMwIC4yNTguMDEuNTEzLjAyOC43NjZsLTEuOTIgMS42ODhhMiAyIDAgMCAwLS40MTMgMi41MDJsMi4zNiA0LjA4OGExLjk5OCAxLjk5OCAwIDAgMCAyLjM3NC44OTVsMi40MzQtLjgyNGExMC45NzQgMTAuOTc0IDAgMCAwIDEuMzEyLjc1OWwuNTAzIDIuNTE4QTIgMiAwIDAgMCAxMy42NCAzMGg0LjcyYTIgMiAwIDAgMCAxLjk2MS0xLjYwOGwuNTA0LTIuNTE5YTEwLjk2NyAxMC45NjcgMCAwIDAgMS4zMjctLjc1M2wyLjQxOS44MThhMS45OTggMS45OTggMCAwIDAgMi4zNzMtLjg5NGwyLjM2LTQuMDg4YTIgMiAwIDAgMC0uNDExLTIuNTAyXCI+PC9wYXRoPjwvc3ZnPmAsXG5cdFx0KTtcblxuXHRcdC8vIHRoaXMuYWRkUmliYm9uSWNvbihcIkdvTmV4dEljb25cIiwgXCJbZ11vW25dZXh0XCIsIGFzeW5jICgpID0+IHtcblx0XHQvLyAgIHRoaXMuZ2VuZXJhdGUuZmxlZXRpbmcoKTtcblx0XHQvLyB9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJvcGVuLWluZGV4XCIsXG5cdFx0XHRuYW1lOiBcIk9wZW4gSW5kZXhcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdHRoaXMub3BlblZpZXdJbk5ld1RhYklmTm90T3BlbmVkKFwiSU5ERVgubWRcIik7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJvcGVuLWluYm94XCIsXG5cdFx0XHRuYW1lOiBcIk9wZW4gSW5ib3hcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdHRoaXMub3BlblZpZXdJbk5ld1RhYklmTm90T3BlbmVkKFwiSU5CT1gubWRcIik7XG5cdFx0XHRcdC8vIGFwcC5jb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQoJ21hcmtkb3duOnRvZ2dsZS1wcmV2aWV3Jyk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJvcGVuLXByb2plY3RzXCIsXG5cdFx0XHRuYW1lOiBcIk9wZW4gUHJvamVjdHNcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdHRoaXMub3BlblZpZXdJbk5ld1RhYklmTm90T3BlbmVkKFxuXHRcdFx0XHRcdFwiODAzIFNsaXBib3gvNjY0ZGM4NTUtZWFiZS00MGRjLTkwYjgtMDA2MjIzNDU3OTUzLm1kXCIsXG5cdFx0XHRcdCk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJvcGVuLXBsYW5uaW5nXCIsXG5cdFx0XHRuYW1lOiBcIk9wZW4gUGxhbm5pbmdcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdHRoaXMub3BlblZpZXdJbk5ld1RhYklmTm90T3BlbmVkKFwiUGxhbm5pbmcubWRcIik7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJvcGVuLWpvdXJuYWxcIixcblx0XHRcdG5hbWU6IFwiT3BlbiBKb3VybmFsXCIsXG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHR0aGlzLm9wZW5WaWV3SW5OZXdUYWJJZk5vdE9wZW5lZChcblx0XHRcdFx0XHRcIjgwMyBTbGlwYm94LzY3ZmI0OWMyLTA1ZDEtNDhiZS05OGNlLTI3YjI2OTY2MDk1Ny5tZFwiLFxuXHRcdFx0XHQpO1xuXHRcdFx0fSxcblx0XHR9KTtcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwib3Blbi1uZXh0X2FjdGlvbnNcIixcblx0XHRcdG5hbWU6IFwiT3BlbiBOZXh0IEFjdGlvbnNcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdHRoaXMub3BlblZpZXdJbk5ld1RhYklmTm90T3BlbmVkKFwiTkVYVCBBQ1RJT05TLm1kXCIpO1xuXHRcdFx0fSxcblx0XHR9KTtcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwib3Blbi1zb21lZGF5X21heWJlXCIsXG5cdFx0XHRuYW1lOiBcIk9wZW4gU29tZWRheSBNYXliZVwiLFxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0dGhpcy5vcGVuVmlld0luTmV3VGFiSWZOb3RPcGVuZWQoXCJTT01FREFZIE1BWUJFLm1kXCIpO1xuXHRcdFx0fSxcblx0XHR9KTtcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwib3Blbi13YWl0aW5nX2ZvclwiLFxuXHRcdFx0bmFtZTogXCJPcGVuIFdhaXRpbmcgRm9yXCIsXG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHR0aGlzLm9wZW5WaWV3SW5OZXdUYWJJZk5vdE9wZW5lZChcIldBSVRJTkcgRk9SLm1kXCIpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJvcGVuLXRvZGF5cy1sb2dcIixcblx0XHRcdG5hbWU6IFwiT3BlbiBUb2RheSdzIExvZ3NcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG5cdFx0XHRcdGNvbnN0IG5vd0lzbyA9IG5vdy50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcblx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRjb25zdCBwYWdlcyA9IHRoaXMuZHZcblx0XHRcdFx0XHQucGFnZXMoYFwiJHtQYXRocy5TbGlwYm94fVwiYClcblx0XHRcdFx0XHQud2hlcmUoKHBhZ2UpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG5cdFx0XHRcdFx0XHRjb25zdCBjYWNoZSA9IHRoaXMuZ2V0RmlsZUNhY2hlRnJvbVVVSUQoZm0udXVpZCk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IG5hbWVIZWFkaW5nID0gdGhpcy5nZXRSZXNvdXJjZU5hbWUoY2FjaGUpO1xuXHRcdFx0XHRcdFx0aWYgKG5hbWVIZWFkaW5nID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAobmFtZUhlYWRpbmcgIT09IG5vd0lzbykge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGlmIChwYWdlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHQvLyBjcmVhdGUgcGVybWFuZW50XG5cdFx0XHRcdFx0dGhpcy5nZW5lcmF0ZS5wZXJtYW5lbnQobm93SXNvKTtcblx0XHRcdFx0fSBlbHNlIGlmIChwYWdlcy5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKGBtb3JlIHRoYW4gb25lIG9jY3VyZW5jZSBmb3IgJHtub3dJc299OiAke3BhZ2VzLmxlbmd0aH1gKVxuXHRcdFx0XHRcdHRoaXMub3BlbkluTmV3VGFiSWZOb3RPcGVuZWQocGFnZXNbMF0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMub3BlbkluTmV3VGFiSWZOb3RPcGVuZWQocGFnZXNbMF0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiY2hlY2stZHVwbGljYXRlc1wiLFxuXHRcdFx0bmFtZTogXCJDaGVjayBmb3IgRHVwbGljYXRlc1wiLFxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0Y29uc3QgcmVzID0ge307XG5cdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0bGV0IGkgPSAwO1xuXHRcdFx0XHRjb25zdCBwYWdlcyA9IHRoaXMuZHYucGFnZXMoYFwiJHtQYXRocy5TbGlwYm94fVwiYCk7XG5cdFx0XHRcdGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuXHRcdFx0XHRcdGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG5cdFx0XHRcdFx0Y29uc3QgY2FjaGUgPSB0aGlzLmdldEZpbGVDYWNoZUZyb21VVUlEKGZtLnV1aWQpO1xuXHRcdFx0XHRcdGNvbnN0IFtzdGFydCwgZW5kXSA9IHRoaXMuZ2V0Q29udGVudEJvdW5kYXJpZXMoY2FjaGUpO1xuXHRcdFx0XHRcdGNvbnN0IG5hbWVIZWFkaW5nID0gdGhpcy5nZXRSZXNvdXJjZU5hbWUoXG5cdFx0XHRcdFx0XHRjYWNoZSxcblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0aWYgKG5hbWVIZWFkaW5nID09PSB1bmRlZmluZWQgfHwgbmFtZUhlYWRpbmcgPT09IFwiXCIpIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIGlzIG5vdCBkYXRlIGZvcm1hdFxuXHRcdFx0XHRcdGlmIChuYW1lSGVhZGluZy5sZW5ndGggIT09IDEwIHx8IG5hbWVIZWFkaW5nWzBdICE9PSBcIjJcIikge1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKHJlc1tuYW1lSGVhZGluZ10gPT09IHVuZGVmaW5lZCB8fCByZXNbbmFtZUhlYWRpbmddID09PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRyZXNbbmFtZUhlYWRpbmddID0gW2ZtLnV1aWRdO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXNbbmFtZUhlYWRpbmddLnB1c2goZm0udXVpZCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocmVzKTtcblx0XHRcdFx0a2V5cy5zb3J0KCk7XG5cdFx0XHRcdGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcblx0XHRcdFx0XHRpZiAocmVzW2tleV0ubGVuZ3RoID4gMSkge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coa2V5KTtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgcGFnZSBvZiByZXNba2V5XSkge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgXHQke3BhZ2V9YCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcIm9wZW4teWVzdGVyZGF5cy1sb2dzXCIsXG5cdFx0XHRuYW1lOiBcIk9wZW4gWWVzdGVyZGF5J3MgTG9nc1wiLFxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0Y29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblx0XHRcdFx0bm93LnNldERhdGUobm93LmdldERhdGUoKSAtIDEpO1xuXHRcdFx0XHRjb25zdCBub3dJc28gPSBub3cudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG5cdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0Y29uc3QgcGFnZXMgPSB0aGlzLmR2XG5cdFx0XHRcdFx0LnBhZ2VzKGBcIiR7UGF0aHMuU2xpcGJveH1cImApXG5cdFx0XHRcdFx0LndoZXJlKChwYWdlKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuXHRcdFx0XHRcdFx0Y29uc3QgY2FjaGUgPSB0aGlzLmdldEZpbGVDYWNoZUZyb21VVUlEKGZtLnV1aWQpO1xuXHRcdFx0XHRcdFx0Y29uc3QgW3N0YXJ0LCBlbmRdID0gdGhpcy5nZXRDb250ZW50Qm91bmRhcmllcyhjYWNoZSk7XG5cdFx0XHRcdFx0XHRpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNvbnN0IG5hbWVIZWFkaW5nID0gdGhpcy5nZXRSZXNvdXJjZU5hbWUoXG5cdFx0XHRcdFx0XHRcdGNhY2hlLFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGlmIChuYW1lSGVhZGluZyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChuYW1lSGVhZGluZyAhPT0gbm93SXNvKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vIHRoaXMuZ2V0UmVzb3VyY2VOYW1lXG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpZiAocGFnZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5vcGVuSW5OZXdUYWJJZk5vdE9wZW5lZChwYWdlc1swXSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImxpc3QtaW5kZXgtY29udGVudFwiLFxuXHRcdFx0bmFtZTogXCJMaXN0IEluZGV4IENvbnRlbnRcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0Y29uc3QgYWJzdHJhY3RQYXRoID1cblx0XHRcdFx0XHR0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJTkRFWC5tZFwiKTtcblx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFic3RyYWN0UGF0aCk7XG5cdFx0XHRcdGZvciAoY29uc3QgbGluayBvZiBjYWNoZS5saW5rcykge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGxpbmsuZGlzcGxheVRleHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcIm9wZW4tdG9kYXlzLWRhaWx5XCIsXG5cdFx0XHRuYW1lOiBcIk9wZW4gVG9kYXkncyBEYWlseVwiLFxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0Y29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblx0XHRcdFx0Y29uc3Qgbm93SXNvID0gbm93LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuXHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdGNvbnN0IHBhZ2VzID0gdGhpcy5kdlxuXHRcdFx0XHRcdC5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfVwiYClcblx0XHRcdFx0XHQud2hlcmUoKHBhZ2UpID0+IHtcblx0XHRcdFx0XHRcdGlmIChwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuYXQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIGFzc2lnbiBub3cgc2kgYXQgPT09IHVuZGVmaW5lZFxuXHRcdFx0XHRcdFx0Y29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcblx0XHRcdFx0XHRcdGlmIChmbS5nZXRQcm9qZWN0KCkgIT09IFwiZGFpbHlcIikge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGxldCBmbUlzbyA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGZtSXNvID0gZm0uYXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKGBwb3NzaWJsZSBpbnZhbGlkIGRhdGEgaW4gJHtmbS51dWlkfWApO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChmbUlzbyA9PT0gbm93SXNvKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYgKHBhZ2VzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMub3BlbkluTmV3VGFiSWZOb3RPcGVuZWQocGFnZXNbMF0pO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJvcGVuLXRvbW9ycm93cy1kYWlseVwiLFxuXHRcdFx0bmFtZTogXCJPcGVuIFRvbW9ycm93J3MgRGFpbHlcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG5cdFx0XHRcdG5vdy5zZXREYXRlKG5vdy5nZXREYXRlKCkgKyAxKTtcblx0XHRcdFx0Y29uc3Qgbm93SXNvID0gbm93LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuXHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cblx0XHRcdFx0Y29uc3QgcGFnZXMgPSB0aGlzLmR2XG5cdFx0XHRcdFx0LnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKVxuXHRcdFx0XHRcdC53aGVyZSgocGFnZSkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHBhZ2UuZmlsZS5mcm9udG1hdHRlci5hdCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gYXNzaWduIG5vdyBzaSBhdCA9PT0gdW5kZWZpbmVkXG5cdFx0XHRcdFx0XHRjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuXHRcdFx0XHRcdFx0aWYgKGZtLmdldFByb2plY3QoKSAhPT0gXCJkYWlseVwiKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0bGV0IGZtSXNvID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0Zm1Jc28gPSBmbS5hdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oYHBvc3NpYmxlIGludmFsaWQgZGF0YSBpbiAke2ZtLnV1aWR9YCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKGZtSXNvID09PSBub3dJc28pIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpZiAocGFnZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5vcGVuSW5OZXdUYWJJZk5vdE9wZW5lZChwYWdlc1swXSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcIm9wZW4teWVzdGVyZGF5cy1kYWlseVwiLFxuXHRcdFx0bmFtZTogXCJPcGVuIFllc3RlcmRheSdzIERhaWx5XCIsXG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuXHRcdFx0XHRub3cuc2V0RGF0ZShub3cuZ2V0RGF0ZSgpIC0gMSk7XG5cdFx0XHRcdGNvbnN0IG5vd0lzbyA9IG5vdy50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcblx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXG5cdFx0XHRcdGNvbnN0IHBhZ2VzID0gdGhpcy5kdlxuXHRcdFx0XHRcdC5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfVwiYClcblx0XHRcdFx0XHQud2hlcmUoKHBhZ2UpID0+IHtcblx0XHRcdFx0XHRcdGlmIChwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuYXQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIGFzc2lnbiBub3cgc2kgYXQgPT09IHVuZGVmaW5lZFxuXHRcdFx0XHRcdFx0Y29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcblx0XHRcdFx0XHRcdGlmIChmbS5nZXRQcm9qZWN0KCkgIT09IFwiZGFpbHlcIikge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGxldCBmbUlzbyA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGZtSXNvID0gZm0uYXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKGBwb3NzaWJsZSBpbnZhbGlkIGRhdGEgaW4gJHtmbS51dWlkfWApO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChmbUlzbyA9PT0gbm93SXNvKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYgKHBhZ2VzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMub3BlbkluTmV3VGFiSWZOb3RPcGVuZWQocGFnZXNbMF0pO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJnZW5lcmF0ZS1ub3RlXCIsXG5cdFx0XHRuYW1lOiBcIkdlbmVyYXRlIE5vdGVcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuZ2VuZXJhdGUucGVybWFuZW50KCk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImdlbmVyYXRlLWFjdGlvblwiLFxuXHRcdFx0bmFtZTogXCJHZW5lcmF0ZSBBY3Rpb25cIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuZ2VuZXJhdGUuZGFpbHkoKTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiY2xpcHB5LXRoZS1jbGlwcGVyXCIsXG5cdFx0XHRuYW1lOiBcIkNsaXBweSBDbGlwXCIsXG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCkudGhlbigodGV4dCkgPT4ge1xuXHRcdFx0XHRcdGxldCBfaWQgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdF9pZCA9IHRoaXMuZXh0cmFjdFVVSURGcm9tTGluayh0ZXh0KTtcblx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuZ2V0RmlsZUZyb21VVUlEKF9pZCk7XG5cdFx0XHRcdFx0QXNzZXJ0LlRydWUoXG5cdFx0XHRcdFx0XHRmaWxlICE9PSB1bmRlZmluZWQsXG5cdFx0XHRcdFx0XHRgZ2V0RmlsZUZyb21VVUlEOiByZXR1cm5lZCB1bmRlZmluZWQgZm9yIHV1aWQ6ICR7X2lkfWAsXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRjb25zdCByb290RGlyID0gZmlsZS5wYXRoLnNwbGl0KFwiL1wiKVswXTtcblx0XHRcdFx0XHRjb25zdCBhdXRob3JpemVkID0gW1BhdGhzLlNsaXBib3gsIFBhdGhzLlJlZnNdO1xuXHRcdFx0XHRcdGNvbnN0IGFsaWFzID0gdGhpcy5ncnVnQWxpYXMoX2lkKTtcblx0XHRcdFx0XHQvLyBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChhbGlhcykudGhlbigoKSA9PiB7Y29uc29sZS5sb2coXCJjb3Vjb3UsIGV0YyBldGNcIil9KTtcblx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdFx0Y29uc3QgYWN0aXZlTGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmO1xuXHRcdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0XHRpZiAoYWN0aXZlTGVhZikge1xuXHRcdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRcdFx0Y29uc3QgZWRpdG9yID0gYWN0aXZlTGVhZi52aWV3LnNvdXJjZU1vZGUuY21FZGl0b3I7XG5cdFx0XHRcdFx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG5cdFx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKGFsaWFzLCBjdXJzb3IpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwic2FmZS1kZWxldGVcIixcblx0XHRcdG5hbWU6IFwiU2FmZSBEZWxldGVcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdFx0XHRpZiAoZmlsZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3Qgc2FmZUZyb21IYXJtID0gW1xuXHRcdFx0XHRcdFwiSU5CT1gubWRcIixcblx0XHRcdFx0XHRcIklOREVYLm1kXCIsXG5cdFx0XHRcdFx0XCJMb2dzLm1kXCIsXG5cdFx0XHRcdFx0XCJORVhUIEFDVElPTlMubWRcIixcblx0XHRcdFx0XHRcIlNPTUVEQVkgTUFZQkUubWRcIixcblx0XHRcdFx0XHRcIldBSVRJTkcgRk9SLm1kXCIsXG5cdFx0XHRcdFx0XCJQbGFubmluZy5tZFwiLFxuXHRcdFx0XHRdO1xuXHRcdFx0XHRjb25zdCBmbSA9XG5cdFx0XHRcdFx0dGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSkuZnJvbnRtYXR0ZXI7XG5cdFx0XHRcdGlmIChzYWZlRnJvbUhhcm0uY29udGFpbnMoZmlsZS5wYXRoKSkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFxuXHRcdFx0XHRcdFx0XCJPb3BzaWUsIGFsbW9zdCBkaWQgYW4gb29wc2llLiBHb3QgeW91ciBiYWNrIGJyb1wiLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGZtLnRhZ3MgIT09IHVuZGVmaW5lZCAmJiBmbS50YWdzLmxlbmd0aCA+PSAwKSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCB0YWcgb2YgZm0udGFncykge1xuXHRcdFx0XHRcdFx0aWYgKHRhZyA9PT0gXCJwcm9qZWN0L2RhaWx5XCIpIHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXG5cdFx0XHRcdFx0XHRcdFx0XCJIZXkgR2VvcmdlIFdoYXQncyB1cCBHZW9yZ2UsIFlvdSBjYW5ub3QgZG8gdGhhdCBHZW9yZ2VcIixcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnNvbGUubG9nKGBkZWxldGVkIGZpbGU6ICR7ZmlsZS5wYXRofWApO1xuXHRcdFx0XHR0aGlzLmFwcC52YXVsdC5kZWxldGUoZmlsZSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImFwcGVuZC10by1pbmJveFwiLFxuXHRcdFx0bmFtZTogXCJBcHBlbmQgdG8gSW5ib3hcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdC8vIG91dmVydHVyZSBwYXMgaW5zdGFudGFuXHUwMEU5ZVxuXHRcdFx0XHRjb25zdCBmID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSU5CT1gubWRcIik7XG5cdFx0XHRcdGlmIChmID09PSB1bmRlZmluZWQgfHwgZiA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdGNvbnNvbGUud2FybihgZmlsZSBub3QgZm91bmQgSU5CT1gubWRgKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBhY3RpdmUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpO1xuXHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdGNvbnN0IHJvb3QgPSBhY3RpdmUucGFyZW50O1xuXHRcdFx0XHQvLyByZWNoZXJjaGVyIHNpIHBhcyBkXHUwMEU5amEgb3V2ZXJ0IGRhbnMgbGVzIG9uZ2xldHMgYWN0aWZzXG5cdFx0XHRcdC8vIHNpbm9uIGNyXHUwMEU5ZXIgdW4gbm91dmVsIG9uZ2xldCwgb3V2cmlyIGxlIGZpY2hpZXIsIGV0IGVuIGZhaXJlIGwnb25nbGV0IGFjdGlmXG5cdFx0XHRcdGxldCBmb3VuZCA9IGZhbHNlO1xuXHRcdFx0XHRsZXQgbm9kZSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0Y29uc3QgZW1wdHlUYWJzID0gW107XG5cblx0XHRcdFx0Zm9yIChjb25zdCBsZWFmIG9mIHJvb3QuY2hpbGRyZW4pIHtcblx0XHRcdFx0XHRjb25zdCBmaWxlID0gdGhpcy5nZXRGaWxlRnJvbUxlYWYobGVhZik7XG5cdFx0XHRcdFx0aWYgKGZpbGUgPT09IHVuZGVmaW5lZCB8fCBmaWxlID09PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRlbXB0eVRhYnMucHVzaChsZWFmKTtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChmaWxlLm5hbWUgPT09IGYubmFtZSkge1xuXHRcdFx0XHRcdFx0Zm91bmQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0bm9kZSA9IGxlYWY7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCFmb3VuZCkge1xuXHRcdFx0XHRcdGlmIChlbXB0eVRhYnMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0bm9kZSA9IGVtcHR5VGFic1swXTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmNyZWF0ZUxlYWZJblBhcmVudChcblx0XHRcdFx0XHRcdFx0cm9vdCxcblx0XHRcdFx0XHRcdFx0cm9vdC5jaGlsZHJlbi5sZW5ndGggKyAxLFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdG5vZGUgPSByb290LmNoaWxkcmVuW3Jvb3QuY2hpbGRyZW4ubGVuZ3RoIC0gMV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgZWRpdG9yQWN0aW9uID0gKG5vZGUpID0+IHtcblx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdFx0Y29uc3QgZWRpdG9yID0gbm9kZS52aWV3LnNvdXJjZU1vZGUuY21FZGl0b3I7XG5cdFx0XHRcdFx0ZWRpdG9yLmluc2VydFRleHQoXCJcXG5cXG4tLS1cXG5cXG5cIiwgZWRpdG9yLmxhc3RMaW5lKCkpO1xuXHRcdFx0XHRcdGVkaXRvci5zZXRDdXJzb3IoZWRpdG9yLmxhc3RMaW5lKCksIDApO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpID09PSBudWxsIHx8XG5cdFx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKS5uYW1lICE9PSBcIklOQk9YLm1kXCJcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0bm9kZS5vcGVuRmlsZShmLCB7XG5cdFx0XHRcdFx0XHRhY3RpdmU6IHRydWUsXG5cdFx0XHRcdFx0fSkudGhlbigoXykgPT4gZWRpdG9yQWN0aW9uKG5vZGUpKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlZGl0b3JBY3Rpb24obm9kZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIndvcmtzcGFjZSAtIGxheW91dC1yZWFkeVwiKTtcblx0XHRcdGZvciAoY29uc3QgZiBvZiB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpKSB7XG5cdFx0XHRcdGlmICghSGVscGVyLmlzVVVJRChmLmJhc2VuYW1lKSkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy52YXVsdENvbnRlbnREaWN0W2YuYmFzZW5hbWVdID0gZjtcblx0XHRcdH1cblx0XHR9KTtcblx0XHQvLyB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLm9uXG5cdFx0dGhpcy5hcHAubWV0YWRhdGFDYWNoZS5vbihcblx0XHRcdFwiY2hhbmdlZFwiLFxuXHRcdFx0KGZpbGU6IFRGaWxlLCBkYXRhOiBzdHJpbmcsIGNhY2hlOiBDYWNoZWRNZXRhZGF0YSkgPT4ge1xuXHRcdFx0XHRpZiAoSGVscGVyLmlzVVVJRChmaWxlLmJhc2VuYW1lKSkge1xuXHRcdFx0XHRcdHRoaXMudmF1bHRDb250ZW50RGljdFtmaWxlLmJhc2VuYW1lXSA9IGZpbGU7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0KTtcblxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImFjdGl2ZS1sZWFmLWNoYW5nZVwiLCAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gdGhpcy5zbmVha3lUYWJSZW5hbWVyKHRoaXMuYXBwKTtcblx0XHR9KTtcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJxdWljay1wcmV2aWV3XCIsICgpID0+IHtcblx0XHRcdHJldHVybiB0aGlzLnNuZWFreVRhYlJlbmFtZXIodGhpcy5hcHApO1xuXHRcdH0pO1xuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcInJlc2l6ZVwiLCAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gdGhpcy5zbmVha3lUYWJSZW5hbWVyKHRoaXMuYXBwKTtcblx0XHR9KTtcblx0fVxuXG5cdHNuZWFreVRhYlJlbmFtZXIoYXBwKSB7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnN0IHJvb3QgPSBhcHAud29ya3NwYWNlLmdldExlYWYoKS5wYXJlbnQ7XG5cblx0XHRmb3IgKGNvbnN0IGxlYWYgb2Ygcm9vdC5jaGlsZHJlbikge1xuXHRcdFx0Y29uc3QgZmlsZSA9IGxlYWYudmlldy5maWxlO1xuXHRcdFx0aWYgKGZpbGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0Y29uc3QgY2FjaGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRjb25zdCBmbSA9IGNhY2hlLmZyb250bWF0dGVyO1xuXHRcdFx0aWYgKGZtID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGxldCB0ZXh0ID0gXCJcIjtcblxuXHRcdFx0aWYgKGZtLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oYHR5cGUgdW5kZWZpbmVkIGZvciBmbTogJHtmbX1gKVxuXHRcdFx0XHRyZXR1cm5cblx0XHRcdH1cblxuXHRcdFx0aWYgKGZtLnR5cGUgPT09IDMgJiYgSGVscGVyLmdldFByb2plY3QoZm0pID09PSBcInByb2plY3QvZGFpbHlcIikge1xuXHRcdFx0XHRjb25zdCBhdCA9IG5ldyBEYXRlKGZtLmF0KTtcblx0XHRcdFx0dGV4dCA9IGAke2RheVNob3J0W2F0LmdldERheSgpXX0uICR7YXQuZ2V0RGF0ZSgpfSAke21vbnRoU2hvcnRbYXQuZ2V0TW9udGgoKV19YDtcblx0XHRcdH0gZWxzZSBpZiAoZm0udHlwZSA9PT0gMiB8fCBmbS50eXBlID09PSAxKSB7XG5cdFx0XHRcdGlmICghSGVscGVyLm5pbENoZWNrKGZtLmFsaWFzKSkge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgKGZtLmFsaWFzKSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdFx0dGV4dCA9IGZtLmFsaWFzO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGFsaWFzIG9mIGZtLmFsaWFzKSB7XG5cdFx0XHRcdFx0XHRcdGlmICh0ZXh0Lmxlbmd0aCA9PT0gMCB8fCBhbGlhcy5sZW5ndGggPCB0ZXh0Lmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdHRleHQgPSBhbGlhcztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBjb25zdCBbc3RhcnQsIGVuZF0gPSB0aGlzLmdldENvbnRlbnRCb3VuZGFyaWVzKGNhY2hlKTtcblx0XHRcdFx0XHQvLyB3aGF0IGlzIHRoZSBuYW1pbmcgcHJlZmVyZW5jZT9cblx0XHRcdFx0XHQvLyBhbGlhcyA+IG5hbWUgaGVhZGluZ1xuXHRcdFx0XHRcdC8vIGNvbnN0IG5hbWUgPSB0aGlzLmdldFJlc291cmNlTmFtZShjYWNoZSwgc3RhcnQsIGVuZCk7XG5cblx0XHRcdFx0XHRpZiAoY2FjaGUuaGVhZGluZ3MubGVuZ3RoID4gMCAmJiBjYWNoZS5oZWFkaW5nc1swXS5sZXZlbCA9PT0gMSkge1xuXHRcdFx0XHRcdFx0dGV4dCA9IGNhY2hlLmhlYWRpbmdzWzBdLmhlYWRpbmc7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChmbS5hbGlhcyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheShmbS5hbGlhcykgJiYgZm0uYWxpYXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0XHQvLyBwcm9ibGVtIGF0aGVpc3RzP1xuXHRcdFx0XHRcdFx0XHR0ZXh0ID0gY2FjaGUuZnJvbnRtYXR0ZXIuYWxpYXNbMF07XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR0ZXh0ID0gY2FjaGUuZnJvbnRtYXR0ZXIuYWxpYXM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRleHQgPSBmbS51dWlkO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0fVxuXG5cdFx0XHR0ZXh0ID0gdGV4dCA9PT0gXCJcIiA/IGZtLnV1aWQgOiB0ZXh0O1xuXG5cdFx0XHRpZiAoZm0udHlwZSA9PT0gMSkge1xuXHRcdFx0XHR0ZXh0ID0gYChWKSAke3RleHR9YDtcblx0XHRcdH0gZWxzZSBpZiAoZm0udHlwZSA9PT0gMikge1xuXHRcdFx0XHR0ZXh0ID0gYChOKSAke3RleHR9YDtcblx0XHRcdH0gZWxzZSBpZiAoZm0udHlwZSA9PT0gMykge1xuXHRcdFx0XHR0ZXh0ID0gYChBKSAke3RleHR9YDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGxlYWYudGFiSGVhZGVySW5uZXJUaXRsZUVsLmlubmVyVGV4dCA9IHRleHQ7XG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRsZWFmLnRhYkhlYWRlcklubmVyVGl0bGVFbC5pbm5lckhUTUwgPSB0ZXh0O1xuXHRcdH1cblx0fVxuXG5cdGdldENvbnRlbnRCb3VuZGFyaWVzKG5vdGU6IENhY2hlZE1ldGFkYXRhKSB7XG5cdFx0Ly8gbG9jYXRlIGNvbnRlbnQgb2Zmc2V0XG5cdFx0bGV0IGZtID0gdW5kZWZpbmVkO1xuXHRcdHRyeSB7XG5cdFx0XHRmbSA9IG5vdGUuZnJvbnRtYXR0ZXI7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRyZXR1cm4gWzAsIDBdO1xuXHRcdH1cblx0XHRsZXQgZm91bmQgPSBmYWxzZTtcblx0XHRsZXQgc3RhcnQgPSAwO1xuXHRcdGxldCBlbmQgPSAwO1xuXG5cdFx0Zm9yIChjb25zdCBoZWFkaW5nIG9mIG5vdGUuaGVhZGluZ3MpIHtcblx0XHRcdGlmIChcblx0XHRcdFx0aGVhZGluZy5sZXZlbCA9PT0gMiAmJlxuXHRcdFx0XHRoZWFkaW5nLmhlYWRpbmcudG9Mb3dlckNhc2UoKSA9PT0gXCJjb250ZW50XCJcblx0XHRcdCkge1xuXHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHRcdHN0YXJ0ID0gaGVhZGluZy5wb3NpdGlvbi5lbmQub2Zmc2V0O1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdC8vIHMnaWwgeSBhIHVuIGF1dHJlIGhlYWRpbmcgbGV2ZWwgMiBhcHJlcywgZW5kID0gc3RhcnQub2Zmc2V0XG5cdFx0XHRpZiAoXG5cdFx0XHRcdGZvdW5kICYmXG5cdFx0XHRcdGhlYWRpbmcubGV2ZWwgPT09IDIgJiZcblx0XHRcdFx0aGVhZGluZy5oZWFkaW5nLnRvTG93ZXJDYXNlKCkgIT09IFwiY29udGVudFwiXG5cdFx0XHQpIHtcblx0XHRcdFx0ZW5kID0gaGVhZGluZy5wb3NpdGlvbi5zdGFydC5vZmZzZXQ7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdEFzc2VydC5UcnVlKGZvdW5kLCBgUmVzb3VyY2UgZG9lcyBub3QgZGVjbGFyZXMgY29udGVudDogJHtmbS51dWlkfWApO1xuXHRcdC8vIHNpbm9uIGVuZCA9IGVuZCBkb2N1bWVudFxuXHRcdGlmIChlbmQgPT09IDApIHtcblx0XHRcdGVuZCA9IG5vdGUuc2VjdGlvbnNbbm90ZS5zZWN0aW9ucy5sZW5ndGggLSAxXS5wb3NpdGlvbi5lbmQub2Zmc2V0O1xuXHRcdH1cblxuXHRcdHJldHVybiBbc3RhcnQsIGVuZF07XG5cdH1cblxuXHRnZXRSZXNvdXJjZU5hbWUoY2FjaGU6IENhY2hlZE1ldGFkYXRhKTogc3RyaW5nIHtcblx0XHRsZXQgcmVzb3VyY2VOYW1lID0gXCJcIjtcblxuXHRcdGlmIChjYWNoZS5oZWFkaW5ncy5sZW5ndGggPiAwICYmIGNhY2hlLmhlYWRpbmdzWzBdLmxldmVsID09PSAxKSB7XG5cdFx0XHRyZXNvdXJjZU5hbWUgPSBjYWNoZS5oZWFkaW5nc1swXS5oZWFkaW5nO1xuXHRcdH0gZWxzZSBpZiAoY2FjaGUuZnJvbnRtYXR0ZXIuYWxpYXMgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0aWYgKEFycmF5LmlzQXJyYXkoY2FjaGUuZnJvbnRtYXR0ZXIuYWxpYXMpICYmIGNhY2hlLmZyb250bWF0dGVyLmFsaWFzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Ly8gcHJvYmxlbSBhdGhlaXN0cz9cblx0XHRcdFx0cmVzb3VyY2VOYW1lID0gY2FjaGUuZnJvbnRtYXR0ZXIuYWxpYXNbMF07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXNvdXJjZU5hbWUgPSBjYWNoZS5mcm9udG1hdHRlci5hbGlhcztcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVzb3VyY2VOYW1lID0gY2FjaGUuZnJvbnRtYXR0ZXIudXVpZDtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc291cmNlTmFtZTtcblxuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJnb25leHQgLSBvbnVubG9hZCgpXCIpO1xuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHRkZWxldGUgd2luZG93LmdvbmV4dDtcblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcblx0XHRcdHt9LFxuXHRcdFx0REVGQVVMVF9TRVRUSU5HUyxcblx0XHRcdGF3YWl0IHRoaXMubG9hZERhdGEoKSxcblx0XHQpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cbn1cbiIsICJleHBvcnQgY29uc3QgUGF0aHMgPSB7XG5cdFRhc2tzOiBcIkFjdGlvbnNcIixcblx0Q29tcG9uZW50czogXCJDb21wb25lbnRzXCIsXG5cdEdvYWxzOiBcIkdvYWxzXCIsXG5cdFNsaXBib3g6IFwiTm90ZXNcIixcblx0SW5ib3g6IFwiODAwIEluYm94XCIsXG5cdFJlZnM6IFwiODAyIFJlZnNcIixcblx0QXJjaGl2ZXM6IFwiNDAwIEFyY2hpdmVzXCIsXG5cdExvZ3M6IFwiNjAwIExvZ1wiLFxuXHRBdHRhY2htZW50czogXCIwMDAgQXR0YWNobWVudHNcIixcblx0Sm91cm5hbDogXCJKb3VybmFsXCIsXG5cdFJlc291cmNlczogXCJSZXNvdXJjZXNcIixcblx0UHJvamVjdHM6IFwiMTAwIFByb2plY3RzXCIsXG5cdERvbWFpbnM6IFwiRG9tYWluc1wiLFxuXHROYW1lczogXCJOYW1lc1wiLFxufTtcblxuZXhwb3J0IGNvbnN0IFN0YXR1cyA9IHtcblx0VG9kbzogXCJ0b2RvXCIsXG5cdERvaW5nOiBcImRvaW5nXCIsXG5cdERvbmU6IFwiZG9uZVwiLFxuXHRNYXliZTogXCJtYXliZVwiLFxuXHRTdGFuZGJ5OiBcInN0YW5kYnlcIixcblx0VHJhc2g6IFwidHJhc2hcIixcbn07XG5leHBvcnQgY29uc3QgR29hbFN0YXR1cyA9IHtcblx0UmVmcmFtZTogXCJyZWZyYW1lXCIsXG5cdFJlc2VhcmNoOiBcInJlc2VhcmNoXCIsXG5cdE9wZXJhdGlvbmFsaXplOiBcIm9wZXJhdGlvbmFsaXplXCIsXG5cdFBsYW5pZnk6IFwicGxhbmlmeVwiLFxuXHREZXBlbmRhbnQ6IFwiZGVwZW5kYW50XCIsXG5cdEFjdGl2ZTogXCJhY3RpdmVcIixcblx0RmFpbGVkOiBcImZhaWxlZFwiLFxuXHRTdWNjZXNzOiBcInN1Y2Nlc3NcIixcbn07XG5cbmV4cG9ydCBjb25zdCBUeXBlcyA9IHtcblx0RmxlZXRpbmc6IDEzLFxuXHRMaXRlcmF0dXJlOiAxLFxuXHRQZXJtYW5lbnQ6IDIsXG5cdFRhc2s6IDMsXG5cdFByYXhpczogNCxcblx0UHJvdmlzaW9uOiA1LFxuXHRMb2c6IDYsXG5cdFJlc291cmNlOiA3LFxuXHRNZWRpYTogOCxcblx0UHJvamVjdDogMTIsXG5cdE9yZzogOSxcblx0RG9tYWluOiAxMCxcblx0Q29tcG9uZW50OiAxMSxcbn07XG5cbmV4cG9ydCBjb25zdCBOYW1lc3BhY2UgPSB7XG5cdEFyZWE6IFwiYXJlYVwiLFxuXHRDb250ZXh0OiBcImNvbnRleHRcIixcblx0TGF5ZXI6IFwibGF5ZXJcIixcblx0T3JnOiBcIm9yZ1wiLFxuXHRQcm9qZWN0OiBcInByb2plY3RcIixcbn07XG5cbmV4cG9ydCBjb25zdCBEZWZhdWx0ID0ge1xuXHRBcmVhOiBcIm5vbmVcIixcblx0Q29udGV4dDogXCJhbnlcIixcblx0TGF5ZXI6IFwibm9uZVwiLFxuXHRPcmc6IFwibm9uZVwiLFxuXHRQcm9qZWN0OiBcIm5vbmVcIixcbn07XG4iLCAiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuXG4vKipcbiAqIENvbnZlcnQgYXJyYXkgb2YgMTYgYnl0ZSB2YWx1ZXMgdG8gVVVJRCBzdHJpbmcgZm9ybWF0IG9mIHRoZSBmb3JtOlxuICogWFhYWFhYWFgtWFhYWC1YWFhYLVhYWFgtWFhYWFhYWFhYWFhYXG4gKi9cbnZhciBieXRlVG9IZXggPSBbXTtcbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4LnB1c2goKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnNsaWNlKDEpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIC8vIE5vdGU6IEJlIGNhcmVmdWwgZWRpdGluZyB0aGlzIGNvZGUhICBJdCdzIGJlZW4gdHVuZWQgZm9yIHBlcmZvcm1hbmNlXG4gIC8vIGFuZCB3b3JrcyBpbiB3YXlzIHlvdSBtYXkgbm90IGV4cGVjdC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZC9wdWxsLzQzNFxuICAvL1xuICAvLyBOb3RlIHRvIGZ1dHVyZS1zZWxmOiBObywgeW91IGNhbid0IHJlbW92ZSB0aGUgYHRvTG93ZXJDYXNlKClgIGNhbGwuXG4gIC8vIFJFRjogaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkL3B1bGwvNjc3I2lzc3VlY29tbWVudC0xNzU3MzUxMzUxXG4gIHJldHVybiAoYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAzXV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA5XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDExXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEzXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE1XV0pLnRvTG93ZXJDYXNlKCk7XG59XG5mdW5jdGlvbiBzdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIHZhciB1dWlkID0gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0KTtcbiAgLy8gQ29uc2lzdGVuY3kgY2hlY2sgZm9yIHZhbGlkIFVVSUQuICBJZiB0aGlzIHRocm93cywgaXQncyBsaWtlbHkgZHVlIHRvIG9uZVxuICAvLyBvZiB0aGUgZm9sbG93aW5nOlxuICAvLyAtIE9uZSBvciBtb3JlIGlucHV0IGFycmF5IHZhbHVlcyBkb24ndCBtYXAgdG8gYSBoZXggb2N0ZXQgKGxlYWRpbmcgdG9cbiAgLy8gXCJ1bmRlZmluZWRcIiBpbiB0aGUgdXVpZClcbiAgLy8gLSBJbnZhbGlkIGlucHV0IHZhbHVlcyBmb3IgdGhlIFJGQyBgdmVyc2lvbmAgb3IgYHZhcmlhbnRgIGZpZWxkc1xuICBpZiAoIXZhbGlkYXRlKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgfVxuICByZXR1cm4gdXVpZDtcbn1cbmV4cG9ydCBkZWZhdWx0IHN0cmluZ2lmeTsiLCAiLy8gVW5pcXVlIElEIGNyZWF0aW9uIHJlcXVpcmVzIGEgaGlnaCBxdWFsaXR5IHJhbmRvbSAjIGdlbmVyYXRvci4gSW4gdGhlIGJyb3dzZXIgd2UgdGhlcmVmb3JlXG4vLyByZXF1aXJlIHRoZSBjcnlwdG8gQVBJIGFuZCBkbyBub3Qgc3VwcG9ydCBidWlsdC1pbiBmYWxsYmFjayB0byBsb3dlciBxdWFsaXR5IHJhbmRvbSBudW1iZXJcbi8vIGdlbmVyYXRvcnMgKGxpa2UgTWF0aC5yYW5kb20oKSkuXG5cbnZhciBnZXRSYW5kb21WYWx1ZXM7XG52YXIgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIC8vIGxhenkgbG9hZCBzbyB0aGF0IGVudmlyb25tZW50cyB0aGF0IG5lZWQgdG8gcG9seWZpbGwgaGF2ZSBhIGNoYW5jZSB0byBkbyBzb1xuICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgIC8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0byBpbXBsZW1lbnRhdGlvbi5cbiAgICBnZXRSYW5kb21WYWx1ZXMgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pO1xuICAgIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyeXB0by5nZXRSYW5kb21WYWx1ZXMoKSBub3Qgc3VwcG9ydGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkI2dldHJhbmRvbXZhbHVlcy1ub3Qtc3VwcG9ydGVkJyk7XG4gICAgfVxuICB9XG4gIHJldHVybiBnZXRSYW5kb21WYWx1ZXMocm5kczgpO1xufSIsICJ2YXIgcmFuZG9tVVVJRCA9IHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5yYW5kb21VVUlEICYmIGNyeXB0by5yYW5kb21VVUlELmJpbmQoY3J5cHRvKTtcbmV4cG9ydCBkZWZhdWx0IHtcbiAgcmFuZG9tVVVJRFxufTsiLCAiaW1wb3J0IG5hdGl2ZSBmcm9tICcuL25hdGl2ZS5qcyc7XG5pbXBvcnQgcm5nIGZyb20gJy4vcm5nLmpzJztcbmltcG9ydCB7IHVuc2FmZVN0cmluZ2lmeSB9IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIGlmIChuYXRpdmUucmFuZG9tVVVJRCAmJiAhYnVmICYmICFvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5hdGl2ZS5yYW5kb21VVUlEKCk7XG4gIH1cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTtcblxuICAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG4gIHJuZHNbNl0gPSBybmRzWzZdICYgMHgwZiB8IDB4NDA7XG4gIHJuZHNbOF0gPSBybmRzWzhdICYgMHgzZiB8IDB4ODA7XG5cbiAgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG4gIGlmIChidWYpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHJuZHNbaV07XG4gICAgfVxuICAgIHJldHVybiBidWY7XG4gIH1cbiAgcmV0dXJuIHVuc2FmZVN0cmluZ2lmeShybmRzKTtcbn1cbmV4cG9ydCBkZWZhdWx0IHY0OyIsICJpbXBvcnQge1xuICBQYXRocyxcbiAgU3RhdHVzLFxuICBUeXBlcyxcbiAgTmFtZXNwYWNlLFxuICBEZWZhdWx0LFxuICBHb2FsU3RhdHVzLFxufSBmcm9tIFwiLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XG5cbmV4cG9ydCBjbGFzcyBGcm9udG1hdHRlckpTIHtcbiAgcHVibGljIHV1aWQ6IHN0cmluZztcbiAgcHVibGljIHZlcnNpb246IHN0cmluZztcbiAgcHVibGljIHR5cGU6IG51bWJlcjtcbiAgcHVibGljIGNyZWF0ZWRBdDogRGF0ZTtcbiAgcHVibGljIGF0OiBEYXRlO1xuICBwdWJsaWMgYmVmb3JlOiBEYXRlO1xuICBwdWJsaWMgYWZ0ZXI6IERhdGU7XG4gIHB1YmxpYyBjb21wb25lbnRzOiBzdHJpbmdbXTtcbiAgcHVibGljIGRvbWFpbnM6IHN0cmluZ1tdO1xuICBwdWJsaWMgbmFtZXM6IHN0cmluZ1tdO1xuICBwdWJsaWMgcHJvamVjdHM6IHN0cmluZ1tdO1xuICBwdWJsaWMgZm07XG4gIHB1YmxpYyBjb250ZW50czogc3RyaW5nW107XG4gIHB1YmxpYyB0cmFpdHM6IHN0cmluZ1tdO1xuICBwdWJsaWMgY29udGV4dHM6IHN0cmluZ1tdO1xuICBwdWJsaWMgc3RhdHVzOiBzdHJpbmc7XG4gIHB1YmxpYyBmO1xuICBwdWJsaWMgZW5lcmd5OiBudW1iZXI7XG5cbiAgc2luZ3VsYXIodmFsdWVzOiBzdHJpbmdbXSwgZmllbGQ6IHN0cmluZykge1xuICAgIGlmICghSGVscGVyLm5pbENoZWNrKHRoaXMuZm1bZmllbGRdKSkge1xuICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmZtW2ZpZWxkXTtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKCF2YWx1ZXMuY29udGFpbnModmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgYCcke2ZpZWxkfScgaXMgaWdub3JlZCwgaW52YWxpZCBkYXRhLXR5cGU6ICcke3R5cGVvZiB0aGlzLmZtW2ZpZWxkXX0nYCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwbHVyYWwodmFsdWVzOiBzdHJpbmdbXSwgZmllbGQ6IHN0cmluZykge1xuICAgIGlmICghSGVscGVyLm5pbENoZWNrKHRoaXMuZm1bZmllbGRdKSkge1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMuZm1bZmllbGRdKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgYCcke2ZpZWxkfScgaXMgaWdub3JlZCwgaW52YWxpZCBkYXRhLXR5cGU6ICcke2ZpZWxkfSdgLFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLmZtW2ZpZWxkXSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGlmICghdmFsdWVzLmNvbnRhaW5zKHZhbHVlKSkge1xuICAgICAgICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgYCcke3ZhbHVlfXMuJHt2YWx1ZX0nIGlzIGlnbm9yZWQsIGludmFsaWQgZGF0YS10eXBlOiAnJHt0eXBlb2YgdmFsdWV9J2AsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHBhZ2UpIHtcbiAgICBBc3NlcnQuVHJ1ZShwYWdlICE9PSB1bmRlZmluZWQsIFwiJ3BhZ2UnIGlzIHVuZGVmaW5lZFwiKTtcbiAgICB0aGlzLmYgPSBwYWdlLmZpbGU7XG4gICAgY29uc3QgZiA9IHRoaXMuZjtcbiAgICBBc3NlcnQuVHJ1ZShmICE9PSB1bmRlZmluZWQsIFwiJ2YnIGlzIHVuZGVmaW5lZFwiKTtcbiAgICB0aGlzLmZtID0gZi5mcm9udG1hdHRlcjtcbiAgICBBc3NlcnQuVHJ1ZSh0aGlzLmZtICE9PSB1bmRlZmluZWQsIFwiJ2ZtJyBpcyB1bmRlZmluZWRcIik7XG4gICAgQXNzZXJ0LlRydWUoXG4gICAgICB0aGlzLmZtLnV1aWQgIT09IHVuZGVmaW5lZCxcbiAgICAgIGAndXVpZCcgaXMgdW5kZWZpbmVkIGZvciAnJHt0aGlzLmYucGF0aH0nYCxcbiAgICApO1xuICAgIC8vIEFzc2VydC5UcnVlKHRoaXMuZm0udmVyc2lvbiAhPT0gdW5kZWZpbmVkLCBcIid2ZXJzaW9uJyBpcyB1bmRlZmluZWRcIik7XG4gICAgLy8gQXNzZXJ0LlRydWUoZm0uY3JlYXRlZF9hdCAhPT0gdW5kZWZpbmVkLCBcIidjcmVhdGVkX2F0JyBpcyB1bmRlZmluZWRcIik7XG5cbiAgICB0aGlzLnV1aWQgPSB0aGlzLmZtLnV1aWQ7XG4gICAgdGhpcy52ZXJzaW9uID0gdGhpcy5mbS52ZXJzaW9uO1xuICAgIHRoaXMudHlwZSA9IHRoaXMuZm0udHlwZTtcbiAgICB0aGlzLmNyZWF0ZWRBdCA9IG5ldyBEYXRlKHRoaXMuZm0uY3JlYXRlZF9hdCk7XG4gICAgdGhpcy5hdCA9IHRoaXMuZm0uYXQgIT09IHVuZGVmaW5lZCA/IG5ldyBEYXRlKHRoaXMuZm0uYXQpIDogbmV3IERhdGUoKTtcbiAgICB0aGlzLmJlZm9yZSA9XG4gICAgICB0aGlzLmZtLmJlZm9yZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gbmV3IERhdGUodGhpcy5mbS5iZWZvcmUpXG4gICAgICAgIDogbmV3IERhdGUoKTtcbiAgICB0aGlzLmFmdGVyID1cbiAgICAgIHRoaXMuZm0uYWZ0ZXIgIT09IHVuZGVmaW5lZCA/IG5ldyBEYXRlKHRoaXMuZm0uYWZ0ZXIpIDogbmV3IERhdGUoKTtcbiAgICB0aGlzLmNvbXBvbmVudHMgPSBbXTtcbiAgICB0aGlzLmRvbWFpbnMgPSBbXTtcbiAgICB0aGlzLnByb2plY3RzID0gW107XG4gICAgdGhpcy5jb250ZXh0cyA9IFtdO1xuICAgIHRoaXMudHJhaXRzID0gW107XG4gICAgdGhpcy5lbmVyZ3kgPSB0aGlzLmZtLmVuZXJneSAhPT0gdW5kZWZpbmVkID8gdGhpcy5mbS5lbmVyZ3kgOiA5O1xuXG4gICAgY29uc3QgZG9tYWlucyA9IFtdO1xuICAgIGNvbnN0IGNvbXBvbmVudHMgPSBbXTtcbiAgICBjb25zdCBwcm9qZWN0cyA9IFtdO1xuICAgIGNvbnN0IG5hbWVzID0gW107XG4gICAgY29uc3QgY29udGV4dHMgPSBbXTtcbiAgICBjb25zdCBjb250ZW50cyA9IFtdO1xuICAgIGNvbnN0IHRyYWl0cyA9IFtdO1xuXG4gICAgaWYgKCFIZWxwZXIubmlsQ2hlY2sodGhpcy5mbS50YWdzKSkge1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMuZm0udGFncykpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiJ3RhZ3MnIGlzIGlnbm9yZWQsIGludmFsaWQgZGF0YS10eXBlXCIpO1xuICAgICAgICB0aGlzLmZtLnRhZ3MgPSBbXTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGhpcy5mbS50YWdzKSB7XG4gICAgICAgIGlmICh0YWcuc2xpY2UoMCwgNykgPT09IFwiZG9tYWluL1wiKSB7XG4gICAgICAgICAgZG9tYWlucy5wdXNoKHRhZy5zbGljZSg3KSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGFnLnNsaWNlKDAsIDEwKSA9PT0gXCJjb21wb25lbnQvXCIpIHtcbiAgICAgICAgICBjb21wb25lbnRzLnB1c2godGFnLnNsaWNlKDEwKSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGFnLnNsaWNlKDAsIDgpID09PSBcInByb2plY3QvXCIpIHtcbiAgICAgICAgICBwcm9qZWN0cy5wdXNoKHRhZy5zbGljZSg4KSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGFnLnNsaWNlKDAsIDUpID09PSBcIm5hbWUvXCIpIHtcbiAgICAgICAgICBuYW1lcy5wdXNoKHRhZy5zbGljZSg1KSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGFnLnNsaWNlKDAsIDgpID09IFwiY29udGV4dC9cIikge1xuICAgICAgICAgIGNvbnRleHRzLnB1c2godGFnLnNsaWNlKDgpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YWcuc2xpY2UoMCwgOCkgPT0gXCJjb250ZW50L1wiKSB7XG4gICAgICAgICAgY29udGVudHMucHVzaCh0YWcuc2xpY2UoOCkpO1xuICAgICAgICB9IGVsc2UgaWYgKHRhZy5zbGljZSgwLCA2KSA9PSBcInRyYWl0L1wiKSB7XG4gICAgICAgICAgdHJhaXRzLnB1c2godGFnLnNsaWNlKDYpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2luZ3VsYXIoZG9tYWlucywgXCJkb21haW5cIik7XG4gICAgdGhpcy5wbHVyYWwoZG9tYWlucywgXCJkb21haW5zXCIpO1xuICAgIHRoaXMuc2luZ3VsYXIoY29tcG9uZW50cywgXCJjb21wb25lbnRzXCIpO1xuICAgIHRoaXMucGx1cmFsKGNvbXBvbmVudHMsIFwiY29tcG9uZW50c1wiKTtcbiAgICB0aGlzLnNpbmd1bGFyKHByb2plY3RzLCBcInByb2plY3RcIik7XG4gICAgdGhpcy5wbHVyYWwocHJvamVjdHMsIFwicHJvamVjdHNcIik7XG4gICAgdGhpcy5zaW5ndWxhcihjb250ZW50cywgXCJjb250ZW50c1wiKTtcbiAgICB0aGlzLnBsdXJhbChjb250ZW50cywgXCJjb250ZW50c1wiKTtcbiAgICB0aGlzLnNpbmd1bGFyKG5hbWVzLCBcIm5hbWVcIik7XG4gICAgdGhpcy5wbHVyYWwobmFtZXMsIFwibmFtZXNcIik7XG4gICAgdGhpcy5wbHVyYWwobmFtZXMsIFwiYWxpYXNcIik7XG4gICAgdGhpcy5zaW5ndWxhcih0cmFpdHMsIFwidHJhaXRcIik7XG4gICAgdGhpcy5wbHVyYWwodHJhaXRzLCBcInRyYWl0c1wiKTtcblxuICAgIHRoaXMuZG9tYWlucyA9IGRvbWFpbnM7XG4gICAgdGhpcy5jb21wb25lbnRzID0gY29tcG9uZW50cztcbiAgICB0aGlzLnByb2plY3RzID0gcHJvamVjdHM7XG4gICAgdGhpcy5uYW1lcyA9IG5hbWVzO1xuICAgIHRoaXMuY29udGV4dHMgPSBjb250ZXh0cztcbiAgICB0aGlzLmNvbnRlbnRzID0gY29udGVudHM7XG4gICAgdGhpcy50cmFpdHMgPSB0cmFpdHM7XG4gIH1cblxuICBnZXREb21haW4oZW1wdHlEZWZhdWx0ID0gdHJ1ZSk6IHN0cmluZyB7XG4gICAgaWYgKGVtcHR5RGVmYXVsdCkge1xuICAgICAgcmV0dXJuIHRoaXMuZG9tYWluc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZG9tYWluc1swXSA9PT0gdW5kZWZpbmVkID8gXCJ1bmtub3duXCIgOiB0aGlzLmRvbWFpbnNbMF07XG4gICAgfVxuICB9XG5cbiAgZ2V0RG9tYWlucygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHRoaXMuZG9tYWlucztcbiAgfVxuXG4gIGdldFRyYWl0cygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHRoaXMudHJhaXRzO1xuICB9XG5cbiAgZ2V0Q29tcG9uZW50cygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50cztcbiAgfVxuXG4gIGdldFByb2plY3QoZW1wdHlEZWZhdWx0ID0gdHJ1ZSk6IHN0cmluZyB7XG4gICAgaWYgKGVtcHR5RGVmYXVsdCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvamVjdHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnByb2plY3RzWzBdID09PSB1bmRlZmluZWQgPyBcIlwiIDogdGhpcy5wcm9qZWN0c1swXTtcbiAgICB9XG4gIH1cblxuICBnZXRQcm9qZWN0cygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHRoaXMucHJvamVjdHM7XG4gIH1cblxuICBnZXROYW1lKGVtcHR5RGVmYXVsdCA9IHRydWUpOiBzdHJpbmcge1xuICAgIGlmIChlbXB0eURlZmF1bHQpIHtcbiAgICAgIHJldHVybiB0aGlzLm5hbWVzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5uYW1lc1swXSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHRoaXMubmFtZXNbMF07XG4gICAgfVxuICB9XG5cbiAgZ2V0Q29udGVudChlbXB0eURlZmF1bHQgPSB0cnVlKTogc3RyaW5nIHtcbiAgICBpZiAoZW1wdHlEZWZhdWx0KSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuY29udGVudHNbMF0gPT09IHVuZGVmaW5lZCA/IFwiXCIgOiB0aGlzLmNvbnRlbnRzWzBdO1xuICAgIH1cbiAgfVxuXG4gIGdldE5hbWVzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGhpcy5uYW1lcztcbiAgfVxuXG4gIGdldENvbnRleHQoZW1wdHlEZWZhdWx0ID0gdHJ1ZSk6IHN0cmluZyB7XG4gICAgaWYgKGVtcHR5RGVmYXVsdCkge1xuICAgICAgcmV0dXJuIHRoaXMuY29udGV4dHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnRleHRzWzBdID09PSB1bmRlZmluZWQgPyBcIlwiIDogdGhpcy5jb250ZXh0c1swXTtcbiAgICB9XG4gIH1cblxuICByZXNvbHZlKGR2KSB7XG4gICAgY29uc3QgZG9tYWlucyA9IFtdO1xuICAgIGZvciAoY29uc3QgZG9tYWluIG9mIHRoaXMuZG9tYWlucykge1xuICAgICAgaWYgKEhlbHBlci5pc1VVSUQoZG9tYWluKSkge1xuICAgICAgICBjb25zdCBwYWdlcyA9IGR2XG4gICAgICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuRG9tYWluc31cImApXG4gICAgICAgICAgLndoZXJlKChwYWdlKSA9PiBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIudXVpZCA9PT0gZG9tYWluKTtcbiAgICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfSBlbHNlIGlmIChwYWdlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBjb25zdCBwYWdlID0gcGFnZXNbMF07XG4gICAgICAgICAgZG9tYWlucy5wdXNoKHBhZ2UuZmlsZS5mcm9udG1hdHRlci5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcGFnZXMgPSBkdlxuICAgICAgICAgIC5wYWdlcyhgXCIke1BhdGhzLkRvbWFpbnN9XCJgKVxuICAgICAgICAgIC53aGVyZSgocGFnZSkgPT4gcGFnZS5maWxlLmZyb250bWF0dGVyLm5hbWUgPT09IGRvbWFpbik7XG4gICAgICAgIGlmIChwYWdlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgIH0gZWxzZSBpZiAocGFnZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgY29uc3QgcGFnZSA9IHBhZ2VzWzBdO1xuICAgICAgICAgIGRvbWFpbnMucHVzaChwYWdlLmZpbGUuZnJvbnRtYXR0ZXIubmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRvbWFpbnMubGVuZ3RoICE9PSB0aGlzLmRvbWFpbnMubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLndhcm4oYERvbWFpbiByZXNvbHV0aW9uIGZhaWxlZCBmb3I6ICR7dGhpcy5kb21haW5zfWApO1xuICAgIH1cblxuICAgIHRoaXMuZG9tYWlucyA9IGRvbWFpbnM7XG4gIH1cbn1cblxuY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7IC8vICgxKVxuICAgIHRoaXMubmFtZSA9IFwiVmFsaWRhdGlvbkVycm9yXCI7IC8vICgyKVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBBc3NlcnQgPSB7XG4gIFRydWUocHJlZGljYXRlOiBib29sZWFuLCBtZXNzYWdlOiBzdHJpbmcsIHN0cmljdCA9IHRydWUpIHtcbiAgICBpZiAoIXByZWRpY2F0ZSkge1xuICAgICAgaWYgKHN0cmljdCkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKG1lc3NhZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIEZhbHNlKHByZWRpY2F0ZTogYm9vbGVhbiwgbWVzc2FnZTogc3RyaW5nLCBzdHJpY3QgPSBmYWxzZSkge1xuICAgIGlmIChwcmVkaWNhdGUpIHtcbiAgICAgIGlmIChzdHJpY3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihtZXNzYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IEhlbHBlciA9IHtcbiAgbmlsQ2hlY2sodmFsOiBhbnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdmFsID09PSB1bmRlZmluZWQgfHwgdmFsID09PSBudWxsO1xuICB9LFxuXG4gIGdldEtleUZ1Y2soZ3JvdXBCeSkge1xuICAgIHN3aXRjaCAoZ3JvdXBCeSkge1xuICAgICAgZGVmYXVsdDpcbiAgICAgIGNhc2UgXCJkb25lQXRcIjpcbiAgICAgICAgcmV0dXJuIChlbnRyeSkgPT5cbiAgICAgICAgICBlbnRyeS5maWxlLmZyb250bWF0dGVyLmRvbmVBdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiY3JlYXRlZEF0XCI6XG4gICAgICAgIHJldHVybiAoZW50cnkpID0+XG4gICAgICAgICAgZW50cnkuZmlsZS5mcm9udG1hdHRlci5jcmVhdGVkQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInByb2plY3RcIjpcbiAgICAgICAgcmV0dXJuIChlbnRyeSkgPT4gZW50cnkuZmlsZS5mcm9udG1hdHRlci5wcm9qZWN0O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJhcmVhXCI6XG4gICAgICAgIHJldHVybiAoZW50cnkpID0+IGVudHJ5LmZpbGUuZnJvbnRtYXR0ZXIuYXJlYTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9LFxuXG4gIGdldEtleShncm91cEJ5KSB7XG4gICAgc3dpdGNoIChncm91cEJ5KSB7XG4gICAgICBkZWZhdWx0OlxuICAgICAgY2FzZSBcImRvbmVBdFwiOlxuICAgICAgICByZXR1cm4gKGVudHJ5KSA9PiBlbnRyeS5kb25lQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImNyZWF0ZWRBdFwiOlxuICAgICAgICByZXR1cm4gKGVudHJ5KSA9PiBlbnRyeS5jcmVhdGVkQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInByb2plY3RcIjpcbiAgICAgICAgcmV0dXJuIChlbnRyeSkgPT4gZW50cnkucHJvamVjdDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiYXJlYVwiOlxuICAgICAgICByZXR1cm4gKGVudHJ5KSA9PiBlbnRyeS5hcmVhO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0sXG5cbiAgbnVtYmVyVHlwZVRvU3RyaW5nKHZhbCk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh2YWwudHlwZSkge1xuICAgICAgY2FzZSBUeXBlcy5GbGVldGluZzpcbiAgICAgICAgcmV0dXJuIFwiZmxlZXRpbmdcIjtcbiAgICAgIGNhc2UgVHlwZXMuTG9nOlxuICAgICAgICByZXR1cm4gXCJsb2dcIjtcbiAgICAgIGNhc2UgVHlwZXMuUHJvamVjdDpcbiAgICAgICAgcmV0dXJuIFwicHJvamVjdFwiO1xuICAgICAgY2FzZSBUeXBlcy5Pcmc6XG4gICAgICAgIHJldHVybiBcIm9yZ1wiO1xuICAgICAgY2FzZSBUeXBlcy5Eb21haW46XG4gICAgICAgIHJldHVybiBcImRvbWFpblwiO1xuICAgICAgY2FzZSBUeXBlcy5Db21wb25lbnQ6XG4gICAgICAgIHJldHVybiBcImNvbXBvbmVudFwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBudW1iZXJUeXBlVG9TdHJpbmc6IHR5cGU6IFwiJHt2YWwudHlwZX1cIiBub3QgaW1wbGVtZW50ZWQgXCIke3ZhbC51dWlkfVwiYCxcbiAgICAgICAgKTtcbiAgICB9XG4gIH0sXG5cbiAgcm91bmRUb09uZURlY2ltYWwodmFsOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbCAqIDEwKSAvIDEwO1xuICB9LFxuXG4gIGlzQ2hpbGRUYWcocGFyZW50LCBjaGlsZCkge1xuICAgIGlmIChjaGlsZC5sZW5ndGggPD0gcGFyZW50Lmxlbmd0aCArIDEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKGNoaWxkLnNsaWNlKDAsIHBhcmVudC5sZW5ndGggKyAxKSAhPSBgJHtwYXJlbnR9L2ApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgZ2V0RmllbGQoZmllbGQsIGRlZmF1bHRWYWx1ZSkge1xuICAgIGlmIChmaWVsZCA9PT0gdW5kZWZpbmVkIHx8IGZpZWxkID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmllbGQ7XG4gICAgfVxuICB9LFxuXG4gIGdldERhdGUoZHQpIHtcbiAgICBpZiAoZHQgPT09IFwiXCIgfHwgZHQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmIChkdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkdCA9IG5ldyBEYXRlKGR0KTtcbiAgICAgIGlmIChpc05hTihkdCkpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkdDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH0sXG5cbiAgZ2V0VGFnKGZtLCB0eXBlLCBlbXB0eURlZmF1bHQgPSB1bmRlZmluZWQpIHtcbiAgICBsZXQgbmFtZSA9IFwiXCI7XG4gICAgbGV0IGRlZmF1bHRWYWx1ZSA9IFwiXCI7XG5cbiAgICBpZiAodHlwZSA9PT0gXCJhcmVhXCIpIHtcbiAgICAgIG5hbWUgPSBOYW1lc3BhY2UuQXJlYTtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IERlZmF1bHQuQXJlYTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiY29udGV4dFwiKSB7XG4gICAgICBuYW1lID0gTmFtZXNwYWNlLkNvbnRleHQ7XG4gICAgICBkZWZhdWx0VmFsdWUgPSBEZWZhdWx0LkNvbnRleHQ7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcImxheWVyXCIpIHtcbiAgICAgIG5hbWUgPSBOYW1lc3BhY2UuTGF5ZXI7XG4gICAgICBkZWZhdWx0VmFsdWUgPSBEZWZhdWx0LkxheWVyO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJvcmdcIikge1xuICAgICAgbmFtZSA9IE5hbWVzcGFjZS5Pcmc7XG4gICAgICBkZWZhdWx0VmFsdWUgPSBEZWZhdWx0Lk9yZztcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwicHJvamVjdFwiKSB7XG4gICAgICBuYW1lID0gTmFtZXNwYWNlLlByb2plY3Q7XG4gICAgICBkZWZhdWx0VmFsdWUgPSBEZWZhdWx0LlByb2plY3Q7XG4gICAgfSBlbHNlIGlmICh0eXBlID09IFwiZG9tYWluXCIpIHtcbiAgICAgIG5hbWUgPSBcImRvbWFpblwiO1xuICAgICAgZGVmYXVsdFZhbHVlID0gXCJub25lXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgZ2V0VGFnIGdvdCB1bnN1cG9ydGVkIHR5cGU6ICcke3R5cGV9J2ApO1xuICAgIH1cblxuICAgIGNvbnN0IGxlbiA9IG5hbWUubGVuZ3RoICsgMTtcbiAgICBjb25zdCBkZWZhdWx0VGFnID0gYCR7bmFtZX0vJHtkZWZhdWx0VmFsdWV9YDtcblxuICAgIGxldCBkZWZhdWx0UmV0VmFsID0gZGVmYXVsdFRhZztcbiAgICBpZiAoZW1wdHlEZWZhdWx0KSB7XG4gICAgICBkZWZhdWx0UmV0VmFsID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFJldFZhbDtcbiAgICB9XG5cbiAgICBjb25zdCB0YWdzID0gZm0udGFncztcbiAgICBpZiAodGFncyA9PT0gdW5kZWZpbmVkIHx8IHRhZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFJldFZhbDtcbiAgICB9XG4gICAgLy8gLT4gdGFnIG4nZXhpc3RlIHBhcyAtPiB2YWxldXIgcGFyIGRlZmF1dFxuICAgIC8vIC0+IHRhZyBleGlzdGUgbWFpcyBpbCBhIHVuZSB2YWxldXIgcGFyIGRlZmF1dCAtPiB2YWxldXIgcGFyIGRlZmF1dFxuICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAgIGlmICh0YWcgPT0gZGVmYXVsdFRhZykge1xuICAgICAgICByZXR1cm4gZGVmYXVsdFJldFZhbDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRhZy5sZW5ndGggPiBsZW4gJiYgdGFnLnNsaWNlKDAsIGxlbikgPT0gYCR7bmFtZX0vYCkge1xuICAgICAgICByZXR1cm4gdGFnO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkZWZhdWx0UmV0VmFsO1xuICB9LFxuXG4gIGdldE5hbWUoZm0pOiBzdHJpbmcge1xuICAgIGNvbnN0IGNvbXBvbmVudHMgPSBIZWxwZXIuZ2V0Q29tcG9uZW50cyhmbSk7XG4gICAgaWYgKGNvbXBvbmVudHMubGVuZ3RoIDwgMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBIZWxwZXIuZ2V0TmFtZSgpICR7Zm19YCk7XG4gICAgfVxuXG4gICAgbGV0IG5hbWUgPSB1bmRlZmluZWQ7XG4gICAgbGV0IG9jY3VyZW5jZXMgPSAwO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIGNvbXBvbmVudHMpIHtcbiAgICAgIGlmIChjb21wb25lbnQuc2xpY2UoMCwgMTUpID09PSBcImNvbXBvbmVudC9uYW1lL1wiKSB7XG4gICAgICAgIG5hbWUgPSBjb21wb25lbnQuc2xpY2UoMTUpO1xuICAgICAgICBvY2N1cmVuY2VzICs9IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9jY3VyZW5jZXMgPiAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBIZWxwZXIuZ2V0TmFtZSgpICR7Zm19IG11bHRpcGxlIG9jY3VyZW5jZXMgb2YgJ2NvbXBvbmVudC9uYW1lJ2AsXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChuYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEhlbHBlci5nZXROYW1lKCkgJHtmbX0gJ2NvbXBvbmVudC9uYW1lJyB1bmRlZmluZWRgLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmFtZTtcbiAgfSxcblxuICBnZXRDb21wb25lbnRzKGZtKSB7XG4gICAgY29uc3QgY29tcG9uZW50cyA9IFtdO1xuICAgIGlmIChIZWxwZXIubmlsQ2hlY2soZm0udGFncykpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgZm9yIChjb25zdCB0YWcgb2YgZm0udGFncykge1xuICAgICAgaWYgKHRhZy5sZW5ndGggPiAxMCAmJiB0YWcuc2xpY2UoMCwgMTApID09PSBcImNvbXBvbmVudC9cIikge1xuICAgICAgICBjb21wb25lbnRzLnB1c2godGFnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbXBvbmVudHM7XG4gIH0sXG5cbiAgZ2V0QXJlYShmbSwgZW1wdHlEZWZhdWx0ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gSGVscGVyLmdldFRhZyhmbSwgXCJhcmVhXCIsIGVtcHR5RGVmYXVsdCk7XG4gIH0sXG5cbiAgZ2V0Q29udGV4dChmbSwgZW1wdHlEZWZhdWx0ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gSGVscGVyLmdldFRhZyhmbSwgXCJjb250ZXh0XCIsIGVtcHR5RGVmYXVsdCk7XG4gIH0sXG5cbiAgZ2V0RG9tYWluKGZtLCBlbXB0eURlZmF1bHQgPSBmYWxzZSkge1xuICAgIHJldHVybiBIZWxwZXIuZ2V0VGFnKGZtLCBcImRvbWFpblwiLCBlbXB0eURlZmF1bHQpO1xuICB9LFxuXG4gIGdldExheWVyKGZtLCBlbXB0eURlZmF1bHQgPSBmYWxzZSkge1xuICAgIHJldHVybiBIZWxwZXIuZ2V0VGFnKGZtLCBcImxheWVyXCIsIGVtcHR5RGVmYXVsdCk7XG4gIH0sXG5cbiAgZ2V0T3JnKGZtLCBlbXB0eURlZmF1bHQgPSBmYWxzZSkge1xuICAgIHJldHVybiBIZWxwZXIuZ2V0VGFnKGZtLCBcIm9yZ1wiLCBlbXB0eURlZmF1bHQpO1xuICB9LFxuXG4gIGdldFByb2plY3QoZm0sIGVtcHR5RGVmYXVsdCA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIEhlbHBlci5nZXRUYWcoZm0sIFwicHJvamVjdFwiLCBlbXB0eURlZmF1bHQpO1xuICB9LFxuXG4gIGR1cmF0aW9uU3RyaW5nVG9TZWModmFsKSB7XG4gICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkIHx8IHZhbC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBjb25zdCBtdWx0ID0gdmFsLnNsaWNlKC0xKTtcbiAgICBsZXQgbSA9IDA7XG4gICAgaWYgKG11bHQgPT09IFwiaFwiKSB7XG4gICAgICBtID0gNjAgKiA2MDtcbiAgICB9IGVsc2UgaWYgKG11bHQgPT09IFwibVwiKSB7XG4gICAgICBtID0gNjA7XG4gICAgfSBlbHNlIGlmIChtdWx0ID09PSBcImRcIikge1xuICAgICAgbSA9IDI0ICogNjAgKiA2MDtcbiAgICB9IGVsc2UgaWYgKG11bHQgPT0gXCJ3XCIpIHtcbiAgICAgIG0gPSAyNCAqIDYwICogNjAgKiA3O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oYFVuaGFuZGxlZCBjYXNlIHZhbDogJHt2YWx9YCk7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiBtICogcGFyc2VJbnQodmFsLnNsaWNlKDAsIC0xKSk7XG4gIH0sXG5cbiAgbXNlY1RvU3RyaW5nRHVyYXRpb24odmFsOiBudW1iZXIpIHtcbiAgICBjb25zdCBvbmVIb3VySW5Nc2VjID0gMzYwMDAwMDsgLy8gMSBob3VyIGluIG1zZWNcbiAgICBjb25zdCBvbmVEYXlJbk1zZWMgPSA4NjQwMDAwMDsgLy8gMSBkYXkgaW4gbXNlY1xuICAgIGlmICh2YWwgPj0gMjQgKiBvbmVIb3VySW5Nc2VjKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBTdHJpbmcoSGVscGVyLnJvdW5kVG9PbmVEZWNpbWFsKHZhbCAvIG9uZURheUluTXNlYykpLnBhZFN0YXJ0KFxuICAgICAgICAgIDIsXG4gICAgICAgICAgXCIwXCIsXG4gICAgICAgICkgKyBcIiBkXCJcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIFN0cmluZyhIZWxwZXIucm91bmRUb09uZURlY2ltYWwodmFsIC8gb25lSG91ckluTXNlYykpLnBhZFN0YXJ0KFxuICAgICAgICAgIDIsXG4gICAgICAgICAgXCIwXCIsXG4gICAgICAgICkgKyBcIiBoXCJcbiAgICAgICk7XG4gICAgfVxuICB9LFxuXG4gIGlzVVVJRCh2YWw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmICh0eXBlb2YgdmFsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB2YWwubGVuZ3RoID09PSAzNjtcbiAgfSxcblxuICBzb3J0QnlBZ2UoYSwgYikge1xuICAgIGNvbnN0IGZtQSA9IG5ldyBGcm9udG1hdHRlckpTKGEpO1xuICAgIGNvbnN0IGZtQiA9IG5ldyBGcm9udG1hdHRlckpTKGIpO1xuXG4gICAgcmV0dXJuIGZtQS5jcmVhdGVkQXQuZ2V0VGltZSgpIC0gZm1CLmNyZWF0ZWRBdC5nZXRUaW1lKCk7XG4gIH0sXG5cbiAgc29ydEJ5UHJpb3JpdHkoYSwgYikge1xuICAgIGNvbnN0IGZtQSA9IG5ldyBGcm9udG1hdHRlckpTKGEpO1xuICAgIGNvbnN0IGZtQiA9IG5ldyBGcm9udG1hdHRlckpTKGIpO1xuXG4gICAgcmV0dXJuIGZtQi5mbS5wcmlvcml0eSAtIGZtQS5mbS5wcmlvcml0eTtcbiAgfSxcblxuICBzb3J0QnlQcmlvcml0eUFuZEFnZShhLCBiKSB7XG4gICAgY29uc3QgZm1BID0gbmV3IEZyb250bWF0dGVySlMoYSk7XG4gICAgY29uc3QgZm1CID0gbmV3IEZyb250bWF0dGVySlMoYik7XG5cbiAgICBpZiAoZm1BLmZtLnByaW9yaXR5ICE9PSBmbUIuZm0ucHJpb3JpdHkucHJpb3JpdHkpIHtcbiAgICAgIHJldHVybiBIZWxwZXIuc29ydEJ5UHJpb3JpdHkoYSwgYik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBIZWxwZXIuc29ydEJ5QWdlKGEsIGIpO1xuICAgIH1cbiAgfSxcblxuICBzb3J0QnlEdXJhdGlvbihhLCBiKSB7XG4gICAgY29uc3QgZm1BID0gbmV3IEZyb250bWF0dGVySlMoYSk7XG4gICAgY29uc3QgZm1CID0gbmV3IEZyb250bWF0dGVySlMoYik7XG4gICAgcmV0dXJuIChcbiAgICAgIEhlbHBlci5kdXJhdGlvblN0cmluZ1RvU2VjKGZtQS5mbS50aW1lX2VzdGltYXRlKSAtXG4gICAgICBIZWxwZXIuZHVyYXRpb25TdHJpbmdUb1NlYyhmbUIuZm0udGltZV9lc3RpbWF0ZSlcbiAgICApO1xuICB9LFxuXG4gIHNvcnRCeVByaW9yaXR5QW5kRHVyYXRpb24oYSwgYikge1xuICAgIGNvbnN0IGZtQSA9IG5ldyBGcm9udG1hdHRlckpTKGEpO1xuICAgIGNvbnN0IGZtQiA9IG5ldyBGcm9udG1hdHRlckpTKGIpO1xuXG4gICAgaWYgKGZtQS5mbS5wcmlvcml0eSAhPT0gZm1CLmZtLnByaW9yaXR5KSB7XG4gICAgICByZXR1cm4gSGVscGVyLnNvcnRCeVByaW9yaXR5KGEsIGIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gSGVscGVyLnNvcnRCeUR1cmF0aW9uKGEsIGIpO1xuICAgIH1cbiAgfSxcblxuICBzb3J0QnlQcmlvcml0eUFuZER1cmF0aW9uQW5kQWdlKGEsIGIpIHtcbiAgICBjb25zdCBmbUEgPSBuZXcgRnJvbnRtYXR0ZXJKUyhhKTtcbiAgICBjb25zdCBmbUIgPSBuZXcgRnJvbnRtYXR0ZXJKUyhiKTtcblxuICAgIGlmIChmbUEuZm0ucHJpb3JpdHkgIT09IGZtQi5mbS5wcmlvcml0eSkge1xuICAgICAgcmV0dXJuIEhlbHBlci5zb3J0QnlQcmlvcml0eShhLCBiKTtcbiAgICB9IGVsc2UgaWYgKGZtQS5mbS50aW1lX2VzdGltYXRlICE9PSBmbUIuZm0udGltZV9lc3RpbWF0ZSkge1xuICAgICAgcmV0dXJuIEhlbHBlci5zb3J0QnlEdXJhdGlvbihhLCBiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIEhlbHBlci5zb3J0QnlBZ2UoYSwgYik7XG4gICAgfVxuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IEF1dG9GaWVsZCA9IHtcbiAgdGFncyhkdiwgZm0sIGxldmVsID0gMikge1xuICAgIGNvbnN0IHRhZ3MgPSBmbS50YWdzO1xuICAgIGlmICh0YWdzID09IHVuZGVmaW5lZCB8fCB0YWdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRhZ3Muc29ydCgpO1xuICAgIGR2LmhlYWRlcihsZXZlbCwgXCJUYWdzXCIpO1xuICAgIGxldCBzID0gXCJcIjtcbiAgICBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgICBzICs9IGAgIyR7dGFnfWA7XG4gICAgfVxuICAgIGR2LnBhcmFncmFwaChzKTtcbiAgfSxcblxuICBoZWFsbW9uKGR2KSB7XG4gICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhkdi5jdXJyZW50KCkpO1xuICAgIGNvbnN0IGN1cnJlbnQgPSBmbS5jcmVhdGVkQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG5cbiAgICBjb25zdCBwYWdlcyA9IGR2LnBhZ2VzKGBcIiR7UGF0aHMuSm91cm5hbH1cImApLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICBjb25zdCBqRm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGlmIChqRm0uZ2V0UHJvamVjdCgpICE9PSBcImhvbWVjb29rXCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBsZXQgakN1cnJlbnQgPSBudWxsO1xuICAgICAgLy8gbGEgZmljaGUgaG9tZWNvb2sgc2UgdHJvdXZlIHRvdWpvdXJzIFx1MDBFMCBsYSBkYXRlIGotMVxuICAgICAgY29uc3QgY3VycmVudE1pbnVzT25lID0gbmV3IERhdGUoXG4gICAgICAgIGZtLmNyZWF0ZWRBdC5nZXRUaW1lKCkgLSAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgICAgKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIG9uIHMnaW50XHUwMEU5cmVzc2UgYXUgcmVwYXMgZGUgbGEgdmVpbGxlIGRhbnMgaGVhbG1vblxuICAgICAgICAvLyBuZSBjb3V2cmUgcGFzIG91IGxlIHJlcGFzIGVzdCBwcmlzIGFwcmVzIDAwaCBsZSBqb3VyIGVuIGNvdXJzXG4gICAgICAgIC8vIHNlcmEgZ1x1MDBFOXJcdTAwRTkgYXZlYyBsYSBmaWNoZSBkaXJlY3RlbWVudCBwb3VyIGxlIG1vbWVudFxuICAgICAgICBqQ3VycmVudCA9IGpGbS5jcmVhdGVkQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgZHYucGFyYWdyYXBoKFxuICAgICAgICAgIGBJbnZhbGlkIGRhdGU6ICR7UmVuZGVyZXIubWFrZUxpbmtTaG9ydFVVSUQoZHYsIHBhZ2UuZmlsZSl9YCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihqRm0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoY3VycmVudE1pbnVzT25lLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApICE9PSBqQ3VycmVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgZHYuaGVhZGVyKDQsIFwicmVwYXMgKHZlaWxsZSlcIik7XG4gICAgaWYgKHBhZ2VzLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICAgIGR2LnBhcmFncmFwaChSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChkdiwgcGFnZS5maWxlKSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGF1dGhvcnMoZHYsIGZtKSB7XG4gICAgY29uc3QgYXV0aG9ycyA9IGZtLmF1dGhvcnM7XG4gICAgaWYgKGF1dGhvcnMgPT09IHVuZGVmaW5lZCB8fCBhdXRob3JzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGR2LmhlYWRlcigzLCBcIkF1dGhvcnNcIik7XG4gICAgZHYubGlzdChhdXRob3JzKTtcbiAgfSxcblxuICB0aXRsZShkdiwgZm0pIHtcbiAgICBjb25zdCB0aXRsZSA9IGZtLmFsaWFzO1xuICAgIGlmICh0aXRsZSA9PT0gdW5kZWZpbmVkIHx8IHRpdGxlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGR2LmhlYWRlcigzLCB0aXRsZSk7XG4gIH0sXG5cbiAgbG9ncyhkdiwgZW50cmllcykge1xuICAgIGNvbnNvbGUubG9nKFwiY291Y291LCB0dSB2ZXV4IHZvaXIgbWEgYml0ZT9cIik7XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGxldCB0b3RhbFRpbWUgPSAwO1xuXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBjb25zdCBmbWUgPSBlbnRyeS5maWxlLmZyb250bWF0dGVyO1xuICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgbGV0IHN0YXJ0OiBhbnkgPSAwO1xuICAgICAgbGV0IHN0b3A6IGFueSA9IDA7XG4gICAgICBpZiAoZm1lID09PSB1bmRlZmluZWQgfHwgZm1lLmNyZWF0ZWRfYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZnJvbnRtYXR0ZXI6ICR7Zm1lLnV1aWR9YCk7XG4gICAgICB9XG5cbiAgICAgIHN0YXJ0ID0gbmV3IERhdGUoZm1lLmNyZWF0ZWRfYXQpO1xuICAgICAgZS5wdXNoKHN0YXJ0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApKTtcbiAgICAgIGlmIChmbWUuZG9uZV9hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHN0b3AgPSBEYXRlLm5vdygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RvcCA9IG5ldyBEYXRlKGZtZS5kb25lX2F0KTtcbiAgICAgIH1cbiAgICAgIHRvdGFsVGltZSArPSBzdG9wIC0gc3RhcnQ7XG4gICAgICBlLnB1c2goXG4gICAgICAgIGR2LnNlY3Rpb25MaW5rKFxuICAgICAgICAgIGZtZS51dWlkLFxuICAgICAgICAgIFwiIyMgQ29udGVudFwiLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIGZtZS51dWlkLnNsaWNlKDAsIDgpLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICAgIGUucHVzaChNYXRoLnJvdW5kKCgoc3RvcCAtIHN0YXJ0KSAvICgxMDAwICogNjAgKiA2MCkpICogMTApIC8gMTApO1xuICAgICAgaWYgKGZtZS5yZXZpZXdlZCA9PT0gdW5kZWZpbmVkIHx8IGZtZS5yZXZpZXdlZCA9PT0gMCkge1xuICAgICAgICBlLnB1c2goMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlLnB1c2goZm1lLnJldmlld2VkKTtcbiAgICAgIH1cbiAgICAgIGJ1ZmYucHVzaChlKTtcbiAgICB9XG5cbiAgICBpZiAoYnVmZi5sZW5ndGggPiAwKSB7XG4gICAgICBkdi5oZWFkZXIoMiwgXCJMb2dzXCIpO1xuICAgICAgZHYudGFibGUoW1wiY3JlYXRlZF9hdFwiLCBcInV1aWRcIiwgXCJzZXNzaW9uXCIsIFwicmV2aWV3ZWRcIl0sIGJ1ZmYpO1xuICAgICAgaWYgKHRvdGFsVGltZSA+IDApIHtcbiAgICAgICAgZHYucGFyYWdyYXBoKFxuICAgICAgICAgIGBfdG90YWxUaW1lIChoKTpfICR7TWF0aC5yb3VuZCgodG90YWxUaW1lIC8gKDEwMDAgKiA2MCAqIDYwKSkgKiAxMCkgLyAxMFxuICAgICAgICAgIH1gLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBtZWRpYShkdikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBkdi5jdXJyZW50KCk7XG4gICAgY29uc3QgZm0gPSBjdXJyZW50LmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgY29uc3QgcGFnZXMgPSBkdi5wYWdlcyhgXCIke1BhdGhzLlJlZnN9LyR7Zm0ucmVmX2lkfVwiYCkuYXJyYXkoKTtcbiAgICBpZiAocGFnZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1lZGlhID0gcGFnZXNbMF07XG4gICAgY29uc3QgbWVkaWFGbSA9IG1lZGlhLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgQXV0b0ZpZWxkLnRpdGxlKGR2LCBtZWRpYUZtKTtcbiAgICBkdi5wYXJhZ3JhcGgoUmVuZGVyZXIubWFrZUxpbmtBbGlhcyhkdiwgbWVkaWEuZmlsZSkpO1xuICAgIEF1dG9GaWVsZC5hdXRob3JzKGR2LCBtZWRpYUZtKTtcbiAgICBBdXRvRmllbGQudGFncyhkdiwgbWVkaWFGbSwgMyk7XG5cbiAgICBjb25zdCBsb2dFbnRyaWVzID0gZHZcbiAgICAgIC5wYWdlcyhgXCIke1BhdGhzLkxvZ3N9LyR7Zm0udXVpZH1cImApXG4gICAgICAud2hlcmUoKHApID0+IHAudHlwZSA9PT0gNilcbiAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiZGVzY1wiKTtcbiAgICBBdXRvRmllbGQubG9ncyhkdiwgbG9nRW50cmllcyk7XG4gIH0sXG5cbiAgYXV0b0ZpZWxkVGl0bGUoZHYsIGZtKSB7XG4gICAgY29uc3QgdGl0bGUgPSBmbS5hbGlhcztcbiAgICBpZiAodGl0bGUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZHYuaGVhZGVyKDEsIHRpdGxlKTtcbiAgfSxcblxuICBhdXRvRmllbGRBdXRob3JzKGR2LCBmbSkge1xuICAgIGNvbnN0IGF1dGhvcnMgPSBmbS5hdXRob3JzO1xuICAgIGlmIChhdXRob3JzID09PSB1bmRlZmluZWQgfHwgYXV0aG9ycy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHYuaGVhZGVyKDIsIFwiQXV0aG9yc1wiKTtcbiAgICBkdi5saXN0KGF1dGhvcnMpO1xuICB9LFxuXG4gIGF1dG9GaWVsZFRhZ3MoZHYsIGZtKSB7XG4gICAgY29uc3QgdGFncyA9IGZtLnRhZ3M7XG4gICAgaWYgKHRhZ3MgPT0gdW5kZWZpbmVkIHx8IHRhZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGFncy5zb3J0KCk7XG4gICAgZHYuaGVhZGVyKDIsIFwiVGFnc1wiKTtcbiAgICBsZXQgcyA9IFwiXCI7XG4gICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgcyArPSBgICMke3RhZ31gO1xuICAgIH1cbiAgICBkdi5wYXJhZ3JhcGgocyk7XG4gIH0sXG5cbiAgbGl0ZXJhdHVyZShkdikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBkdi5jdXJyZW50KCk7XG4gICAgY29uc3QgZm0gPSBjdXJyZW50LmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKEhlbHBlci5uaWxDaGVjayhmbS5hdXRob3JzKSkge1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmF1dG9GaWVsZFRpdGxlKGR2LCBmbSk7XG4gICAgICB0aGlzLmF1dG9GaWVsZEF1dGhvcnMoZHYsIGZtKTtcbiAgICAgIHRoaXMuYXV0b0ZpZWxkVGFncyhkdiwgZm0pO1xuICAgIH1cbiAgfSxcblxuICBnb2FsKGR2KSB7XG4gICAgY29uc3QgY3VycmVudCA9IGR2LmN1cnJlbnQoKTtcbiAgICBjb25zdCBmbSA9IGN1cnJlbnQuZmlsZS5mcm9udG1hdHRlcjtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc29sZS53YXJuKFwiZm0gaXMgcmVxdWlyZWRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gdGhpcy5hdXRvRmllbGROZWVkKGR2LCBmbSk7XG4gICAgLy8gdGhpcy5hdXRvRmllbGROZWVkZWRCeShkdiwgY3VycmVudCk7XG4gICAgLy8gdGhpcy5hdXRvRmllbGRUYWdzKGR2LCBmbSk7XG4gICAgLy9cbiAgICBjb25zdCBjcmVhdGVkX2F0ID0gbmV3IERhdGUoZm0uY3JlYXRlZF9hdCk7XG4gICAgY29uc3QgbG9nRW50cmllcyA9IGR2XG4gICAgICAucGFnZXMoYFwiJHtQYXRocy5Mb2dzfS8ke2ZtLnV1aWR9XCJgKVxuICAgICAgLndoZXJlKChwKSA9PiBwLnR5cGUgPT09IDYpXG4gICAgICAuc29ydCgoaykgPT4gay5jcmVhdGVkX2F0LCBcImRlc2NcIik7XG5cbiAgICBjb25zdCBidWZmID0gW107XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBsb2dFbnRyaWVzKSB7XG4gICAgICBjb25zdCBmbWUgPSBlbnRyeS5maWxlLmZyb250bWF0dGVyO1xuICAgICAgY29uc3QgZSA9IFtdO1xuXG4gICAgICBpZiAoZm1lID09PSB1bmRlZmluZWQgfHwgZm1lLmNyZWF0ZWRfYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZnJvbnRtYXR0ZXI6ICR7Zm1lLnV1aWR9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoZm1lLmNyZWF0ZWRfYXQpO1xuICAgICAgZS5wdXNoKHN0YXJ0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApKTtcblxuICAgICAgZS5wdXNoKFxuICAgICAgICBkdi5zZWN0aW9uTGluayhcbiAgICAgICAgICBmbWUudXVpZCxcbiAgICAgICAgICBcIiMjIENvbnRlbnRcIixcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICBmbWUudXVpZC5zbGljZSgwLCA4KSxcbiAgICAgICAgKSxcbiAgICAgICk7XG5cbiAgICAgIGJ1ZmYucHVzaChlKTtcbiAgICB9XG5cbiAgICBjb25zdCBiZWZvcmUgPSBuZXcgRGF0ZShmbS5iZWZvcmUpO1xuICAgIC8vIGRheXNcbiAgICBjb25zdCB0aW1lZnJhbWUgPVxuICAgICAgKGJlZm9yZS5nZXRUaW1lKCkgLSBjcmVhdGVkX2F0LmdldFRpbWUoKSkgLyAoMTAwMCAqIDM2MDAgKiAyNCk7XG4gICAgbGV0IHRpbWVmcmFtZVRleHQgPSBcIlwiO1xuICAgIC8vIDEgam91clxuICAgIC8vIDEgc2VtYWluZVxuICAgIC8vIDIgc2VtYWluZVxuICAgIC8vIDEgbW9pc1xuICAgIC8vIDIgbW9pc1xuICAgIC8vIDYgbW9pc1xuICAgIC8vIDEgYW5cbiAgICAvLyAyIGFuc1xuICAgIC8vIDUgYW5zXG4gICAgZHYuaGVhZGVyKDMsIFwiVGltZWZyYW1lXCIpO1xuICAgIGlmICh0aW1lZnJhbWUgPiAwICYmIHRpbWVmcmFtZSA8IDMwKSB7XG4gICAgICB0aW1lZnJhbWVUZXh0ID0gXCJydW5hd2F5XCI7XG4gICAgfSBlbHNlIGlmICh0aW1lZnJhbWUgPCA2MCkge1xuICAgICAgdGltZWZyYW1lVGV4dCA9IFwiMTAsMDAwIGZlZXRcIjtcbiAgICB9IGVsc2UgaWYgKHRpbWVmcmFtZSA8IDM2MCkge1xuICAgICAgdGltZWZyYW1lVGV4dCA9IFwiMjAsMDAwIGZlZXRcIjtcbiAgICB9IGVsc2UgaWYgKHRpbWVmcmFtZSA8IDcyMCkge1xuICAgICAgdGltZWZyYW1lVGV4dCA9IFwiMzAsMDAwIGZlZXRcIjtcbiAgICB9IGVsc2UgaWYgKHRpbWVmcmFtZSA8IDEwODApIHtcbiAgICAgIHRpbWVmcmFtZVRleHQgPSBcIjQwLDAwMCBmZWV0XCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpbWVmcmFtZVRleHQgPSBcIjUwLDAwMCBmZWV0XCI7XG4gICAgfVxuXG4gICAgZHYucGFyYWdyYXBoKHRpbWVmcmFtZVRleHQpO1xuXG4gICAgaWYgKGJ1ZmYubGVuZ3RoID4gMCkge1xuICAgICAgZHYuaGVhZGVyKDIsIFwiUmV2aWV3c1wiKTtcbiAgICAgIGR2LnRhYmxlKFtcInJldmlld2VkX2F0XCIsIFwidXVpZFwiXSwgYnVmZik7XG4gICAgfVxuICB9LFxuXG4gIGRhaWx5KGR2KSB7XG4gICAgY29uc3QgY3VycmVudCA9IGR2LmN1cnJlbnQoKS5maWxlLmZyb250bWF0dGVyO1xuICAgIGNvbnN0IGN1cnJlbnRBdCA9IG5ldyBEYXRlKGN1cnJlbnQuYXQpO1xuICAgIGNvbnN0IGN1cnJlbnRBdFNob3J0ID0gY3VycmVudEF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgNyk7XG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgZ29uZXh0ID0gYXBwLnBsdWdpbnMucGx1Z2lucy5vYnNpZGlhbl9nb25leHQ7XG4gICAgY29uc3Qgbm90ZUhlbHBlciA9IG5ldyBOb3RlSGVscGVyKGdvbmV4dCwgZHYsIG5ldyBGcm9udG1hdHRlcihnb25leHQpKTtcblxuICAgIGNvbnN0IHBhZ2VzID0gZHZcbiAgICAgIC5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfVwiYClcbiAgICAgIC53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgICAvLyBpZiAocGFnZS5maWxlLmZyb250bWF0dGVyLmF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gXHRyZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIH1cblxuICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICBpZiAoY3VycmVudC51dWlkID09PSBmbS51dWlkKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZtLmZtLnN0YXR1cyAhPT0gXCJ0b2RvXCIgfHwgZm0uZ2V0UHJvamVjdCgpID09PSBcImRhaWx5XCIpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBub3cgPSBjdXJyZW50QXQ7XG4gICAgICAgIGxldCBmbUF0U2hvcnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm1BdFNob3J0ID0gZm0uYXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtmbS51dWlkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFub3RlSGVscGVyLmlzRG9hYmxlKHBhZ2UsIGN1cnJlbnRBdCkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiAoZm0udXVpZCA9PT0gXCIyYTk3ZGUzNS1jYTg3LTQyNjctOTE1OS02YzA5NmQ0MTYzZjFcIikge1xuICAgICAgICAvLyBcdGNvbnNvbGUubG9nKGB1dWlkOiAke2ZtLnV1aWR9YCk7XG4gICAgICAgIC8vIFx0Y29uc29sZS5sb2coYG5vdzogJHtub3d9YCk7XG4gICAgICAgIC8vIFx0Y29uc29sZS5sb2coYGZtLmF0OiAke2ZtLmF0fWApO1xuICAgICAgICAvLyBcdGNvbnNvbGUubG9nKGBmbUF0U2hvcnQ6ICR7Zm1BdFNob3J0fWApO1xuICAgICAgICAvLyBcdGNvbnNvbGUubG9nKGBjdXJyZW50QXRTaG9ydDogJHtjdXJyZW50QXRTaG9ydH1gKTtcbiAgICAgICAgLy8gXHRjb25zb2xlLmxvZyhgY29uZGl0aW9uOiAke2ZtLmF0ICE9PSB1bmRlZmluZWQgJiYgZm1BdFNob3J0ID09PSBjdXJyZW50QXRTaG9ydH1gKTtcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuYXQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgIGZtQXRTaG9ydCA9PT0gY3VycmVudEF0U2hvcnRcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgcGFnZS5maWxlLmZyb250bWF0dGVyLmF0ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICBmbS5hdC5nZXRUaW1lKCkgPCBub3cuZ2V0VGltZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHBhZ2UuZmlsZS5mcm9udG1hdHRlci5iZWZvcmUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgIGZtLmJlZm9yZS5nZXRUaW1lKCkgPiBub3cuZ2V0VGltZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHBhZ2UuZmlsZS5mcm9udG1hdHRlci5hZnRlciAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgZm0uYWZ0ZXIuZ2V0VGltZSgpIDwgbm93LmdldFRpbWUoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0pXG4gICAgICAuc29ydCgoaykgPT4gay5hdCwgXCJhc2NcIik7XG5cbiAgICBpZiAocGFnZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgYnVmZiA9IFtdO1xuICAgICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgIGNvbnN0IGggPSBTdHJpbmcoZm0uYXQuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuICAgICAgICBjb25zdCBtID0gU3RyaW5nKGZtLmF0LmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuICAgICAgICBpZiAocGFnZS5maWxlLmZyb250bWF0dGVyLnN0YXR1cyA9PT0gXCJkb25lXCIpIHtcbiAgICAgICAgICBidWZmLnB1c2goW1xuICAgICAgICAgICAgYH5+JHtSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChkdiwgcGFnZS5maWxlLCBcIlRhc2tcIil9fn5gLFxuICAgICAgICAgICAgYH5+JHtofToke219fn5gLFxuICAgICAgICAgIF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgICAgICBgJHtSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChkdiwgcGFnZS5maWxlLCBcIlRhc2tcIil9YCxcbiAgICAgICAgICAgIGAke2h9OiR7bX1gLFxuICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBkdi50YWJsZShbXCJ1dWlkXCIsIFwiYXRcIl0sIGJ1ZmYpO1xuICAgIH1cblxuICAgIEF1dG9GaWVsZC5kYWlseUpvdXJhbChkdik7XG4gICAgLy8gQXV0b0ZpZWxkLm1vbnRobHlKb3VyYWwoZHYpO1xuICB9LFxuXG4gIG1vbnRobHlKb3VyYWwoZHYpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gbmV3IEZyb250bWF0dGVySlMoZHYuY3VycmVudCgpKTtcbiAgICBjb25zdCBjdXJyZW50QXRTaG9ydCA9IGN1cnJlbnQuYXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCA3KTtcblxuICAgIGNvbnN0IHBhZ2VzID0gZHZcbiAgICAgIC5wYWdlcyhgXCJKb3VybmFsXCJgKVxuICAgICAgLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgIGNvbnN0IGF0U2hvcnQgPSBmbS5jcmVhdGVkQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCA3KTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGF0U2hvcnQgPT09IGN1cnJlbnRBdFNob3J0ICYmXG4gICAgICAgICAgZm0uZ2V0UHJvamVjdCgpID09PSBcIm1vbnRobHlcIlxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0pXG4gICAgICAuc29ydCgoaykgPT4gay5jcmVhdGVkX2F0LCBcImFzY1wiKTtcblxuICAgIGR2LmhlYWRlcigyLCBcIkpvdXJuYWxcIik7XG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgaWYgKHBhZ2UuZmlsZS5mcm9udG1hdHRlci5hbGlhcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBhZ2UuZmlsZS5mcm9udG1hdHRlci5uYW1lID0gcGFnZS5maWxlLmZyb250bWF0dGVyLmFsaWFzO1xuICAgICAgfSBlbHNlIGlmIChmbS5nZXRQcm9qZWN0KCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIubmFtZSA9IGZtLmdldFByb2plY3QoKTtcbiAgICAgIH0gZWxzZSBpZiAoZm0uZ2V0RG9tYWluKCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIubmFtZSA9IGZtLmdldERvbWFpbigpO1xuICAgICAgfVxuXG4gICAgICBkdi5wYXJhZ3JhcGgoUmVuZGVyZXIubWFrZUxpbmtOYW1lKGR2LCBwYWdlLmZpbGUpKTtcbiAgICB9XG4gIH0sXG5cbiAgZGFpbHlKb3VyYWwoZHYpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gbmV3IEZyb250bWF0dGVySlMoZHYuY3VycmVudCgpKTtcbiAgICBjb25zdCBjdXJyZW50QXRTaG9ydCA9IGN1cnJlbnQuYXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgY29uc29sZS5sb2coY3VycmVudEF0U2hvcnQpO1xuICAgIGNvbnN0IHBhZ2VzID0gZHZcbiAgICAgIC5wYWdlcyhgXCJKb3VybmFsXCJgKVxuICAgICAgLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgIGNvbnN0IGF0U2hvcnQgPSBmbS5jcmVhdGVkQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgICAgIGlmIChhdFNob3J0ID09PSBjdXJyZW50QXRTaG9ydCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSlcbiAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiYXNjXCIpO1xuXG4gICAgZHYuaGVhZGVyKDIsIFwiSm91cm5hbFwiKTtcbiAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgcGFnZXMpIHtcbiAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICBpZiAocGFnZS5maWxlLmZyb250bWF0dGVyLmFsaWFzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcGFnZS5maWxlLmZyb250bWF0dGVyLm5hbWUgPSBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuYWxpYXM7XG4gICAgICB9IGVsc2UgaWYgKGZtLmdldFByb2plY3QoKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBhZ2UuZmlsZS5mcm9udG1hdHRlci5uYW1lID0gZm0uZ2V0UHJvamVjdCgpO1xuICAgICAgfSBlbHNlIGlmIChmbS5nZXREb21haW4oKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBhZ2UuZmlsZS5mcm9udG1hdHRlci5uYW1lID0gZm0uZ2V0RG9tYWluKCk7XG4gICAgICB9XG5cbiAgICAgIGR2LnBhcmFncmFwaChSZW5kZXJlci5tYWtlTGlua05hbWUoZHYsIHBhZ2UuZmlsZSkpO1xuICAgICAgLy8gZHYucGFyYWdyYXBoKFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIHBhZ2UuZmlsZSkpO1xuICAgIH1cbiAgfSxcblxuICBkYWlseUdvYWxzKGR2KSB7XG4gICAgY29uc3QgY3VycmVudCA9IGR2LmN1cnJlbnQoKS5maWxlLmZyb250bWF0dGVyO1xuICAgIGNvbnN0IGN1cnJlbnRBdCA9IG5ldyBEYXRlKGN1cnJlbnQuYXQpO1xuXG4gICAgY29uc3QgcGFnZXMgPSBkdlxuICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuR29hbHN9XCJgKVxuICAgICAgLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICAgIGlmIChwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuc3RhdHVzICE9PSBcImFjdGl2ZVwiKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnNvcnQoKGspID0+IGsuYXQsIFwiYXNjXCIpO1xuXG4gICAgaWYgKHBhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuICAgICAgZHYucGFyYWdyYXBoKFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKGR2LCBwYWdlLmZpbGUpKTtcbiAgICB9XG4gIH0sXG5cbiAgdGFzayhkdikge1xuICAgIGNvbnN0IGR2TGliID0gbmV3IER2TGliKCk7XG4gICAgZHZMaWIuYXV0b0ZpZWxkVGFzayhkdik7XG4gIH0sXG5cbiAgbG9nKGR2KSB7XG4gICAgY29uc3QgY3VycmVudCA9IGR2LmN1cnJlbnQoKTtcbiAgICBjb25zdCBjdXJGbSA9IG5ldyBGcm9udG1hdHRlckpTKGN1cnJlbnQpO1xuICAgIGNvbnN0IGN1cnJlbnRJZCA9IGN1ckZtLnV1aWQ7XG4gICAgY29uc3QgY3VycmVudFBhcmVudElkID0gY3VycmVudC5maWxlLnBhdGguc3BsaXQoXCIvXCIpWzFdO1xuICAgIEFzc2VydC5UcnVlKFxuICAgICAgY3VycmVudFBhcmVudElkICE9PSB1bmRlZmluZWQsXG4gICAgICBgY3VycmVudFBhcmVudElkIHVuZGVmaW5lZCBmb3IgJHtjdXJGbS51dWlkfWAsXG4gICAgKTtcblxuICAgIGNvbnN0IHBhZ2VzID0gZHZcbiAgICAgIC5wYWdlcyhgXCIke1BhdGhzLkxvZ3N9XCJgKVxuICAgICAgLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgIGNvbnN0IHBhcmVudElkID0gcGFnZS5maWxlLnBhdGguc3BsaXQoXCIvXCIpWzFdO1xuICAgICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgICBwYXJlbnRJZCAhPT0gdW5kZWZpbmVkLFxuICAgICAgICAgIGBwYXJlbnRJZCB1bmRlZmluZWQgZm9yICR7Zm0udXVpZH1gLFxuICAgICAgICApO1xuICAgICAgICBpZiAocGFyZW50SWQgIT09IGN1cnJlbnRQYXJlbnRJZCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSlcbiAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiYXNjXCIpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcGFnZSA9IHBhZ2VzW2ldO1xuICAgICAgQXNzZXJ0LlRydWUocGFnZSAhPT0gdW5kZWZpbmVkLCBcImFzcyBlcnQgZmFpbGVkXCIpO1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGlmIChmbS51dWlkID09PSBjdXJyZW50SWQpIHtcbiAgICAgICAgLy8gZ290Y2hhXG4gICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgY29uc3QgZHZMaWIgPSBuZXcgRHZMaWIoKTtcbiAgICAgICAgICBkdkxpYi5hdXRvRmllbGRMb2coZHYpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGR2LnBhcmFncmFwaChcbiAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKGR2LCBwYWdlc1tpIC0gMV0uZmlsZSksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbn07XG5cbi8vIHRoaXMgbXVzdCBiZSBjYWxsZWQgZnJvbSBgZGF0YXZpZXdqc2AgY29kZWJsb2Nrc1xuZXhwb3J0IGNvbnN0IFJlbmRlcmVyID0ge1xuICBtYWtlTGlua05hbWUoZHYsIGYsIGFuY2hvciA9IFwiQ29udGVudFwiKSB7XG4gICAgaWYgKEhlbHBlci5uaWxDaGVjayhmLmZyb250bWF0dGVyLm5hbWUpKSB7XG4gICAgICByZXR1cm4gUmVuZGVyZXIubWFrZUxpbmtTaG9ydFVVSUQoZHYsIGYsIGFuY2hvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGR2LnNlY3Rpb25MaW5rKGYucGF0aCwgYW5jaG9yLCBmYWxzZSwgYCR7Zi5mcm9udG1hdHRlci5uYW1lfWApO1xuICB9LFxuXG4gIG1ha2VMaW5rQWxpYXMoZHYsIGYsIGFuY2hvciA9IFwiQ29udGVudFwiKSB7XG4gICAgaWYgKEhlbHBlci5uaWxDaGVjayhmLmZyb250bWF0dGVyLmFsaWFzKSkge1xuICAgICAgcmV0dXJuIFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKGR2LCBmLCBhbmNob3IpO1xuICAgIH1cblxuICAgIHJldHVybiBkdi5zZWN0aW9uTGluayhmLnBhdGgsIGFuY2hvciwgZmFsc2UsIGAke2YuZnJvbnRtYXR0ZXIuYWxpYXN9YCk7XG4gIH0sXG5cbiAgbWFrZUxpbmtTaG9ydFVVSUQoZHYsIGYsIGFuY2hvciA9IFwiQ29udGVudFwiKSB7XG4gICAgcmV0dXJuIGR2LnNlY3Rpb25MaW5rKFxuICAgICAgZi5wYXRoLFxuICAgICAgYW5jaG9yLFxuICAgICAgZmFsc2UsXG4gICAgICBgJHtmLmZyb250bWF0dGVyLnV1aWQuc2xpY2UoMCwgOCl9YCxcbiAgICApO1xuICB9LFxuXG4gIG1ha2VMaW5rKGR2LCBmLCBuYW1lID0gdW5kZWZpbmVkLCBhbmNob3IgPSBcIkNvbnRlbnRcIikge1xuICAgIHJldHVybiBkdi5zZWN0aW9uTGluayhmLnBhdGgsIGFuY2hvciwgZmFsc2UsIG5hbWUpO1xuICB9LFxuXG4gIHByb2plY3RMb2dzKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgY29scyA9IFtcInR5cGVcIiwgXCJ0YXNrX2lkXCIsIFwibG9nX2lkXCIsIFwidG9va1wiLCBcInJldmlld2VkXCJdO1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBsZXQgdG90YWxUaW1lID0gMDtcblxuICAgIGZvciAoY29uc3QgZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCBmID0gZC5maWxlO1xuICAgICAgY29uc3QgZm0gPSBkLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgIUhlbHBlci5uaWxDaGVjayhmbS51dWlkKSxcbiAgICAgICAgYFwidXVpZFwiIGlkIG5vdCBkZWZpbmVkIGZvcjogJHtmLnBhdGh9YCxcbiAgICAgICk7XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgIUhlbHBlci5uaWxDaGVjayhmbS50eXBlKSxcbiAgICAgICAgYFwidHlwZVwiIGlkIG5vdCBkZWZpbmVkIGZvcjogJHtmLnBhdGh9YCxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGNyZWF0ZWRBdCA9IG5ldyBEYXRlKGZtLmNyZWF0ZWRfYXQpO1xuICAgICAgY29uc3QgZG9uZUF0ID0gbmV3IERhdGUoZm0uZG9uZV9hdCk7XG4gICAgICBjb25zdCBkZWx0YSA9IGRvbmVBdC5nZXRUaW1lKCkgLSBjcmVhdGVkQXQuZ2V0VGltZSgpO1xuXG4gICAgICB0b3RhbFRpbWUgKz0gZGVsdGE7XG4gICAgICBjb25zdCByZWNvcmQgPSB7XG4gICAgICAgIHRhc2tJZDogXCJcIixcbiAgICAgICAgbG9nSWQ6IFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIGYpLFxuICAgICAgICB0b29rOiBNYXRoLnJvdW5kKChkZWx0YSAvICgxMDAwICogNjAgKiA2MCkpICogMTApIC8gMTAsXG4gICAgICAgIHJldmlld2VkOiBIZWxwZXIubmlsQ2hlY2soZm0ucmV2aWV3ZWQpID8gMCA6IGZtLnJldmlld2VkLFxuICAgICAgICB0eXBlOiB1bmRlZmluZWQsXG4gICAgICB9O1xuICAgICAgY29uc3QgcGFnZXMgPSBkdi5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfS8ke2ZtLnBhcmVudF9pZH1cImApLmFycmF5KCk7XG4gICAgICBpZiAocGFnZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgcGFyZW50IHRhc2sgd2l0aCBpZDogXCIke2ZtLnBhcmVudF9pZH1cIiBkb2VzIG5vdCBleGlzdHNgLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgcGFyZW50ID0gcGFnZXNbMF07XG4gICAgICBzd2l0Y2ggKHBhcmVudC5maWxlLmZyb250bWF0dGVyLnR5cGUpIHtcbiAgICAgICAgY2FzZSBUeXBlcy5UYXNrOlxuICAgICAgICAgIHJlY29yZC50eXBlID0gYDxmb250IGNvbG9yPThCMDAwMD50YXNrPC9mb250PmA7XG4gICAgICAgICAgcmVjb3JkLnRhc2tJZCA9IFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKFxuICAgICAgICAgICAgZHYsXG4gICAgICAgICAgICBwYXJlbnQuZmlsZSxcbiAgICAgICAgICAgIFwiVGFza1wiLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZXMuTWVkaWE6XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPSBgPGZvbnQgY29sb3I9MDAwMDhCPm1lZGlhPC9mb250PmA7XG4gICAgICAgICAgcmVjb3JkLnRhc2tJZCA9IFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKFxuICAgICAgICAgICAgZHYsXG4gICAgICAgICAgICBwYXJlbnQuZmlsZSxcbiAgICAgICAgICAgIFwiQ29udGVudFwiLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZXMuUHJheGlzOlxuICAgICAgICAgIHJlY29yZC50eXBlID0gYDxmb250IGNvbG9yPUZGOEMwMD5wcmF4aXM8L2ZvbnQ+YDtcbiAgICAgICAgICByZWNvcmQudGFza0lkID0gUmVuZGVyZXIubWFrZUxpbmtTaG9ydFVVSUQoXG4gICAgICAgICAgICBkdixcbiAgICAgICAgICAgIHBhcmVudC5maWxlLFxuICAgICAgICAgICAgXCJDb250ZW50XCIsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlcy5Qcm92aXNpb246XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPSBgPGZvbnQgY29sb3I9REMxNDNDPnByb3Zpc2lvbjwvZm9udD5gO1xuICAgICAgICAgIHJlY29yZC50YXNrSWQgPSBSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChcbiAgICAgICAgICAgIGR2LFxuICAgICAgICAgICAgcGFyZW50LmZpbGUsXG4gICAgICAgICAgICBcIkNvbnRlbnRcIixcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBSZW5kZXJlci5wcm9qZWN0TG9nczogdHlwZSBcIiR7cGFyZW50LmZpbGUuZnJvbnRtYXR0ZXIudHlwZX1cIiBub3QgaW1wbGVtZW50ZWRgLFxuICAgICAgICAgICk7XG4gICAgICB9XG4gICAgICBidWZmLnB1c2goW1xuICAgICAgICByZWNvcmQudHlwZSxcbiAgICAgICAgcmVjb3JkLnRhc2tJZCxcbiAgICAgICAgcmVjb3JkLmxvZ0lkLFxuICAgICAgICByZWNvcmQudG9vayxcbiAgICAgICAgcmVjb3JkLnJldmlld2VkLFxuICAgICAgXSk7XG4gICAgfVxuXG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gICAgLy8gTWF0aC5yb3VuZCgodG90YWxUaW1lIC8gKDEwMDAgKiA2MCAqIDYwKSkgKiAxMCkgLyAxMCxcbiAgfSxcblxuICBnb2FsKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGZvciAoY29uc3QgZm0gb2YgZGF0YSkge1xuICAgICAgY29uc3QgY3JlYXRlZF9hdCA9IGZtLmNyZWF0ZWRBdDtcbiAgICAgIGNvbnN0IGxvZ0VudHJpZXMgPSBkdlxuICAgICAgICAucGFnZXMoYFwiJHtQYXRocy5Mb2dzfS8ke2ZtLnV1aWR9XCJgKVxuICAgICAgICAud2hlcmUoKHApID0+IHAudHlwZSA9PT0gNilcbiAgICAgICAgLnNvcnQoKGspID0+IGsuY3JlYXRlZF9hdCwgXCJkZXNjXCIpO1xuICAgICAgY29uc3QgYmVmb3JlID0gbmV3IERhdGUoZm0uZm0uYmVmb3JlKTtcblxuICAgICAgY29uc3QgdGltZWZyYW1lID1cbiAgICAgICAgKGJlZm9yZS5nZXRUaW1lKCkgLSBjcmVhdGVkX2F0LmdldFRpbWUoKSkgLyAoMTAwMCAqIDM2MDAgKiAyNCk7XG4gICAgICBsZXQgdGltZWZyYW1lVGV4dCA9IFwiXCI7XG4gICAgICBpZiAodGltZWZyYW1lID4gMCAmJiB0aW1lZnJhbWUgPCAzMCkge1xuICAgICAgICB0aW1lZnJhbWVUZXh0ID0gXCJydW5hd2F5XCI7XG4gICAgICB9IGVsc2UgaWYgKHRpbWVmcmFtZSA8IDYwKSB7XG4gICAgICAgIHRpbWVmcmFtZVRleHQgPSBcIjEwLDAwMCBmZWV0XCI7XG4gICAgICB9IGVsc2UgaWYgKHRpbWVmcmFtZSA8IDM2MCkge1xuICAgICAgICB0aW1lZnJhbWVUZXh0ID0gXCIyMCwwMDAgZmVldFwiO1xuICAgICAgfSBlbHNlIGlmICh0aW1lZnJhbWUgPCA3MjApIHtcbiAgICAgICAgdGltZWZyYW1lVGV4dCA9IFwiMzAsMDAwIGZlZXRcIjtcbiAgICAgIH0gZWxzZSBpZiAodGltZWZyYW1lIDwgMTA4MCkge1xuICAgICAgICB0aW1lZnJhbWVUZXh0ID0gXCI0MCwwMDAgZmVldFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGltZWZyYW1lVGV4dCA9IFwiNTAsMDAwIGZlZXRcIjtcbiAgICAgIH1cblxuICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgYmVmb3JlLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApLFxuICAgICAgICBkdi5zZWN0aW9uTGluayhcbiAgICAgICAgICBmbS51dWlkLFxuICAgICAgICAgIFwiIyMgQ29udGVudFwiLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIGZtLnV1aWQuc2xpY2UoMCwgOCksXG4gICAgICAgICksXG4gICAgICAgIGZtLmdldERvbWFpbigpLFxuICAgICAgICB0aW1lZnJhbWVUZXh0LFxuICAgICAgXSk7XG4gICAgfVxuXG4gICAgZHYudGFibGUoW1wiZGVhZGxpbmVcIiwgXCJ1dWlkXCIsIFwiZG9tYWluXCIsIFwidGltZWZyYW1lXCJdLCBidWZmKTtcbiAgfSxcblxuICBpbmJveEVudHJ5KGR2LCBkYXRhKSB7XG4gICAgY29uc3QgY29scyA9IFtcbiAgICAgIFwidXVpZFwiLFxuICAgICAgLy8gXCJ0eXBlXCIsXG4gICAgICAvLyBcImFnZVwiLFxuICAgICAgLy8gXCJzaXplXCIsXG4gICAgICBcIm5hbWVcIixcbiAgICAgIC8vIFwicHJvamVjdFwiLFxuICAgICAgLy8gXCJkb21haW5cIixcbiAgICAgIC8vIFwiY29tcG9uZW50c1wiLFxuICAgIF07XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGZvciAoY29uc3QgZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCBmID0gZC5maWxlO1xuICAgICAgY29uc3QgZm0gPSBkLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgIUhlbHBlci5uaWxDaGVjayhmbS51dWlkKSxcbiAgICAgICAgYFwidXVpZFwiIGlkIG5vdCBkZWZpbmVkIGZvcjogJHtmLnBhdGh9YCxcbiAgICAgICk7XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgIUhlbHBlci5uaWxDaGVjayhmbS50eXBlKSxcbiAgICAgICAgYFwidHlwZVwiIGlkIG5vdCBkZWZpbmVkIGZvcjogJHtmLnBhdGh9YCxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICBjb25zdCBkZWx0YSA9IG5vdy5nZXRUaW1lKCkgLSBmbS5jcmVhdGVkQXQuZ2V0VGltZSgpO1xuICAgICAgY29uc3Qgc2luY2UgPSBIZWxwZXIubXNlY1RvU3RyaW5nRHVyYXRpb24oZGVsdGEpO1xuICAgICAgbGV0IG5hbWUgPSBcIlwiO1xuXG4gICAgICBpZiAoZm0uZG9tYWluICE9PSBcImRvbWFpbi91bmRlZmluZWRcIikge1xuICAgICAgICBuYW1lID0gZm0uZG9tYWluO1xuICAgICAgfSBlbHNlIGlmIChmbS5wcm9qZWN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmFtZSA9IGZtLnByb2plY3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuYW1lID0gXCJcXFxcLVwiO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZWNvcmQgPSB7XG4gICAgICAgIHV1aWQ6XG4gICAgICAgICAgSGVscGVyLm51bWJlclR5cGVUb1N0cmluZyhmbSkgPT09IFwiZmxlZXRpbmdcIlxuICAgICAgICAgICAgPyBgJiMxMjgxOTYgJHtSZW5kZXJlci5tYWtlTGlua0FsaWFzKGR2LCBmKX1gXG4gICAgICAgICAgICA6IFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIGYpLFxuICAgICAgICAvLyB1dWlkOiBgJiM5NzI4ICR7UmVuZGVyZXIubWFrZUxpbmtBbGlhcyhkdiwgZil9YCxcbiAgICAgICAgdHlwZTogSGVscGVyLm51bWJlclR5cGVUb1N0cmluZyhmbSksXG4gICAgICAgIHNpbmNlOiBgJHtzaW5jZX1gLFxuICAgICAgICBzaXplOiBmLnNpemUsXG4gICAgICAgIHByb2plY3Q6IGZtLnByb2plY3QgPT09IHVuZGVmaW5lZCA/IFwiXFxcXC1cIiA6IGZtLnByb2plY3Quc2xpY2UoOCksXG4gICAgICAgIGRvbWFpbjogZm0uZG9tYWluID09PSB1bmRlZmluZWQgPyBcIlxcXFwtXCIgOiBmbS5kb21haW4uc2xpY2UoNyksIC8vUmVuZGVyZXIuZG9tYWluQmFzZShkdiwgZm0uZG9tYWluKSxcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgIH07XG5cbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJsb2dcIikge1xuICAgICAgICBjb25zdCBwYWdlcyA9IGR2XG4gICAgICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9LyR7Zm0ucGFyZW50X2lkfVwiYClcbiAgICAgICAgICAuYXJyYXkoKTtcbiAgICAgICAgaWYgKHBhZ2VzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtmbS5wYXJlbnRfaWR9ICR7Zm0uaWR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyZW50ID0gcGFnZXNbMF07XG4gICAgICAgIHN3aXRjaCAocGFyZW50LnR5cGUpIHtcbiAgICAgICAgICBjYXNlIFR5cGVzLlRhc2s6XG4gICAgICAgICAgICByZWNvcmQudXVpZCA9IGAmIzEyODIxMSAke3JlY29yZC51dWlkfWA7XG4gICAgICAgICAgICByZWNvcmQudHlwZSA9IGA8Zm9udCBjb2xvcj04QjAwMDA+dGFzazwvZm9udD5gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBUeXBlcy5QcmF4aXM6XG4gICAgICAgICAgICByZWNvcmQudXVpZCA9IGAmIzEyODE4OCAke3JlY29yZC51dWlkfWA7XG4gICAgICAgICAgICByZWNvcmQudHlwZSA9IGA8Zm9udCBjb2xvcj1GRjhDMDA+cHJheGlzPC9mb250PmA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFR5cGVzLk1lZGlhOlxuICAgICAgICAgICAgcmVjb3JkLnV1aWQgPSBgJiMxMjgxOTEgJHtyZWNvcmQudXVpZH1gO1xuICAgICAgICAgICAgcmVjb3JkLnR5cGUgPSBgPGZvbnQgY29sb3I9MDAwMDhCPm1lZGlhPC9mb250PmA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFR5cGVzLlByb3Zpc2lvbjpcbiAgICAgICAgICAgIHJlY29yZC50eXBlID0gYDxmb250IGNvbG9yPURDMTQzQz5wcm92aXNpb248L2ZvbnQ+YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBidWZmLnB1c2goW1xuICAgICAgICByZWNvcmQudXVpZCxcbiAgICAgICAgLy8gcmVjb3JkLnR5cGUsXG4gICAgICAgIC8vIHJlY29yZC5zaW5jZSxcbiAgICAgICAgLy8gcmVjb3JkLnNpemUsXG4gICAgICAgIHJlY29yZC5uYW1lLFxuICAgICAgICAvLyByZWNvcmQucHJvamVjdCxcbiAgICAgICAgLy8gcmVjb3JkLmRvbWFpbixcbiAgICAgIF0pO1xuICAgIH1cblxuICAgIGR2LnRhYmxlKGNvbHMsIGJ1ZmYpO1xuICB9LFxuXG4gIHJlc291cmNlQmFzZShkdiwgZGF0YSkge1xuICAgIGNvbnN0IGNvbHMgPSBbXCJ1dWlkXCJdO1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xuICAgICAgY29uc3QgZiA9IGQuZmlsZTtcbiAgICAgIGNvbnN0IGZtID0gZC5maWxlLmZyb250bWF0dGVyO1xuICAgICAgQXNzZXJ0LlRydWUoXG4gICAgICAgICFIZWxwZXIubmlsQ2hlY2soZm0udXVpZCksXG4gICAgICAgIGBcInV1aWRcIiBpZCBub3QgZGVmaW5lZCBmb3I6ICR7Zi5wYXRofWAsXG4gICAgICApO1xuICAgICAgYnVmZi5wdXNoKFtSZW5kZXJlci5tYWtlTGlua0FsaWFzKGR2LCBmKV0pO1xuICAgIH1cblxuICAgIGR2LnRhYmxlKGNvbHMsIGJ1ZmYpO1xuICB9LFxuXG4gIGJhc2ljUmVsYXRpb24oZHYsIGRhdGEpIHtcbiAgICBjb25zdCBjb2xzID0gW1widXVpZFwiLCBcIm5hbWVcIl07XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGZvciAoY29uc3QgZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCBmID0gZC5maWxlO1xuICAgICAgY29uc3QgZm0gPSBkLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgIUhlbHBlci5uaWxDaGVjayhmbS51dWlkKSxcbiAgICAgICAgYFwidXVpZFwiIGlkIG5vdCBkZWZpbmVkIGZvcjogJHtmLnBhdGh9YCxcbiAgICAgICk7XG4gICAgICBidWZmLnB1c2goW1JlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIGYpLCBmbS5uYW1lXSk7XG4gICAgfVxuXG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgcHJheGlzQmFzZShkdiwgZGF0YSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBjb25zdCBjb2xzID0gW1widGFza3NcIiwgXCJ1dWlkXCIsIFwiZXN0aW1hdGVcIl07XG4gICAgZm9yIChjb25zdCBkIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGYgPSBkLmZpbGU7XG4gICAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgICBidWZmLnB1c2goW1xuICAgICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmLm5hbWUuc2xpY2UoMCwgOCkpLFxuICAgICAgICBmbS50aW1lX2VzdGltYXRlLFxuICAgICAgXSk7XG4gICAgfVxuXG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgd2FpdGluZ1Rhc2soZHYsIGRhdGEpIHtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgY29uc3QgY29scyA9IFtcInRhc2tzXCIsIFwidXVpZFwiLCBcImVzdGltYXRlXCIsIFwiY2F1c2VcIl07XG4gICAgZm9yIChjb25zdCBkIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGYgPSBkLmZpbGU7XG4gICAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgICBidWZmLnB1c2goW1xuICAgICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmLm5hbWUuc2xpY2UoMCwgOCkpLFxuICAgICAgICBmbS50aW1lX2VzdGltYXRlLFxuICAgICAgICBmbS5jYXVzZSxcbiAgICAgIF0pO1xuICAgIH1cblxuICAgIGR2LnRhYmxlKGNvbHMsIGJ1ZmYpO1xuICB9LFxuXG4gIHJlYWR5VGFzayhkdiwgZGF0YSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBjb25zdCBjb2xzID0gW1widXVpZFwiLCBcInRhc2tcIiwgXCJlc3RpbWF0ZVwiLCBcImFyZWFcIl07XG4gICAgZm9yIChjb25zdCBkIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGYgPSBkLmZpbGU7XG4gICAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG5cbiAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIGYsIFwiVGFza1wiKSxcbiAgICAgICAgZHYubWFya2Rvd25UYXNrTGlzdChmLnRhc2tzKSxcbiAgICAgICAgZm0udGltZV9lc3RpbWF0ZSxcbiAgICAgICAgSGVscGVyLmdldEZpZWxkKEhlbHBlci5nZXRBcmVhKGZtLCB0cnVlKSwgXCJcXFxcLVwiKSxcbiAgICAgIF0pO1xuICAgIH1cbiAgICBkdi50YWJsZShjb2xzLCBidWZmKTtcbiAgfSxcblxuICBwcm92aXNpb25CYXNlKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGNvbnN0IGNvbHMgPSBbXCJ1dWlkXCIsIFwic3VwcGxpZXJcIiwgXCJjb250ZW50XCIsIFwiZXN0aW1hdGVcIl07XG4gICAgZm9yIChjb25zdCBkIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGYgPSBkLmZpbGU7XG4gICAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgICBidWZmLnB1c2goW1xuICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgZm0uc3VwcGxpZXIsXG4gICAgICAgIGR2Lm1hcmtkb3duVGFza0xpc3QoZi50YXNrcyksXG4gICAgICAgIGZtLnRpbWVfZXN0aW1hdGUsXG4gICAgICBdKTtcbiAgICB9XG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgYmFzaWNUYXNrSm91cm5hbE5leHRBY3Rpb24oZHYsIGRhdGEpIHtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgLy8gY29uc3QgY29scyA9IFtcImpvdXJuYWxcIiwgXCJ1dWlkXCIsIFwidGFza3NcIiwgXCJlc3RpbWF0ZVwiXTtcbiAgICBjb25zdCBjb2xzID0gW1widXVpZFwiLCBcInByaW9yaXR5XCIsIFwiZXN0aW1hdGVcIiwgXCJ0YXNrc1wiXTtcbiAgICAvLyBjb25zdCBqb3VybmFsID0gZHYucGFnZXMoYFwiJHtQYXRocy5Kb3VybmFsfVwiYCkuYXJyYXkoKVswXS5maWxlXG4gICAgLy8gXHQuZnJvbnRtYXR0ZXIudGFza3M7XG5cbiAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xuICAgICAgY29uc3QgZiA9IGQuZmlsZTtcbiAgICAgIGNvbnN0IGZtID0gZi5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IGRvbWFpbiA9XG4gICAgICAgIEhlbHBlci5nZXREb21haW4oZm0sIHRydWUpID09PSB1bmRlZmluZWRcbiAgICAgICAgICA/IFwiXFxcXC1cIlxuICAgICAgICAgIDogSGVscGVyLmdldERvbWFpbihmbSk7XG5cbiAgICAgIGlmIChmbS5yZWZfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhgbmFtZTogJHtkLmZpbGUucGF0aH1gKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgdGFza3M6ICR7ZC5maWxlLnRhc2tzLmxlbmd0aH1gKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgdGFza3NCOiAke2YudGFza3MubGVuZ3RofWApXG4gICAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgICAgLy8gam91cm5hbC5jb250YWlucyhmbS51dWlkKSA/IFwiLT5cIiA6IFwiXFxcXC1cIixcbiAgICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgICBmbS5wcmlvcml0eSxcbiAgICAgICAgICBmbS50aW1lX2VzdGltYXRlLFxuICAgICAgICAgIGR2Lm1hcmtkb3duVGFza0xpc3QoZi50YXNrcyksXG4gICAgICAgIF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcmVmID0gZHYucGFnZXMoYFwiJHtQYXRocy5SZWZzfS8ke2ZtLnJlZl9pZH1cImApLmFycmF5KCk7XG4gICAgICAgIGlmIChyZWYubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYHRhc2s6ICcke2ZtLnV1aWR9JyBoYXMgYW4gdW5kZWZpbmVkIHJlZl9pZDogJyR7Zm0ucmVmX2lkfSdgLFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgICAgIGR2LmZpbGVMaW5rKGYucGF0aCwgZmFsc2UsIGZtLnV1aWQuc2xpY2UoMCwgOCkpLFxuICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtBbGlhcyhkdiwgcmVmWzBdLmZpbGUpLFxuICAgICAgICAgICAgZm0udGltZV9lc3RpbWF0ZSxcbiAgICAgICAgICAgIGRvbWFpbixcbiAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBkdi50YWJsZShjb2xzLCBidWZmKTtcbiAgfSxcblxuICBiYXNpY1Rhc2tKb3VybmFsV2FpdGluZyhkdiwgZGF0YSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBjb25zdCBjb2xzID0gW1widXVpZFwiLCBcImNhdXNlXCIsIFwidGFza3NcIl07XG5cbiAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xuICAgICAgY29uc3QgZiA9IGQuZmlsZTtcbiAgICAgIGNvbnN0IGZtID0gZi5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IGRvbWFpbiA9XG4gICAgICAgIEhlbHBlci5nZXREb21haW4oZm0sIHRydWUpID09PSB1bmRlZmluZWRcbiAgICAgICAgICA/IFwiXFxcXC1cIlxuICAgICAgICAgIDogSGVscGVyLmdldERvbWFpbihmbSk7XG5cbiAgICAgIGlmIChmbS5yZWZfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhgbmFtZTogJHtkLmZpbGUucGF0aH1gKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgdGFza3M6ICR7ZC5maWxlLnRhc2tzLmxlbmd0aH1gKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgdGFza3NCOiAke2YudGFza3MubGVuZ3RofWApXG4gICAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgICAgLy8gam91cm5hbC5jb250YWlucyhmbS51dWlkKSA/IFwiLT5cIiA6IFwiXFxcXC1cIixcbiAgICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgICBkLmNhdXNlLFxuICAgICAgICAgIGR2Lm1hcmtkb3duVGFza0xpc3QoZi50YXNrcyksXG4gICAgICAgIF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcmVmID0gZHYucGFnZXMoYFwiJHtQYXRocy5SZWZzfS8ke2ZtLnJlZl9pZH1cImApLmFycmF5KCk7XG4gICAgICAgIGlmIChyZWYubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYHRhc2s6ICcke2ZtLnV1aWR9JyBoYXMgYW4gdW5kZWZpbmVkIHJlZl9pZDogJyR7Zm0ucmVmX2lkfSdgLFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgICAgIGR2LmZpbGVMaW5rKGYucGF0aCwgZmFsc2UsIGZtLnV1aWQuc2xpY2UoMCwgOCkpLFxuICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtBbGlhcyhkdiwgcmVmWzBdLmZpbGUpLFxuICAgICAgICAgICAgZm0udGltZV9lc3RpbWF0ZSxcbiAgICAgICAgICAgIGRvbWFpbixcbiAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBkdi50YWJsZShjb2xzLCBidWZmKTtcbiAgfSxcbiAgYmFzaWNUYXNrSm91cm5hbChkdiwgZGF0YSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICAvLyBjb25zdCBjb2xzID0gW1wiam91cm5hbFwiLCBcInV1aWRcIiwgXCJ0YXNrc1wiLCBcImVzdGltYXRlXCJdO1xuICAgIGNvbnN0IGNvbHMgPSBbXCJ1dWlkXCIsIFwidGFza3NcIiwgXCJlc3RpbWF0ZVwiXTtcbiAgICAvLyBjb25zdCBqb3VybmFsID0gZHYucGFnZXMoYFwiJHtQYXRocy5Kb3VybmFsfVwiYCkuYXJyYXkoKVswXS5maWxlXG4gICAgLy8gXHQuZnJvbnRtYXR0ZXIudGFza3M7XG5cbiAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xuICAgICAgY29uc3QgZiA9IGQuZmlsZTtcbiAgICAgIGNvbnN0IGZtID0gZi5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IGRvbWFpbiA9XG4gICAgICAgIEhlbHBlci5nZXREb21haW4oZm0sIHRydWUpID09PSB1bmRlZmluZWRcbiAgICAgICAgICA/IFwiXFxcXC1cIlxuICAgICAgICAgIDogSGVscGVyLmdldERvbWFpbihmbSk7XG5cbiAgICAgIGlmIChmbS5yZWZfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhgbmFtZTogJHtkLmZpbGUucGF0aH1gKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgdGFza3M6ICR7ZC5maWxlLnRhc2tzLmxlbmd0aH1gKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgdGFza3NCOiAke2YudGFza3MubGVuZ3RofWApXG4gICAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgICAgLy8gam91cm5hbC5jb250YWlucyhmbS51dWlkKSA/IFwiLT5cIiA6IFwiXFxcXC1cIixcbiAgICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgICAgIGZtLnRpbWVfZXN0aW1hdGUsXG4gICAgICAgIF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcmVmID0gZHYucGFnZXMoYFwiJHtQYXRocy5SZWZzfS8ke2ZtLnJlZl9pZH1cImApLmFycmF5KCk7XG4gICAgICAgIGlmIChyZWYubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYHRhc2s6ICcke2ZtLnV1aWR9JyBoYXMgYW4gdW5kZWZpbmVkIHJlZl9pZDogJyR7Zm0ucmVmX2lkfSdgLFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgICAgIGR2LmZpbGVMaW5rKGYucGF0aCwgZmFsc2UsIGZtLnV1aWQuc2xpY2UoMCwgOCkpLFxuICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtBbGlhcyhkdiwgcmVmWzBdLmZpbGUpLFxuICAgICAgICAgICAgZm0udGltZV9lc3RpbWF0ZSxcbiAgICAgICAgICAgIGRvbWFpbixcbiAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBkdi50YWJsZShjb2xzLCBidWZmKTtcbiAgfSxcbiAgYWN0aXZlVGFzayhkdiwgZGF0YSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBjb25zdCBjb2xzID0gW1widXVpZFwiLCBcInRhc2tzXCIsIFwic2Vzc2lvblwiXTtcbiAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xuICAgICAgY29uc3QgZiA9IGQuZmlsZTtcbiAgICAgIGNvbnN0IGZtID0gZi5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IGxvZ3MgPSBkdlxuICAgICAgICAucGFnZXMoYFwiJHtQYXRocy5Mb2dzfS8ke2ZtLnV1aWR9XCJgKVxuICAgICAgICAud2hlcmUoKHApID0+IHAudHlwZSA9PT0gNilcbiAgICAgICAgLnNvcnQoKGspID0+IGsuY3JlYXRlZF9hdCwgXCJkZXNjXCIpO1xuICAgICAgY29uc3QgbGFzdCA9IGxvZ3NbMF07XG4gICAgICBjb25zdCBjcmVhdGVkQXQgPSBuZXcgRGF0ZShsYXN0LmNyZWF0ZWRfYXQpO1xuICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgIGR2LmZpbGVMaW5rKGYucGF0aCwgZmFsc2UsIGZtLnV1aWQuc2xpY2UoMCwgOCkpLFxuICAgICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgICAoKHQpID0+IHtcbiAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgodCAvICgzNjAwICogMTAwMCkpICogMTApIC8gMTA7XG4gICAgICAgIH0pKG5vdy5nZXRUaW1lKCkgLSBjcmVhdGVkQXQuZ2V0VGltZSgpKSxcbiAgICAgIF0pO1xuICAgIH1cbiAgICBkdi50YWJsZShjb2xzLCBidWZmKTtcbiAgfSxcblxuICBiYXNpY1Rhc2soZHYsIGRhdGEpIHtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgY29uc3QgY29scyA9IFtcInV1aWRcIiwgXCJ0YXNrc1wiLCBcImVzdGltYXRlXCIsIFwiZG9tYWluXCJdO1xuICAgIGZvciAoY29uc3QgZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCBmID0gZC5maWxlO1xuICAgICAgY29uc3QgZm0gPSBmLmZyb250bWF0dGVyO1xuICAgICAgY29uc3QgZG9tYWluID1cbiAgICAgICAgSGVscGVyLmdldERvbWFpbihmbSwgdHJ1ZSkgPT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gXCJcXFxcLVwiXG4gICAgICAgICAgOiBIZWxwZXIuZ2V0RG9tYWluKGZtKTtcblxuICAgICAgaWYgKGZtLnJlZl9pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBuYW1lOiAke2QuZmlsZS5wYXRofWApXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGB0YXNrczogJHtkLmZpbGUudGFza3MubGVuZ3RofWApXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGB0YXNrc0I6ICR7Zi50YXNrcy5sZW5ndGh9YClcbiAgICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgICAgIGZtLnRpbWVfZXN0aW1hdGUsXG4gICAgICAgICAgZG9tYWluLFxuICAgICAgICBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHJlZiA9IGR2LnBhZ2VzKGBcIiR7UGF0aHMuUmVmc30vJHtmbS5yZWZfaWR9XCJgKS5hcnJheSgpO1xuICAgICAgICBpZiAocmVmLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGB0YXNrOiAnJHtmbS51dWlkfScgaGFzIGFuIHVuZGVmaW5lZCByZWZfaWQ6ICcke2ZtLnJlZl9pZH0nYCxcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIHJlZlswXS5maWxlKSxcbiAgICAgICAgICAgIGZtLnRpbWVfZXN0aW1hdGUsXG4gICAgICAgICAgICBkb21haW4sXG4gICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgbG9ncyhkdiwgZW50cmllcykge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBsZXQgdG90YWxUaW1lID0gMDtcblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgY29uc3QgZm1lID0gZW50cnkuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgIGxldCBzdGFydDogYW55ID0gMDtcbiAgICAgIGxldCBzdG9wOiBhbnkgPSAwO1xuICAgICAgaWYgKGZtZSA9PT0gdW5kZWZpbmVkIHx8IGZtZS5jcmVhdGVkX2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGZyb250bWF0dGVyOiAke2ZtZS51dWlkfWApO1xuICAgICAgfVxuXG4gICAgICBzdGFydCA9IG5ldyBEYXRlKGZtZS5jcmVhdGVkX2F0KTtcbiAgICAgIGUucHVzaChzdGFydC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKSk7XG4gICAgICBpZiAoZm1lLmRvbmVfYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdG9wID0gRGF0ZS5ub3coKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0b3AgPSBuZXcgRGF0ZShmbWUuZG9uZV9hdCk7XG4gICAgICB9XG4gICAgICB0b3RhbFRpbWUgKz0gc3RvcCAtIHN0YXJ0O1xuICAgICAgZS5wdXNoKFxuICAgICAgICBkdi5zZWN0aW9uTGluayhcbiAgICAgICAgICBmbWUudXVpZCxcbiAgICAgICAgICBcIiMjIENvbnRlbnRcIixcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICBmbWUudXVpZC5zbGljZSgwLCA4KSxcbiAgICAgICAgKSxcbiAgICAgICk7XG4gICAgICBlLnB1c2goTWF0aC5yb3VuZCgoKHN0b3AgLSBzdGFydCkgLyAoMTAwMCAqIDYwICogNjApKSAqIDEwKSAvIDEwKTtcbiAgICAgIGlmIChmbWUucmV2aWV3ZWQgPT09IHVuZGVmaW5lZCB8fCBmbWUucmV2aWV3ZWQgPT09IDApIHtcbiAgICAgICAgZS5wdXNoKDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZS5wdXNoKGZtZS5yZXZpZXdlZCk7XG4gICAgICB9XG4gICAgICBidWZmLnB1c2goZSk7XG4gICAgfVxuXG4gICAgaWYgKGJ1ZmYubGVuZ3RoID4gMCkge1xuICAgICAgZHYuaGVhZGVyKDIsIFwiTG9nc1wiKTtcbiAgICAgIGR2LnRhYmxlKFtcImNyZWF0ZWRfYXRcIiwgXCJ1dWlkXCIsIFwic2Vzc2lvblwiLCBcInJldmlld2VkXCJdLCBidWZmKTtcbiAgICAgIGlmICh0b3RhbFRpbWUgPiAwKSB7XG4gICAgICAgIGR2LnBhcmFncmFwaChcbiAgICAgICAgICBgX3RvdGFsVGltZSAoaCk6XyAke01hdGgucm91bmQoKHRvdGFsVGltZSAvICgxMDAwICogNjAgKiA2MCkpICogMTApIC8gMTBcbiAgICAgICAgICB9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgbWVkaWFXaXRoTG9ncyhkdiwgZGF0YSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBjb25zdCBjb2xzID0gW1widXVpZFwiLCBcInRhc2tzXCIsIFwiZXN0aW1hdGVcIiwgXCJjdXJyZW50XCIsIFwiZG9tYWluXCJdO1xuXG4gICAgZm9yIChjb25zdCBkIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGYgPSBkLmZpbGU7XG4gICAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgICBjb25zdCByZWYgPSBkdi5wYWdlcyhgXCIke1BhdGhzLlJlZnN9LyR7Zm0ucmVmX2lkfVwiYCkuYXJyYXkoKTtcbiAgICAgIGlmIChyZWYubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgdGFzazogJyR7Zm0udXVpZH0nIGhhcyBhbiB1bmRlZmluZWQgcmVmX2lkOiAnJHtmbS5yZWZfaWR9J2AsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBkb21haW4gPVxuICAgICAgICBIZWxwZXIuZ2V0RG9tYWluKGZtLCB0cnVlKSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyBcIlxcXFwtXCJcbiAgICAgICAgICA6IEhlbHBlci5nZXREb21haW4oZm0pO1xuICAgICAgY29uc3QgbG9nRW50cmllcyA9IGR2XG4gICAgICAgIC5wYWdlcyhgXCIke1BhdGhzLkxvZ3N9LyR7Zm0udXVpZH1cImApXG4gICAgICAgIC53aGVyZSgocCkgPT4gcC50eXBlID09PSBUeXBlcy5Mb2cpXG4gICAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiZGVzY1wiKTtcbiAgICAgIGxldCB0b3RhbFRpbWUgPSAwO1xuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBsb2dFbnRyaWVzKSB7XG4gICAgICAgIGNvbnN0IGZtZSA9IGVudHJ5LmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgbGV0IHN0YXJ0OiBhbnkgPSAwO1xuICAgICAgICBsZXQgc3RvcDogYW55ID0gMDtcbiAgICAgICAgaWYgKGZtZSA9PT0gdW5kZWZpbmVkIHx8IGZtZS5jcmVhdGVkX2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZnJvbnRtYXR0ZXI6ICR7Zm1lLnV1aWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGFydCA9IG5ldyBEYXRlKGZtZS5jcmVhdGVkX2F0KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBlLnB1c2goc3RhcnQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkpO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVudHJ5LnV1aWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbWUuZG9uZV9hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc3RvcCA9IERhdGUubm93KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RvcCA9IG5ldyBEYXRlKGZtZS5kb25lX2F0KTtcbiAgICAgICAgfVxuICAgICAgICB0b3RhbFRpbWUgKz0gc3RvcCAtIHN0YXJ0O1xuICAgICAgfVxuXG4gICAgICBidWZmLnB1c2goW1xuICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtBbGlhcyhkdiwgcmVmWzBdLmZpbGUpLFxuICAgICAgICBmbS50aW1lX2VzdGltYXRlLFxuICAgICAgICBgJHtNYXRoLnJvdW5kKCh0b3RhbFRpbWUgLyAoMTAwMCAqIDYwICogNjApKSAqIDEwKSAvIDEwfWhgLFxuICAgICAgICBkb21haW4sXG4gICAgICBdKTtcbiAgICB9XG5cbiAgICBkdi50YWJsZShjb2xzLCBidWZmKTtcbiAgfSxcblxuICB0YXNrRG9uZVdpdGhMb2dzKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGNvbnN0IGNvbHMgPSBbXG4gICAgICBcInRhc2tJZFwiLFxuICAgICAgXCJsb2dJZFwiLFxuICAgICAgXCJjcmVhdGVkQXRcIixcbiAgICAgIFwiZG9uZUF0XCIsXG4gICAgICBcInRpbWVFc3RpbWF0ZVwiLFxuICAgICAgXCJ0b29rXCIsXG4gICAgICBcInByb2plY3RcIixcbiAgICBdO1xuICAgIGZvciAoY29uc3QgZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCBmID0gZC5maWxlO1xuICAgICAgY29uc3QgZm0gPSBkLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBjb25zdCBjcmVhdGVkQXQ6IGFueSA9IG5ldyBEYXRlKGZtLmNyZWF0ZWRfYXQpO1xuICAgICAgY29uc3QgZG9uZUF0OiBhbnkgPSBuZXcgRGF0ZShmbS5kb25lX2F0KTtcbiAgICAgIGNvbnN0IHRpbWVFc3RpbWF0ZSA9IFwiXCI7XG4gICAgICBjb25zdCB0b29rID0gKGRvbmVBdCAtIGNyZWF0ZWRBdCkgLyAoMTAwMCAqIDM2MDApO1xuICAgICAgY29uc3QgcGFnZXMgPSBkdlxuICAgICAgICAucGFnZXMoYFwiJHtQYXRocy5UYXNrc31cImApXG4gICAgICAgIC53aGVyZSgocGFnZSkgPT4gcGFnZS5maWxlLmZyb250bWF0dGVyLnV1aWQgPT09IGZtLnBhcmVudF9pZCk7XG4gICAgICBpZiAocGFnZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgfVxuICAgICAgY29uc3QgcGFyZW50ID0gcGFnZXNbMF07XG4gICAgICBjb25zdCBwYXJlbnRGbSA9IHBhcmVudC5maWxlLmZyb250bWF0dGVyO1xuICAgICAgY29uc3QgcGFyZW50RiA9IHBhcmVudC5maWxlO1xuICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtTaG9ydFVVSUQoZHYsIHBhcmVudC5maWxlLCBcIlRhc2tcIiksXG4gICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKGR2LCBmKSxcbiAgICAgICAgY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApLFxuICAgICAgICBkb25lQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCksXG4gICAgICAgIHRpbWVFc3RpbWF0ZSxcbiAgICAgICAgKCh0KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodCAqIDEwKSAvIDEwO1xuICAgICAgICB9KSh0b29rKSxcbiAgICAgICAgSGVscGVyLmdldFByb2plY3QocGFyZW50Rm0pLFxuICAgICAgXSk7XG4gICAgfVxuXG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgcHJvamVjdHMoZHYsIHBhZ2VzKSB7XG4gICAgY29uc3QgY29scyA9IFtcIm5hbWVcIl07XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgYnVmZi5wdXNoKFtSZW5kZXJlci5tYWtlTGluayhkdiwgcGFnZS5maWxlLCBmbS5nZXROYW1lKCkpXSk7XG4gICAgfVxuXG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgYmFzaWNEb25lVGFza1dpdGhMb2dzKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgY29scyA9IFtcbiAgICAgIFwidXVpZFwiLFxuICAgICAgXCJjcmVhdGVkQXRcIixcbiAgICAgIFwiZG9uZUF0XCIsXG4gICAgICBcInRpbWVFc3RpbWF0ZVwiLFxuICAgICAgXCJ0b29rXCIsXG4gICAgICBcImRlbHRhXCIsXG4gICAgICBcInByb2plY3RcIixcbiAgICAgIFwiYXJlYVwiLFxuICAgIF07XG4gICAgZHYudGFibGUoY29scywgZGF0YSk7XG4gIH0sXG5cbiAgYmFzaWNEb25lVGFza1dpdGhvdXRMb2dzKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgY29scyA9IFtcInRhc2tJZFwiLCBcImNyZWF0ZWRBdFwiLCBcInByb2plY3RcIiwgXCJhcmVhXCJdO1xuICAgIGR2LnRhYmxlKGNvbHMsIGRhdGEpO1xuICB9LFxuXG4gIGJhc2ljUHJvZ3Jlc3NlZFRhc2tXaXRoTG9nKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgY29scyA9IFtcbiAgICAgIFwidGFza0lkXCIsXG4gICAgICBcImxvZ0lkXCIsXG4gICAgICAvLyBcImNyZWF0ZWRBdFwiLFxuICAgICAgLy8gXCJkb25lQXRcIixcbiAgICAgIFwidG9va1wiLFxuICAgICAgLy8gXCJ0b29rQWNjXCIsXG4gICAgICBcInByb2plY3RcIixcbiAgICAgIC8vIFwiZG9tYWluXCIsXG4gICAgXTtcbiAgICBkdi50YWJsZShjb2xzLCBkYXRhKTtcbiAgfSxcblxuICAvLyBkYWlseVRhc2soZHYsIGRhdGEpIHtcbiAgLy8gXHRSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRCh0aGlzLmR2LCBwYWdlLmZpbGUpLFxuICAvLyBcdGR2LlxuICAvLyBcdFx0XHRcdHJzLnB1c2goW1xuICAvLyBcdFx0XHRcdFx0XCJwYXJhZ3JhcGhcIixcbiAgLy8gXHRcdFx0XHRcdFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKHRoaXMuZHYsIHBhZ2UuZmlsZSksXG4gIC8vIFx0XHRcdFx0XSk7XG4gIC8vIH1cblxuICBkbyhkdiwgcnMpIHtcbiAgICBmb3IgKGNvbnN0IHJvdyBvZiBycykge1xuICAgICAgc3dpdGNoIChyb3dbMF0pIHtcbiAgICAgICAgY2FzZSBcImhlYWRlclwiOlxuICAgICAgICAgIGNvbnN0IFssIGxldmVsLCBoZWFkaW5nXSA9IHJvdztcbiAgICAgICAgICBkdi5oZWFkZXIobGV2ZWwsIGhlYWRpbmcpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicGFyYWdyYXBoXCI6XG4gICAgICAgICAgY29uc3QgWywgdGV4dF0gPSByb3c7XG4gICAgICAgICAgZHYucGFyYWdyYXBoKHRleHQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYXJyYXlcIjpcbiAgICAgICAgICBjb25zdCBbLCByZW5kZXJlciwgZGF0YV0gPSByb3c7XG4gICAgICAgICAgcmVuZGVyZXIoZHYsIGRhdGEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic3RhdHNcIjpcbiAgICAgICAgICBjb25zdCBbLCBuYW1lLCB1bml0LCB2YWx1ZV0gPSByb3c7XG4gICAgICAgICAgZHYucGFyYWdyYXBoKGAke25hbWV9ICgke3VuaXR9KTogJHt2YWx1ZX1gKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3Vwb3J0ZWQgb3Bjb2RlOiBcImZ1Y2tvZmZcImApO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbn07XG5cbmV4cG9ydCBjbGFzcyBGcm9udG1hdHRlciB7XG4gIGdvbmV4dDogYW55O1xuXG4gIGNvbnN0cnVjdG9yKGdvbmV4dCkge1xuICAgIHRoaXMuZ29uZXh0ID0gZ29uZXh0O1xuICB9XG5cbiAgcHJvamVjdFBhcnNlTWV0YShkdikge1xuICAgIC8vIGZhdXRlIGRlIG1pZXV4IHBvdXIgbGUgbW9tZW50XG4gICAgY29uc3QgY3VycmVudCA9IGR2LmN1cnJlbnQoKTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGN1cnJlbnQuZmlsZS5mb2xkZXIuc2xpY2UoXG4gICAgICBQYXRocy5Qcm9qZWN0cy5sZW5ndGggKyAxLFxuICAgICk7XG4gICAgY29uc3QgcHJvamVjdERpciA9IGN1cnJlbnQuZmlsZS5mb2xkZXI7XG4gICAgaWYgKHByb2plY3ROYW1lLmNvbnRhaW5zKFwiL1wiKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgcHJvamVjdERpcjogJHtwcm9qZWN0RGlyfSBmb2xkZXI6ICR7Y3VycmVudC5maWxlLmZvbGRlcn1gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBwYWdlcyA9IGR2LnBhZ2VzKGBcIiR7cHJvamVjdERpcn0vbWV0YVwiYCkuYXJyYXkoKTtcbiAgICBpZiAocGFnZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhwYWdlcyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGxlbjogJHtwYWdlcy5sZW5ndGh9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgZm0gPSBwYWdlc1swXS5maWxlLmZyb250bWF0dGVyO1xuICAgIGNvbnN0IHV1aWQgPSBmbS51dWlkO1xuICAgIGlmIChIZWxwZXIubmlsQ2hlY2sodXVpZCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgcHJvamVjdCAndXVpZCcgaXMgbm90IGRlZmluZWRgKTtcbiAgICB9XG5cbiAgICBjb25zdCBuYW1lID0gZm0ubmFtZTtcbiAgICBpZiAoSGVscGVyLm5pbENoZWNrKG5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCduYW1lJyBpcyBub3QgZGVmaW5lZGApO1xuICAgIH1cblxuICAgIGNvbnN0IGRvbWFpbnMgPSBmbS5kb21haW5zO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShkb21haW5zKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGAnZG9tYWlucycgbXVzdCBiZSBvZiBhcnJheSB0eXBlYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHV1aWQ6IHV1aWQsXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgZG9tYWluczogZG9tYWlucyxcbiAgICB9O1xuICB9XG5cbiAgZ2V0Q3JlYXRlZEF0KGYpOiBEYXRlIHtcbiAgICByZXR1cm4gSGVscGVyLm5pbENoZWNrKGYuZnJvbnRtYXR0ZXIuY3JlYXRlZF9hdClcbiAgICAgID8gbmV3IERhdGUoZi5jdGltZS50cylcbiAgICAgIDogbmV3IERhdGUoZi5mcm9udG1hdHRlci5jcmVhdGVkX2F0KTtcbiAgfVxuXG4gIGdldEN1cnJlbnRGcm9udG1hdHRlcigpIHtcbiAgICBjb25zdCBmaWxlID0gdGhpcy5nb25leHQud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBjb25zdCBmaWxlQ29udGVudCA9IHRoaXMuZ29uZXh0Lm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgIGlmIChmaWxlQ29udGVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBjb25zb2xlLndhcm4oXCInZmlsZUNvbnRlbnQnIGlzIHVuZGVmaW5lZFwiKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgZm0gPSBmaWxlQ29udGVudC5mcm9udG1hdHRlcjtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gY29uc29sZS53YXJuKFwiJ2ZtJyBpcyB1bmRlZmluZWRcIik7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiBmbTtcbiAgfVxuXG4gIHBhcnNlTGlzdEJ5TmFtZXNwYWNlKGZtKSB7XG4gICAgY29uc3QgYnlBcmVhcyA9IGZtLmJ5X2FyZWFzID09PSB1bmRlZmluZWQgPyBbXSA6IGZtLmJ5X2FyZWFzO1xuICAgIGNvbnN0IGJ5Q29udGV4dHMgPSBmbS5ieV9jb250ZXh0cyA9PT0gdW5kZWZpbmVkID8gW10gOiBmbS5ieV9jb250ZXh0cztcbiAgICBjb25zdCBieUxheWVycyA9IGZtLmJ5X2xheWVycyA9PT0gdW5kZWZpbmVkID8gW10gOiBmbS5ieV9sYXllcnM7XG4gICAgY29uc3QgYnlPcmdzID0gZm0uYnlfb3JncyA9PT0gdW5kZWZpbmVkID8gW10gOiBmbS5ieV9vcmdzO1xuICAgIGNvbnN0IGJ5UHJvamVjdHMgPSBmbS5ieV9wcm9qZWN0cyA9PT0gdW5kZWZpbmVkID8gW10gOiBmbS5ieV9wcm9qZWN0cztcblxuICAgIHJldHVybiBbYnlBcmVhcywgYnlDb250ZXh0cywgYnlMYXllcnMsIGJ5T3JncywgYnlQcm9qZWN0c107XG4gIH1cblxuICBwYXJzZUxpc3RCZWZvcmVBZnRlcihmbSkge1xuICAgIGNvbnN0IGJlZm9yZSA9IEhlbHBlci5nZXREYXRlKGZtLmJlZm9yZSk7XG4gICAgY29uc3QgYWZ0ZXIgPSBIZWxwZXIuZ2V0RGF0ZShmbS5hZnRlcik7XG4gICAgcmV0dXJuIFtiZWZvcmUsIGFmdGVyXTtcbiAgfVxuXG4gIHBhcnNlTGlzdEZpbHRlckJ5KGZtKSB7XG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBmaWx0ZXJCeSA9IGZtLmZpbHRlcl9ieTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZmlsdGVyQnkpKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbHRlckJ5O1xuICB9XG5cbiAgcGFyc2VMaXN0R3JvdXBCeShmbSkge1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG5cbiAgICBjb25zdCBncm91cEJ5ID0gZm0uZ3JvdXBfYnk7XG4gICAgaWYgKFxuICAgICAgISh0eXBlb2YgZ3JvdXBCeSA9PT0gXCJ1bmRlZmluZWRcIikgJiZcbiAgICAgICEodHlwZW9mIGdyb3VwQnkgPT09IFwic3RyaW5nXCIpXG4gICAgKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gZ3JvdXBCeTtcbiAgfVxuXG4gIHBhcnNlQWxsUHJvZ3Jlc3NlZFRhc2tzKCkge1xuICAgIGNvbnN0IGZtID0gdGhpcy5nZXRDdXJyZW50RnJvbnRtYXR0ZXIoKTtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGZyb250bWF0dGVyLCBjYW5ub3QgcHJvY2VlZGApO1xuICAgIH1cblxuICAgIGNvbnN0IGdyb3VwQnkgPSB0aGlzLnBhcnNlTGlzdEdyb3VwQnkoZm0pO1xuICAgIGNvbnN0IGZpbHRlckJ5ID0gdGhpcy5wYXJzZUxpc3RGaWx0ZXJCeShmbSk7XG4gICAgY29uc3QgW2JlZm9yZSwgYWZ0ZXJdID0gdGhpcy5wYXJzZUxpc3RCZWZvcmVBZnRlcihmbSk7XG5cbiAgICByZXR1cm4gW2dyb3VwQnksIGZpbHRlckJ5LCBiZWZvcmUsIGFmdGVyXTtcbiAgfVxuXG4gIHBhcnNlQWxsRG9uZVRhc2tzKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnNlQWxsUHJvZ3Jlc3NlZFRhc2tzKCk7XG4gIH1cblxuICBwYXJzZUFsbERvbmVUYXNrV2l0aG91dExvZygpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZUFsbFByb2dyZXNzZWRUYXNrcygpO1xuICB9XG5cbiAgcGFyc2VBbGxUb2RvQWRIb2MoKSB7XG4gICAgY29uc3QgZm0gPSB0aGlzLmdldEN1cnJlbnRGcm9udG1hdHRlcigpO1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZnJvbnRtYXR0ZXIsIGNhbm5vdCBwcm9jZWVkYCk7XG4gICAgfVxuXG4gICAgY29uc3QgZ3JvdXBCeSA9IHRoaXMucGFyc2VMaXN0R3JvdXBCeShmbSk7XG4gICAgY29uc3QgZmlsdGVyQnkgPSB0aGlzLnBhcnNlTGlzdEZpbHRlckJ5KGZtKTtcbiAgICBjb25zdCBbYmVmb3JlLCBhZnRlcl0gPSB0aGlzLnBhcnNlTGlzdEJlZm9yZUFmdGVyKGZtKTtcbiAgICBjb25zdCBtaW5Qcmlvcml0eSA9IEhlbHBlci5nZXRGaWVsZChmbS5taW5fcHJpb3JpdHksIDApO1xuXG4gICAgcmV0dXJuIFtncm91cEJ5LCBmaWx0ZXJCeSwgYmVmb3JlLCBhZnRlciwgbWluUHJpb3JpdHldO1xuICB9XG5cbiAgcGFyc2VJbmJveCgpIHtcbiAgICBjb25zdCBmbSA9IHRoaXMuZ2V0Q3VycmVudEZyb250bWF0dGVyKCk7XG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBbW10sIFtdLCAwLCAweGZmZmZmZmZmXTtcbiAgICB9XG5cbiAgICBjb25zdCBzb3VyY2UgPSBIZWxwZXIubmlsQ2hlY2soZm0uc291cmNlKVxuICAgICAgPyBbXCJsb2dzXCIsIFwiZmxlZXRpbmdcIl1cbiAgICAgIDogZm0uc291cmNlO1xuICAgIGNvbnN0IGdyb3VwQnkgPSBIZWxwZXIubmlsQ2hlY2soZm0uZ3JvdXBfYnkpID8gXCJub25lXCIgOiBmbS5ncm91cF9ieTtcbiAgICBjb25zdCBmaWx0ZXJCeSA9IHRoaXMucGFyc2VMaXN0RmlsdGVyQnkoZm0pO1xuICAgIGNvbnN0IG1pblNpemUgPSBIZWxwZXIubmlsQ2hlY2soZm0ubWluX3NpemUpID8gMCA6IGZtLm1pbl9zaXplO1xuICAgIGNvbnN0IG1heFNpemUgPSBIZWxwZXIubmlsQ2hlY2soZm0ubWF4X3NpemUpID8gMHhmZmZmZmZmZiA6IGZtLm1heF9zaXplO1xuXG4gICAgcmV0dXJuIFtzb3VyY2UsIGdyb3VwQnksIGZpbHRlckJ5LCBtaW5TaXplLCBtYXhTaXplXTtcbiAgfVxuXG4gIHBhcnNlVG9kb0xpc3QoKSB7XG4gICAgY29uc3QgZm0gPSB0aGlzLmdldEN1cnJlbnRGcm9udG1hdHRlcigpO1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gW1tdLCBbXSwgW10sIFtdLCBbXSwgMF07XG4gICAgfVxuXG4gICAgY29uc3QgW2J5QXJlYXMsIGJ5Q29udGV4dHMsIGJ5TGF5ZXJzLCBieU9yZ3MsIGJ5UHJvamVjdHNdID1cbiAgICAgIHRoaXMucGFyc2VMaXN0QnlOYW1lc3BhY2UoZm0pO1xuICAgIGNvbnN0IG1pblByaW9yaXR5ID0gSGVscGVyLmdldEZpZWxkKGZtLm1pbl9wcmlvcml0eSwgMCk7XG5cbiAgICByZXR1cm4gW2J5QXJlYXMsIGJ5Q29udGV4dHMsIGJ5TGF5ZXJzLCBieU9yZ3MsIGJ5UHJvamVjdHMsIG1pblByaW9yaXR5XTtcbiAgfVxuXG4gIHBhcnNlRG9uZUxpc3QoKSB7XG4gICAgY29uc3QgZm0gPSB0aGlzLmdldEN1cnJlbnRGcm9udG1hdHRlcigpO1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gW1tdLCBbXSwgW10sIFtdLCBbXSwgW10sIFtdXTtcbiAgICB9XG5cbiAgICBjb25zdCBbYnlBcmVhcywgYnlDb250ZXh0cywgYnlMYXllcnMsIGJ5T3JncywgYnlQcm9qZWN0c10gPVxuICAgICAgdGhpcy5wYXJzZUxpc3RCeU5hbWVzcGFjZShmbSk7XG4gICAgY29uc3QgW2JlZm9yZSwgYWZ0ZXJdID0gdGhpcy5wYXJzZUxpc3RCZWZvcmVBZnRlcihmbSk7XG4gICAgY29uc3QgZmllbGRzID0gSGVscGVyLmdldEZpZWxkKGZtLmZpZWxkcywgW10pO1xuICAgIGNvbnN0IHN0YXRzID0gSGVscGVyLmdldEZpZWxkKGZtLnN0YXRzLCBbXSk7XG5cbiAgICByZXR1cm4gW1xuICAgICAgYnlBcmVhcyxcbiAgICAgIGJ5Q29udGV4dHMsXG4gICAgICBieUxheWVycyxcbiAgICAgIGJ5T3JncyxcbiAgICAgIGJ5UHJvamVjdHMsXG4gICAgICBmaWVsZHMsXG4gICAgICBzdGF0cyxcbiAgICAgIGJlZm9yZSxcbiAgICAgIGFmdGVyLFxuICAgIF07XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE5vdGVIZWxwZXIge1xuICBkdjogYW55O1xuICBnb25leHQ6IGFueTtcbiAgZnJvbnRtYXR0ZXI6IEZyb250bWF0dGVyO1xuXG4gIGNvbnN0cnVjdG9yKGdvbmV4dCwgZHYsIGZyb250bWF0dGVyKSB7XG4gICAgdGhpcy5nb25leHQgPSBnb25leHQ7XG4gICAgdGhpcy5kdiA9IGR2O1xuICAgIHRoaXMuZnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlcjtcbiAgfVxuXG4gIGlzRG9hYmxlKHRhc2ssIGF0ID0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgaWYgKGZtLnN0YXR1cyAhPT0gU3RhdHVzLlRvZG8pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZm0uYWZ0ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgYWZ0ZXIgPSBuZXcgRGF0ZShmbS5hZnRlcik7XG4gICAgICBpZiAoRGF0ZS5ub3coKSA8PSBhZnRlci5nZXRUaW1lKCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBmbUF0ID0gbmV3IERhdGUoZm0uYXQpO1xuICAgICAgZm1BdC5zZXRIb3VycygwKTtcbiAgICAgIGZtQXQuc2V0TWludXRlcygwKTtcbiAgICAgIGZtQXQuc2V0U2Vjb25kcygwKTtcblxuICAgICAgLy8gaWYgKGZtLnV1aWQgPT09IFwiMmE5N2RlMzUtY2E4Ny00MjY3LTkxNTktNmMwOTZkNDE2M2YxXCIpIHtcbiAgICAgIC8vIFx0Y29uc29sZS5sb2coYHV1aWQ6ICR7Zm0udXVpZH1gKTtcbiAgICAgIC8vIFx0Y29uc29sZS5sb2coYGF0OiAke2F0LmdldFRpbWUoKX1gKTtcbiAgICAgIC8vIFx0Y29uc29sZS5sb2coYGZtQXQ6ICR7Zm1BdC5nZXRUaW1lKCl9YCk7XG4gICAgICAvLyBcdGNvbnNvbGUubG9nKGBpZjogJHthdC5nZXRUaW1lKCkgPCBmbUF0LmdldFRpbWUoKX1gKTtcbiAgICAgIC8vIH1cblxuICAgICAgaWYgKGF0LmdldFRpbWUoKSA8IGZtQXQuZ2V0VGltZSgpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGZtLmF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgYXQgPSBuZXcgRGF0ZShmbS5hdCk7XG4gICAgICAgIGlmIChEYXRlLm5vdygpIDw9IGF0LmdldFRpbWUoKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGRlcHMgPSBmbS5uZWVkcztcbiAgICBpZiAoZGVwcyA9PT0gdW5kZWZpbmVkIHx8IGRlcHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYXNQZW5kaW5nRGVwZW5kZW5jaWVzKGRlcHMpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBoYXNQZW5kaW5nRGVwZW5kZW5jaWVzKGRlcHMpIHtcbiAgICBmb3IgKGNvbnN0IGRlcCBvZiBkZXBzKSB7XG4gICAgICBjb25zdCB0YXNrID0gdGhpcy5kdi5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfS8ke2RlcH1cImApLmFycmF5KCk7XG4gICAgICBpZiAodGFzay5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBoYXNQZW5kaW5nRGVwZW5kZW5jaWVzOiBcIiR7UGF0aHMuVGFza3N9LyR7ZGVwfVwiIHRhc2sgZG9lcyBub3QgZXhpc3RzYCxcbiAgICAgICAgKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZtID0gdGFza1swXS5maWxlLmZyb250bWF0dGVyO1xuICAgICAgaWYgKFxuICAgICAgICBmbS50eXBlICE9PSBUeXBlcy5UYXNrICYmXG4gICAgICAgIGZtLnR5cGUgIT09IFR5cGVzLlByb3Zpc2lvbiAmJlxuICAgICAgICBmbS50eXBlICE9PSBUeXBlcy5QcmF4aXNcbiAgICAgICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZtLnN0YXR1cyA9PT0gU3RhdHVzLlRvZG8pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaXNDaGlsZFRhZyhwYXJlbnQsIGNoaWxkKSB7XG4gICAgaWYgKGNoaWxkLmxlbmd0aCA8PSBwYXJlbnQubGVuZ3RoICsgMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQuc2xpY2UoMCwgcGFyZW50Lmxlbmd0aCArIDEpICE9IGAke3BhcmVudH0vYCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGdldE5hbWVzcGFjZUNvbnRlbnQobnM6IHN0cmluZykge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gW107XG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLmR2LnBhZ2VzKGAjJHtuc31gKTtcbiAgICBmb3IgKGNvbnN0IHAgb2YgcGFnZXMpIHtcbiAgICAgIGNvbnN0IHRhZ3MgPSBwLmZpbGUuZnJvbnRtYXR0ZXIudGFncztcblxuICAgICAgaWYgKHRhZ3MgPT09IHVuZGVmaW5lZCB8fCB0YWdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgICBpZiAodGhpcy5pc0NoaWxkVGFnKG5zLCB0YWcpKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHRhZy5zbGljZShucy5sZW5ndGggKyAxKTtcbiAgICAgICAgICBpZiAoIWNoaWxkcmVuLmNvbnRhaW5zKHQpKSB7XG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjaGlsZHJlbjtcbiAgfVxuXG4gIGlzTGFzdFJldmlzaW9uKHBhZ2UpOiBib29sZWFuIHtcbiAgICBjb25zdCByZXZpc2lvbkxpc3QgPSAoZHYsIHJvb3Q6IHN0cmluZywgY3VycmVudCkgPT4ge1xuICAgICAgbGV0IGhlYWQgPSBjdXJyZW50O1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY29uc3QgcGFnZXMgPSBkdlxuICAgICAgICAgIC5wYWdlcyhgXCIke3Jvb3R9XCJgKVxuICAgICAgICAgIC53aGVyZShcbiAgICAgICAgICAgIChwYWdlKSA9PlxuICAgICAgICAgICAgICBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIubmV4dCA9PT1cbiAgICAgICAgICAgICAgaGVhZC5maWxlLmZyb250bWF0dGVyLnV1aWQsXG4gICAgICAgICAgKTtcbiAgICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfSBlbHNlIGlmIChwYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBoZWFkID0gcGFnZXNbMF07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICAgIGxldCBjdXIgPSBoZWFkO1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgYnVmZi5wdXNoKGN1cik7XG4gICAgICAgIGNvbnN0IGZtID0gY3VyLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICAgIGlmIChmbS5uZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWdlcyA9IGR2LnBhZ2VzKGBcIiR7cm9vdH0vJHtmbS5uZXh0fVwiYCk7XG4gICAgICAgIGlmIChwYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjdXIgPSBwYWdlc1swXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJ1ZmY7XG4gICAgfTtcblxuICAgIGNvbnN0IG5vdGUgPSBwYWdlO1xuICAgIGNvbnN0IGZtID0gbm90ZS5maWxlLmZyb250bWF0dGVyO1xuICAgIGxldCByZXZpc2lvbnMgPSBbXTtcbiAgICBzd2l0Y2ggKGZtLnR5cGUpIHtcbiAgICAgIGNhc2UgVHlwZXMuUGVybWFuZW5hOlxuICAgICAgICByZXZpc2lvbnMgPSByZXZpc2lvbkxpc3QodGhpcy5kdiwgUGF0aHMuU2xpcGJveCwgbm90ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBUeXBlcy5SZXNvdXJjZTpcbiAgICAgICAgcmV2aXNpb25zID0gcmV2aXNpb25MaXN0KHRoaXMuZHYsIFBhdGhzLlJlc291cmNlcywgbm90ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuXG4gICAgaWYgKHJldmlzaW9ucy5sZW5ndGggPD0gMSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldmlzaW9uc1swXS5maWxlLmZyb250bWF0dGVyLnV1aWQgPT09IGZtLnV1aWQ7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEdlbmVyYXRvciB7XG4gIGFwcDogYW55O1xuICBkdjogYW55O1xuICBnb25leHQ6IGFueTtcblxuICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB0aGlzLmR2ID0gYXBwLmR2O1xuICAgIHRoaXMuZ29uZXh0ID0gYXBwLmdvbmV4dDtcbiAgfVxuXG4gIGpvdXJuYWxEYWlseSgpIHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IG5vd0RhdGUgPSBub3cudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgLy8gZG9pdCBcdTAwRUF0cmUgZXhlY3V0XHUwMEU5IGRlcHVpcyBsYSB0YXNrIHJhdGFjaFx1MDBFOSBcdTAwRTAgbGEgZGFpbHksIHJhcHBlbCBkYWlseSA9IGxvZyBlbnRyeSBwb3VyIHRhc2sgcHJvamVjdC9kYWlseVxuICAgIC8vIFRhc2tzL1xuICAgIC8vXHRcdDhhYzQ3ZDUwLTRiNzMtNDFhYy1hMTgzLTBjM2E1ZjQxZmYxOS5tZFxuICAgIC8vXHRcdDhhYzQ3ZDUwLTRiNzMtNDFhYy1hMTgzLTBjM2E1ZjQxZmYxOS9cbiAgICAvL1x0XHRcdDNlNDNjYTcxLWRmYzEtNDg1Ni1iMWMzLTEwYzA3YWU2ZjNlZi5tZFxuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5kdi5wYWdlcyhgXCIke1BhdGhzLkpvdXJuYWx9XCJgKS53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgY29uc3QgZm1wID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICBpZiAoZm1wLmdldFByb2plY3QoKSAhPT0gXCJkYWlseVwiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZtcC5jcmVhdGVkQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkgIT09IG5vd0RhdGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuICAgICAgY29uc29sZS5sb2cocGFnZSk7XG4gICAgfVxuICB9XG5cbiAgZmxlZXRpbmcoKSB7XG4gICAgY29uc3QgZHQgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IG5vdGUgPSB7XG4gICAgICB1dWlkOiB1dWlkdjQoKSxcbiAgICAgIHR5cGU6IDEzLFxuICAgICAgdmVyc2lvbjogXCIwLjAuNFwiLFxuICAgICAgY3JlYXRlZF9hdDogZHQudG9JU09TdHJpbmcoKSxcbiAgICAgIHBhdGg6IFwiXCIsXG4gICAgICBkYXRhOiBcIlwiLFxuICAgIH07XG5cbiAgICBub3RlLnBhdGggPSBgODAwIEluYm94LyR7bm90ZS51dWlkfS5tZGA7XG4gICAgbm90ZS5kYXRhID0gYC0tLVxcbnR5cGU6IDEzXFxudXVpZDogXCIke25vdGUudXVpZH1cIlxcbmNyZWF0ZWRfYXQ6IFwiJHtub3RlLmNyZWF0ZWRfYXR9XCJcXG52ZXJzaW9uOiBcIjAuMC40XCJcXG4tLS1cXG4jIyBDb250ZW50XFxuYDtcblxuICAgIGNvbnN0IGYgPSB0aGlzLmFwcC52YXVsdC5jcmVhdGUobm90ZS5wYXRoLCBub3RlLmRhdGEpLnRoZW4oKGYpID0+IHtcbiAgICAgIHJldHVybiBmO1xuICAgIH0pO1xuICAgIGNvbnN0IGFjdGl2ZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCByb290ID0gYWN0aXZlLnBhcmVudDtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuY3JlYXRlTGVhZkluUGFyZW50KHJvb3QsIHJvb3QuY2hpbGRyZW4ubGVuZ3RoICsgMSk7XG4gICAgY29uc3QgbGVhZiA9IHJvb3QuY2hpbGRyZW5bcm9vdC5jaGlsZHJlbi5sZW5ndGggLSAxXTtcbiAgICBmLnRoZW4oKGZpbGUpID0+IHtcbiAgICAgIGxlYWYub3BlbkZpbGUoZmlsZSwgeyBhY3RpdmU6IHRydWUgfSk7XG4gICAgfSk7XG4gIH1cblxuICBkYWlseSgpIHtcbiAgICAvKlxuICAgIHR5cGU6IDNcbiAgICB1dWlkOiBcIjMyMTEwZjU3LWM5MTctNDA3Ni1hOTc4LTY2YTc0NWFlNTQ1N1wiXG4gICAgY3JlYXRlZF9hdDogXCIyMDI1LTEwLTEwVDEwOjMyOjAwKzAyOjAwXCJcbiAgICB2ZXJzaW9uOiBcIjAuMC42XCJcbiAgICBzdGF0dXM6IFwidG9kb1wiXG4gICAgcHJpb3JpdHk6IDBcbiAgICBhdDogXCIyMDI1LTEwLTE5VDEwOjMyOjAwKzAyOjAwXCJcbiAgICB0YWdzOiBcbiAgICAgIC0gcHJvamVjdC9kYWlseVxuICAqL1xuICAgIGNvbnN0IGR0ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBub3RlID0ge1xuICAgICAgdXVpZDogdXVpZHY0KCksXG4gICAgICB0eXBlOiAzLFxuICAgICAgdmVyc2lvbjogXCIwLjAuNlwiLFxuICAgICAgc3RhdHVzOiBcInRvZG9cIixcbiAgICAgIGNyZWF0ZWRfYXQ6IGR0LnRvSVNPU3RyaW5nKCksXG4gICAgICBhdDogZHQudG9JU09TdHJpbmcoKSxcbiAgICAgIHBhdGg6IFwiXCIsXG4gICAgICBkYXRhOiBcIlwiLFxuICAgIH07XG5cbiAgICBub3RlLnBhdGggPSBgJHtQYXRocy5UYXNrc30vJHtub3RlLnV1aWR9Lm1kYDtcbiAgICBub3RlLmRhdGEgPSBgLS0tXFxudHlwZTogJHtub3RlLnR5cGV9XFxudXVpZDogXCIke25vdGUudXVpZH1cIlxcbmNyZWF0ZWRfYXQ6IFwiJHtub3RlLmNyZWF0ZWRfYXR9XCJcXG52ZXJzaW9uOiBcIiR7bm90ZS52ZXJzaW9ufVwiXFxuc3RhdHVzOiBcInRvZG9cIlxcbnByaW9yaXR5OiAwXFxuYXQ6IFwiJHtub3RlLmF0fVwiXFxudGFnczogXFxuICAtIHByb2plY3QvZGFpbHlcXG4tLS1cXG4jIyBUYXNrXFxuYDtcblxuICAgIGNvbnN0IGYgPSB0aGlzLmFwcC52YXVsdC5jcmVhdGUobm90ZS5wYXRoLCBub3RlLmRhdGEpLnRoZW4oKGYpID0+IHtcbiAgICAgIHJldHVybiBmO1xuICAgIH0pO1xuICAgIGNvbnN0IGFjdGl2ZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCByb290ID0gYWN0aXZlLnBhcmVudDtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuY3JlYXRlTGVhZkluUGFyZW50KHJvb3QsIHJvb3QuY2hpbGRyZW4ubGVuZ3RoICsgMSk7XG4gICAgY29uc3QgbGVhZiA9IHJvb3QuY2hpbGRyZW5bcm9vdC5jaGlsZHJlbi5sZW5ndGggLSAxXTtcbiAgICBmLnRoZW4oKGZpbGUpID0+IHtcbiAgICAgIGxlYWYub3BlbkZpbGUoZmlsZSwgeyBhY3RpdmU6IHRydWUgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwZXJtYW5lbnQobmFtZT86IHN0cmluZykge1xuICAgIGNvbnN0IGR0ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBub3RlID0ge1xuICAgICAgdXVpZDogdXVpZHY0KCksXG4gICAgICB0eXBlOiAyLFxuICAgICAgdmVyc2lvbjogXCIwLjAuM1wiLFxuICAgICAgY3JlYXRlZF9hdDogZHQudG9JU09TdHJpbmcoKSxcbiAgICAgIHBhdGg6IFwiXCIsXG4gICAgICBkYXRhOiBcIlwiLFxuICAgIH07XG5cbiAgICBub3RlLnBhdGggPSBgJHtQYXRocy5TbGlwYm94fS8ke25vdGUudXVpZH0ubWRgO1xuICAgIGlmIChuYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG5vdGUuZGF0YSA9IGAtLS1cXG50eXBlOiAyXFxudXVpZDogXCIke25vdGUudXVpZH1cIlxcbmNyZWF0ZWRfYXQ6IFwiJHtub3RlLmNyZWF0ZWRfYXR9XCJcXG52ZXJzaW9uOiBcIjAuMC4zXCJcXG4tLS1cXG4jIyBDb250ZW50XFxuYDtcbiAgICB9IGVsc2Uge1xuICAgICAgbm90ZS5kYXRhID0gYC0tLVxcbnR5cGU6IDJcXG51dWlkOiBcIiR7bm90ZS51dWlkfVwiXFxuY3JlYXRlZF9hdDogXCIke25vdGUuY3JlYXRlZF9hdH1cIlxcbnZlcnNpb246IFwiMC4wLjNcIlxcbi0tLVxcbiMgJHtuYW1lfVxcbiMjIENvbnRlbnRcXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IGYgPSB0aGlzLmFwcC52YXVsdC5jcmVhdGUobm90ZS5wYXRoLCBub3RlLmRhdGEpLnRoZW4oKGYpID0+IHtcbiAgICAgIHJldHVybiBmO1xuICAgIH0pO1xuICAgIGNvbnN0IGFjdGl2ZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCByb290ID0gYWN0aXZlLnBhcmVudDtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuY3JlYXRlTGVhZkluUGFyZW50KHJvb3QsIHJvb3QuY2hpbGRyZW4ubGVuZ3RoICsgMSk7XG4gICAgY29uc3QgbGVhZiA9IHJvb3QuY2hpbGRyZW5bcm9vdC5jaGlsZHJlbi5sZW5ndGggLSAxXTtcbiAgICBmLnRoZW4oKGZpbGUpID0+IHtcbiAgICAgIGxlYWYub3BlbkZpbGUoZmlsZSwgeyBhY3RpdmU6IHRydWUgfSk7XG4gICAgfSk7XG4gIH1cbiAgLy8gQHRzLWlnbm9yZVxuICBqb3VybmFsRW50cnkoZHQpIHtcbiAgICBpZiAoZHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZHQgPSBuZXcgRGF0ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdGUgPSB7XG4gICAgICB1dWlkOiB1dWlkdjQoKSxcbiAgICAgIHR5cGU6IDIwLFxuICAgICAgdmVyc2lvbjogXCIwLjAuNFwiLFxuICAgICAgY3JlYXRlZF9hdDogZHQudG9JU09TdHJpbmcoKSxcbiAgICAgIHBhdGg6IFwiXCIsXG4gICAgICBkYXRhOiBcIlwiLFxuICAgIH07XG5cbiAgICBub3RlLnBhdGggPSBgSm91cm5hbC8ke25vdGUudXVpZH0ubWRgO1xuICAgIG5vdGUuZGF0YSA9IGAtLS1cXG50eXBlOiAyMFxcbnV1aWQ6IFwiJHtub3RlLnV1aWR9XCJcXG5jcmVhdGVkX2F0OiBcIiR7bm90ZS5jcmVhdGVkX2F0fVwiXFxudmVyc2lvbjogXCIwLjAuNFwiXFxudGFnczpcXG4gICAgLSBwcm9qZWN0L2RhaWx5XFxuLS0tXFxuIyMgQ29udGVudFxcbiMjIyBlbnRyeVxcbmA7XG5cbiAgICByZXR1cm4gdGhpcy5hcHAudmF1bHQuY3JlYXRlKG5vdGUucGF0aCwgbm90ZS5kYXRhKS50aGVuKChmKSA9PiB7XG4gICAgICByZXR1cm4gZjtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGlzdE1ha2VyIHtcbiAgZHY6IGFueTtcbiAgZ29uZXh0OiBhbnk7XG4gIGZyb250bWF0dGVyOiBGcm9udG1hdHRlcjtcbiAgbm90ZUhlbHBlcjogTm90ZUhlbHBlcjtcblxuICBjb25zdHJ1Y3Rvcihnb25leHQsIGR2LCBmcm9udG1hdHRlcikge1xuICAgIHRoaXMuZ29uZXh0ID0gZ29uZXh0O1xuICAgIHRoaXMuZHYgPSBkdjtcbiAgICB0aGlzLmZyb250bWF0dGVyID0gZnJvbnRtYXR0ZXI7XG4gICAgdGhpcy5ub3RlSGVscGVyID0gbmV3IE5vdGVIZWxwZXIoZ29uZXh0LCBkdiwgZnJvbnRtYXR0ZXIpO1xuICB9XG5cbiAgbmFtZUluTmFtZXNwYWNlKGZtOiBhbnksIG5zOiBzdHJpbmdbXSkge1xuICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgIGlmIChucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgYSBvZiBucykge1xuICAgICAgY29uc3Qgcm9vdCA9IGEuc3BsaXQoXCIvXCIpO1xuICAgICAgQXNzZXJ0LlRydWUocm9vdC5sZW5ndGggPT09IDIsIGBJbnZhbGlkIHRhZzogJyR7YX0nYCk7XG4gICAgICBjb25zdCBwYXJlbnQgPVxuICAgICAgICByb290WzBdLnNsaWNlKDAsIDEpID09PSBcIiFcIiA/IHJvb3RbMF0uc2xpY2UoMSkgOiByb290WzBdO1xuICAgICAgLy8gY29uc29sZS5sb2cocGFyZW50KVxuICAgICAgY29uc3QgbmFtZSA9IEhlbHBlci5nZXRUYWcoZm0sIHBhcmVudCk7XG5cbiAgICAgIGlmIChhLnNsaWNlKDAsIDEpID09PSBcIiFcIikge1xuICAgICAgICAvLyBuZWdhdGl2ZSBtYXRjaCwgZGlzY2FyZCBlbnRyeVxuICAgICAgICBpZiAobmFtZSA9PT0gYS5zbGljZSgxKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAvLyBubyBtYXRjaCwgcmVpbml0XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBwb3NpdGl2ZSBtYXRjaCwga2VlcCBlbnRyeVxuICAgICAgICBpZiAobmFtZSA9PT0gYSkge1xuICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAvLyBubyBtYXRjaCwgcmVpbml0XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmb3VuZDtcbiAgfVxuXG4gIG15TmFtZUluTmFtZXNwYWNlKG5hbWU6IHN0cmluZywgbnM6IHN0cmluZ1tdKSB7XG4gICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgaWYgKG5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBhIG9mIG5zKSB7XG4gICAgICBpZiAoYS5zbGljZSgwLCAxKSA9PT0gXCIhXCIpIHtcbiAgICAgICAgLy8gbmVnYXRpdmUgbWF0Y2gsIGRpc2NhcmQgZW50cnlcbiAgICAgICAgaWYgKG5hbWUgPT09IGEuc2xpY2UoMSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgLy8gbm8gbWF0Y2gsIHJlaW5pdFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcG9zaXRpdmUgbWF0Y2gsIGtlZXAgZW50cnlcbiAgICAgICAgaWYgKG5hbWUgPT09IGEpIHtcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgLy8gbm8gbWF0Y2gsIHJlaW5pdFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvdW5kID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZm91bmQ7XG4gIH1cblxuICBmaWx0ZXJCeU5hbWVzcGFjZShcbiAgICBmbTogYW55LFxuICAgIGJ5QXJlYXM6IHN0cmluZ1tdLFxuICAgIGJ5Q29udGV4dHM6IHN0cmluZ1tdLFxuICAgIGJ5TGF5ZXJzOiBzdHJpbmdbXSxcbiAgICBieU9yZ3M6IHN0cmluZ1tdLFxuICAgIGJ5UHJvamVjdHM6IHN0cmluZ1tdLFxuICApOiBib29sZWFuIHtcbiAgICAvLyBpZiAoYnlBcmVhcy5sZW5ndGggPiAwICYmICFieUFyZWFzLmNvbnRhaW5zKEhlbHBlci5nZXRBcmVhKGZtKSkpIHtcbiAgICAvLyBcdHJldHVybiBmYWxzZTtcbiAgICAvLyB9XG5cbiAgICBpZiAoIXRoaXMubXlOYW1lSW5OYW1lc3BhY2UoSGVscGVyLmdldEFyZWEoZm0pLCBieUFyZWFzKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGNvbnN0IGFyZWEgPSBIZWxwZXIuZ2V0QXJlYShmbSk7XG4gICAgLy8gbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgLy8gZm9yIChjb25zdCBhIG9mIGJ5QXJlYXMpIHtcbiAgICAvLyBcdGlmIChhLnNsaWNlKDAsIDEpID09PSBcIiFcIikge1xuICAgIC8vIFx0XHQvLyBuZWdhdGl2ZSBtYXRjaCwgZGlzY2FyZCBlbnRyeVxuICAgIC8vIFx0XHRpZiAoYXJlYSA9PT0gYS5zbGljZSgxKSkge1xuICAgIC8vIFx0XHRcdHJldHVybiBmYWxzZTtcbiAgICAvLyBcdFx0XHQvLyBubyBtYXRjaCwgcmVpbml0XG4gICAgLy8gXHRcdH0gZWxzZSB7XG4gICAgLy8gXHRcdFx0Zm91bmQgPSB0cnVlO1xuICAgIC8vIFx0XHR9XG4gICAgLy8gXHR9IGVsc2Uge1xuICAgIC8vIFx0XHQvLyBwb3NpdGl2ZSBtYXRjaCwga2VlcCBlbnRyeVxuICAgIC8vIFx0XHRpZiAoYXJlYSA9PT0gYSkge1xuICAgIC8vIFx0XHRcdGZvdW5kID0gdHJ1ZTtcbiAgICAvLyBcdFx0XHQvLyBubyBtYXRjaCwgcmVpbml0XG4gICAgLy8gXHRcdH0gZWxzZSB7XG4gICAgLy8gXHRcdFx0Zm91bmQgPSBmYWxzZTtcbiAgICAvLyBcdFx0fVxuICAgIC8vIFx0fVxuICAgIC8vIH1cbiAgICAvL1xuICAgIC8vIGlmICghZm91bmQpIHtcbiAgICAvLyBcdHJldHVybiBmYWxzZTtcbiAgICAvLyB9XG5cbiAgICAvLyBpZiAoXG4gICAgLy8gXHRieUNvbnRleHRzLmxlbmd0aCA+IDAgJiZcbiAgICAvLyBcdCFieUNvbnRleHRzLmNvbnRhaW5zKEhlbHBlci5nZXRDb250ZXh0KGZtKSlcbiAgICAvLyApIHtcbiAgICAvLyBcdHJldHVybiBmYWxzZTtcbiAgICAvLyB9XG4gICAgaWYgKCF0aGlzLm15TmFtZUluTmFtZXNwYWNlKEhlbHBlci5nZXRDb250ZXh0KGZtKSwgYnlDb250ZXh0cykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBpZiAoYnlMYXllcnMubGVuZ3RoID4gMCAmJiAhYnlMYXllcnMuY29udGFpbnMoSGVscGVyLmdldExheWVyKGZtKSkpIHtcbiAgICAvLyBcdHJldHVybiBmYWxzZTtcbiAgICAvLyB9XG4gICAgaWYgKCF0aGlzLm15TmFtZUluTmFtZXNwYWNlKEhlbHBlci5nZXRMYXllcihmbSksIGJ5TGF5ZXJzKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGlmIChieU9yZ3MubGVuZ3RoID4gMCAmJiAhYnlPcmdzLmNvbnRhaW5zKEhlbHBlci5nZXRPcmcoZm0pKSkge1xuICAgIC8vIFx0cmV0dXJuIGZhbHNlO1xuICAgIC8vIH1cbiAgICBpZiAoIXRoaXMubXlOYW1lSW5OYW1lc3BhY2UoSGVscGVyLmdldE9yZyhmbSksIGJ5T3JncykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBpZiAoXG4gICAgLy8gXHRieVByb2plY3RzLmxlbmd0aCA+IDAgJiZcbiAgICAvLyBcdCFieVByb2plY3RzLmNvbnRhaW5zKEhlbHBlci5nZXRQcm9qZWN0KGZtKSlcbiAgICAvLyApIHtcbiAgICAvLyBcdHJldHVybiBmYWxzZTtcbiAgICAvLyB9XG4gICAgaWYgKCF0aGlzLm15TmFtZUluTmFtZXNwYWNlKEhlbHBlci5nZXRQcm9qZWN0KGZtKSwgYnlQcm9qZWN0cykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZpbHRlckJ5RGF0ZShkdDogRGF0ZSwgYmVmb3JlOiBEYXRlLCBhZnRlcjogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIGlmIChiZWZvcmUgIT09IHVuZGVmaW5lZCAmJiBkdC5nZXRUaW1lKCkgPiBiZWZvcmUuZ2V0VGltZSgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGFmdGVyICE9PSB1bmRlZmluZWQgJiYgZHQuZ2V0VGltZSgpIDwgYWZ0ZXIuZ2V0VGltZSgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBnb2FscygpIHtcbiAgICAvLyBjb25zdCBmbSA9IHRoaXMuZnJvbnRtYXR0ZXIuZ2V0Q3VycmVudEZyb250bWF0dGVyKCk7XG4gICAgY29uc3QgcnMgPSBbXTtcbiAgICBjb25zdCBiaW5zID0ge307XG4gICAgYmluc1tHb2FsU3RhdHVzLlJlZnJhbWVdID0gW107XG4gICAgYmluc1tHb2FsU3RhdHVzLlJlc2VhcmNoXSA9IFtdO1xuICAgIGJpbnNbR29hbFN0YXR1cy5PcGVyYXRpb25hbGl6ZV0gPSBbXTtcbiAgICBiaW5zW0dvYWxTdGF0dXMuUGxhbmlmeV0gPSBbXTtcbiAgICBiaW5zW0dvYWxTdGF0dXMuRGVwZW5kYW50XSA9IFtdO1xuICAgIGJpbnNbR29hbFN0YXR1cy5BY3RpdmVdID0gW107XG4gICAgYmluc1tHb2FsU3RhdHVzLlN1Y2Nlc3NdID0gW107XG4gICAgYmluc1tHb2FsU3RhdHVzLkZhaWxlZF0gPSBbXTtcblxuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5kdi5wYWdlcyhgXCIke1BhdGhzLkdvYWxzfVwiYCkud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgIGNvbnN0IGZtcCA9IHBhZ2UuZmlsZS5mcm9udG1hdHRlcjtcblxuICAgICAgaWYgKGJpbnNbZm1wLnN0YXR1c10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBjb25zb2xlLmVycm9yKGBJbnZhbGlkIHN0YXR1cyBmb3IgZ29hbDogXCIke2ZtcC51dWlkfVwiYCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgYmluc1tmbXAuc3RhdHVzXS5wdXNoKGZtKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGJpbnMpO1xuICAgIGtleXMuc29ydCgpO1xuICAgIGZvciAoY29uc3QgayBvZiBrZXlzKSB7XG4gICAgICBjb25zdCBidWZmID0gYmluc1trXTtcbiAgICAgIGJ1ZmYuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBkdGEgPSBuZXcgRGF0ZShhLmZtLmJlZm9yZSk7XG4gICAgICAgIGNvbnN0IGR0YiA9IG5ldyBEYXRlKGIuZm0uYmVmb3JlKTtcbiAgICAgICAgcmV0dXJuIGR0YS5nZXRUaW1lKCkgLSBkdGIuZ2V0VGltZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZGlzcGxheUdvYWxzID0gKGssIHJzKSA9PiB7XG4gICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAzLCBrXSk7XG4gICAgICBjb25zdCBidWZmID0gYmluc1trXTtcbiAgICAgIHJzLnB1c2goW1wiYXJyYXlcIiwgUmVuZGVyZXIuZ29hbCwgYnVmZl0pO1xuICAgIH07XG5cbiAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCBcIm9wZXJhdGlvbmFsXCJdKTtcbiAgICBkaXNwbGF5R29hbHMoXCJhY3RpdmVcIiwgcnMpO1xuICAgIGRpc3BsYXlHb2FscyhcInBsYW5pZnlcIiwgcnMpO1xuXG4gICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgXCJub24tb3BlcmF0aW9uYWxcIl0pO1xuICAgIGRpc3BsYXlHb2FscyhcInJlZnJhbWVcIiwgcnMpO1xuICAgIGRpc3BsYXlHb2FscyhcInJlc2VhcmNoXCIsIHJzKTtcbiAgICBkaXNwbGF5R29hbHMoXCJvcGVyYXRpb25hbGl6ZVwiLCBycyk7XG4gICAgLy8gZGlzcGxheUdvYWxzKFwiZGVwZW5kYW50XCIsIHJzKTtcblxuICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIFwiZG9uZVwiXSk7XG4gICAgZGlzcGxheUdvYWxzKFwic3VjY2Vzc1wiLCBycyk7XG4gICAgZGlzcGxheUdvYWxzKFwiZmFpbGVkXCIsIHJzKTtcblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIHByb2plY3RUYXNrc1NoZWV0UmVsYXRpb25Gcm9udG1hdHRlcihkdikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBkdi5jdXJyZW50KCk7XG4gICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhjdXJyZW50KTtcblxuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBmbS5nZXROYW1lKCksXG4gICAgICB1dWlkOiBmbS51dWlkLFxuICAgICAgYWN0aXZlOlxuICAgICAgICBmbS5mbS5hY3RpdmUgPT09IHVuZGVmaW5lZCB8fCBmbS5mbS5hY3RpdmUgPT09IHRydWVcbiAgICAgICAgICA/IHRydWVcbiAgICAgICAgICA6IGZhbHNlLFxuICAgIH07XG4gIH1cblxuICBwcm9qZWN0VGFza3NTaGVldFJlbGF0aW9uKGR2KSB7XG4gICAgY29uc3QgcHJvamVjdCA9IHRoaXMucHJvamVjdFRhc2tzU2hlZXRSZWxhdGlvbkZyb250bWF0dGVyKGR2KTtcblxuICAgIGNvbnN0IHJzID0gW107XG4gICAgY29uc3QgYmlucyA9IHtcbiAgICAgIG5leHRBY3Rpb246IFtdLFxuICAgICAgd2FpdGluZ0ZvcjogW10sXG4gICAgICBzb21lZGF5TWF5YmU6IFtdLFxuICAgIH07XG5cbiAgICB7XG4gICAgICBjb25zdCBwYWdlcyA9IGR2XG4gICAgICAgIC5wYWdlcyhgXCJKb3VybmFsXCJgKVxuICAgICAgICAud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICAgIHJldHVybiBmbS5nZXRQcm9qZWN0KCkgPT09IHByb2plY3QubmFtZTtcbiAgICAgICAgfSlcbiAgICAgICAgLnNvcnQoKGspID0+IGsuY3JlYXRlZF9hdCwgXCJkZXNjXCIpO1xuXG4gICAgICBpZiAocGFnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCBgSm91cm5hbCAoJHtwYWdlcy5sZW5ndGh9KWBdKTtcbiAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgICBjb25zdCB0ZXh0ID0gUmVuZGVyZXIubWFrZUxpbmsoXG4gICAgICAgICAgICBkdixcbiAgICAgICAgICAgIGZtLmYsXG4gICAgICAgICAgICBgJHtmbS5jcmVhdGVkQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCl9YCxcbiAgICAgICAgICAgIFwiZW50cnlcIixcbiAgICAgICAgICApO1xuICAgICAgICAgIHJzLnB1c2goW1wicGFyYWdyYXBoXCIsIHRleHRdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHBhZ2VzID0gZHYucGFnZXMoYFwiJHtQYXRocy5UYXNrc31cImApLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgaWYgKGZtLmZtLnN0YXR1cyA9PT0gXCJkb25lXCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoW1wiZGFpbHlcIiwgXCJ3ZWVrbHlcIiwgXCJtb250aGx5XCJdLmNvbnRhaW5zKHByb2plY3QubmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgcHJvamVjdC5uYW1lID09PSBcImFkaG9jXCIgJiZcbiAgICAgICAgZm0uZ2V0UHJvamVjdCgpID09PSB1bmRlZmluZWRcbiAgICAgICkge1xuICAgICAgICBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIucHJvamVjdCA9IFwiYWRob2NcIjtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHByb2plY3QubmFtZSA9PT0gZm0uZ2V0UHJvamVjdCgpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuXG4gICAgICBpZiAodGhpcy5ub3RlSGVscGVyLmlzRG9hYmxlKHBhZ2UpKSB7XG4gICAgICAgIGlmIChmbS5mbS5wcmlvcml0eSA+IDApIHtcbiAgICAgICAgICBiaW5zLm5leHRBY3Rpb24ucHVzaChwYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBiaW5zLnNvbWVkYXlNYXliZS5wdXNoKHBhZ2UpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZm0uZm0ubmVlZHMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgIHRoaXMubm90ZUhlbHBlci5oYXNQZW5kaW5nRGVwZW5kZW5jaWVzKGZtLmZtLm5lZWRzKVxuICAgICAgICApIHtcbiAgICAgICAgICBwYWdlLmNhdXNlID0gXCJkZXBlbmRlbmNpZXNcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBmbUF0ID0gZm0uYXQ7XG4gICAgICAgICAgY29uc3QgY3VycmVudEF0ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICBjb25zdCBmbUFmdGVyID0gZm0uYWZ0ZXI7XG5cbiAgICAgICAgICBpZiAoZm0uZm0uYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm1BdC5zZXRIb3VycygwKTtcbiAgICAgICAgICAgIGZtQXQuc2V0TWludXRlcygwKTtcbiAgICAgICAgICAgIGZtQXQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgICAgIGZtQXQuc2V0TWlsbGlzZWNvbmRzKDApO1xuICAgICAgICAgICAgY3VycmVudEF0LnNldEhvdXJzKDApO1xuICAgICAgICAgICAgY3VycmVudEF0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgICAgICBjdXJyZW50QXQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgICAgIGN1cnJlbnRBdC5zZXRNaWxsaXNlY29uZHMoMCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChmbS5hZnRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmbUFmdGVyLnNldEhvdXJzKDApO1xuICAgICAgICAgICAgZm1BZnRlci5zZXRNaW51dGVzKDApO1xuICAgICAgICAgICAgZm1BZnRlci5zZXRTZWNvbmRzKDApO1xuICAgICAgICAgICAgZm1BZnRlci5zZXRNaWxsaXNlY29uZHMoMCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc29sZS5sb2coYGN1cnJlbnQ6ICR7Y3VycmVudEF0LmdldFRpbWUoKX1gKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgYXQ6ICR7Zm0uYXQuZ2V0VGltZSgpfWApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBhZnRlcjogJHtmbS5hZnRlci5nZXRUaW1lKCl9YCk7XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBmbS5mbS5hdCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBmbUF0LmdldFRpbWUoKSA+IGN1cnJlbnRBdC5nZXRUaW1lKClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHBhZ2UuY2F1c2UgPSBcImF0XCI7XG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIGZtLmZtLmFmdGVyICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGZtQWZ0ZXIuZ2V0VGltZSgpIDwgY3VycmVudEF0LmdldFRpbWUoKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcGFnZS5jYXVzZSA9IFwiYWZ0ZXJcIjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFnZS5jYXVzZSA9IFwidW5rbm93blwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGJpbnMud2FpdGluZ0Zvci5wdXNoKHBhZ2UpO1xuICAgICAgICAvLyBhdFxuICAgICAgICAvLyBhZnRlclxuICAgICAgICAvLyBuZWVkc1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChiaW5zLm5leHRBY3Rpb24ubGVuZ3RoID4gMCkge1xuICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgYE5leHQgQWN0aW9ucyAoJHtiaW5zLm5leHRBY3Rpb24ubGVuZ3RofSlgXSk7XG4gICAgICBiaW5zLm5leHRBY3Rpb24uc29ydChIZWxwZXIuc29ydEJ5UHJpb3JpdHlBbmREdXJhdGlvbkFuZEFnZSk7XG4gICAgICBycy5wdXNoKFtcbiAgICAgICAgXCJhcnJheVwiLFxuICAgICAgICBSZW5kZXJlci5iYXNpY1Rhc2tKb3VybmFsTmV4dEFjdGlvbixcbiAgICAgICAgYmlucy5uZXh0QWN0aW9uLFxuICAgICAgXSk7XG4gICAgfVxuXG4gICAgaWYgKGJpbnMud2FpdGluZ0Zvci5sZW5ndGggPiAwKSB7XG4gICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCBgV2FpdGluZyAoJHtiaW5zLndhaXRpbmdGb3IubGVuZ3RofSlgXSk7XG4gICAgICBiaW5zLndhaXRpbmdGb3Iuc29ydChIZWxwZXIuc29ydEJ5UHJpb3JpdHlBbmREdXJhdGlvbkFuZEFnZSk7XG4gICAgICBycy5wdXNoKFtcbiAgICAgICAgXCJhcnJheVwiLFxuICAgICAgICBSZW5kZXJlci5iYXNpY1Rhc2tKb3VybmFsV2FpdGluZyxcbiAgICAgICAgYmlucy53YWl0aW5nRm9yLFxuICAgICAgXSk7XG4gICAgfVxuXG4gICAgaWYgKGJpbnMuc29tZWRheU1heWJlLmxlbmd0aCA+IDApIHtcbiAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIGBNYXliZSAoJHtiaW5zLnNvbWVkYXlNYXliZS5sZW5ndGh9KWBdKTtcbiAgICAgIGJpbnMuc29tZWRheU1heWJlLnNvcnQoSGVscGVyLnNvcnRCeVByaW9yaXR5QW5kRHVyYXRpb25BbmRBZ2UpO1xuICAgICAgcnMucHVzaChbXCJhcnJheVwiLCBSZW5kZXJlci5iYXNpY1Rhc2tKb3VybmFsLCBiaW5zLnNvbWVkYXlNYXliZV0pO1xuICAgIH1cblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIHByb2plY3RMb2dzU2hlZXRSZWxhdGlvbihkdikge1xuICAgIGNvbnN0IHByb2plY3QgPSB0aGlzLnByb2plY3RUYXNrc1NoZWV0UmVsYXRpb25Gcm9udG1hdHRlcihkdik7XG5cbiAgICBjb25zdCBmaWx0ZXJCeSA9IFtdO1xuICAgIGNvbnN0IHJzID0gW107XG5cbiAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCBcIkxvZ3NcIl0pO1xuXG4gICAgY29uc3QgbG9ncyA9IHRoaXMuZHYucGFnZXMoYFwiJHtQYXRocy5Mb2dzfVwiYCkud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgIGlmIChwYWdlLnR5cGUgIT09IFR5cGVzLkxvZykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAocGFnZS5maWxlLmZyb250bWF0dGVyLnJldmlld2VkID4gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGJ1ZmYgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgbG9ncykge1xuICAgICAgY29uc3QgZm0gPSBlLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBpZiAoZmlsdGVyQnkubGVuZ3RoID4gMCAmJiAhdGhpcy5uYW1lSW5OYW1lc3BhY2UoZm0sIGZpbHRlckJ5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgZm0uY3JlYXRlZEF0ID0gdGhpcy5mcm9udG1hdHRlci5nZXRDcmVhdGVkQXQoZS5maWxlKTtcbiAgICAgIEFzc2VydC5UcnVlKFxuICAgICAgICAhSGVscGVyLm5pbENoZWNrKGZtLnBhcmVudF9pZCksXG4gICAgICAgIGBNaXNzaW5nIGZpZWxkIFwicGFyZW50X2lkXCIgZnJvbSBsb2c6IFwiJHtmbS51dWlkfVwiYCxcbiAgICAgICk7XG4gICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmR2XG4gICAgICAgIC5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfS8ke2ZtLnBhcmVudF9pZH1cImApXG4gICAgICAgIC5hcnJheSgpO1xuICAgICAgaWYgKHBhcmVudC5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgcGFyZW50Lmxlbmd0aCA9PT0gMSxcbiAgICAgICAgYFBhcmVudDogJHtmbS5wYXJlbnRfaWR9IG5vdCBmb3VuZCBmb3IgbG9nOiBcIiR7Zm0udXVpZH1cImAsXG4gICAgICApO1xuICAgICAgZm0ucHJvamVjdCA9IEhlbHBlci5nZXRQcm9qZWN0KHBhcmVudFswXS5maWxlLmZyb250bWF0dGVyKTtcbiAgICAgIGZtLmFyZWEgPSBIZWxwZXIuZ2V0QXJlYShwYXJlbnRbMF0uZmlsZS5mcm9udG1hdHRlciwgdHJ1ZSk7XG4gICAgICBpZiAoXG4gICAgICAgIGZtLnByb2plY3QgIT09XG4gICAgICAgIGBwcm9qZWN0LyR7cHJvamVjdC5uYW1lID09PSBcImFkaG9jXCIgPyBcIm5vbmVcIiA6IHByb2plY3QubmFtZX1gXG4gICAgICApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChIZWxwZXIubmlsQ2hlY2soZm0uZG9uZV9hdCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBkYXRlID0gZm0uZG9uZV9hdC5zbGljZSgwLCAxMCk7XG5cbiAgICAgIGlmIChidWZmW2RhdGVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYnVmZltkYXRlXSA9IFtlXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ1ZmZbZGF0ZV0ucHVzaChlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYnVmZik7XG4gICAga2V5cy5zb3J0KCk7XG4gICAgZm9yIChjb25zdCBkYXRlIG9mIGtleXMpIHtcbiAgICAgIGJ1ZmZbZGF0ZV0uc29ydChcbiAgICAgICAgKGEsIGIpID0+XG4gICAgICAgICAgYi5maWxlLmZyb250bWF0dGVyLmNyZWF0ZWRBdC5nZXRUaW1lKCkgLVxuICAgICAgICAgIGEuZmlsZS5mcm9udG1hdHRlci5jcmVhdGVkQXQuZ2V0VGltZSgpLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGRhdGUgb2Yga2V5cy5yZXZlcnNlKCkpIHtcbiAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDMsIGRhdGVdKTtcbiAgICAgIHJzLnB1c2goW1wiYXJyYXlcIiwgUmVuZGVyZXIucHJvamVjdExvZ3MsIGJ1ZmZbZGF0ZV1dKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcnM7XG4gIH1cblxuICBnZXRQcm9qZWN0TG9ncyhkdiwgcHJvamVjdCkge1xuICAgIGNvbnN0IGxvZ3MgPSB0aGlzLmR2LnBhZ2VzKGBcIiR7UGF0aHMuTG9nc31cImApLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICBpZiAocGFnZS50eXBlICE9PSBUeXBlcy5Mb2cpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICBjb25zdCBidWZmID0gW107XG4gICAgZm9yIChjb25zdCBlIG9mIGxvZ3MpIHtcbiAgICAgIGNvbnN0IGZtID0gZS5maWxlLmZyb250bWF0dGVyO1xuICAgICAgQXNzZXJ0LlRydWUoXG4gICAgICAgICFIZWxwZXIubmlsQ2hlY2soZm0ucGFyZW50X2lkKSxcbiAgICAgICAgYE1pc3NpbmcgZmllbGQgXCJwYXJlbnRfaWRcIiBmcm9tIGxvZzogXCIke2ZtLnV1aWR9XCJgLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZHZcbiAgICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9LyR7Zm0ucGFyZW50X2lkfVwiYClcbiAgICAgICAgLmFycmF5KCk7XG4gICAgICBpZiAocGFyZW50Lmxlbmd0aCAhPT0gMSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vIEFzc2VydC5UcnVlKFxuICAgICAgLy8gXHRwYXJlbnQubGVuZ3RoID09PSAxLFxuICAgICAgLy8gXHRgUGFyZW50OiAke2ZtLnBhcmVudF9pZH0gbm90IGZvdW5kIGZvciBsb2c6IFwiJHtmbS51dWlkfVwiYCxcbiAgICAgIC8vICk7XG4gICAgICBmbS5wcm9qZWN0ID0gSGVscGVyLmdldFByb2plY3QocGFyZW50WzBdLmZpbGUuZnJvbnRtYXR0ZXIpO1xuICAgICAgZm0uYXJlYSA9IEhlbHBlci5nZXRBcmVhKHBhcmVudFswXS5maWxlLmZyb250bWF0dGVyLCB0cnVlKTtcbiAgICAgIGlmIChcbiAgICAgICAgZm0ucHJvamVjdCAhPT1cbiAgICAgICAgYHByb2plY3QvJHtwcm9qZWN0Lm5hbWUgPT09IFwiYWRob2NcIiA/IFwibm9uZVwiIDogcHJvamVjdC5uYW1lfWBcbiAgICAgICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKEhlbHBlci5uaWxDaGVjayhmbS5kb25lX2F0KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGJ1ZmYucHVzaChlKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ1ZmY7XG4gIH1cblxuICBwcm9qZWN0TG9nc1NoZWV0KGR2KSB7XG4gICAgY29uc3QgcHJvamVjdCA9IHRoaXMuZnJvbnRtYXR0ZXIucHJvamVjdFBhcnNlTWV0YShkdik7XG4gICAgY29uc3QgZm1sID0gdGhpcy5mcm9udG1hdHRlci5nZXRDdXJyZW50RnJvbnRtYXR0ZXIoKTtcbiAgICBpZiAoZm1sID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBmcm9udG1hdHRlciwgY2Fubm90IHByb2NlZWRgKTtcbiAgICB9XG5cbiAgICBjb25zdCBiZWZvcmUgPSBIZWxwZXIubmlsQ2hlY2soZm1sLmJlZm9yZSlcbiAgICAgID8gbmV3IERhdGUoMClcbiAgICAgIDogbmV3IERhdGUoZm1sLmJlZm9yZSk7XG4gICAgY29uc3QgYWZ0ZXIgPSBIZWxwZXIubmlsQ2hlY2soZm1sLmFmdGVyKVxuICAgICAgPyBuZXcgRGF0ZSgpXG4gICAgICA6IG5ldyBEYXRlKGZtbC5hZnRlcik7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhgYmVmb3JlOiAnJHtiZWZvcmV9J2ApO1xuICAgIC8vIGNvbnNvbGUubG9nKGBhZnRlcjogJyR7YWZ0ZXJ9J2ApO1xuICAgIGNvbnN0IGZpbHRlckJ5ID0gdGhpcy5mcm9udG1hdHRlci5wYXJzZUxpc3RGaWx0ZXJCeShmbWwpO1xuICAgIGNvbnN0IHJzID0gW107XG4gICAgbGV0IHRvdGFsVGltZSA9IDA7XG4gICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMSwgcHJvamVjdC5uYW1lXSk7XG5cbiAgICBjb25zdCBsb2dzID0gdGhpcy5kdi5wYWdlcyhgXCIke1BhdGhzLkxvZ3N9XCJgKS53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgaWYgKHBhZ2UudHlwZSAhPT0gVHlwZXMuTG9nKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgY29uc3QgYnVmZiA9IHt9O1xuICAgIGZvciAoY29uc3QgZSBvZiBsb2dzKSB7XG4gICAgICBjb25zdCBmbSA9IGUuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGlmIChmaWx0ZXJCeS5sZW5ndGggPiAwICYmICF0aGlzLm5hbWVJbk5hbWVzcGFjZShmbSwgZmlsdGVyQnkpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBmbS5jcmVhdGVkQXQgPSB0aGlzLmZyb250bWF0dGVyLmdldENyZWF0ZWRBdChlLmZpbGUpO1xuICAgICAgQXNzZXJ0LlRydWUoXG4gICAgICAgICFIZWxwZXIubmlsQ2hlY2soZm0ucGFyZW50X2lkKSxcbiAgICAgICAgYE1pc3NpbmcgZmllbGQgXCJwYXJlbnRfaWRcIiBmcm9tIGxvZzogXCIke2ZtLnV1aWR9XCJgLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZHZcbiAgICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9LyR7Zm0ucGFyZW50X2lkfVwiYClcbiAgICAgICAgLmFycmF5KCk7XG4gICAgICBpZiAocGFyZW50Lmxlbmd0aCAhPT0gMSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vIEFzc2VydC5UcnVlKFxuICAgICAgLy8gXHRwYXJlbnQubGVuZ3RoID09PSAxLFxuICAgICAgLy8gXHRgUGFyZW50OiAke2ZtLnBhcmVudF9pZH0gbm90IGZvdW5kIGZvciBsb2c6IFwiJHtmbS51dWlkfVwiYCxcbiAgICAgIC8vICk7XG4gICAgICBmbS5wcm9qZWN0ID0gSGVscGVyLmdldFByb2plY3QocGFyZW50WzBdLmZpbGUuZnJvbnRtYXR0ZXIpO1xuICAgICAgZm0uYXJlYSA9IEhlbHBlci5nZXRBcmVhKHBhcmVudFswXS5maWxlLmZyb250bWF0dGVyLCB0cnVlKTtcbiAgICAgIGlmIChcbiAgICAgICAgZm0ucHJvamVjdCAhPT1cbiAgICAgICAgYHByb2plY3QvJHtwcm9qZWN0Lm5hbWUgPT09IFwiYWRob2NcIiA/IFwibm9uZVwiIDogcHJvamVjdC5uYW1lfWBcbiAgICAgICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKEhlbHBlci5uaWxDaGVjayhmbS5kb25lX2F0KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0ZSA9IGZtLmRvbmVfYXQuc2xpY2UoMCwgMTApO1xuICAgICAgY29uc3QgY3JlYXRlZEF0ID0gbmV3IERhdGUoZm0uY3JlYXRlZF9hdCk7XG4gICAgICBjb25zdCBkb25lQXQgPSBuZXcgRGF0ZShmbS5kb25lX2F0KTtcblxuICAgICAgaWYgKGNyZWF0ZWRBdCA+IGJlZm9yZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNyZWF0ZWRBdCA8IGFmdGVyKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoYnVmZltkYXRlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJ1ZmZbZGF0ZV0gPSBbZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidWZmW2RhdGVdLnB1c2goZSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRlbHRhID0gZG9uZUF0LmdldFRpbWUoKSAtIGNyZWF0ZWRBdC5nZXRUaW1lKCk7XG5cbiAgICAgIHRvdGFsVGltZSArPSBkZWx0YTtcbiAgICB9XG5cbiAgICBkdi5wYXJhZ3JhcGgoXG4gICAgICBgX3RvdGFsVGltZSAoaCk6XyAke01hdGgucm91bmQoKHRvdGFsVGltZSAvICgxMDAwICogNjAgKiA2MCkpICogMTApIC8gMTB9YCxcbiAgICApO1xuXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGJ1ZmYpO1xuICAgIGtleXMuc29ydCgpO1xuICAgIGZvciAoY29uc3QgZGF0ZSBvZiBrZXlzKSB7XG4gICAgICBidWZmW2RhdGVdLnNvcnQoXG4gICAgICAgIChhLCBiKSA9PlxuICAgICAgICAgIGIuZmlsZS5mcm9udG1hdHRlci5jcmVhdGVkQXQuZ2V0VGltZSgpIC1cbiAgICAgICAgICBhLmZpbGUuZnJvbnRtYXR0ZXIuY3JlYXRlZEF0LmdldFRpbWUoKSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBkYXRlIG9mIGtleXMucmV2ZXJzZSgpKSB7XG4gICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAzLCBkYXRlXSk7XG4gICAgICBycy5wdXNoKFtcImFycmF5XCIsIFJlbmRlcmVyLnByb2plY3RMb2dzLCBidWZmW2RhdGVdXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgbG9ncygpIHtcbiAgICBjb25zdCBbZ3JvdXBCeSwgZmlsdGVyQnksIGJlZm9yZSwgYWZ0ZXJdID1cbiAgICAgIHRoaXMuZnJvbnRtYXR0ZXIucGFyc2VBbGxQcm9ncmVzc2VkVGFza3MoKTtcblxuICAgIGNvbnN0IHRhc2tzID0gdGhpcy5kdlxuICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKVxuICAgICAgLndoZXJlKChwYWdlKSA9PiBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuc3RhdHVzICE9PSBcImRvaW5nXCIpO1xuXG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xuICAgICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBpZiAoZmlsdGVyQnkubGVuZ3RoID4gMCAmJiAhdGhpcy5uYW1lSW5OYW1lc3BhY2UoZm0sIGZpbHRlckJ5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGltZUVzdGltYXRlID0gSGVscGVyLmR1cmF0aW9uU3RyaW5nVG9TZWMoZm0udGltZV9lc3RpbWF0ZSk7XG4gICAgICBpZiAodGltZUVzdGltYXRlID09PSB1bmRlZmluZWQgJiYgZm0udGltZV9lc3RpbWF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgSW52YWxpZCB2YWx1ZTogXCIke2ZtLnRpbWVfZXN0aW1hdGV9XCIgZm9yIGVudHJ5OiBcIiR7Zm0udXVpZH1cImAsXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmbS50aW1lRXN0aW1hdGUgPSB0aW1lRXN0aW1hdGU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxvZ3MgPSB0aGlzLmR2XG4gICAgICAgIC5wYWdlcyhgXCIke1BhdGhzLkxvZ3N9LyR7Zm0udXVpZH1cImApXG4gICAgICAgIC53aGVyZSgocGFnZSkgPT4gcGFnZS50eXBlID09PSBUeXBlcy5Mb2cpXG4gICAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiYXNjXCIpO1xuXG4gICAgICAvLyBkaXNjYXJkIHRhc2tzIHdpdGhvdXQgbG9nIGVudHJ5XG4gICAgICBpZiAobG9ncy5sZW5ndGggPCAxKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBmbS50b29rID0gMDtcbiAgICAgIGNvbnN0IHByb2plY3QgPSBIZWxwZXIuZ2V0RmllbGQoSGVscGVyLmdldFByb2plY3QoZm0sIHRydWUpLCBcIlwiKTtcbiAgICAgIGNvbnN0IGFyZWEgPSBIZWxwZXIuZ2V0RmllbGQoSGVscGVyLmdldEFyZWEoZm0sIHRydWUpLCBcIlwiKTtcblxuICAgICAgZm9yIChjb25zdCBsb2cgb2YgbG9ncykge1xuICAgICAgICBjb25zdCBmbWwgPSBsb2cuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgICAgY29uc3QgZW50cnkgPSB7XG4gICAgICAgICAgYWxpYXM6IGZtLmFsaWFzLFxuICAgICAgICAgIHV1aWQ6IGZtLnV1aWQsXG4gICAgICAgICAgbG9nSWQ6IGZtbC51dWlkLFxuICAgICAgICAgIGVzdGltYXRlOiBmbS50aW1lRXN0aW1hdGUsXG4gICAgICAgICAgcHJvamVjdDogcHJvamVjdCxcbiAgICAgICAgICBhcmVhOiBhcmVhLFxuICAgICAgICAgIGRvbWFpbjogSGVscGVyLmdldEZpZWxkKEhlbHBlci5nZXREb21haW4oZm0sIHRydWUpLCBcIlwiKSxcbiAgICAgICAgICBwYXRoOiB0YXNrLmZpbGUucGF0aCxcbiAgICAgICAgICBsb2dQYXRoOiBsb2cuZmlsZS5wYXRoLFxuICAgICAgICAgIGNyZWF0ZWRBdDogdW5kZWZpbmVkLFxuICAgICAgICAgIGRvbmVBdDogdW5kZWZpbmVkLFxuICAgICAgICAgIHRvb2s6IHVuZGVmaW5lZCxcbiAgICAgICAgICB0b29rQWNjOiB1bmRlZmluZWQsXG4gICAgICAgICAgZGVsdGFBY2M6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGZtbC5jcmVhdGVkX2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGxvZyk7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYHRhc2s6ICR7Zm0udXVpZH0gbGFzdCBlbnRyeSBpcyBtaXNzaW5nICdjcmVhdGVkX2F0JyBmaWVsZGAsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmbWwuZG9uZV9hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihsb2cpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGB0YXNrOiAke2ZtLnV1aWR9IGxhc3QgZW50cnkgaXMgbWlzc2luZyAnZG9uZV9hdCcgZmllbGRgLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBlbnRyeS5jcmVhdGVkQXQgPSBuZXcgRGF0ZShmbWwuY3JlYXRlZF9hdCk7XG4gICAgICAgIGVudHJ5LmRvbmVBdCA9IG5ldyBEYXRlKGZtbC5kb25lX2F0KTtcbiAgICAgICAgaWYgKCF0aGlzLmZpbHRlckJ5RGF0ZShlbnRyeS5kb25lQXQsIGJlZm9yZSwgYWZ0ZXIpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0b29rID1cbiAgICAgICAgICAoZW50cnkuZG9uZUF0LmdldFRpbWUoKSAtIGVudHJ5LmNyZWF0ZWRBdC5nZXRUaW1lKCkpIC8gMTAwMDtcbiAgICAgICAgZm0udG9vayArPSB0b29rO1xuICAgICAgICBlbnRyeS50b29rID0gdG9vaztcbiAgICAgICAgZW50cnkudG9va0FjYyA9IGZtLnRvb2s7XG4gICAgICAgIGVudHJ5LmRlbHRhQWNjID0gdGltZUVzdGltYXRlIC0gZm0udG9vaztcbiAgICAgICAgYnVmZi5wdXNoKGVudHJ5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBrZXlHZXR0ZXIgPSBIZWxwZXIuZ2V0S2V5KGdyb3VwQnkpO1xuICAgIGNvbnN0IGJpbnMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGJ1ZmYpIHtcbiAgICAgIGxldCBkID0gdW5kZWZpbmVkO1xuXG4gICAgICB0cnkge1xuICAgICAgICBkID0ga2V5R2V0dGVyKGVudHJ5KTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZW50cnkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYmluc1tkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbZF0gPSBbZW50cnldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmluc1tkXS5wdXNoKGVudHJ5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYmlucyk7XG4gICAga2V5cy5zb3J0KCk7XG5cbiAgICAvLyBidWlsZHMgcmVuZGVyaW5nIGFycmF5XG4gICAgY29uc3QgcnMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzLnJldmVyc2UoKSkge1xuICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwga2V5XSk7XG4gICAgICBjb25zdCBhcnIgPSBbXTtcbiAgICAgIGxldCB0b3RhbFRpbWUgPSAwO1xuXG4gICAgICAvLyBkYXkgbG9vcFxuICAgICAgZm9yIChjb25zdCBlIG9mIGJpbnNba2V5XSkge1xuICAgICAgICBjb25zdCBidWZmID0gW107XG4gICAgICAgIGJ1ZmYucHVzaChcbiAgICAgICAgICBSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChcbiAgICAgICAgICAgIHRoaXMuZHYsXG4gICAgICAgICAgICB7IHBhdGg6IGUucGF0aCwgZnJvbnRtYXR0ZXI6IHsgdXVpZDogZS51dWlkIH0gfSxcbiAgICAgICAgICAgIFwiVGFza1wiLFxuICAgICAgICAgICksXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gYnVmZi5wdXNoKFxuICAgICAgICAvLyBcdHRoaXMuZHYuc2VjdGlvbkxpbmsoXG4gICAgICAgIC8vIFx0XHRlLnBhdGgsXG4gICAgICAgIC8vIFx0XHRcIlRhc2tcIixcbiAgICAgICAgLy8gXHRcdGZhbHNlLFxuICAgICAgICAvLyBcdFx0YCR7ZS51dWlkLnNsaWNlKDAsIDgpfWAsXG4gICAgICAgIC8vIFx0KSxcbiAgICAgICAgLy8gKTtcblxuICAgICAgICBidWZmLnB1c2goXG4gICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtTaG9ydFVVSUQoXG4gICAgICAgICAgICB0aGlzLmR2LFxuICAgICAgICAgICAgeyBwYXRoOiBlLmxvZ1BhdGgsIGZyb250bWF0dGVyOiB7IHV1aWQ6IGUubG9nSWQgfSB9LFxuICAgICAgICAgICAgXCJDb250ZW50XCIsXG4gICAgICAgICAgKSxcbiAgICAgICAgKTtcbiAgICAgICAgLy8gYnVmZi5wdXNoKFxuICAgICAgICAvLyBcdHRoaXMuZHYuc2VjdGlvbkxpbmsoXG4gICAgICAgIC8vIFx0XHRlLmxvZ1BhdGgsXG4gICAgICAgIC8vIFx0XHRcIkNvbnRlbnRcIixcbiAgICAgICAgLy8gXHRcdGZhbHNlLFxuICAgICAgICAvLyBcdFx0YCR7ZS5sb2dJZC5zbGljZSgwLCA4KX1gLFxuICAgICAgICAvLyBcdCksXG4gICAgICAgIC8vICk7XG5cbiAgICAgICAgLy8gYnVmZi5wdXNoKGAke2UuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTYpfWApO1xuICAgICAgICAvLyBidWZmLnB1c2goYCR7ZS5kb25lQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxNil9YCk7XG5cbiAgICAgICAgY29uc3QgY29udmVydFNlY29uZHNUb0hvdXJzID0gKHQpID0+IHtcbiAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgodCAvIDM2MDApICogMTApIC8gMTA7XG4gICAgICAgIH07XG4gICAgICAgIGJ1ZmYucHVzaChgJHtjb252ZXJ0U2Vjb25kc1RvSG91cnMoZS50b29rKX1gKTtcbiAgICAgICAgYnVmZi5wdXNoKGAke2UucHJvamVjdH1gKTtcblxuICAgICAgICBhcnIucHVzaChidWZmKTtcbiAgICAgICAgdG90YWxUaW1lICs9IGUudG9vaztcbiAgICAgIH1cblxuICAgICAgLy8gdGFza1xuICAgICAgdG90YWxUaW1lID0gTWF0aC5yb3VuZCgodG90YWxUaW1lIC8gMzYwMCkgKiAxMCkgLyAxMDtcbiAgICAgIHJzLnB1c2goW1wic3RhdHNcIiwgXCJ0b3RhbFRpbWVcIiwgXCJoXCIsIHRvdGFsVGltZV0pO1xuICAgICAgcnMucHVzaChbXCJhcnJheVwiLCBSZW5kZXJlci5iYXNpY1Byb2dyZXNzZWRUYXNrV2l0aExvZywgYXJyXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgaW5ib3goZHYpIHtcbiAgICBjb25zdCBycyA9IFtdO1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICAvLyBmb25jdGlvbiBkJ2V4dHJhY3Rpb24gZXQgZCdpbml0aWFsaXNhdGlvbiBkZXMgcGFyYW1ydHJlcyBkdSBmcm9udG1hdHRlclxuICAgIC8vIGZvbmN0aW9uIGZpbHRlciwgKHRhc2spIC0+IGJvb2xcblxuICAgIGNvbnN0IGZpbHRlckJ5ID0gW107XG4gICAgY29uc3QgbWluU2l6ZSA9IDA7XG4gICAgY29uc3QgbWF4U2l6ZSA9IDQyOTQ5NjcyOTU7XG5cbiAgICBjb25zdCBmbGVldGluZ3MgPSB0aGlzLmR2LnBhZ2VzKGBcIiR7UGF0aHMuSW5ib3h9XCJgKS5hcnJheSgpO1xuICAgIGZvciAoY29uc3QgZSBvZiBmbGVldGluZ3MpIHtcbiAgICAgIGNvbnN0IGZtID0gZS5maWxlLmZyb250bWF0dGVyO1xuICAgICAgZS5maWxlLmZyb250bWF0dGVyLmNyZWF0ZWRBdCA9IHRoaXMuZnJvbnRtYXR0ZXIuZ2V0Q3JlYXRlZEF0KFxuICAgICAgICBlLmZpbGUsXG4gICAgICApO1xuICAgICAgbGV0IGZtanMgPSBudWxsO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm1qcyA9IG5ldyBGcm9udG1hdHRlckpTKGUpO1xuICAgICAgfSBjYXRjaCAoVmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICBkdi5wYXJhZ3JhcGgoUmVuZGVyZXIubWFrZUxpbmsoZHYsIGUuZmlsZSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgZm0ucHJvamVjdCA9IEhlbHBlci5nZXRQcm9qZWN0KGZtLCB0cnVlKTtcbiAgICAgIGZtLmRvbWFpbiA9IGBkb21haW4vJHtmbWpzLmdldERvbWFpbigpfWA7XG4gICAgICBmbS5jb21wb25lbnRzID0gSGVscGVyLmdldENvbXBvbmVudHMoZm0pO1xuXG4gICAgICBpZiAoZS5maWxlLnNpemUgPCBtaW5TaXplKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGUuZmlsZS5zaXplID4gbWF4U2l6ZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgYnVmZi5wdXNoKGUpO1xuICAgIH1cblxuICAgIGNvbnN0IGxvZ3MgPSBbXTtcblxuICAgIGZvciAoY29uc3QgZSBvZiBsb2dzKSB7XG4gICAgICBjb25zdCBmbSA9IGUuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGZtLmNyZWF0ZWRBdCA9IHRoaXMuZnJvbnRtYXR0ZXIuZ2V0Q3JlYXRlZEF0KGUuZmlsZSk7XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgIUhlbHBlci5uaWxDaGVjayhmbS5wYXJlbnRfaWQpLFxuICAgICAgICBgTWlzc2luZyBmaWVsZCBcInBhcmVudF9pZFwiIGZyb20gbG9nOiBcIiR7Zm0udXVpZH1cImAsXG4gICAgICApO1xuICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5kdlxuICAgICAgICAucGFnZXMoYFwiJHtQYXRocy5UYXNrc30vJHtmbS5wYXJlbnRfaWR9XCJgKVxuICAgICAgICAuYXJyYXkoKTtcbiAgICAgIEFzc2VydC5UcnVlKFxuICAgICAgICBwYXJlbnQubGVuZ3RoID09PSAxLFxuICAgICAgICBgUGFyZW50OiAke2ZtLnBhcmVudF9pZH0gbm90IGZvdW5kIGZvciBsb2c6IFwiJHtmbS51dWlkfVwiYCxcbiAgICAgICk7XG4gICAgICBmbS5wcm9qZWN0ID0gSGVscGVyLmdldFByb2plY3QocGFyZW50WzBdLmZpbGUuZnJvbnRtYXR0ZXIsIHRydWUpO1xuICAgICAgZm0uZG9tYWluID0gdW5kZWZpbmVkO1xuICAgICAgZm0uY29tcG9uZW50cyA9IFtdO1xuXG4gICAgICBpZiAoZS5maWxlLnNpemUgPCBtaW5TaXplKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGUuZmlsZS5zaXplID4gbWF4U2l6ZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgYnVmZi5wdXNoKGUpO1xuICAgIH1cblxuICAgIGNvbnN0IHNvcnRCeVNpemVUaGVuRGF0ZSA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIGNvbnN0IGZBID0gYS5maWxlO1xuICAgICAgY29uc3QgZkIgPSBiLmZpbGU7XG4gICAgICBpZiAoZkEuc2l6ZSAhPT0gZkIuc2l6ZSkge1xuICAgICAgICByZXR1cm4gZkIuc2l6ZSAtIGZBLnNpemU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGZBLmZyb250bWF0dGVyLmNyZWF0ZWRBdC5nZXRUaW1lKCkgLVxuICAgICAgICAgIGZCLmZyb250bWF0dGVyLmNyZWF0ZWRBdC5nZXRUaW1lKClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3Qgc29ydEJ5QWdlID0gKGEsIGIpID0+XG4gICAgICBhLmZpbGUuZnJvbnRtYXR0ZXIuY3JlYXRlZEF0LmdldFRpbWUoKSAtXG4gICAgICBiLmZpbGUuZnJvbnRtYXR0ZXIuY3JlYXRlZEF0LmdldFRpbWUoKTtcblxuICAgIGJ1ZmYuc29ydChzb3J0QnlBZ2UpO1xuICAgIHJzLnB1c2goW1wiYXJyYXlcIiwgUmVuZGVyZXIuaW5ib3hFbnRyeSwgYnVmZl0pO1xuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgcHJvamVjdHMoKSB7XG4gICAgY29uc3QgcnMgPSBbXTtcbiAgICBjb25zdCBiaW5zID0ge1xuICAgICAgYWN0aXZlOiBbXSxcbiAgICAgIGluYWN0aXZlOiBbXSxcbiAgICB9O1xuXG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLmR2LnBhZ2VzKGBcIlByb2plY3RzXCJgKS5zb3J0KChrKSA9PiBrLm5hbWUsIFwiYXNjXCIpO1xuICAgIGZvciAoY29uc3QgcHJvamVjdCBvZiBwYWdlcykge1xuICAgICAgY29uc3QgZm1Qcm9qZWN0ID0gbmV3IEZyb250bWF0dGVySlMocHJvamVjdCk7XG4gICAgICBpZiAoZm1Qcm9qZWN0LmZtLmFjdGl2ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgYmlucy5pbmFjdGl2ZS5wdXNoKHByb2plY3QpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAoZm1Qcm9qZWN0LmdldE5hbWUoKSA9PT0gXCJhZGhvY1wiKSB7XG4gICAgICAgIGJpbnMuYWN0aXZlLnB1c2gocHJvamVjdCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgW1wieWVhcmx5XCIsIFwibW9udGhseVwiLCBcIndlZWtseVwiLCBcImRhaWx5XCJdLmNvbnRhaW5zKFxuICAgICAgICAgIGZtUHJvamVjdC5nZXROYW1lKCksXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGFza3MgPSB0aGlzLmR2XG4gICAgICAgIC5wYWdlcyhgI3Byb2plY3QvJHtmbVByb2plY3QuZ2V0TmFtZSgpfWApXG4gICAgICAgIC53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgICAgIGlmIChwYWdlLmZpbGUuZm9sZGVyICE9PSBgJHtQYXRocy5UYXNrc31gKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgZm1UYXNrID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgICAgaWYgKGZtVGFzay5mbS5wcmlvcml0eSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIFtcInRvZG9cIiwgXCJkb2luZ1wiLCBcIndhaXRpbmdcIl0uY29udGFpbnMoZm1UYXNrLmZtLnN0YXR1cylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgIGlmICh0YXNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGJpbnMuYWN0aXZlLnB1c2gocHJvamVjdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiaW5zLmluYWN0aXZlLnB1c2gocHJvamVjdCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgXCJBY3RpdmVcIl0pO1xuICAgIHJzLnB1c2goW1wiYXJyYXlcIiwgUmVuZGVyZXIucHJvamVjdHMsIGJpbnMuYWN0aXZlXSk7XG4gICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgXCJJbmFjdGl2ZVwiXSk7XG4gICAgcnMucHVzaChbXCJhcnJheVwiLCBSZW5kZXJlci5wcm9qZWN0cywgYmlucy5pbmFjdGl2ZV0pO1xuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgcHJheGlzKCkge1xuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5kdlxuICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKVxuICAgICAgLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICAgIGlmIChwYWdlLmZpbGUuZnJvbnRtYXR0ZXIudHlwZSAhPT0gVHlwZXMuUHJheGlzKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhZ2UuZmlsZS5mcm9udG1hdHRlci5zdGF0dXMgIT09IFN0YXR1cy5Ub2RvKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KVxuICAgICAgLmFycmF5KCk7XG5cbiAgICBjb25zdCBycyA9IFtdO1xuICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDEsIFwiUHJheGlzXCJdKTtcbiAgICBycy5wdXNoKFtcImFycmF5XCIsIFJlbmRlcmVyLmJhc2ljVGFzaywgcGFnZXNdKTtcblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIHBsYW5uaW5nKGxhc3RXZWVrID0gMSkge1xuICAgIGNvbnN0IHJzID0gW107XG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLmR2XG4gICAgICAucGFnZXMoYFwiJHtQYXRocy5UYXNrc31cImApXG4gICAgICAud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgaWYgKGZtLmF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm0uZ2V0UHJvamVjdCgpICE9PSBcImRhaWx5XCIpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pXG4gICAgICAuc29ydCgocGFnZSkgPT4gcGFnZS5maWxlLmZyb250bWF0dGVyLmF0LCBcImRlc2NcIik7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAvLyBjb25zdCBub3cgPSBuZXcgRGF0ZShcIjIwMjQtMTItMzFcIik7XG4gICAgY29uc3QgYmlucyA9IHt9O1xuICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGxldCBhdCA9IHVuZGVmaW5lZDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF0ID0gZm0uYXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGRhdGU6ICcke2ZtLmZtLnV1aWR9J2ApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB3ZWVrTnVtYmVyID0gdGhpcy5nZXRXZWVrTnVtYmVyNShmbS5hdCk7XG4gICAgICBpZiAoZm0uYXQuZ2V0RnVsbFllYXIoKSA8IG5vdy5nZXRGdWxsWWVhcigpKSB7XG4gICAgICAgIGlmICh3ZWVrTnVtYmVyID4gMSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBjb25zdCB3ZWVrTnVtYmVyID0gdGhpcy5nZXRXZWVrTnVtYmVyKGZtLmF0KTtcbiAgICAgIGlmIChiaW5zW3dlZWtOdW1iZXJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t3ZWVrTnVtYmVyXSA9IFtmbV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiaW5zW3dlZWtOdW1iZXJdLnB1c2goZm0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRXZWVrTnVtYmVyID0gdGhpcy5nZXRXZWVrTnVtYmVyNShub3cpO1xuICAgIC8vIGNvbnN0IGN1cnJlbnRXZWVrTnVtYmVyID0gdGhpcy5nZXRXZWVrTnVtYmVyKG5vdyk7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoYmlucykpIHtcbiAgICAgIGNvbnN0IHdlZWtOdW1iZXIgPSBOdW1iZXIoa2V5KTtcbiAgICAgIGlmICh3ZWVrTnVtYmVyICsgbGFzdFdlZWsgPCBjdXJyZW50V2Vla051bWJlcikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh3ZWVrTnVtYmVyIDwgY3VycmVudFdlZWtOdW1iZXIpIHtcbiAgICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgYH5+d2VlayAke2tleX1+fmBdKTtcbiAgICAgIH0gZWxzZSBpZiAod2Vla051bWJlciA9PT0gY3VycmVudFdlZWtOdW1iZXIpIHtcbiAgICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgYCp3ZWVrICR7a2V5fSpgXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCBgd2VlayAke2tleX1gXSk7XG4gICAgICB9XG5cbiAgICAgIGJpbnNba2V5XS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHJldHVybiBhLmF0LmdldFRpbWUoKSAtIGIuYXQuZ2V0VGltZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGZvciAoY29uc3QgdGFzayBvZiBiaW5zW2tleV0pIHtcbiAgICAgICAgY29uc3QgZGF5ID0gW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdW1xuICAgICAgICAgIHRhc2suYXQuZ2V0RGF5KClcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgdGV4dCA9IFJlbmRlcmVyLm1ha2VMaW5rKFxuICAgICAgICAgIHRoaXMuZHYsXG4gICAgICAgICAgdGFzay5mLFxuICAgICAgICAgIGAke3Rhc2suYXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCl9LCAke2RheX1gLFxuICAgICAgICAgIFwiVGFza1wiLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICh3ZWVrTnVtYmVyIDwgY3VycmVudFdlZWtOdW1iZXIpIHtcbiAgICAgICAgICBycy5wdXNoKFtcInBhcmFncmFwaFwiLCBgfn4ke3RleHR9fn5gXSk7XG4gICAgICAgIH0gZWxzZSBpZiAod2Vla051bWJlciA9PT0gY3VycmVudFdlZWtOdW1iZXIpIHtcbiAgICAgICAgICBpZiAodGhpcy5kYXlPZlllYXIodGFzay5hdCkgPCB0aGlzLmRheU9mWWVhcihub3cpKSB7XG4gICAgICAgICAgICBycy5wdXNoKFtcInBhcmFncmFwaFwiLCBgfn4ke3RleHR9fn5gXSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJzLnB1c2goW1wicGFyYWdyYXBoXCIsIGAke3RleHR9YF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBycy5wdXNoKFtcInBhcmFncmFwaFwiLCBgJHt0ZXh0fWBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIGRheU9mWWVhcihkdCk6IG51bWJlciB7XG4gICAgY29uc3QgeWVhciA9IGR0LmdldEZ1bGxZZWFyKCk7XG4gICAgY29uc3QgbW9udGggPSBkdC5nZXRNb250aCgpICsgMTtcbiAgICBjb25zdCBkYXkgPSBkdC5nZXREYXRlKCk7XG5cbiAgICBjb25zdCBOMSA9IE1hdGguZmxvb3IoKDI3NSAqIG1vbnRoKSAvIDkpO1xuICAgIGNvbnN0IE4yID0gTWF0aC5mbG9vcigobW9udGggKyA5KSAvIDEyKTtcbiAgICBjb25zdCBOMyA9IDEgKyBNYXRoLmZsb29yKCh5ZWFyIC0gNCAqIE1hdGguZmxvb3IoeWVhciAvIDQpICsgMikgLyAzKTtcbiAgICByZXR1cm4gTjEgLSBOMiAqIE4zICsgZGF5IC0gMzA7XG4gIH1cblxuICBnZXRXZWVrTnVtYmVyKGQpIHtcbiAgICAvLyBDb3B5IGRhdGUgc28gZG9uJ3QgbW9kaWZ5IG9yaWdpbmFsXG4gICAgZCA9IG5ldyBEYXRlKERhdGUuVVRDKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpLCBkLmdldERhdGUoKSkpO1xuICAgIC8vIFNldCB0byBuZWFyZXN0IFRodXJzZGF5OiBjdXJyZW50IGRhdGUgKyA0IC0gY3VycmVudCBkYXkgbnVtYmVyXG4gICAgLy8gTWFrZSBTdW5kYXkncyBkYXkgbnVtYmVyIDdcbiAgICBkLnNldFVUQ0RhdGUoZC5nZXRVVENEYXRlKCkgKyA0IC0gKGQuZ2V0VVRDRGF5KCkgfHwgNykpO1xuICAgIC8vIEdldCBmaXJzdCBkYXkgb2YgeWVhclxuICAgIGNvbnN0IHllYXJTdGFydDogYW55ID0gbmV3IERhdGUoRGF0ZS5VVEMoZC5nZXRVVENGdWxsWWVhcigpLCAwLCAxKSk7XG4gICAgLy8gQ2FsY3VsYXRlIGZ1bGwgd2Vla3MgdG8gbmVhcmVzdCBUaHVyc2RheVxuICAgIHJldHVybiBNYXRoLmNlaWwoKChkIC0geWVhclN0YXJ0KSAvIDg2NDAwMDAwICsgMSkgLyA3KTtcbiAgfVxuXG4gIC8vIGh0dHBzOi8vY29kZXBlbi5pby9sZGlqa21hbi9wZW4vTFlkTkp2TVxuICBnZXRXZWVrTnVtYmVyNShkdCkge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCB0ZHQgPSBuZXcgRGF0ZShkdC52YWx1ZU9mKCkpO1xuICAgIC8vIGNvbnN0IGRheW4gPSAoZHQuZ2V0RGF5KCkgKyA2KSAlIDc7XG4gICAgY29uc3QgZGF5biA9IGR0LmdldERheSgpO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB0ZHQuc2V0RGF0ZSh0ZHQuZ2V0RGF0ZSgpIC0gZGF5biArIDMpO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBmaXJzdFRodXJzZGF5ID0gdGR0LnZhbHVlT2YoKTtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdGR0LnNldE1vbnRoKDAsIDEpO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAodGR0LmdldERheSgpICE9PSA0KSB7XG4gICAgICB0ZHQuc2V0TW9udGgoMCwgMSArICgoNCAtIHRkdC5nZXREYXkoKSArIDcpICUgNykpO1xuICAgIH1cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgcmV0dXJuIDEgKyBNYXRoLmNlaWwoKGZpcnN0VGh1cnNkYXkgLSB0ZHQpIC8gNjA0ODAwMDAwKTtcbiAgfVxuXG4gIGdldFdlZWtOdW1iZXI0KGQpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZCA9IG5ldyBEYXRlKERhdGUuVVRDKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpLCBkLmdldERhdGUoKSkpO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCB5ZWFyU3RhcnQgPSBuZXcgRGF0ZShEYXRlLlVUQyhkLmdldFVUQ0Z1bGxZZWFyKCksIDAsIDEpKTtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgZmlyc3RTdW5kYXkgPVxuICAgICAgeWVhclN0YXJ0LmdldFVUQ0RheSgpID09PSAwXG4gICAgICAgID8geWVhclN0YXJ0XG4gICAgICAgIDogbmV3IERhdGUoXG4gICAgICAgICAgRGF0ZS5VVEMoXG4gICAgICAgICAgICBkLmdldFVUQ0Z1bGxZZWFyKCksXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMSArICg3IC0geWVhclN0YXJ0LmdldFVUQ0RheSgpKSxcbiAgICAgICAgICApLFxuICAgICAgICApO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBkYXlzU2luY2VGaXJzdFN1bmRheSA9IChkIC0gZmlyc3RTdW5kYXkgKyA4NjQwMDAwMCkgLyA4NjQwMDAwMDtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgcmV0dXJuIE1hdGguY2VpbChkYXlzU2luY2VGaXJzdFN1bmRheSAvIDcpO1xuICB9XG5cbiAgZ2V0TW9udGgoeWVhciwgd2Vla051bWJlcikge1xuICAgIC8vIENyZWF0ZSBhIGRhdGUgb2JqZWN0IGZvciB0aGUgZmlyc3QgZGF5IG9mIHRoZSB5ZWFyXG4gICAgY29uc3QgZmlyc3REYXlPZlllYXIgPSBuZXcgRGF0ZSh5ZWFyLCAwLCAxKTtcblxuICAgIC8vIERldGVybWluZSB0aGUgZGF5IG9mIHRoZSB3ZWVrIGZvciB0aGUgZmlyc3QgZGF5IG9mIHRoZSB5ZWFyXG4gICAgY29uc3QgZmlyc3REYXlPZldlZWsgPSBmaXJzdERheU9mWWVhci5nZXREYXkoKTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGRheXMgdG8gYWRkIHRvIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHllYXJcbiAgICAvLyB0byBnZXQgdG8gdGhlIHN0YXJ0IG9mIHRoZSBzcGVjaWZpZWQgd2Vla1xuICAgIC8vIFdlZWtzIHN0YXJ0IG9uIE1vbmRheTsgaWYgdGhlIGZpcnN0IGRheSBvZiB0aGUgeWVhciBpcyBhIE1vbmRheSxcbiAgICAvLyBubyBhZGp1c3RtZW50IGlzIG5lZWRlZCwgb3RoZXJ3aXNlIGFkanVzdCB0byB0aGUgbmV4dCBNb25kYXlcbiAgICBjb25zdCBkYXlzVG9BZGQgPVxuICAgICAgKHdlZWtOdW1iZXIgLSAxKSAqIDcgLVxuICAgICAgZmlyc3REYXlPZldlZWsgK1xuICAgICAgKGZpcnN0RGF5T2ZXZWVrID09PSAwID8gMSA6IDApO1xuXG4gICAgLy8gQWRqdXN0IHRoZSBkYXRlIHRvIHRoZSBzdGFydCBvZiB0aGUgc3BlY2lmaWVkIHdlZWtcbiAgICBjb25zdCB3ZWVrU3RhcnREYXRlID0gbmV3IERhdGUoXG4gICAgICBmaXJzdERheU9mWWVhci5zZXREYXRlKGZpcnN0RGF5T2ZZZWFyLmdldERhdGUoKSArIGRheXNUb0FkZCksXG4gICAgKTtcblxuICAgIC8vIENoZWNrIGlmIHRoZSB3ZWVrU3RhcnREYXRlIGlzIG9uIHRoZSBsYXN0IGRheSBvZiB0aGUgbW9udGgsXG4gICAgLy8gaWYgc28sIG1vdmUgdG8gdGhlIG5leHQgbW9udGggdG8gcm91bmQgdXAgZm9yIGEgd2VlayB0aGF0IHNwYW5zIGEgbW9udGggdHJhbnNpdGlvblxuICAgIGlmICh3ZWVrU3RhcnREYXRlLmdldERhdGUoKSA+IDI0KSB7XG4gICAgICB3ZWVrU3RhcnREYXRlLnNldERhdGUod2Vla1N0YXJ0RGF0ZS5nZXREYXRlKCkgKyA3KTtcbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IHRoZSBtb250aCBudW1iZXIgKDAtMTEgZm9yIEphbi1EZWMpIGZyb20gdGhlIHdlZWtTdGFydERhdGVcbiAgICBjb25zdCBtb250aE51bWJlciA9IHdlZWtTdGFydERhdGUuZ2V0TW9udGgoKTtcblxuICAgIHJldHVybiBtb250aE51bWJlciArIDE7IC8vIFJldHVybiBtb250aCBudW1iZXIgKDEtMTIpXG4gIH1cblxuICBnZXRNb250aE5hbWUobW9udGhOdW1iZXIpIHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoMjAwMCwgbW9udGhOdW1iZXIgLSAxKTsgLy8gWWVhciAyMDAwIGlzIHVzZWQgYXJiaXRyYXJpbHk7IGFueSBub24tbGVhcCB5ZWFyIHdpbGwgZG9cbiAgICByZXR1cm4gZGF0ZS50b0xvY2FsZVN0cmluZyhcImRlZmF1bHRcIiwgeyBtb250aDogXCJsb25nXCIgfSk7XG4gIH1cblxuICBlbmVyZ3koZHYpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gZHYuY3VycmVudCgpO1xuICAgIGlmIChjdXJyZW50LmVuZXJneSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjdXJyZW50LmVuZXJneSA9IDA7XG4gICAgfVxuICAgIGxldCBjb21wID0gdW5kZWZpbmVkO1xuICAgIHN3aXRjaCAoY3VycmVudC5vcCkge1xuICAgICAgY2FzZSBcIj5cIjpcbiAgICAgICAgY29tcCA9IChhLCBiKSA9PiBhID4gYjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiPj1cIjpcbiAgICAgICAgY29tcCA9IChhLCBiKSA9PiBhID49IGI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIjxcIjpcbiAgICAgICAgY29tcCA9IChhLCBiKSA9PiBhIDwgYjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiPD1cIjpcbiAgICAgICAgY29tcCA9IChhLCBiKSA9PiBhIDw9IGI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29tcCA9IChhLCBiKSA9PiBhID09PSBiO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjb25zdCBycyA9IFtdO1xuICAgIGNvbnN0IHBhZ2VzID0gZHYucGFnZXMoYFwiJHtQYXRocy5UYXNrc31cImApLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgaWYgKGZtLmdldFByb2plY3QoKSA9PT0gXCJkYWlseVwiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZtLmZtLnN0YXR1cyAhPT0gXCJ0b2RvXCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29tcChmbS5lbmVyZ3ksIGN1cnJlbnQuZW5lcmd5KTtcbiAgICB9KTtcblxuICAgIHJzLnB1c2goW1xuICAgICAgXCJhcnJheVwiLFxuICAgICAgKGR2LCBkYXRhKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZGF0YSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVudHJ5KTtcbiAgICAgICAgICBkdi5wYXJhZ3JhcGgoXG4gICAgICAgICAgICBSZW5kZXJlci5tYWtlTGlua0FsaWFzKGR2LCBlbnRyeS5maWxlLCBcIiMjIFRhc2tcIiksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHBhZ2VzLFxuICAgIF0pO1xuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgbWFuZGFsYShkdikge1xuICAgIGxldCBtYW5kYWxhTG8gPSAtMTtcbiAgICBsZXQgbWFuZGFsYUhpID0gLTE7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICB7XG4gICAgICBjb25zdCB3ZWVrTnVtYmVyID0gdGhpcy5nZXRXZWVrTnVtYmVyNChub3cpO1xuICAgICAgbWFuZGFsYUxvID0gd2Vla051bWJlciAtIDY7XG4gICAgICBtYW5kYWxhSGkgPSB3ZWVrTnVtYmVyIC0gNTtcbiAgICAgIGlmIChtYW5kYWxhTG8gPCAwIHx8IG1hbmRhbGFIaSA8IDApIHtcbiAgICAgICAgZHYucGFyYWdyYXBoKGB3ZWVrTnVtYmVyOiAke3dlZWtOdW1iZXJ9YCk7XG4gICAgICAgIGR2LnBhcmFncmFwaChgbWFuZGFsYUxvOiAke21hbmRhbGFMb31gKTtcbiAgICAgICAgZHYucGFyYWdyYXBoKGBtYW5kYWxhSGk6ICR7bWFuZGFsYUhpfWApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBkdi5wYXJhZ3JhcGgoYHdlZWtOdW1iZXI6ICR7d2Vla051bWJlcn1gKTtcbiAgICAgIGR2LnBhcmFncmFwaChgbWFuZGFsYUxvOiAke21hbmRhbGFMb31gKTtcbiAgICAgIGR2LnBhcmFncmFwaChgbWFuZGFsYUhpOiAke21hbmRhbGFIaX1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBycyA9IFtdO1xuICAgIGNvbnN0IGJpbnMgPSB7fTtcbiAgICBjb25zdCBzdWl2aVdlZWtseSA9IHt9O1xuICAgIGNvbnN0IHN1aXZpTW9udGhseSA9IHt9O1xuICAgIGNvbnN0IHN1aXZpWWVhcmx5ID0ge307XG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLmR2XG4gICAgICAucGFnZXMoYFwiSm91cm5hbFwiYClcbiAgICAgIC53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICBjb25zdCB3ZWVrTnVtYmVyID0gdGhpcy5nZXRXZWVrTnVtYmVyNChmbS5jcmVhdGVkQXQpO1xuICAgICAgICBjb25zb2xlLmxvZyh3ZWVrTnVtYmVyKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHdlZWtOdW1iZXIgPj0gbWFuZGFsYUxvICYmXG4gICAgICAgICAgd2Vla051bWJlciA8PSBtYW5kYWxhSGkgJiZcbiAgICAgICAgICBmbS5jcmVhdGVkQXQuZ2V0RnVsbFllYXIoKSA9PT0gbm93LmdldEZ1bGxZZWFyKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KVxuICAgICAgLnNvcnQoKHBhZ2UpID0+IHBhZ2UuZmlsZS5mcm9udG1hdHRlci5jcmVhdGVkX2F0LCBcImRlc2NcIik7XG4gICAgY29uc29sZS5sb2cocGFnZXMubGVuZ3RoKTtcblxuICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIC8vIGNvbnN0IHdlZWtOdW1iZXIgPSB0aGlzLmdldFdlZWtOdW1iZXIoZm0uY3JlYXRlZEF0KTtcbiAgICAgIGNvbnN0IHdlZWtOdW1iZXIgPSB0aGlzLmdldFdlZWtOdW1iZXI0KGZtLmNyZWF0ZWRBdCk7XG4gICAgICBjb25zdCB5ZWFyID0gZm0uY3JlYXRlZEF0LmdldEZ1bGxZZWFyKCk7XG4gICAgICBjb25zdCBtb250aCA9IGZtLmNyZWF0ZWRBdC5nZXRNb250aCgpICsgMTtcblxuICAgICAgbGV0IG1zZyA9IFwiXCI7XG4gICAgICBtc2cgKz0gYGNyZWF0ZWRBdDogJHtmbS5jcmVhdGVkQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCl9XFxuYDtcbiAgICAgIG1zZyArPSBgd2Vla051bWJlcjogJHt3ZWVrTnVtYmVyfVxcbmA7XG4gICAgICBtc2cgKz0gYHllYXI6ICR7eWVhcn1cXG5gO1xuICAgICAgbXNnICs9IGBtb250aDogJHttb250aH1cXG5gO1xuICAgICAgbXNnICs9IGBkYXk6ICR7Zm0uY3JlYXRlZEF0LmdldERheSgpfVxcbmA7XG4gICAgICBjb25zdCBkYXkgPSBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl1bXG4gICAgICAgIGZtLmNyZWF0ZWRBdC5nZXREYXkoKVxuICAgICAgXTtcbiAgICAgIG1zZyArPSBgZGF5OiAke2RheX1cXG5gO1xuXG4gICAgICBjb25zb2xlLmxvZyhtc2cpO1xuXG4gICAgICBpZiAoYmluc1t5ZWFyXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbeWVhcl0gPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChiaW5zW3llYXJdW3dlZWtOdW1iZXIudG9TdHJpbmcoKV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW3llYXJdW3dlZWtOdW1iZXIudG9TdHJpbmcoKV0gPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChzdWl2aU1vbnRobHlbeWVhcl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdWl2aU1vbnRobHlbeWVhcl0gPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChzdWl2aVdlZWtseVt5ZWFyXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHN1aXZpV2Vla2x5W3llYXJdID0ge307XG4gICAgICB9XG5cbiAgICAgIGxldCB0YWcgPSBcIlwiO1xuICAgICAgaWYgKGZtLmdldERvbWFpbigpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGFnID0gZm0uZ2V0RG9tYWluKCk7XG4gICAgICB9IGVsc2UgaWYgKGZtLmdldFByb2plY3QoKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRhZyA9IGZtLmdldFByb2plY3QoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhZyA9IFwiYWRob2NcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRhZyA9PSBcIndlZWtseVwiKSB7XG4gICAgICAgIGlmIChzdWl2aVdlZWtseVt5ZWFyXVt3ZWVrTnVtYmVyXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc3VpdmlXZWVrbHlbeWVhcl1bd2Vla051bWJlcl0gPSBbcGFnZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VpdmlXZWVrbHlbeWVhcl1bd2Vla051bWJlcl0ucHVzaChwYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAodGFnID09PSBcIm1vbnRobHlcIikge1xuICAgICAgICBpZiAoc3VpdmlNb250aGx5W3llYXJdW21vbnRoXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc3VpdmlNb250aGx5W3llYXJdW21vbnRoXSA9IFtwYWdlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdWl2aU1vbnRobHlbeWVhcl1bbW9udGhdLnB1c2gocGFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2UgaWYgKHRhZyA9PT0gXCJ5ZWFybHlcIikge1xuICAgICAgICBpZiAoc3VpdmlZZWFybHlbeWVhcl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHN1aXZpWWVhcmx5W3llYXJdID0gW3BhZ2VdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN1aXZpWWVhcmx5W3llYXJdLnB1c2gocGFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChiaW5zW3llYXJdW3dlZWtOdW1iZXJdW3RhZ10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW3llYXJdW3dlZWtOdW1iZXJdW3RhZ10gPSBbcGFnZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiaW5zW3llYXJdW3dlZWtOdW1iZXJdW3RhZ10ucHVzaChwYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB7XG4gICAgICBjb25zdCB5ZWFycyA9IE9iamVjdC5rZXlzKGJpbnMpO1xuICAgICAgbGV0IGxhc3RZZWFyID0gOTk5OTtcbiAgICAgIGxldCBsYXN0TW9udGggPSAxMztcbiAgICAgIHllYXJzLnNvcnQoKS5yZXZlcnNlKCk7XG5cbiAgICAgIGZvciAoY29uc3QgeWVhciBvZiB5ZWFycykge1xuICAgICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCB5ZWFyXSk7XG5cbiAgICAgICAgaWYgKHBhcnNlSW50KHllYXIsIDEwKSA8IGxhc3RZZWFyKSB7XG4gICAgICAgICAgbGFzdE1vbnRoID0gMTM7XG4gICAgICAgICAgbGFzdFllYXIgPSBwYXJzZUludCh5ZWFyLCAxMCk7XG4gICAgICAgICAgaWYgKHN1aXZpWWVhcmx5W3llYXJdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBzdWl2aVllYXJseVt5ZWFyXSkge1xuICAgICAgICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICAgICAgICBycy5wdXNoKFtcbiAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiLFxuICAgICAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rQWxpYXModGhpcy5kdiwgZm0uZiksXG4gICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IHdlZWsgPSA1Mjsgd2VlayA+IDA7IHdlZWstLSkge1xuICAgICAgICAgIGNvbnN0IHRoaXNNb250aCA9IHRoaXMuZ2V0TW9udGgoeWVhciwgd2Vlayk7XG5cbiAgICAgICAgICBpZiAoc3VpdmlNb250aGx5W3llYXJdW3RoaXNNb250aF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKGxhc3RNb250aCAhPT0gdGhpc01vbnRoKSB7XG4gICAgICAgICAgICAgIGxhc3RNb250aCA9IHRoaXNNb250aDtcbiAgICAgICAgICAgICAgcnMucHVzaChbXG4gICAgICAgICAgICAgICAgXCJoZWFkZXJcIixcbiAgICAgICAgICAgICAgICAzLFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TW9udGhOYW1lKGxhc3RNb250aCksXG4gICAgICAgICAgICAgIF0pO1xuXG4gICAgICAgICAgICAgIGlmIChzdWl2aU1vbnRobHlbeWVhcl1bdGhpc01vbnRoXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIHN1aXZpTW9udGhseVt5ZWFyXVtcbiAgICAgICAgICAgICAgICAgIHRoaXNNb250aFxuICAgICAgICAgICAgICAgIF0pIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgICAgICAgICAgICBycy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtBbGlhcyh0aGlzLmR2LCBmbS5mKSxcbiAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHN1aXZpV2Vla2x5W3llYXJdW3dlZWtdID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGJpbnNbeWVhcl1bd2Vla10gPT09IHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgNCwgYHdlZWsgJHt3ZWVrLnRvU3RyaW5nKCl9YF0pO1xuICAgICAgICAgIGlmIChzdWl2aVdlZWtseVt5ZWFyXVt3ZWVrXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2Ygc3VpdmlXZWVrbHlbeWVhcl1bd2Vla10pIHtcbiAgICAgICAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgICAgICAgcnMucHVzaChbXG4gICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgICAgICAgICBSZW5kZXJlci5tYWtlTGlua0FsaWFzKHRoaXMuZHYsIGZtLmYpLFxuICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYmluc1t5ZWFyXVt3ZWVrXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBkb21haW4gPiBwcm9qZWN0XG4gICAgICAgICAgY29uc3QgdGFncyA9IE9iamVjdC5rZXlzKGJpbnNbeWVhcl1bd2Vla10pO1xuICAgICAgICAgIHRhZ3Muc29ydCgpO1xuXG4gICAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgNSwgdGFnXSk7XG4gICAgICAgICAgICBiaW5zW3llYXJdW3dlZWtdW3RhZ10uc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBmbUEgPSBuZXcgRnJvbnRtYXR0ZXJKUyhhKTtcbiAgICAgICAgICAgICAgY29uc3QgZm1CID0gbmV3IEZyb250bWF0dGVySlMoYik7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgZm1CLmNyZWF0ZWRBdC5nZXRUaW1lKCkgLVxuICAgICAgICAgICAgICAgIGZtQS5jcmVhdGVkQXQuZ2V0VGltZSgpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIGJpbnNbeWVhcl1bd2Vla11bdGFnXSkge1xuICAgICAgICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICAgICAgICBpZiAoZm0udHlwZSA9PT0gNikge1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBmbS5jcmVhdGVkQXRcbiAgICAgICAgICAgICAgICAgIC50b0lTT1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMTApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRheSA9IFtcbiAgICAgICAgICAgICAgICAgIFwiU3VuXCIsXG4gICAgICAgICAgICAgICAgICBcIk1vblwiLFxuICAgICAgICAgICAgICAgICAgXCJUdWVcIixcbiAgICAgICAgICAgICAgICAgIFwiV2VkXCIsXG4gICAgICAgICAgICAgICAgICBcIlRodVwiLFxuICAgICAgICAgICAgICAgICAgXCJGcmlcIixcbiAgICAgICAgICAgICAgICAgIFwiU2F0XCIsXG4gICAgICAgICAgICAgICAgXVtmbS5jcmVhdGVkQXQuZ2V0RGF5KCldO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBgJHtkfSwgJHtkYXl9YDtcbiAgICAgICAgICAgICAgICBycy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgICAgICAgICBSZW5kZXJlci5tYWtlTGluayh0aGlzLmR2LCBmbS5mLCB0ZXh0KSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIGpvdXJuYWwoKSB7XG4gICAgY29uc3QgcnMgPSBbXTtcbiAgICBjb25zdCBiaW5zID0ge307XG4gICAgY29uc3Qgc3VpdmlXZWVrbHkgPSB7fTtcbiAgICBjb25zdCBzdWl2aU1vbnRobHkgPSB7fTtcbiAgICBjb25zdCBzdWl2aVllYXJseSA9IHt9O1xuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5kdlxuICAgICAgLnBhZ2VzKGBcIkpvdXJuYWxcImApXG4gICAgICAuc29ydCgocGFnZSkgPT4gcGFnZS5maWxlLmZyb250bWF0dGVyLmNyZWF0ZWRfYXQsIFwiZGVzY1wiKTtcblxuICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIC8vIGNvbnN0IHdlZWtOdW1iZXIgPSB0aGlzLmdldFdlZWtOdW1iZXIoZm0uY3JlYXRlZEF0KTtcbiAgICAgIGNvbnN0IHdlZWtOdW1iZXIgPSB0aGlzLmdldFdlZWtOdW1iZXI0KGZtLmNyZWF0ZWRBdCk7XG4gICAgICBjb25zdCB5ZWFyID0gZm0uY3JlYXRlZEF0LmdldEZ1bGxZZWFyKCk7XG4gICAgICBjb25zdCBtb250aCA9IGZtLmNyZWF0ZWRBdC5nZXRNb250aCgpICsgMTtcblxuICAgICAgbGV0IG1zZyA9IFwiXCI7XG4gICAgICBtc2cgKz0gYGNyZWF0ZWRBdDogJHtmbS5jcmVhdGVkQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCl9XFxuYDtcbiAgICAgIG1zZyArPSBgd2Vla051bWJlcjogJHt3ZWVrTnVtYmVyfVxcbmA7XG4gICAgICBtc2cgKz0gYHllYXI6ICR7eWVhcn1cXG5gO1xuICAgICAgbXNnICs9IGBtb250aDogJHttb250aH1cXG5gO1xuICAgICAgbXNnICs9IGBkYXk6ICR7Zm0uY3JlYXRlZEF0LmdldERheSgpfVxcbmA7XG4gICAgICBjb25zdCBkYXkgPSBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl1bXG4gICAgICAgIGZtLmNyZWF0ZWRBdC5nZXREYXkoKVxuICAgICAgXTtcbiAgICAgIG1zZyArPSBgZGF5OiAke2RheX1cXG5gO1xuXG4gICAgICAvLyBjb25zb2xlLmxvZyhtc2cpO1xuXG4gICAgICBpZiAoYmluc1t5ZWFyXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbeWVhcl0gPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChiaW5zW3llYXJdW3dlZWtOdW1iZXIudG9TdHJpbmcoKV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW3llYXJdW3dlZWtOdW1iZXIudG9TdHJpbmcoKV0gPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChzdWl2aU1vbnRobHlbeWVhcl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdWl2aU1vbnRobHlbeWVhcl0gPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChzdWl2aVdlZWtseVt5ZWFyXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHN1aXZpV2Vla2x5W3llYXJdID0ge307XG4gICAgICB9XG5cbiAgICAgIGxldCB0YWcgPSBcIlwiO1xuICAgICAgaWYgKGZtLmdldERvbWFpbigpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGFnID0gZm0uZ2V0RG9tYWluKCk7XG4gICAgICB9IGVsc2UgaWYgKGZtLmdldFByb2plY3QoKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRhZyA9IGZtLmdldFByb2plY3QoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhZyA9IFwiYWRob2NcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRhZyA9PSBcIndlZWtseVwiKSB7XG4gICAgICAgIGlmIChzdWl2aVdlZWtseVt5ZWFyXVt3ZWVrTnVtYmVyXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc3VpdmlXZWVrbHlbeWVhcl1bd2Vla051bWJlcl0gPSBbcGFnZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VpdmlXZWVrbHlbeWVhcl1bd2Vla051bWJlcl0ucHVzaChwYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAodGFnID09PSBcIm1vbnRobHlcIikge1xuICAgICAgICBpZiAoc3VpdmlNb250aGx5W3llYXJdW21vbnRoXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc3VpdmlNb250aGx5W3llYXJdW21vbnRoXSA9IFtwYWdlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdWl2aU1vbnRobHlbeWVhcl1bbW9udGhdLnB1c2gocGFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2UgaWYgKHRhZyA9PT0gXCJ5ZWFybHlcIikge1xuICAgICAgICBpZiAoc3VpdmlZZWFybHlbeWVhcl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHN1aXZpWWVhcmx5W3llYXJdID0gW3BhZ2VdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN1aXZpWWVhcmx5W3llYXJdLnB1c2gocGFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChiaW5zW3llYXJdW3dlZWtOdW1iZXJdW3RhZ10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW3llYXJdW3dlZWtOdW1iZXJdW3RhZ10gPSBbcGFnZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiaW5zW3llYXJdW3dlZWtOdW1iZXJdW3RhZ10ucHVzaChwYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB7XG4gICAgICBjb25zdCB5ZWFycyA9IE9iamVjdC5rZXlzKGJpbnMpO1xuICAgICAgbGV0IGxhc3RZZWFyID0gOTk5OTtcbiAgICAgIGxldCBsYXN0TW9udGggPSAxMztcbiAgICAgIHllYXJzLnNvcnQoKS5yZXZlcnNlKCk7XG5cbiAgICAgIGZvciAoY29uc3QgeWVhciBvZiB5ZWFycykge1xuICAgICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCB5ZWFyXSk7XG5cbiAgICAgICAgaWYgKHBhcnNlSW50KHllYXIsIDEwKSA8IGxhc3RZZWFyKSB7XG4gICAgICAgICAgbGFzdE1vbnRoID0gMTM7XG4gICAgICAgICAgbGFzdFllYXIgPSBwYXJzZUludCh5ZWFyLCAxMCk7XG4gICAgICAgICAgaWYgKHN1aXZpWWVhcmx5W3llYXJdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBzdWl2aVllYXJseVt5ZWFyXSkge1xuICAgICAgICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICAgICAgICBycy5wdXNoKFtcbiAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiLFxuICAgICAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rQWxpYXModGhpcy5kdiwgZm0uZiksXG4gICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IHdlZWsgPSA1Mjsgd2VlayA+IDA7IHdlZWstLSkge1xuICAgICAgICAgIGNvbnN0IHRoaXNNb250aCA9IHRoaXMuZ2V0TW9udGgoeWVhciwgd2Vlayk7XG5cbiAgICAgICAgICBpZiAoc3VpdmlNb250aGx5W3llYXJdW3RoaXNNb250aF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKGxhc3RNb250aCAhPT0gdGhpc01vbnRoKSB7XG4gICAgICAgICAgICAgIGxhc3RNb250aCA9IHRoaXNNb250aDtcbiAgICAgICAgICAgICAgcnMucHVzaChbXG4gICAgICAgICAgICAgICAgXCJoZWFkZXJcIixcbiAgICAgICAgICAgICAgICAzLFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TW9udGhOYW1lKGxhc3RNb250aCksXG4gICAgICAgICAgICAgIF0pO1xuXG4gICAgICAgICAgICAgIGlmIChzdWl2aU1vbnRobHlbeWVhcl1bdGhpc01vbnRoXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIHN1aXZpTW9udGhseVt5ZWFyXVtcbiAgICAgICAgICAgICAgICAgIHRoaXNNb250aFxuICAgICAgICAgICAgICAgIF0pIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgICAgICAgICAgICBycy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtBbGlhcyh0aGlzLmR2LCBmbS5mKSxcbiAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHN1aXZpV2Vla2x5W3llYXJdW3dlZWtdID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGJpbnNbeWVhcl1bd2Vla10gPT09IHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgNCwgYHdlZWsgJHt3ZWVrLnRvU3RyaW5nKCl9YF0pO1xuICAgICAgICAgIGlmIChzdWl2aVdlZWtseVt5ZWFyXVt3ZWVrXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2Ygc3VpdmlXZWVrbHlbeWVhcl1bd2Vla10pIHtcbiAgICAgICAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgICAgICAgcnMucHVzaChbXG4gICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgICAgICAgICBSZW5kZXJlci5tYWtlTGlua0FsaWFzKHRoaXMuZHYsIGZtLmYpLFxuICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYmluc1t5ZWFyXVt3ZWVrXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBkb21haW4gPiBwcm9qZWN0XG4gICAgICAgICAgY29uc3QgdGFncyA9IE9iamVjdC5rZXlzKGJpbnNbeWVhcl1bd2Vla10pO1xuICAgICAgICAgIHRhZ3Muc29ydCgpO1xuXG4gICAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgNSwgdGFnXSk7XG4gICAgICAgICAgICBiaW5zW3llYXJdW3dlZWtdW3RhZ10uc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBmbUEgPSBuZXcgRnJvbnRtYXR0ZXJKUyhhKTtcbiAgICAgICAgICAgICAgY29uc3QgZm1CID0gbmV3IEZyb250bWF0dGVySlMoYik7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgZm1CLmNyZWF0ZWRBdC5nZXRUaW1lKCkgLVxuICAgICAgICAgICAgICAgIGZtQS5jcmVhdGVkQXQuZ2V0VGltZSgpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIGJpbnNbeWVhcl1bd2Vla11bdGFnXSkge1xuICAgICAgICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICAgICAgICBpZiAoZm0udHlwZSA9PT0gNikge1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBmbS5jcmVhdGVkQXRcbiAgICAgICAgICAgICAgICAgIC50b0lTT1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMTApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRheSA9IFtcbiAgICAgICAgICAgICAgICAgIFwiU3VuXCIsXG4gICAgICAgICAgICAgICAgICBcIk1vblwiLFxuICAgICAgICAgICAgICAgICAgXCJUdWVcIixcbiAgICAgICAgICAgICAgICAgIFwiV2VkXCIsXG4gICAgICAgICAgICAgICAgICBcIlRodVwiLFxuICAgICAgICAgICAgICAgICAgXCJGcmlcIixcbiAgICAgICAgICAgICAgICAgIFwiU2F0XCIsXG4gICAgICAgICAgICAgICAgXVtmbS5jcmVhdGVkQXQuZ2V0RGF5KCldO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBgJHtkfSwgJHtkYXl9YDtcbiAgICAgICAgICAgICAgICBycy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgICAgICAgICBSZW5kZXJlci5tYWtlTGluayh0aGlzLmR2LCBmbS5mLCB0ZXh0KSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIGNhbGVuZGFyKCkge1xuICAgIGNvbnN0IHJzID0gW107XG4gICAgY29uc3QgYmlucyA9IHt9O1xuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5kdi5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfVwiYCkud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICBpZiAoXG4gICAgICAgIGZtLmZtLmF0ID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgZm0uZm0uYmVmb3JlID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgZm0uZm0uYWZ0ZXIgPT09IHVuZGVmaW5lZFxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZtLmZtLnN0YXR1cyAhPT0gXCJ0b2RvXCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZm0uZ2V0UHJvamVjdCgpID09PSBcImRhaWx5XCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGxldCB5ZWFyID0gMDtcbiAgICAgIGxldCBtb250aCA9IDA7XG4gICAgICBsZXQgZGF5ID0gMDtcblxuICAgICAgaWYgKGZtLmZtLmJlZm9yZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHllYXIgPSBmbS5iZWZvcmUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgbW9udGggPSBmbS5iZWZvcmUuZ2V0TW9udGgoKTtcbiAgICAgICAgZGF5ID0gZm0uYmVmb3JlLmdldFVUQ0RhdGUoKTtcbiAgICAgIH0gZWxzZSBpZiAoZm0uZm0uYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB5ZWFyID0gZm0uYXQuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgbW9udGggPSBmbS5hdC5nZXRNb250aCgpO1xuICAgICAgICBkYXkgPSBmbS5hdC5nZXRVVENEYXRlKCk7XG4gICAgICB9IGVsc2UgaWYgKGZtLmFmdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgeWVhciA9IGZtLmFmdGVyLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIG1vbnRoID0gZm0uYWZ0ZXIuZ2V0TW9udGgoKTtcbiAgICAgICAgZGF5ID0gZm0uYWZ0ZXIuZ2V0VVRDRGF0ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChiaW5zW3llYXJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t5ZWFyXSA9IHt9O1xuICAgICAgfVxuXG4gICAgICBpZiAoYmluc1t5ZWFyXVttb250aF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW3llYXJdW21vbnRoXSA9IHt9O1xuICAgICAgfVxuXG4gICAgICBpZiAoYmluc1t5ZWFyXVttb250aF1bZGF5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbeWVhcl1bbW9udGhdW2RheV0gPSB7fTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJpbnNbeWVhcl1bbW9udGhdW2RheV1bXCJhdFwiXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbeWVhcl1bbW9udGhdW2RheV1bXCJhdFwiXSA9IFtdO1xuICAgICAgfVxuICAgICAgaWYgKGJpbnNbeWVhcl1bbW9udGhdW2RheV1bXCJiZWZvcmVcIl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW3llYXJdW21vbnRoXVtkYXldW1wiYmVmb3JlXCJdID0gW107XG4gICAgICB9XG4gICAgICBpZiAoYmluc1t5ZWFyXVttb250aF1bZGF5XVtcImFmdGVyXCJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t5ZWFyXVttb250aF1bZGF5XVtcImFmdGVyXCJdID0gW107XG4gICAgICB9XG5cbiAgICAgIGlmIChmbS5mbS5iZWZvcmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW3llYXJdW21vbnRoXVtkYXldW1wiYmVmb3JlXCJdLnB1c2gocGFnZSk7XG4gICAgICB9IGVsc2UgaWYgKGZtLmZtLmF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t5ZWFyXVttb250aF1bZGF5XVtcImF0XCJdLnB1c2gocGFnZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiaW5zW3llYXJdW21vbnRoXVtkYXldW1wiYWZ0ZXJcIl0ucHVzaChwYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB7XG4gICAgICBjb25zdCB5ZWFycyA9IE9iamVjdC5rZXlzKGJpbnMpO1xuICAgICAgeWVhcnMuc29ydCgoYSwgYikgPT4gcGFyc2VJbnQoYSkgLSBwYXJzZUludChiKSk7XG5cbiAgICAgIGZvciAoY29uc3QgeWVhciBvZiB5ZWFycykge1xuICAgICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCB5ZWFyXSk7XG4gICAgICAgIGNvbnN0IG1vbnRocyA9IE9iamVjdC5rZXlzKGJpbnNbeWVhcl0pO1xuICAgICAgICBtb250aHMuc29ydCgoYSwgYikgPT4gcGFyc2VJbnQoYSkgLSBwYXJzZUludChiKSk7XG4gICAgICAgIGZvciAoY29uc3QgbW9udGggb2YgbW9udGhzKSB7XG4gICAgICAgICAgcnMucHVzaChbXG4gICAgICAgICAgICBcImhlYWRlclwiLFxuICAgICAgICAgICAgMyxcbiAgICAgICAgICAgIGAke1tcIkphbnVhcnlcIiwgXCJGZWJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIl1bbW9udGhdfWAsXG4gICAgICAgICAgXSk7XG5cbiAgICAgICAgICBjb25zdCBkYXlzID0gT2JqZWN0LmtleXMoYmluc1t5ZWFyXVttb250aF0pO1xuICAgICAgICAgIGRheXMuc29ydCgoYSwgYikgPT4gcGFyc2VJbnQoYSkgLSBwYXJzZUludChiKSk7XG4gICAgICAgICAgZm9yIChjb25zdCBkYXkgb2YgZGF5cykge1xuICAgICAgICAgICAgY29uc3Qgd2Vla3MgPSBbXG4gICAgICAgICAgICAgIFwiU3VuXCIsXG4gICAgICAgICAgICAgIFwiTW9uXCIsXG4gICAgICAgICAgICAgIFwiVHVlXCIsXG4gICAgICAgICAgICAgIFwiV2VkXCIsXG4gICAgICAgICAgICAgIFwiVGh1XCIsXG4gICAgICAgICAgICAgIFwiRnJpXCIsXG4gICAgICAgICAgICAgIFwiU2F0XCIsXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICBjb25zdCBiZWZvcmUgPSBiaW5zW3llYXJdW21vbnRoXVtkYXldW1wiYmVmb3JlXCJdO1xuICAgICAgICAgICAgY29uc3QgYXQgPSBiaW5zW3llYXJdW21vbnRoXVtkYXldW1wiYXRcIl07XG4gICAgICAgICAgICBjb25zdCBhZnRlciA9IGJpbnNbeWVhcl1bbW9udGhdW2RheV1bXCJhZnRlclwiXTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgIGB5ZWFyOiAke3llYXJ9XFxubW9udGg6ICR7bW9udGh9XFxuZGF5OiAke2RheX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChiZWZvcmUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgYmVmb3JlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCItLS0gYmVmb3JlIC0tLVwiKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYWdlKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIi0tLS0tLVwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBgYmVmb3JlOiAke3dlZWtzW2ZtLmJlZm9yZS5nZXREYXkoKV19ICR7ZGF5fSAke2ZtLmF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMTEsIDE2KX0gfCAke2ZtLmdldFByb2plY3QoKX1gO1xuICAgICAgICAgICAgICAgIHJzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmR2LFxuICAgICAgICAgICAgICAgICAgICBmbS5mLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0LFxuICAgICAgICAgICAgICAgICAgICBcIlRhc2tcIixcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGF0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgYXQuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZtQSA9IG5ldyBGcm9udG1hdHRlckpTKGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZtQiA9IG5ldyBGcm9udG1hdHRlckpTKGIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmbUIuYXQuZ2V0VGltZSgpIC0gZm1BLmF0LmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBhdCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiLS0tIGF0IC0tLVwiKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYWdlKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIi0tLS0tLVwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBgYXQ6ICR7d2Vla3NbZm0uYXQuZ2V0RGF5KCldfSAke2RheX0gJHtmbS5hdC50b0lTT1N0cmluZygpLnNsaWNlKDExLCAxNil9IHwgJHtmbS5nZXRQcm9qZWN0KCl9YDtcbiAgICAgICAgICAgICAgICBycy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgICAgICAgICBSZW5kZXJlci5tYWtlTGluayhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kdixcbiAgICAgICAgICAgICAgICAgICAgZm0uZixcbiAgICAgICAgICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICAgICAgICAgICAgXCJUYXNrXCIsXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhZnRlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBhZnRlcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiLS0tIGFmdGVyIC0tLVwiKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYWdlKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIi0tLS0tLVwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBgIGFmdGVyOiAke3dlZWtzW2ZtLmFmdGVyLmdldERheSgpXX0gJHtkYXl9ICR7Zm0uYXQudG9JU09TdHJpbmcoKS5zbGljZSgxMSwgMTYpfSB8ICR7Zm0uZ2V0UHJvamVjdCgpfWA7XG4gICAgICAgICAgICAgICAgcnMucHVzaChbXG4gICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiLFxuICAgICAgICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmsoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHYsXG4gICAgICAgICAgICAgICAgICAgIGZtLmYsXG4gICAgICAgICAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICAgICAgICAgIFwiVGFza1wiLFxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIGdsb2JhbFRhc2tMaXN0KHBhZ2VzKSB7XG4gICAgY29uc3QgcnMgPSBbXTtcbiAgICBjb25zdCBiaW5zID0ge307XG5cbiAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgcGFnZXMpIHtcbiAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICBpZiAoZm0uZ2V0UHJvamVjdCgpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZm0ucHJvamVjdHMgPSBbXCJhZGhvY1wiXTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJpbnNbZm0uZ2V0UHJvamVjdCgpXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbZm0uZ2V0UHJvamVjdCgpXSA9IFtwYWdlXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJpbnNbZm0uZ2V0UHJvamVjdCgpXS5wdXNoKHBhZ2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHByb2plY3RzID0gT2JqZWN0LmtleXMoYmlucyk7XG4gICAgcHJvamVjdHMuc29ydCgpO1xuICAgIGZvciAoY29uc3QgcHJvamVjdCBvZiBwcm9qZWN0cykge1xuICAgICAgY29uc3QgdGFza3MgPSBiaW5zW3Byb2plY3RdO1xuICAgICAgdGFza3Muc29ydChIZWxwZXIuc29ydEJ5UHJpb3JpdHlBbmREdXJhdGlvbkFuZEFnZSk7XG4gICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCBgJHtwcm9qZWN0fWBdKTtcbiAgICAgIHJzLnB1c2goW1wiYXJyYXlcIiwgUmVuZGVyZXIuYmFzaWNUYXNrSm91cm5hbCwgdGFza3NdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcnM7XG4gIH1cblxuICBuZXh0QWN0aW9ucyhkdikge1xuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5kdi5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfVwiYCkud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICBpZiAoXG4gICAgICAgIFtcImRhaWx5XCIsIFwid2Vla2x5XCIsIFwibW9udGhseVwiLCBcInllYXJseVwiXS5jb250YWlucyhcbiAgICAgICAgICBmbS5nZXRQcm9qZWN0KCksXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5wcm9qZWN0SXNBY3RpdmUoZm0uZ2V0UHJvamVjdCgpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4Y2x1ZGUgdGFza3Mgd2l0aCB1bmZ1bGZpbGxlZCBkZXBlbmRlbmNpZXNcbiAgICAgIGlmICghdGhpcy5ub3RlSGVscGVyLmlzRG9hYmxlKHBhZ2UpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gZXhjbHVkZSBzb21lZGF5IG1heWJlIHRhc2tzXG4gICAgICBpZiAoZm0uZm0ucHJpb3JpdHkgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmdsb2JhbFRhc2tMaXN0KHBhZ2VzKTtcbiAgfVxuXG4gIHdhaXRpbmdGb3IoZHYpIHtcbiAgICBjb25zdCBwYWdlcyA9IHRoaXMuZHYucGFnZXMoYFwiJHtQYXRocy5UYXNrc31cImApLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgaWYgKFxuICAgICAgICBbXCJkYWlseVwiLCBcIndlZWtseVwiLCBcIm1vbnRobHlcIiwgXCJ5ZWFybHlcIl0uY29udGFpbnMoXG4gICAgICAgICAgZm0uZ2V0UHJvamVjdCgpLFxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIVtcInRvZG9cIiwgXCJ3YWl0aW5nXCJdLmNvbnRhaW5zKGZtLmZtLnN0YXR1cykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMucHJvamVjdElzQWN0aXZlKGZtLmdldFByb2plY3QoKSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBleGNsdWRlIHRhc2tzIHdpdGggZnVsZmlsbGVkIGRlcGVuZGVuY2llcyBhbmQgc29tZWRheSBtYXliZVxuICAgICAgaWYgKHRoaXMubm90ZUhlbHBlci5pc0RvYWJsZShwYWdlKSB8fCBmbS5mbS5wcmlvcml0eSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2xvYmFsVGFza0xpc3QocGFnZXMpO1xuICB9XG5cbiAgcHJvamVjdElzQWN0aXZlKG5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHByb2plY3QgPSB0aGlzLmR2LnBhZ2VzKGBcIlByb2plY3RzXCJgKS53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGlmIChmbS5nZXROYW1lKCkgIT09IG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZm0uZm0uYWN0aXZlID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHByb2plY3QubGVuZ3RoID4gMDtcbiAgfVxuXG4gIHNvbWVkYXlNYXliZShkdikge1xuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5kdi5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfVwiYCkud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICBpZiAoXG4gICAgICAgIFtcImRhaWx5XCIsIFwid2Vla2x5XCIsIFwibW9udGhseVwiLCBcInllYXJseVwiXS5jb250YWlucyhcbiAgICAgICAgICBmbS5nZXRQcm9qZWN0KCksXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5wcm9qZWN0SXNBY3RpdmUoZm0uZ2V0UHJvamVjdCgpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4Y2x1ZGUgdGFza3Mgd2l0aCB1bmZ1bGZpbGxlZCBkZXBlbmRlbmNpZXNcbiAgICAgIGlmICghdGhpcy5ub3RlSGVscGVyLmlzRG9hYmxlKHBhZ2UpIHx8IGZtLmZtLnByaW9yaXR5ID4gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2xvYmFsVGFza0xpc3QocGFnZXMpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEdkxpYiB7XG4gIHRhc2tEaXIgPSBcIjgxMyBUYXNrc1wiO1xuICBpbmJveERpciA9IFwiODAwIEluYm94XCI7XG4gIHJlZkRpciA9IFwiODAyIFJlZnNcIjtcbiAgbG9nRGlyID0gXCI2MDAgTG9nXCI7XG5cbiAgVGFzayA9IHtcbiAgICBCQVNFOiAzLFxuICAgIERBSUxZOiA0LFxuICB9O1xuXG4gIFR5cGUgPSB7XG4gICAgVEFTSzogMyxcbiAgICBEQUlMWTogNCxcbiAgICBMT0c6IDYsXG4gIH07XG5cbiAgU3RhdHVzID0ge1xuICAgIFRPRE86IFwidG9kb1wiLFxuICAgIERPTkU6IFwiZG9uZVwiLFxuICAgIERPSU5HOiBcImRvaW5nXCIsXG4gICAgVFJBU0g6IFwidHJhc2hcIixcbiAgICBNQVlCRTogXCJtYXliZVwiLFxuICAgIFNUQU5EQlk6IFwic3RhbmRieVwiLFxuICB9O1xuXG4gIE5hbWVzcGFjZSA9IHtcbiAgICBBUkVBOiBcImFyZWFcIixcbiAgICBDT05URVhUOiBcImNvbnRleHRcIixcbiAgICBMQVlFUjogXCJsYXllclwiLFxuICAgIE9SRzogXCJvcmdcIixcbiAgICBQUk9KRUNUOiBcInByb2plY3RcIixcbiAgfTtcblxuICBEZWZhdWx0ID0ge1xuICAgIEFSRUE6IFwibm9uZVwiLFxuICAgIENPTlRFWFQ6IFwiYW55XCIsXG4gICAgTEFZRVI6IFwibm9uZVwiLFxuICAgIE9SRzogXCJub25lXCIsXG4gICAgUFJPSkVDVDogXCJub25lXCIsXG4gIH07XG5cbiAgX2R2ID0gXCJcIjtcblxuICBzZXQgZHYobW9kKSB7XG4gICAgdGhpcy5fZHYgPSBtb2Q7XG4gIH1cblxuICBnZXQgZHYoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2R2O1xuICB9XG5cbiAgaXNDaGlsZFRhZyhwYXJlbnQsIGNoaWxkKSB7XG4gICAgaWYgKGNoaWxkLmxlbmd0aCA8PSBwYXJlbnQubGVuZ3RoICsgMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQuc2xpY2UoMCwgcGFyZW50Lmxlbmd0aCArIDEpICE9IGAke3BhcmVudH0vYCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHN0cmlwVGFnKHRhZykge1xuICAgIGxldCB0ID0gXCJcIjtcbiAgICBpZiAodGFnLnNsaWNlKC0xKSA9PT0gXCIvXCIpIHtcbiAgICAgIHQgPSB0YWcuc2xpY2UoMCwgLTEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0ID0gdGFnO1xuICAgIH1cbiAgICBpZiAodC5zbGljZSgwLCAxKSA9PT0gXCIjXCIpIHtcbiAgICAgIHQgPSB0LnNsaWNlKDEsIHQubGVuZ3RoKTtcbiAgICB9XG4gICAgcmV0dXJuIHQ7XG4gIH1cblxuICBnZXRUYXNrRnJvbVVVSUQoZHYsIHV1aWQpIHtcbiAgICBjb25zdCBuID0gZHYucGFnZXMoYFwiJHt0aGlzLnRhc2tEaXJ9LyR7dXVpZH1cImApO1xuICAgIGlmIChuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gc2hvdWxkIHdhcm4sIHRoaXMgbWVhbnMgbm90ZSBkZXBlbmRzIG9uIGEgbm9uLWV4aXN0aW5nIHRhc2tcbiAgICAgIGNvbnNvbGUud2FybihgXCIke3RoaXMudGFza0Rpcn0vJHt1dWlkfVwiIHRhc2sgZG9lcyBub3QgZXhpc3RzYCk7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gblswXTtcbiAgfVxuXG4gIGhhc1ZhbGlkRm9ybWF0KHRhc2spIHtcbiAgICAvLyBkdi5wYWdlcyByZXR1cm5zIGFuIGFycmF5IHdldGhlciBpdCBmaW5kcyAxIG9yIG1vcmUgbm90ZXNcbiAgICBjb25zdCBmbSA9IHRhc2suZmlsZS5mcm9udG1hdHRlcjtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gdGhpcyBzaG91bGQgd2FybiwgYWxsIHRhc2tzIHNob3VsZCBoYXZlIGEgZnJvbnRtYXR0ZXJcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFwiJHt0aGlzLnRhc2tEaXJ9LyR7dGFzay51dWlkfVwiIHRhc2sgZG9lcyBub3QgaGF2ZSBhIGZyb250bWF0dGVyYCxcbiAgICAgICk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGZtLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gYWxsIHRhc2tzIG11c3QgaGF2ZSBhIGB0eXBlYCBmaWVsZFxuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgXCIke3RoaXMudGFza0Rpcn0vJHt0YXNrLnV1aWR9XCIgdGFzayBkb2VzIG5vdCBoYXZlIGEgXFxgdHlwZVxcYCBmaWVsZGAsXG4gICAgICApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChmbS5zdGF0dXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gYWxsIHRhc2tzIG11c3QgaGF2ZSBhIGBzdGF0dXNgIGZpZWxkXG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBcIiR7dGhpcy50YXNrRGlyfS8ke3Rhc2sudXVpZH1cIiB0YXNrIGRvZXMgbm90IGhhdmUgYSBcXGBzdGF0dXNcXGAgZmllbGRgLFxuICAgICAgKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBoYXNQZW5kaW5nRGVwZW5kZW5jaWVzKGR2LCBkZXBzKSB7XG4gICAgZm9yIChjb25zdCBkZXAgb2YgZGVwcykge1xuICAgICAgY29uc3QgdGFzayA9IHRoaXMuZ2V0VGFza0Zyb21VVUlEKGR2LCBkZXApO1xuICAgICAgaWYgKHRhc2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5oYXNWYWxpZEZvcm1hdCh0YXNrKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZtID0gdGFzay5maWxlLmZyb250bWF0dGVyO1xuICAgICAgaWYgKGZtLnR5cGUgIT09IHRoaXMuVGFzay5CQVNFICYmIGZtLnR5cGUgIT09IHRoaXMuVGFzay5EQUlMWSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChmbS5zdGF0dXMgPT09IHRoaXMuU3RhdHVzLlRPRE8pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlzRG9hYmxlKGR2LCB0YXNrKSB7XG4gICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG5cbiAgICBpZiAoZm0uc3RhdHVzICE9PSB0aGlzLlN0YXR1cy5UT0RPKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGZtLmFmdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IGFmdGVyID0gbmV3IERhdGUoZm0uYWZ0ZXIpO1xuICAgICAgaWYgKERhdGUubm93KCkgPD0gYWZ0ZXIuZ2V0VGltZSgpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkZXBzID0gZm0ubmVlZHM7XG4gICAgaWYgKGRlcHMgPT09IHVuZGVmaW5lZCB8fCBkZXBzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFzUGVuZGluZ0RlcGVuZGVuY2llcyhkdiwgZGVwcykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGdldE5hbWVzcGFjZUNvbnRlbnQoZHYsIG5zKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBbXTtcbiAgICBjb25zdCByZXNwID0gZHYucGFnZXMoYCMke25zfWApO1xuICAgIGZvciAoY29uc3QgZiBvZiByZXNwKSB7XG4gICAgICBjb25zdCB0YWdzID0gZi50YWdzO1xuICAgICAgaWYgKHRhZ3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgICBpZiAodGhpcy5pc0NoaWxkVGFnKG5zLCB0YWcpKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHRhZy5zbGljZShucy5sZW5ndGggKyAxKTtcbiAgICAgICAgICBpZiAoIWNoaWxkcmVuLmluY2x1ZGVzKHQpKSB7XG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjaGlsZHJlbjtcbiAgfVxuXG4gIGlzRG9uZShkdiwgZGVwKSB7XG4gICAgY29uc3QgdGFzayA9IHRoaXMuZ2V0VGFza0Zyb21VVUlEKGR2LCBkZXApO1xuICAgIGlmICh0YXNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaGFzVmFsaWRGb3JtYXQodGFzaykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBmbSA9IHRhc2suZmlsZS5mcm9udG1hdHRlcjtcbiAgICBpZiAoZm0uc3RhdHVzID09PSB0aGlzLlN0YXR1cy5ET05FKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnZXRUYXNrcyhcbiAgICBkdixcbiAgICB0YWcsXG4gICAgdGFza1R5cGUgPSBbdGhpcy5UYXNrLkJBU0UsIHRoaXMuVGFzay5EQUlMWV0sXG4gICAgc3RhdHVzID0gdGhpcy5TdGF0dXMuVE9ETyxcbiAgKSB7XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGNvbnN0IHRhc2tzID0gZHYucGFnZXModGFnKTtcblxuICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xuICAgICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChmbS5zdGF0dXMgPT09IHVuZGVmaW5lZCB8fCBmbS5zdGF0dXMgIT09IHN0YXR1cykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChmbS50eXBlID09PSB1bmRlZmluZWQgfHwgIXRhc2tUeXBlLmNvbnRhaW5zKGZtLnR5cGUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgYnVmZi5wdXNoKHRhc2spO1xuICAgIH1cblxuICAgIHJldHVybiBidWZmO1xuICB9XG5cbiAgZm9ybWF0VGFzayhkdiwgdGFzaykge1xuICAgIHJldHVybiBkdi5maWxlTGluayh0YXNrLmZpbGUucGF0aCk7XG4gIH1cblxuICBmb3JtYXRUYXNrQmlzKGR2LCB0YXNrKSB7XG4gICAgY29uc3QgZiA9IHRhc2suZmlsZTtcbiAgICBsZXQgY3R4ID0gXCJcIjtcblxuICAgIGZvciAoY29uc3QgdGFnIG9mIGYudGFncykge1xuICAgICAgaWYgKHRhZy5zbGljZSgwLCA5KSA9PSBcIiNjb250ZXh0L1wiKSB7XG4gICAgICAgIGN0eCA9IHRhZy5zbGljZSg5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW1xuICAgICAgZHYuZmlsZUxpbmsoZi5wYXRoKSxcbiAgICAgIGR2Lm1hcmtkb3duVGFza0xpc3QoZi50YXNrcyksXG4gICAgICBmLmZyb250bWF0dGVyLnRpbWVfZXN0aW1hdGUsXG4gICAgICBjdHgsXG4gICAgXTtcbiAgfVxuXG4gIGZvcm1hdFRhc2tCYXNlKGR2LCB0YXNrKSB7XG4gICAgY29uc3QgZiA9IHRhc2suZmlsZTtcbiAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgY29uc3QgdGFncyA9IGZtLnRhZ3M7XG5cbiAgICBjb25zdCBhcmVhID0gdGhpcy5nZXRBcmVhKHRhZ3MpO1xuXG4gICAgcmV0dXJuIFtcbiAgICAgIGR2LmZpbGVMaW5rKGYucGF0aCwgZmFsc2UsIGZtLnV1aWQuc2xpY2UoMCwgOCkpLFxuICAgICAgZHYubWFya2Rvd25UYXNrTGlzdChmLnRhc2tzKSxcbiAgICAgIGZtLnRpbWVfZXN0aW1hdGUsXG4gICAgICBhcmVhLFxuICAgIF07XG4gIH1cblxuICBmb3JtYXRUYXNrV2FpdGluZyhkdiwgdGFzaykge1xuICAgIGNvbnN0IGYgPSB0YXNrLmZpbGU7XG4gICAgY29uc3QgZm0gPSBmLmZyb250bWF0dGVyO1xuICAgIGNvbnN0IGRlcHMgPSBbXTtcblxuICAgIGlmIChmbS5uZWVkcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmb3IgKGNvbnN0IGRlcCBvZiBmbS5uZWVkcykge1xuICAgICAgICBkZXBzLnB1c2goZHYuZmlsZUxpbmsoYCR7dGhpcy50YXNrRGlyfS8ke2RlcH1gKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9ybWF0VGFza01heWJlKGR2LCB0YXNrKSB7XG4gICAgY29uc3QgZiA9IHRhc2suZmlsZTtcbiAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgY29uc3QgZGVwcyA9IFtdO1xuXG4gICAgcmV0dXJuIFtkdi5maWxlTGluayhmLnBhdGgpXTtcbiAgfVxuXG4gIG1ha2VBc3luY1JlcXVlc3QoZHYsIHV1aWQpIHtcbiAgICByZXR1cm4gZHZcbiAgICAgIC5xdWVyeShgTElTVCBXSEVSRSBuZWVkcyBBTkQgY29udGFpbnMobmVlZHMsIFwiJHt1dWlkfVwiKWApXG4gICAgICAudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSk7XG4gIH1cblxuICBnZXREZXBlbmRhbnRUYXNrcyhkdiwgdGFzaykge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBjb25zdCB1dWlkID0gdGFzay5maWxlLm5hbWU7XG5cbiAgICBpZiAodGFzay5maWxlLmZyb250bWF0dGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBidWZmO1xuICAgIH1cblxuICAgIGNvbnN0IHRhc2tzID0gZHZcbiAgICAgIC5wYWdlcyhgXCIke3RoaXMudGFza0Rpcn1cImApXG4gICAgICAud2hlcmUoKHApID0+IHAubmVlZHMgIT09IHVuZGVmaW5lZCAmJiBwLm5lZWRzLmNvbnRhaW5zKHV1aWQpKTtcbiAgICBmb3IgKGNvbnN0IHRrIG9mIHRhc2tzKSB7XG4gICAgICBjb25zdCB0ID0gZHYucGFnZXMoYFwiJHt0ay5maWxlLnBhdGh9XCJgKTtcbiAgICAgIGJ1ZmYucHVzaCh0WzBdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVmZjtcbiAgfVxuXG4gIGJ5RGVwZW5kZW5jeUFuZFByaW9yaXR5QW5kQ3JlYXRlZEF0KGR2LCBhLCBiKSB7XG4gICAgY29uc3QgZnRBID0gYS5maWxlLmZyb250bWF0dGVyO1xuICAgIGNvbnN0IGZ0QiA9IGIuZmlsZS5mcm9udG1hdHRlcjtcbiAgICBjb25zdCBwcmlvQSA9IGZ0QS5wcmlvcml0eTtcbiAgICBjb25zdCBwcmlvQiA9IGZ0Qi5wcmlvcml0eTtcbiAgICAvLyBiZWZvcmUgPiBkZXBzID4gcHJpbyA+IGNyZWF0ZWRfYXRcbiAgICAvLyBsZXQgYmVmb3JlQSA9IGZ0QS5iZWZvcmU7XG4gICAgLy8gbGV0IGJlZm9yZUIgPSBmdEIuYmVmb3JlO1xuXG4gICAgY29uc3QgZGVwc0EgPSB0aGlzLmdldERlcGVuZGFudFRhc2tzKGR2LCBhKTtcbiAgICBjb25zdCBkZXBzQiA9IHRoaXMuZ2V0RGVwZW5kYW50VGFza3MoZHYsIGIpO1xuXG4gICAgaWYgKGRlcHNBLmxlbmd0aCAtIGRlcHNCLmxlbmd0aCAhPT0gMCkge1xuICAgICAgcmV0dXJuIGRlcHNBLmxlbmd0aCAtIGRlcHNCLmxlbmd0aDtcbiAgICB9XG5cbiAgICBpZiAocHJpb0EgLSBwcmlvQiAhPT0gMCkge1xuICAgICAgcmV0dXJuIHByaW9BIC0gcHJpb0I7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0ZUEgPSBuZXcgRGF0ZShmdEEuY3JlYXRlZF9hdCk7XG4gICAgY29uc3QgZGF0ZUIgPSBuZXcgRGF0ZShmdEIuY3JlYXRlZF9hdCk7XG5cbiAgICByZXR1cm4gKGRhdGVBLmdldFRpbWUoKSAtIGRhdGVCLmdldFRpbWUoKSkgKiAtMTtcbiAgfVxuXG4gIGZvcm1hdFRhc2tQbGFubmluZ1dhaXRpbmcoZHYsIHRhc2spIHtcbiAgICBjb25zdCBmID0gdGFzay5maWxlO1xuXG4gICAgcmV0dXJuIFtcbiAgICAgIC8vIGFqb3V0ZXIgYWxpYXMgc3VyIGxlIGxpbmtcbiAgICAgIGR2Lm1hcmtkb3duVGFza0xpc3QoZi50YXNrcyksXG4gICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmLm5hbWUuc2xpY2UoMCwgOCkpLFxuICAgICAgZi5mcm9udG1hdHRlci50aW1lX2VzdGltYXRlLFxuICAgICAgZi5mcm9udG1hdHRlci5jYXVzZSxcbiAgICBdO1xuICB9XG5cbiAgcmVuZGVyQmFzZUFzQXJyYXkoZHYsIHRhc2tzKSB7XG4gICAgY29uc3QgYXJyID0gW107XG4gICAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgYXJyLnB1c2godGhpcy5mb3JtYXRUYXNrQmFzZShkdiwgdGFzaykpO1xuICAgIH0pO1xuICAgIGR2LnRhYmxlKFtcInV1aWRcIiwgXCJ0YXNrc1wiLCBcImVzdGltYXRlXCIsIFwiYXJlYVwiXSwgYXJyKTtcbiAgfVxuXG4gIHJlbmRlclBsYW5uaW5nV2FpdGluZyhkdiwgdGFza3MpIHtcbiAgICBjb25zdCBhcnIgPSBbXTtcbiAgICB0YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICBhcnIucHVzaCh0aGlzLmZvcm1hdFRhc2tQbGFubmluZ1dhaXRpbmcoZHYsIHRhc2spKTtcbiAgICB9KTtcbiAgICBkdi50YWJsZShbXCJ0YXNrc1wiLCBcInV1aWRcIiwgXCJlc3RpbWF0ZVwiLCBcImNhdXNlXCJdLCBhcnIpO1xuICB9XG5cbiAgcmVuZGVyTWF5YmVBc0FycmF5KGR2LCB0YXNrcykge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIHRhc2tzLmZvckVhY2goKHsgcmVmLCB0YXNrIH0pID0+IHtcbiAgICAgIGlmICh0YXNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXJyLnB1c2godGhpcy5mb3JtYXRUYXNrTWF5YmUoZHYsIHRhc2spKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBkdi50YWJsZShbXCJ1dWlkXCJdLCBhcnIpO1xuICB9XG5cbiAgZm9ybWF0VGFza0RhaWx5KGR2LCB0YXNrKSB7XG4gICAgY29uc3QgZiA9IHRhc2suZmlsZTtcbiAgICBjb25zdCBmbSA9IHRhc2suZmlsZS5mcm9udG1hdHRlcjtcbiAgICBjb25zdCB0YWdzID0gdGFzay5maWxlLnRhZ3M7XG4gICAgY29uc3QgYXJlYXMgPSBbXTtcblxuICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAgIGlmICh0YWcuc2xpY2UoMCwgNikgPT0gXCIjYXJlYS9cIikge1xuICAgICAgICBhcmVhcy5wdXNoKHRhZy5zbGljZSg2KSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbGlua3MgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGxpbmsgb2YgZi5vdXRsaW5rcykge1xuICAgICAgbGlua3MucHVzaChsaW5rKTtcbiAgICB9XG5cbiAgICBjb25zdCB0YXNrcyA9IFtdO1xuICAgIGZvciAoY29uc3QgdCBvZiBmLnRhc2tzKSB7XG4gICAgICB0YXNrcy5wdXNoKHQpO1xuICAgIH1cblxuICAgIHJldHVybiBbXG4gICAgICBkdi5maWxlTGluayhmLnBhdGgpLFxuICAgICAgbGlua3MubGVuZ3RoID4gMFxuICAgICAgICA/IGR2Lm1hcmtkb3duTGlzdChsaW5rcylcbiAgICAgICAgOiBkdi5tYXJrZG93blRhc2tMaXN0KHRhc2tzKSxcbiAgICAgIGZtLnRpbWVfYWxsb2NhdGVkLFxuICAgICAgYXJlYXMubGVuZ3RoID4gMCA/IGR2Lm1hcmtkb3duTGlzdChhcmVhcykgOiBcIlwiLFxuICAgIF07XG4gIH1cblxuICBmb3JtYXRGbGVldGluZyhkdiwgdGFzaykge1xuICAgIGNvbnN0IGYgPSB0YXNrLmZpbGU7XG4gICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgY29uc3QgdGFncyA9IHRhc2suZmlsZS50YWdzO1xuICAgIGNvbnN0IGhvdXJzID0gMzYwMDtcbiAgICBjb25zdCBkYXlzID0gODY0MDA7XG5cbiAgICBsZXQgZHQgPSBuZXcgRGF0ZSgpO1xuICAgIGlmIChmbSAhPT0gdW5kZWZpbmVkICYmIGZtLmNyZWF0ZWRfYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZHQgPSBuZXcgRGF0ZShmbS5jcmVhdGVkX2F0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZHQgPSBuZXcgRGF0ZShmLmN0aW1lLnRzKTtcbiAgICB9XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBkZWx0YSA9IChub3cuZ2V0VGltZSgpIC0gZHQuZ2V0VGltZSgpKSAvIDEwMDA7XG4gICAgbGV0IHNpbmNlID0gXCJcIjtcbiAgICBjb25zdCB0b0R0ID0gKHQpID0+IHtcbiAgICAgIHJldHVybiBTdHJpbmcoTWF0aC5yb3VuZCh0ICogMTApIC8gMTApLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICB9O1xuICAgIGlmIChkZWx0YSA+PSBkYXlzKSB7XG4gICAgICAvLyBkYXlzIGFnb1xuICAgICAgc2luY2UgPSB0b0R0KGRlbHRhIC8gZGF5cykgKyBcImRcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaG91cnMgYWdvXG4gICAgICBzaW5jZSA9IHRvRHQoZGVsdGEgLyBob3VycykgKyBcImhcIjtcbiAgICB9XG5cbiAgICAvLyByZXR1cm4gW2R2LmZpbGVMaW5rKGAke2YucGF0aH0jQ29udGVudGApLCBzaW5jZSwgZi5zaXplXTtcbiAgICBpZiAoZm0uYWxpYXMgPT09IHVuZGVmaW5lZCB8fCBmbS5hbGlhcyA9PT0gXCJcIikge1xuICAgICAgcmV0dXJuIFtkdi5maWxlTGluayhgJHtmLnBhdGh9YCksIHNpbmNlLCBmLnNpemVdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW2R2LmZpbGVMaW5rKGAke2YucGF0aH1gLCBmYWxzZSwgZm0uYWxpYXMpLCBzaW5jZSwgZi5zaXplXTtcbiAgICB9XG4gIH1cblxuICByZW5kZXJEYWlseUFzQXJyYXkoZHYsIHRhc2tzKSB7XG4gICAgY29uc3QgYXJyID0gW107XG4gICAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgYXJyLnB1c2godGhpcy5mb3JtYXRUYXNrRGFpbHkoZHYsIHRhc2spKTtcbiAgICB9KTtcbiAgICBkdi50YWJsZShbXCJ1dWlkXCIsIFwiY29udGVudFwiLCBcImR1cmF0aW9uXCIsIFwiYXJlYVwiXSwgYXJyKTtcbiAgfVxuXG4gIHJlbmRlckZsZWV0aW5nQXNBcnJheShkdiwgdGFza3MpIHtcbiAgICBjb25zdCBhcnIgPSBbXTtcbiAgICB0YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICBhcnIucHVzaCh0aGlzLmZvcm1hdEZsZWV0aW5nKGR2LCB0YXNrKSk7XG4gICAgfSk7XG4gICAgZHYudGFibGUoW1wiY29udGVudFwiLCBcImFnZVwiLCBcInNpemVcIl0sIGFycik7XG4gIH1cblxuICBhdXRvRmllbGROZWVkKGR2LCBmbSkge1xuICAgIGlmIChmbS5uZWVkcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGRlcCBvZiBmbS5uZWVkcykge1xuICAgICAgaWYgKCF0aGlzLmlzRG9uZShkdiwgZGVwKSkge1xuICAgICAgICBidWZmLnB1c2goZHYuZmlsZUxpbmsoYCR7dGhpcy50YXNrRGlyfS8ke2RlcH1gKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChidWZmLmxlbmd0aCA+IDApIHtcbiAgICAgIGR2LmhlYWRlcigyLCBcIk5lZWRzXCIpO1xuICAgICAgZHYubGlzdChidWZmKTtcbiAgICB9XG4gIH1cblxuICBhdXRvRmllbGROZWVkZWRCeShkdiwgY3VycmVudCkge1xuICAgIGNvbnN0IHRhc2tzID0gdGhpcy5nZXREZXBlbmRhbnRUYXNrcyhkdiwgY3VycmVudCk7XG4gICAgaWYgKHRhc2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcbiAgICAgIGlmICghdGhpcy5pc0RvbmUoZHYsIHRhc2sudXVpZCkpIHtcbiAgICAgICAgYnVmZi5wdXNoKGR2LmZpbGVMaW5rKHRhc2suZmlsZS5wYXRoKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChidWZmLmxlbmd0aCA+IDApIHtcbiAgICAgIGR2LmhlYWRlcigyLCBcIk5lZWRlZEJ5XCIpO1xuICAgICAgZHYubGlzdChidWZmKTtcbiAgICB9XG4gIH1cblxuICBhdXRvRmllbGRUYWdzKGR2LCBmbSkge1xuICAgIGNvbnN0IHRhZ3MgPSBmbS50YWdzO1xuICAgIGlmICh0YWdzID09IHVuZGVmaW5lZCB8fCB0YWdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRhZ3Muc29ydCgpO1xuICAgIGR2LmhlYWRlcigyLCBcIlRhZ3NcIik7XG4gICAgbGV0IHMgPSBcIlwiO1xuICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAgIHMgKz0gYCAjJHt0YWd9YDtcbiAgICB9XG4gICAgZHYucGFyYWdyYXBoKHMpO1xuXG4gICAgLy8gZHYucGFyYWdyYXBoKHMpO1xuICAgIC8vIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAvLyAgIGR2LnBhcmFncmFwaChgIyR7dGFnfWApO1xuICAgIC8vIH1cbiAgfVxuXG4gIGF1dG9GaWVsZFRhc2tCYXNlKGR2KSB7XG4gICAgY29uc3QgY3VycmVudCA9IGR2LmN1cnJlbnQoKTtcbiAgICBjb25zdCBmbSA9IGN1cnJlbnQuZmlsZS5mcm9udG1hdHRlcjtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc29sZS53YXJuKFwiZm0gaXMgcmVxdWlyZWRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcHJvamVjdE5hbWUgPSBIZWxwZXIuZ2V0UHJvamVjdChmbSk7XG4gICAgaWYgKHByb2plY3ROYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHByb2plY3RzID0gZHYucGFnZXMoYFwiUHJvamVjdHNcImApLndoZXJlKChmbVApID0+IHtcbiAgICAgICAgaWYgKGZtUC5uYW1lID09PSBwcm9qZWN0TmFtZS5zbGljZSg4KSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSk7XG4gICAgICBpZiAocHJvamVjdHMubGVuZ3RoKSB7XG4gICAgICAgIGR2LmhlYWRlcigyLCBcIlByb2plY3RcIik7XG4gICAgICAgIGR2LnBhcmFncmFwaChSZW5kZXJlci5tYWtlTGlua05hbWUoZHYsIHByb2plY3RzWzBdLmZpbGUpKTtcbiAgICAgICAgLy8gZHYucGFyYWdyYXBoKGR2LmZpbGVMaW5rKGBQcm9qZWN0cy8ke3Byb2plY3RzWzBdLmZpbGUuZnJvbnRtYXR0ZXIudXVpZH1gKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuYXV0b0ZpZWxkTmVlZChkdiwgZm0pO1xuICAgIHRoaXMuYXV0b0ZpZWxkTmVlZGVkQnkoZHYsIGN1cnJlbnQpO1xuICAgIC8vIHRoaXMuYXV0b0ZpZWxkVGFncyhkdiwgZm0pO1xuXG4gICAgY29uc3QgbG9nRW50cmllcyA9IGR2XG4gICAgICAucGFnZXMoYFwiJHt0aGlzLmxvZ0Rpcn0vJHtmbS51dWlkfVwiYClcbiAgICAgIC53aGVyZSgocCkgPT4gcC50eXBlID09PSA2KVxuICAgICAgLnNvcnQoKGspID0+IGsuY3JlYXRlZF9hdCwgXCJkZXNjXCIpO1xuXG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGxldCB0b3RhbFRpbWUgPSAwO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgbG9nRW50cmllcykge1xuICAgICAgY29uc3QgZm1lID0gZW50cnkuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgIGxldCBzdGFydDogYW55ID0gMDtcbiAgICAgIGxldCBzdG9wOiBhbnkgPSAwO1xuXG4gICAgICBpZiAoZm1lID09PSB1bmRlZmluZWQgfHwgZm1lLmNyZWF0ZWRfYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZnJvbnRtYXR0ZXI6ICR7Zm1lLnV1aWR9YCk7XG4gICAgICB9XG5cbiAgICAgIHN0YXJ0ID0gbmV3IERhdGUoZm1lLmNyZWF0ZWRfYXQpO1xuICAgICAgZS5wdXNoKHN0YXJ0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApKTtcblxuICAgICAgaWYgKGZtZS5kb25lX2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3RvcCA9IERhdGUubm93KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdG9wID0gbmV3IERhdGUoZm1lLmRvbmVfYXQpO1xuICAgICAgfVxuICAgICAgdG90YWxUaW1lICs9IHN0b3AgLSBzdGFydDtcblxuICAgICAgZS5wdXNoKFxuICAgICAgICBkdi5zZWN0aW9uTGluayhcbiAgICAgICAgICBmbWUudXVpZCxcbiAgICAgICAgICBcIiMjIENvbnRlbnRcIixcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICBmbWUudXVpZC5zbGljZSgwLCA4KSxcbiAgICAgICAgKSxcbiAgICAgICk7XG4gICAgICBlLnB1c2goTWF0aC5yb3VuZCgoKHN0b3AgLSBzdGFydCkgLyAoMTAwMCAqIDYwICogNjApKSAqIDEwKSAvIDEwKTtcbiAgICAgIGlmIChmbWUucmV2aWV3ZWQgPT09IHVuZGVmaW5lZCB8fCBmbWUucmV2aWV3ZWQgPT09IDApIHtcbiAgICAgICAgZS5wdXNoKDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZS5wdXNoKGZtZS5yZXZpZXdlZCk7XG4gICAgICB9XG5cbiAgICAgIGJ1ZmYucHVzaChlKTtcbiAgICB9XG5cbiAgICBpZiAoYnVmZi5sZW5ndGggPiAwKSB7XG4gICAgICBkdi5oZWFkZXIoMiwgXCJMb2dzXCIpO1xuICAgICAgZHYudGFibGUoW1wiY3JlYXRlZF9hdFwiLCBcInV1aWRcIiwgXCJzZXNzaW9uXCIsIFwicmV2aWV3ZWRcIl0sIGJ1ZmYpO1xuICAgICAgaWYgKHRvdGFsVGltZSA+IDApIHtcbiAgICAgICAgZHYucGFyYWdyYXBoKFxuICAgICAgICAgIGBfdG90YWxUaW1lIChoKTpfICR7TWF0aC5yb3VuZCgodG90YWxUaW1lIC8gKDEwMDAgKiA2MCAqIDYwKSkgKiAxMCkgLyAxMFxuICAgICAgICAgIH1gLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGF1dG9GaWVsZExvZyhkdikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBkdi5jdXJyZW50KCk7XG4gICAgY29uc3QgZm0gPSBjdXJyZW50LmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkdi5oZWFkZXIoMiwgXCJQYXJlbnRcIik7XG4gICAgZHYucGFyYWdyYXBoKGR2LmZpbGVMaW5rKGAke3RoaXMudGFza0Rpcn0vJHtmbS5wYXJlbnRfaWR9YCkpO1xuICB9XG5cbiAgYXV0b0ZpZWxkQXV0aG9ycyhkdiwgZm0pIHtcbiAgICBjb25zdCBhdXRob3JzID0gZm0uYXV0aG9ycztcbiAgICBpZiAoYXV0aG9ycyA9PT0gdW5kZWZpbmVkIHx8IGF1dGhvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGR2LmhlYWRlcigyLCBcIkF1dGhvcnNcIik7XG4gICAgZHYubGlzdChhdXRob3JzKTtcbiAgfVxuXG4gIGF1dG9GaWVsZFRpdGxlKGR2LCBmbSkge1xuICAgIGNvbnN0IHRpdGxlID0gZm0uYWxpYXM7XG4gICAgaWYgKHRpdGxlID09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGR2LmhlYWRlcigxLCB0aXRsZSk7XG4gIH1cblxuICBhdXRvRmllbGRMaXRlcmF0dXJlTm90ZShkdikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBkdi5jdXJyZW50KCk7XG4gICAgY29uc3QgZm0gPSBjdXJyZW50LmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmF1dG9GaWVsZFRpdGxlKGR2LCBmbSk7XG4gICAgdGhpcy5hdXRvRmllbGRBdXRob3JzKGR2LCBmbSk7XG4gICAgdGhpcy5hdXRvRmllbGRUYWdzKGR2LCBmbSk7XG4gIH1cblxuICBhdXRvRmllbGRQZXJtYW5lbnQoZHYpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gZHYuY3VycmVudCgpO1xuICAgIGNvbnN0IGZtID0gY3VycmVudC5maWxlLmZyb250bWF0dGVyO1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5hdXRvRmllbGRUYWdzKGR2LCBmbSk7XG4gIH1cblxuICBhdXRvRmllbGRUYXNrKGR2KSB7XG4gICAgcmV0dXJuIHRoaXMuYXV0b0ZpZWxkVGFza0Jhc2UoZHYpO1xuICB9XG5cbiAgYXV0b0ZpZWxkTGl0ZXJhdHVyZShkdikge1xuICAgIHJldHVybiB0aGlzLmF1dG9GaWVsZExpdGVyYXR1cmVOb3RlKGR2KTtcbiAgfVxuXG4gIGF1dG9GaWVsZEZsZWV0aW5nKGR2KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYXV0b0ZpZWxkU3VwcGx5KGR2KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZmluZFRhc2tzQnlQcm9qZWN0KGR2LCBuYW1lKSB7XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuXG4gICAgaWYgKG5hbWUgIT09IFwiXCIgJiYgbmFtZSAhPT0gXCJub25lXCIpIHtcbiAgICAgIGNvbnN0IHRhc2tzID0gdGhpcy5nZXRUYXNrcyhkdiwgYCR7dGhpcy5OYW1lc3BhY2UuUFJPSkVDVH0vbm9uZWAsIFtcbiAgICAgICAgdGhpcy5UYXNrLkJBU0UsXG4gICAgICBdKTtcbiAgICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xuICAgICAgICBjb25zdCBmbSA9IHRhc2suZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgICAgaWYgKHRoaXMuaXNEb2FibGUoZHYsIHRhc2spKSB7XG4gICAgICAgICAgYnVmZi5wdXNoKHRhc2spO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRhc2tzID0gdGhpcy5nZXRUYXNrcyhkdiwgXCJcIiwgW3RoaXMuVGFzay5CQVNFXSk7XG4gICAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcbiAgICAgICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICAgIGNvbnN0IHRhZ3MgPSBmbS50YWdzO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgKGZtLnRhZ3MgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG5hbWUgPT09IFwiXCIgfHwgbmFtZSA9PT0gXCJub25lXCIpKSB8fFxuICAgICAgICAgIGZtLnRhZ3MuY29udGFpbnMoYCR7dGhpcy5OYW1lc3BhY2UuUFJPSkVDVH0vbm9uZWApXG4gICAgICAgICkge1xuICAgICAgICAgIGlmICh0aGlzLmlzRG9hYmxlKGR2LCB0YXNrKSkge1xuICAgICAgICAgICAgYnVmZi5wdXNoKHRhc2spO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGJ1ZmYuc29ydCgpO1xuICAgIHJldHVybiBidWZmO1xuICB9XG5cbiAgZ2V0VGFnKHRhZ3MsIHR5cGUpIHtcbiAgICBsZXQgbmFtZSA9IFwiXCI7XG4gICAgbGV0IGRlZmF1bHRWYWx1ZSA9IFwiXCI7XG5cbiAgICBpZiAodHlwZSA9PT0gXCJhcmVhXCIpIHtcbiAgICAgIG5hbWUgPSB0aGlzLk5hbWVzcGFjZS5BUkVBO1xuICAgICAgZGVmYXVsdFZhbHVlID0gdGhpcy5EZWZhdWx0LkFSRUE7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcImNvbnRleHRcIikge1xuICAgICAgbmFtZSA9IHRoaXMuTmFtZXNwYWNlLkNPTlRFWFQ7XG4gICAgICBkZWZhdWx0VmFsdWUgPSB0aGlzLkRlZmF1bHQuQ09OVEVYVDtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwibGF5ZXJcIikge1xuICAgICAgbmFtZSA9IHRoaXMuTmFtZXNwYWNlLkxBWUVSO1xuICAgICAgZGVmYXVsdFZhbHVlID0gdGhpcy5EZWZhdWx0LkxBWUVSO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJvcmdcIikge1xuICAgICAgbmFtZSA9IHRoaXMuTmFtZXNwYWNlLk9SRztcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IHRoaXMuRGVmYXVsdC5PUkc7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcInByb2plY3RcIikge1xuICAgICAgbmFtZSA9IHRoaXMuTmFtZXNwYWNlLlBST0pFQ1Q7XG4gICAgICBkZWZhdWx0VmFsdWUgPSB0aGlzLkRlZmF1bHQuUFJPSkVDVDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBnZXRUYWcgZ290IHVuc3Vwb3J0ZWQgdHlwZTogJHt0eXBlfWApO1xuICAgIH1cblxuICAgIGNvbnN0IGxlbiA9IG5hbWUubGVuZ3RoICsgMTtcbiAgICBjb25zdCBkZWZhdWx0VGFnID0gYCR7bmFtZX0vJHtkZWZhdWx0VmFsdWV9YDtcbiAgICBpZiAodGFncyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFRhZztcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgICBpZiAodGFnLmxlbmd0aCA+IGxlbiAmJiB0YWcuc2xpY2UoMCwgbGVuKSA9PSBgJHtuYW1lfS9gKSB7XG4gICAgICAgIHJldHVybiB0YWc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlZmF1bHRUYWc7XG4gIH1cblxuICBnZXRBcmVhKHRhZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRUYWcodGFncywgXCJhcmVhXCIpO1xuICB9XG5cbiAgZ2V0Q29udGV4dCh0YWdzKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGFnKHRhZ3MsIFwiY29udGV4dFwiKTtcbiAgfVxuICBnZXRMYXllcih0YWdzKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGFnKHRhZ3MsIFwibGF5ZXJcIik7XG4gIH1cblxuICBnZXRPcmcodGFncykge1xuICAgIHJldHVybiB0aGlzLmdldFRhZyh0YWdzLCBcIm9yZ1wiKTtcbiAgfVxuXG4gIGdldFByb2plY3QodGFncykge1xuICAgIHJldHVybiB0aGlzLmdldFRhZyh0YWdzLCBcInByb2plY3RcIik7XG4gIH1cblxuICBwYXJzZUxpc3RGcm9udG1hdHRlcihmbSkge1xuICAgIGxldCBtaW5Qcmlvcml0eSA9IDA7XG4gICAgaWYgKGZtLm1pbl9wcmlvcml0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBtaW5Qcmlvcml0eSA9IGZtLm1pbl9wcmlvcml0eTtcbiAgICB9XG5cbiAgICBsZXQgaWdub3JlID0gW107XG4gICAgaWYgKGZtLmlnbm9yZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZ25vcmUgPSBmbS5pZ25vcmU7XG4gICAgfVxuXG4gICAgbGV0IGJ5QXJlYXMgPSBbXTtcbiAgICBpZiAoZm0uYnlfYXJlYXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgYnlBcmVhcyA9IGZtLmJ5X2FyZWFzO1xuICAgIH1cblxuICAgIGxldCBieVByb2plY3RzID0gW107XG4gICAgaWYgKGZtLmJ5X3Byb2plY3RzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGJ5UHJvamVjdHMgPSBmbS5ieV9wcm9qZWN0cztcbiAgICB9XG4gICAgcmV0dXJuIFttaW5Qcmlvcml0eSwgaWdub3JlLCBieUFyZWFzLCBieVByb2plY3RzXTtcbiAgfVxuXG4gIHJlbmRlck5hbWVzcGFjZUNvbnRlbnQoZHYpIHtcbiAgICBjb25zdCBzZWxmID0gZHYuY3VycmVudCgpO1xuICAgIGNvbnN0IG5hbWUgPSBzZWxmLmZpbGUubmFtZS50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsIC0xKTtcblxuICAgIGR2LmhlYWRlcigxLCBcIkluZGV4XCIpO1xuICAgIGR2LmhlYWRlcigyLCBgJHtzZWxmLmZpbGUubmFtZX1gKTtcblxuICAgIGNvbnN0IHRhZ3MgPSB0aGlzLmdldE5hbWVzcGFjZUNvbnRlbnQoZHYsIG5hbWUpO1xuICAgIHRhZ3Muc29ydCgpO1xuXG4gICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgZHYucGFyYWdyYXBoKGAjJHtuYW1lfS8ke3RhZ31gKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXJVbnByb2Nlc3NlZExvZ3MoZHYpIHtcbiAgICBjb25zdCBsb2dzID0gZHZcbiAgICAgIC5wYWdlcyhgXCIke3RoaXMubG9nRGlyfVwiYClcbiAgICAgIC53aGVyZShcbiAgICAgICAgKHApID0+XG4gICAgICAgICAgcC50eXBlID09PSB0aGlzLlR5cGUuTE9HICYmXG4gICAgICAgICAgKHAucmV2aWV3ZCA9PT0gdW5kZWZpbmVkIHx8IHAucmV2aWV3ZWQgPCAxKSxcbiAgICAgIClcbiAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiYXNjXCIpO1xuXG4gICAgY29uc3QgYnVmZiA9IFtdO1xuXG4gICAgY29uc3QgYXJyID0gW107XG4gICAgbG9ncy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgY29uc3QgZm0gPSBlbnRyeS5maWxlLmZyb250bWF0dGVyO1xuICAgICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwYXJlbnRJZCA9IGZtLnBhcmVudF9pZDtcbiAgICAgIGlmIChwYXJlbnRJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBsb2cgZW50cnk6ICR7ZW50cnkuZmlsZS5wYXRofWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwYXJlbnQgPSBkdi5wYWdlcyhgXCIke3RoaXMudGFza0Rpcn0vJHtwYXJlbnRJZH1cImApO1xuICAgICAgY29uc3QgcGFyZW50Rm0gPSBwYXJlbnQuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGlmIChwYXJlbnRGbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0YXNrOiAke3BhcmVudC5maWxlLnBhdGh9YCk7XG4gICAgICB9XG5cbiAgICAgIGxldCBwcm9qZWN0ID0gdGhpcy5nZXRQcm9qZWN0KHBhcmVudEZtLnRhZ3MpO1xuICAgICAgaWYgKFxuICAgICAgICBwcm9qZWN0ID09PSBgJHt0aGlzLk5hbWVzcGFjZS5QUk9KRUNUfS8ke3RoaXMuRGVmYXVsdC5QUk9KRUNUfWBcbiAgICAgICkge1xuICAgICAgICBwcm9qZWN0ID0gXCJcIjtcbiAgICAgIH1cblxuICAgICAgbGV0IGFyZWEgPSB0aGlzLmdldEFyZWEocGFyZW50Rm0udGFncyk7XG4gICAgICBpZiAoYXJlYSA9PT0gYCR7dGhpcy5OYW1lc3BhY2UuQVJFQX0vJHt0aGlzLkRlZmF1bHQuQVJFQX1gKSB7XG4gICAgICAgIGFyZWEgPSBcIlwiO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmb3JtYXRlZCA9IFtdO1xuXG4gICAgICBmb3JtYXRlZC5wdXNoKFxuICAgICAgICBkdi5zZWN0aW9uTGluayhcbiAgICAgICAgICBlbnRyeS5maWxlLnBhdGgsXG4gICAgICAgICAgXCJDb250ZW50XCIsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgYCR7Zm0udXVpZC5zbGljZSgwLCA4KX1gLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGNyZWF0ZWRBdCA9IG5ldyBEYXRlKGZtLmNyZWF0ZWRfYXQpO1xuICAgICAgZm9ybWF0ZWQucHVzaChjcmVhdGVkQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkpO1xuICAgICAgZm9ybWF0ZWQucHVzaChwcm9qZWN0KTtcbiAgICAgIGZvcm1hdGVkLnB1c2goYXJlYSk7XG4gICAgICBhcnIucHVzaChmb3JtYXRlZCk7XG4gICAgfSk7XG5cbiAgICBkdi50YWJsZShbXCJ1dWlkXCIsIFwiY3JlYXRlZF9hdFwiLCBcInByb2plY3RcIiwgXCJhcmVhXCJdLCBhcnIpO1xuICB9XG5cbiAgYXNzZXJ0VGFza0RvbmVBdChkdiwgdGFza0lkKSB7XG4gICAgY29uc3QgdGFzayA9IGR2LnBhZ2VzKGBcIiR7dGhpcy50YXNrRGlyfS8ke3Rhc2tJZH1cImApO1xuICAgIGlmICh0YXNrLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB0YXNrOiAke3Rhc2tJZH0gZG9lc3Qgbm90IGV4aXN0c2ApO1xuICAgIH1cblxuICAgIGNvbnN0IGZtID0gdGFzay5maWxlLmZyb250bWF0dGVyO1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHRhc2s6ICR7dGFza0lkfSBkb2VzIG5vdCBoYXZlIGEgZnJvbnRtYXR0ZXJgKTtcbiAgICB9XG5cbiAgICBjb25zdCBsb2dzID0gZHZcbiAgICAgIC5wYWdlcyhgXCIke3RoaXMubG9nRGlyfS8ke3Rhc2tJZH1cImApXG4gICAgICAuc29ydCgoaykgPT4gay5jcmVhdGVkX2F0LCBcImFzY1wiKTtcbiAgICBpZiAobG9ncy5sZW5ndGggPCAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHRhc2s6ICR7dGFza0lkfSBoYXMgbm8gTG9nc2ApO1xuICAgIH1cblxuICAgIGNvbnN0IGxhc3RFbnRyeSA9IGxvZ3NbbG9ncy5sZW5ndGggLSAxXTtcbiAgICBpZiAobGFzdEVudHJ5LmZpbGUuZnJvbnRtYXR0ZXIuZG9uZV9hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGB0YXNrOiAke3Rhc2tJZH0gbGFzdCBlbnRyeSBpcyBtaXNzaW5nICdkb25lX2F0JyBmaWVsZGAsXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGRvbmVBdCA9IG5ldyBEYXRlKGxhc3RFbnRyeS5maWxlLmZyb250bWF0dGVyLmRvbmVfYXQpO1xuICAgIHJldHVybiBbXG4gICAgICBkdi5zZWN0aW9uTGluayhcbiAgICAgICAgdGFzay5maWxlLnBhdGgsXG4gICAgICAgIFwiQ29udGVudFwiLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgYCR7dGFzay5maWxlLmZyb250bWF0dGVyLnV1aWQuc2xpY2UoMCwgOCl9YCxcbiAgICAgICksXG4gICAgICBgJHtkb25lQXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCl9YCxcbiAgICBdO1xuICB9XG5cbiAgZ2V0RG9uZVRpbWVsaW5lKGR2KSB7XG4gICAgLy8gcHJlbmRzIGVuIGNvbXB0ZSBkb2luZyAtPiBkb25lLCBwYXMgbGVzIHRhc2sgc3VyIGxlcXVlbGxlcyBkdSB0cmF2YWlsIGEgXHUwMEU5dFx1MDBFOSBmYWl0IG1haXMgcXVpIG9udCBcdTAwRTl0XHUwMEU5IHN1c3BlbmRcbiAgICAvLyBkYWlseSwgdGFzayB0cm9wIGxvbmd1ZSBwb3VyIGV0cmUgZmFpdGUgZW4gdW4gc2l0dGluZ1xuICAgIGNvbnN0IHRhc2tzID0gZHZcbiAgICAgIC5wYWdlcyhgXCIke3RoaXMudGFza0Rpcn1cImApXG4gICAgICAud2hlcmUoKHApID0+IHAuc3RhdHVzID09PSBcImRvbmVcIik7XG5cbiAgICBjb25zdCBidWZmID0gW107XG4gICAgZm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XG4gICAgICBjb25zdCBmbSA9IHRhc2suZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgdGFzazogJHtmbS51dWlkfSBkb2VzIG5vdCBoYXZlIGEgZnJvbnRtYXR0ZXJgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbG9ncyA9IGR2XG4gICAgICAgIC5wYWdlcyhgXCIke3RoaXMubG9nRGlyfS8ke2ZtLnV1aWR9XCJgKVxuICAgICAgICAuc29ydCgoaykgPT4gay5jcmVhdGVkX2F0LCBcImFzY1wiKTtcbiAgICAgIGlmIChsb2dzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGB0YXNrOiAke2ZtLnV1aWR9IGhhcyBubyBMb2dzYCk7XG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihgdGFzazogJHt0YXNrSWR9IGhhcyBubyBMb2dzYCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxhc3RFbnRyeSA9IGxvZ3NbbG9ncy5sZW5ndGggLSAxXTtcbiAgICAgIGlmIChsYXN0RW50cnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChsYXN0RW50cnkuZmlsZS5mcm9udG1hdHRlci5kb25lX2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGB0YXNrOiAke2ZtLnV1aWR9IGxhc3QgZW50cnkgaXMgbWlzc2luZyAnZG9uZV9hdCcgZmllbGRgLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBmbS5kb25lQXQgPSBuZXcgRGF0ZShsYXN0RW50cnkuZmlsZS5mcm9udG1hdHRlci5kb25lX2F0KTtcbiAgICAgIGJ1ZmYucHVzaCh0YXNrKTtcbiAgICB9XG5cbiAgICBidWZmLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGNvbnN0IGRhdGVBID0gbmV3IERhdGUoYS5maWxlLmZyb250bWF0dGVyLmRvbmVBdCk7XG4gICAgICBjb25zdCBkYXRlQiA9IG5ldyBEYXRlKGIuZmlsZS5mcm9udG1hdHRlci5kb25lQXQpO1xuICAgICAgcmV0dXJuIChkYXRlQS5nZXRUaW1lKCkgLSBkYXRlQi5nZXRUaW1lKCkpICogLTE7XG4gICAgfSk7XG5cbiAgICBjb25zdCBhcnIgPSBbXTtcbiAgICBidWZmLmZvckVhY2goKGUpID0+IHtcbiAgICAgIGFyci5wdXNoKFtcbiAgICAgICAgZHYuc2VjdGlvbkxpbmsoXG4gICAgICAgICAgZS5maWxlLnBhdGgsXG4gICAgICAgICAgXCJDb250ZW50XCIsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgYCR7ZS5maWxlLmZyb250bWF0dGVyLnV1aWQuc2xpY2UoMCwgOCl9YCxcbiAgICAgICAgKSxcbiAgICAgICAgYCR7ZS5maWxlLmZyb250bWF0dGVyLmRvbmVBdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDE2KX1gLFxuICAgICAgXSk7XG4gICAgfSk7XG5cbiAgICBkdi50YWJsZShbXCJ1dWlkXCIsIFwiZG9uZUF0XCJdLCBhcnIpO1xuICB9XG5cbiAgZHVyYXRpb25TdHJpbmdUb1NlYyh2YWwpIHtcbiAgICBjb25zdCBtdWx0ID0gdmFsLnNsaWNlKC0xKTtcbiAgICBsZXQgbSA9IDA7XG4gICAgaWYgKG11bHQgPT09IFwiaFwiKSB7XG4gICAgICBtID0gNjAgKiA2MDtcbiAgICB9IGVsc2UgaWYgKG11bHQgPT09IFwibVwiKSB7XG4gICAgICBtID0gNjA7XG4gICAgfSBlbHNlIGlmIChtdWx0ID09PSBcImRcIikge1xuICAgICAgbSA9IDI0ICogNjAgKiA2MDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKGBVbmhhbmRsZWQgY2FzZSBtdWx0OiAke211bHR9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG0gKiBwYXJzZUludCh2YWwuc2xpY2UoMCwgLTEpKTtcbiAgfVxuXG4gIHRlc3REdkZ1bmMoKSB7XG4gICAgLy8gcHJlbmRzIGVuIGNvbXB0ZSBkb2luZyAtPiBkb25lLCBwYXMgbGVzIHRhc2sgc3VyIGxlcXVlbGxlcyBkdSB0cmF2YWlsIGEgXHUwMEU5dFx1MDBFOSBmYWl0IG1haXMgcXVpIG9udCBcdTAwRTl0XHUwMEU5IHN1c3BlbmRcbiAgICAvLyBkYWlseSwgdGFzayB0cm9wIGxvbmd1ZSBwb3VyIGV0cmUgZmFpdGUgZW4gdW4gc2l0dGluZ1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBkdiA9IGFwcC5wbHVnaW5zLnBsdWdpbnMuZGF0YXZpZXcuYXBpO1xuICAgIGNvbnN0IHRhc2tzID0gZHZcbiAgICAgIC5wYWdlcyhgXCIke3RoaXMudGFza0Rpcn1cImApXG4gICAgICAud2hlcmUoKHApID0+IHAuc3RhdHVzID09PSBcImRvbmVcIik7XG5cbiAgICBjb25zdCBidWZmID0gW107XG4gICAgZm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XG4gICAgICBjb25zdCBmbSA9IHRhc2suZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgdGFzazogJHtmbS51dWlkfSBkb2VzIG5vdCBoYXZlIGEgZnJvbnRtYXR0ZXJgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbG9ncyA9IGR2XG4gICAgICAgIC5wYWdlcyhgXCIke3RoaXMubG9nRGlyfS8ke2ZtLnV1aWR9XCJgKVxuICAgICAgICAuc29ydCgoaykgPT4gay5jcmVhdGVkX2F0LCBcImFzY1wiKTtcbiAgICAgIGlmIChsb2dzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGB0YXNrOiAke2ZtLnV1aWR9IGhhcyBubyBMb2dzYCk7XG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihgdGFzazogJHt0YXNrSWR9IGhhcyBubyBMb2dzYCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxhc3RFbnRyeSA9IGxvZ3NbbG9ncy5sZW5ndGggLSAxXTtcbiAgICAgIGlmIChsYXN0RW50cnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChsYXN0RW50cnkuZmlsZS5mcm9udG1hdHRlci5kb25lX2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGB0YXNrOiAke2ZtLnV1aWR9IGxhc3QgZW50cnkgaXMgbWlzc2luZyAnZG9uZV9hdCcgZmllbGRgLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBmbS5kb25lQXQgPSBuZXcgRGF0ZShsYXN0RW50cnkuZmlsZS5mcm9udG1hdHRlci5kb25lX2F0KTtcbiAgICAgIGJ1ZmYucHVzaCh0YXNrKTtcbiAgICB9XG5cbiAgICBidWZmLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGNvbnN0IGRhdGVBID0gbmV3IERhdGUoYS5maWxlLmZyb250bWF0dGVyLmRvbmVBdCk7XG4gICAgICBjb25zdCBkYXRlQiA9IG5ldyBEYXRlKGIuZmlsZS5mcm9udG1hdHRlci5kb25lQXQpO1xuICAgICAgcmV0dXJuIChkYXRlQS5nZXRUaW1lKCkgLSBkYXRlQi5nZXRUaW1lKCkpICogLTE7XG4gICAgfSk7XG5cbiAgICBjb25zdCBhcnIgPSBbXTtcbiAgICBidWZmLmZvckVhY2goKGUpID0+IHtcbiAgICAgIGFyci5wdXNoKFtcbiAgICAgICAgZHYuc2VjdGlvbkxpbmsoXG4gICAgICAgICAgZS5maWxlLnBhdGgsXG4gICAgICAgICAgXCJDb250ZW50XCIsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgYCR7ZS5maWxlLmZyb250bWF0dGVyLnV1aWQuc2xpY2UoMCwgOCl9YCxcbiAgICAgICAgKSxcbiAgICAgICAgYCR7ZS5maWxlLmZyb250bWF0dGVyLmRvbmVBdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDE2KX1gLFxuICAgICAgXSk7XG4gICAgfSk7XG5cbiAgICAvLyBkdi50YWJsZShbXCJ1dWlkXCIsIFwiZG9uZUF0XCJdLCBhcnIpO1xuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0Esc0JBV087OztBQ1pBLElBQU0sUUFBUTtBQUFBLEVBQ3BCLE9BQU87QUFBQSxFQUNQLFlBQVk7QUFBQSxFQUNaLE9BQU87QUFBQSxFQUNQLFNBQVM7QUFBQSxFQUNULE9BQU87QUFBQSxFQUNQLE1BQU07QUFBQSxFQUNOLFVBQVU7QUFBQSxFQUNWLE1BQU07QUFBQSxFQUNOLGFBQWE7QUFBQSxFQUNiLFNBQVM7QUFBQSxFQUNULFdBQVc7QUFBQSxFQUNYLFVB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QUEsRUFDRDtBQUFBLEVBRUEscUJBQXFCLE1BQXNCO0FBRTFDLFFBQUksS0FBSztBQUNULFFBQUk7QUFDSCxXQUFLLEtBQUs7QUFBQSxJQUNYLFNBQVEsR0FBTjtBQUNELGFBQU8sQ0FBQyxHQUFHLENBQUM7QUFBQSxJQUNiO0FBQ0EsUUFBSSxRQUFRO0FBQ1osUUFBSSxRQUFRO0FBQ1osUUFBSSxNQUFNO0FBRVYsZUFBVyxXQUFXLEtBQUssVUFBVTtBQUNwQyxVQUNDLFFBQVEsVUFBVSxLQUNsQixRQUFRLFFBQVEsWUFBWSxNQUFNLFdBQ2pDO0FBQ0QsZ0JBQVE7QUFDUixnQkFBUSxRQUFRLFNBQVMsSUFBSTtBQUM3QjtBQUFBLE1BQ0Q7QUFFQSxVQUNDLFNBQ0EsUUFBUSxVQUFVLEtBQ2xCLFFBQVEsUUFBUSxZQUFZLE1BQU0sV0FDakM7QUFDRCxjQUFNLFFBQVEsU0FBUyxNQUFNO0FBQUEsTUFDOUI7QUFBQSxJQUNEO0FBQ0EsV0FBTyxLQUFLLE9BQU8sdUNBQXVDLEdBQUcsTUFBTTtBQUVuRSxRQUFJLFFBQVEsR0FBRztBQUNkLFlBQU0sS0FBSyxTQUFTLEtBQUssU0FBUyxTQUFTLENBQUMsRUFBRSxTQUFTLElBQUk7QUFBQSxJQUM1RDtBQUVBLFdBQU8sQ0FBQyxPQUFPLEdBQUc7QUFBQSxFQUNuQjtBQUFBLEVBRUEsZ0JBQWdCLE9BQStCO0FBQzlDLFFBQUksZUFBZTtBQUVuQixRQUFJLE1BQU0sU0FBUyxTQUFTLEtBQUssTUFBTSxTQUFTLENBQUMsRUFBRSxVQUFVLEdBQUc7QUFDL0QscUJBQWUsTUFBTSxTQUFTLENBQUMsRUFBRTtBQUFBLElBQ2xDLFdBQVcsTUFBTSxZQUFZLFVBQVUsUUFBVztBQUNqRCxVQUFJLE1BQU0sUUFBUSxNQUFNLFlBQVksS0FBSyxLQUFLLE1BQU0sWUFBWSxNQUFNLFNBQVMsR0FBRztBQUVqRix1QkFBZSxNQUFNLFlBQVksTUFBTSxDQUFDO0FBQUEsTUFDekMsT0FBTztBQUNOLHVCQUFlLE1BQU0sWUFBWTtBQUFBLE1BQ2xDO0FBQUEsSUFDRCxPQUFPO0FBQ04scUJBQWUsTUFBTSxZQUFZO0FBQUEsSUFDbEM7QUFDQSxXQUFPO0FBQUEsRUFFUjtBQUFBLEVBRUEsV0FBVztBQUNWLFlBQVEsSUFBSSxxQkFBcUI7QUFFakMsV0FBTyxPQUFPO0FBQUEsRUFDZjtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFNBQUssV0FBVyxPQUFPO0FBQUEsTUFDdEIsQ0FBQztBQUFBLE1BQ0Q7QUFBQSxNQUNBLE1BQU0sS0FBSyxTQUFTO0FBQUEsSUFDckI7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsRUFDbEM7QUFDRDsiLAogICJuYW1lcyI6IFsiZSIsICJhdCIsICJwYWdlIiwgImZtIiwgImFwcCIsICJmIiwgInJzIiwgInBhZ2VzIiwgImJ1ZmYiLCAiVmFsaWRhdGlvbkVycm9yIiwgImR2IiwgIm5vZGUiLCAiYXBwIl0KfQo=
