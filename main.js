/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  ExampleModal: () => ExampleModal,
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// constants.ts
var Paths = {
  Tasks: "813 Tasks",
  Components: "Components",
  Goals: "Goals",
  Slipbox: "803 Slipbox",
  Inbox: "800 Inbox",
  Refs: "802 Refs",
  Archives: "400 Archives",
  Logs: "600 Log",
  Attachments: "000 Attachments",
  Journal: "Journal",
  Resources: "Resources",
  Projects: "100 Projects",
  Domains: "Domains",
  Names: "Names"
};
var Status = {
  Todo: "todo",
  Doing: "doing",
  Done: "done",
  Maybe: "maybe",
  Standby: "standby",
  Trash: "trash"
};
var GoalStatus = {
  Reframe: "reframe",
  Research: "research",
  Operationalize: "operationalize",
  Planify: "planify",
  Dependant: "dependant",
  Active: "active",
  Failed: "failed",
  Success: "success"
};
var Types = {
  Fleeting: 13,
  Literature: 1,
  Permanent: 2,
  Task: 3,
  Praxis: 4,
  Provision: 5,
  Log: 6,
  Resource: 7,
  Media: 8,
  Project: 12,
  Org: 9,
  Domain: 10,
  Component: 11
};
var Namespace = {
  Area: "area",
  Context: "context",
  Layer: "layer",
  Org: "org",
  Project: "project"
};
var Default = {
  Area: "none",
  Context: "any",
  Layer: "none",
  Org: "none",
  Project: "none"
};

// node_modules/uuid/dist/esm-browser/stringify.js
var byteToHex = [];
for (i = 0; i < 256; ++i) {
  byteToHex.push((i + 256).toString(16).slice(1));
}
var i;
function unsafeStringify(arr, offset = 0) {
  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + "-" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + "-" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + "-" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + "-" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
}

// node_modules/uuid/dist/esm-browser/rng.js
var getRandomValues;
var rnds8 = new Uint8Array(16);
function rng() {
  if (!getRandomValues) {
    getRandomValues = typeof crypto !== "undefined" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);
    if (!getRandomValues) {
      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    }
  }
  return getRandomValues(rnds8);
}

// node_modules/uuid/dist/esm-browser/native.js
var randomUUID = typeof crypto !== "undefined" && crypto.randomUUID && crypto.randomUUID.bind(crypto);
var native_default = {
  randomUUID
};

// node_modules/uuid/dist/esm-browser/v4.js
function v4(options, buf, offset) {
  if (native_default.randomUUID && !buf && !options) {
    return native_default.randomUUID();
  }
  options = options || {};
  var rnds = options.random || (options.rng || rng)();
  rnds[6] = rnds[6] & 15 | 64;
  rnds[8] = rnds[8] & 63 | 128;
  if (buf) {
    offset = offset || 0;
    for (var i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }
    return buf;
  }
  return unsafeStringify(rnds);
}
var v4_default = v4;

// api.ts
async function notify(msg) {
  const PUSHOVER_URI = "api.pushover.net";
  const d = await app.vault.readJson(".pushover.json");
  const data = new URLSearchParams({
    message: msg,
    token: d.pushover_token,
    user: d.pushover_user
  });
  console.log(data.toString());
  await fetch(`https://${PUSHOVER_URI}/1/messages.json`, {
    method: "POST",
    // mode: 'no-cors',
    cache: "no-cache",
    headers: {
      "Content-type": "application/x-www-form-urlencoded"
    },
    body: data
  });
}
var FrontmatterJS = class {
  singular(values, field) {
    if (!Helper.nilCheck(this.fm[field])) {
      const value = this.fm[field];
      if (typeof value === "string") {
        if (!values.contains(value)) {
          values.push(value);
        }
      } else {
        console.warn(
          `'${field}' is ignored, invalid data-type: '${typeof this.fm[field]}'`
        );
      }
    }
  }
  plural(values, field) {
    if (!Helper.nilCheck(this.fm[field])) {
      if (!Array.isArray(this.fm[field])) {
        console.warn(
          `'${field}' is ignored, invalid data-type: '${field}'`
        );
      } else {
        for (const value of this.fm[field]) {
          if (typeof value === "string") {
            if (!values.contains(value)) {
              values.push(value);
            }
          } else {
            console.warn(
              `'${value}s.${value}' is ignored, invalid data-type: '${typeof value}'`
            );
          }
        }
      }
    }
  }
  constructor(page) {
    Assert.True(page !== void 0, "'page' is undefined");
    this.f = page.file;
    const f = this.f;
    Assert.True(f !== void 0, "'f' is undefined");
    this.fm = f.frontmatter;
    Assert.True(this.fm !== void 0, "'fm' is undefined");
    Assert.True(
      this.fm.uuid !== void 0,
      `'uuid' is undefined for '${this.f.path}'`
    );
    this.uuid = this.fm.uuid;
    this.version = this.fm.version;
    this.type = this.fm.type;
    this.createdAt = new Date(this.fm.created_at);
    this.at = this.fm.at !== void 0 ? new Date(this.fm.at) : new Date();
    this.before = this.fm.before !== void 0 ? new Date(this.fm.before) : new Date();
    this.after = this.fm.after !== void 0 ? new Date(this.fm.after) : new Date();
    this.components = [];
    this.domains = [];
    this.projects = [];
    this.contexts = [];
    this.traits = [];
    this.energy = this.fm.energy !== void 0 ? this.fm.energy : 9;
    const domains = [];
    const components = [];
    const projects = [];
    const names = [];
    const contexts = [];
    const contents = [];
    const traits = [];
    if (!Helper.nilCheck(this.fm.tags)) {
      if (!Array.isArray(this.fm.tags)) {
        console.warn("'tags' is ignored, invalid data-type");
        this.fm.tags = [];
      }
      for (const tag of this.fm.tags) {
        if (tag.slice(0, 7) === "domain/") {
          domains.push(tag.slice(7));
        } else if (tag.slice(0, 10) === "component/") {
          components.push(tag.slice(10));
        } else if (tag.slice(0, 8) === "project/") {
          projects.push(tag.slice(8));
        } else if (tag.slice(0, 5) === "name/") {
          names.push(tag.slice(5));
        } else if (tag.slice(0, 8) == "context/") {
          contexts.push(tag.slice(8));
        } else if (tag.slice(0, 8) == "content/") {
          contents.push(tag.slice(8));
        } else if (tag.slice(0, 6) == "trait/") {
          traits.push(tag.slice(6));
        }
      }
    }
    this.singular(domains, "domain");
    this.plural(domains, "domains");
    this.singular(components, "components");
    this.plural(components, "components");
    this.singular(projects, "project");
    this.plural(projects, "projects");
    this.singular(contents, "contents");
    this.plural(contents, "contents");
    this.singular(names, "name");
    this.plural(names, "names");
    this.plural(names, "alias");
    this.singular(traits, "trait");
    this.plural(traits, "traits");
    this.domains = domains;
    this.components = components;
    this.projects = projects;
    this.names = names;
    this.contexts = contexts;
    this.contents = contents;
    this.traits = traits;
  }
  getDomain(emptyDefault = true) {
    if (emptyDefault) {
      return this.domains[0];
    } else {
      return this.domains[0] === void 0 ? "unknown" : this.domains[0];
    }
  }
  getDomains() {
    return this.domains;
  }
  getTraits() {
    return this.traits;
  }
  getComponents() {
    return this.components;
  }
  getProject(emptyDefault = true) {
    if (emptyDefault) {
      return this.projects[0];
    } else {
      return this.projects[0] === void 0 ? "" : this.projects[0];
    }
  }
  getProjects() {
    return this.projects;
  }
  getName(emptyDefault = true) {
    if (emptyDefault) {
      return this.names[0];
    } else {
      return this.names[0] === void 0 ? "" : this.names[0];
    }
  }
  getContent(emptyDefault = true) {
    if (emptyDefault) {
      return this.contents[0];
    } else {
      return this.contents[0] === void 0 ? "" : this.contents[0];
    }
  }
  getNames() {
    return this.names;
  }
  getContext(emptyDefault = true) {
    if (emptyDefault) {
      return this.contexts[0];
    } else {
      return this.contexts[0] === void 0 ? "" : this.contexts[0];
    }
  }
  resolve(dv) {
    const domains = [];
    for (const domain of this.domains) {
      if (Helper.isUUID(domain)) {
        const pages = dv.pages(`"${Paths.Domains}"`).where((page) => page.file.frontmatter.uuid === domain);
        if (pages.length > 1) {
          throw new Error();
        } else if (pages.length === 1) {
          const page = pages[0];
          domains.push(page.file.frontmatter.name);
        }
      } else {
        const pages = dv.pages(`"${Paths.Domains}"`).where((page) => page.file.frontmatter.name === domain);
        if (pages.length > 1) {
          throw new Error();
        } else if (pages.length === 1) {
          const page = pages[0];
          domains.push(page.file.frontmatter.name);
        }
      }
    }
    if (domains.length !== this.domains.length) {
      console.warn(`Domain resolution failed for: ${this.domains}`);
    }
    this.domains = domains;
  }
};
var ValidationError = class extends Error {
  constructor(message) {
    super(message);
    this.name = "ValidationError";
  }
};
var Assert = {
  True(predicate, message, strict = true) {
    if (!predicate) {
      if (strict) {
        throw new ValidationError(message);
      } else {
        console.error(message);
      }
    }
  },
  False(predicate, message, strict = false) {
    if (predicate) {
      if (strict) {
        throw new ValidationError(message);
      } else {
        console.error(message);
      }
    }
  }
};
var Helper = {
  nilCheck(val) {
    return val === void 0 || val === null;
  },
  getKeyFuck(groupBy) {
    switch (groupBy) {
      default:
      case "doneAt":
        return (entry) => entry.file.frontmatter.doneAt.toISOString().slice(0, 10);
        break;
      case "createdAt":
        return (entry) => entry.file.frontmatter.createdAt.toISOString().slice(0, 10);
        break;
      case "project":
        return (entry) => entry.file.frontmatter.project;
        break;
      case "area":
        return (entry) => entry.file.frontmatter.area;
        break;
    }
  },
  getKey(groupBy) {
    switch (groupBy) {
      default:
      case "doneAt":
        return (entry) => entry.doneAt.toISOString().slice(0, 10);
        break;
      case "createdAt":
        return (entry) => entry.createdAt.toISOString().slice(0, 10);
        break;
      case "project":
        return (entry) => entry.project;
        break;
      case "area":
        return (entry) => entry.area;
        break;
    }
  },
  numberTypeToString(val) {
    switch (val.type) {
      case Types.Fleeting:
        return "fleeting";
      case Types.Log:
        return "log";
      case Types.Project:
        return "project";
      case Types.Org:
        return "org";
      case Types.Domain:
        return "domain";
      case Types.Component:
        return "component";
      default:
        throw new Error(
          `numberTypeToString: type: "${val.type}" not implemented "${val.uuid}"`
        );
    }
  },
  roundToOneDecimal(val) {
    return Math.round(val * 10) / 10;
  },
  isChildTag(parent, child) {
    if (child.length <= parent.length + 1) {
      return false;
    } else if (child.slice(0, parent.length + 1) != `${parent}/`) {
      return false;
    }
    return true;
  },
  getField(field, defaultValue) {
    if (field === void 0 || field === null) {
      return defaultValue;
    } else {
      return field;
    }
  },
  getDate(dt) {
    if (dt === "" || dt === null) {
      return void 0;
    } else if (dt !== void 0) {
      dt = new Date(dt);
      if (isNaN(dt)) {
        return void 0;
      } else {
        return dt;
      }
    } else {
      return void 0;
    }
  },
  getTag(fm, type, emptyDefault = void 0) {
    let name = "";
    let defaultValue = "";
    if (type === "area") {
      name = Namespace.Area;
      defaultValue = Default.Area;
    } else if (type === "context") {
      name = Namespace.Context;
      defaultValue = Default.Context;
    } else if (type === "layer") {
      name = Namespace.Layer;
      defaultValue = Default.Layer;
    } else if (type === "org") {
      name = Namespace.Org;
      defaultValue = Default.Org;
    } else if (type === "project") {
      name = Namespace.Project;
      defaultValue = Default.Project;
    } else if (type == "domain") {
      name = "domain";
      defaultValue = "none";
    } else {
      throw new Error(`getTag got unsuported type: '${type}'`);
    }
    const len = name.length + 1;
    const defaultTag = `${name}/${defaultValue}`;
    let defaultRetVal = defaultTag;
    if (emptyDefault) {
      defaultRetVal = void 0;
    }
    if (fm === void 0) {
      return defaultRetVal;
    }
    const tags = fm.tags;
    if (tags === void 0 || tags.length === 0) {
      return defaultRetVal;
    }
    for (const tag of tags) {
      if (tag == defaultTag) {
        return defaultRetVal;
      }
      if (tag.length > len && tag.slice(0, len) == `${name}/`) {
        return tag;
      }
    }
    return defaultRetVal;
  },
  getName(fm) {
    const components = Helper.getComponents(fm);
    if (components.length < 1) {
      throw new Error(`Helper.getName() ${fm}`);
    }
    let name = void 0;
    let occurences = 0;
    for (const component of components) {
      if (component.slice(0, 15) === "component/name/") {
        name = component.slice(15);
        occurences += 1;
      }
    }
    if (occurences > 1) {
      throw new Error(
        `Helper.getName() ${fm} multiple occurences of 'component/name'`
      );
    }
    if (name === void 0) {
      throw new Error(
        `Helper.getName() ${fm} 'component/name' undefined`
      );
    }
    return name;
  },
  getComponents(fm) {
    const components = [];
    if (Helper.nilCheck(fm.tags)) {
      return [];
    }
    for (const tag of fm.tags) {
      if (tag.length > 10 && tag.slice(0, 10) === "component/") {
        components.push(tag);
      }
    }
    return components;
  },
  getArea(fm, emptyDefault = false) {
    return Helper.getTag(fm, "area", emptyDefault);
  },
  getContext(fm, emptyDefault = false) {
    return Helper.getTag(fm, "context", emptyDefault);
  },
  getDomain(fm, emptyDefault = false) {
    return Helper.getTag(fm, "domain", emptyDefault);
  },
  getLayer(fm, emptyDefault = false) {
    return Helper.getTag(fm, "layer", emptyDefault);
  },
  getOrg(fm, emptyDefault = false) {
    return Helper.getTag(fm, "org", emptyDefault);
  },
  getProject(fm, emptyDefault = false) {
    return Helper.getTag(fm, "project", emptyDefault);
  },
  durationStringToSec(val) {
    if (val === void 0 || val.length === 0) {
      return 0;
    }
    const mult = val.slice(-1);
    let m = 0;
    if (mult === "h") {
      m = 60 * 60;
    } else if (mult === "m") {
      m = 60;
    } else if (mult === "d") {
      m = 24 * 60 * 60;
    } else if (mult == "w") {
      m = 24 * 60 * 60 * 7;
    } else {
      console.warn(`Unhandled case val: ${val}`);
      return void 0;
    }
    return m * parseInt(val.slice(0, -1));
  },
  msecToStringDuration(val) {
    const oneHourInMsec = 36e5;
    const oneDayInMsec = 864e5;
    if (val >= 24 * oneHourInMsec) {
      return String(Helper.roundToOneDecimal(val / oneDayInMsec)).padStart(
        2,
        "0"
      ) + " d";
    } else {
      return String(Helper.roundToOneDecimal(val / oneHourInMsec)).padStart(
        2,
        "0"
      ) + " h";
    }
  },
  isUUID(val) {
    if (typeof val !== "string") {
      return false;
    }
    return val.length === 36;
  },
  sortByAge(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    return fmA.createdAt.getTime() - fmB.createdAt.getTime();
  },
  sortByPriority(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    return fmB.fm.priority - fmA.fm.priority;
  },
  sortByPriorityAndAge(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    if (fmA.fm.priority !== fmB.fm.priority.priority) {
      return Helper.sortByPriority(a, b);
    } else {
      return Helper.sortByAge(a, b);
    }
  },
  sortByDuration(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    return Helper.durationStringToSec(fmA.fm.time_estimate) - Helper.durationStringToSec(fmB.fm.time_estimate);
  },
  sortByPriorityAndDuration(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    if (fmA.fm.priority !== fmB.fm.priority) {
      return Helper.sortByPriority(a, b);
    } else {
      return Helper.sortByDuration(a, b);
    }
  },
  sortByPriorityAndDurationAndAge(a, b) {
    const fmA = new FrontmatterJS(a);
    const fmB = new FrontmatterJS(b);
    if (fmA.fm.priority !== fmB.fm.priority) {
      return Helper.sortByPriority(a, b);
    } else if (fmA.fm.time_estimate !== fmB.fm.time_estimate) {
      return Helper.sortByDuration(a, b);
    } else {
      return Helper.sortByAge(a, b);
    }
  }
};
var AutoField = {
  tags(dv, fm, level = 2) {
    const tags = fm.tags;
    if (tags == void 0 || tags.length === 0) {
      return;
    }
    tags.sort();
    dv.header(level, "Tags");
    let s = "";
    for (const tag of tags) {
      s += ` #${tag}`;
    }
    dv.paragraph(s);
  },
  healmon(dv) {
    const fm = new FrontmatterJS(dv.current());
    const current = fm.createdAt.toISOString().slice(0, 10);
    const pages = dv.pages(`"${Paths.Journal}"`).where((page) => {
      const jFm = new FrontmatterJS(page);
      if (jFm.getProject() !== "homecook") {
        return false;
      }
      let jCurrent = null;
      const currentMinusOne = new Date(
        fm.createdAt.getTime() - 24 * 60 * 60 * 1e3
      );
      try {
        jCurrent = jFm.createdAt.toISOString().slice(0, 10);
      } catch (e) {
        dv.paragraph(
          `Invalid date: ${Renderer.makeLinkShortUUID(dv, page.file)}`
        );
        console.error(jFm);
      }
      if (currentMinusOne.toISOString().slice(0, 10) !== jCurrent) {
        return false;
      }
      return true;
    });
    dv.header(4, "repas (veille)");
    if (pages.length) {
      for (const page of pages) {
        dv.paragraph(Renderer.makeLinkShortUUID(dv, page.file));
      }
    }
  },
  authors(dv, fm) {
    const authors = fm.authors;
    if (authors === void 0 || authors.length === 0) {
      return;
    }
    dv.header(3, "Authors");
    dv.list(authors);
  },
  title(dv, fm) {
    const title = fm.alias;
    if (title === void 0 || title.length === 0) {
      return;
    }
    dv.header(3, title);
  },
  logs(dv, entries) {
    console.log("coucou, tu veux voir ma bite?");
    const buff = [];
    let totalTime = 0;
    for (const entry of entries) {
      const fme = entry.file.frontmatter;
      const e = [];
      let start = 0;
      let stop = 0;
      if (fme === void 0 || fme.created_at === void 0) {
        throw new Error(`Invalid frontmatter: ${fme.uuid}`);
      }
      start = new Date(fme.created_at);
      e.push(start.toISOString().slice(0, 10));
      if (fme.done_at === void 0) {
        stop = Date.now();
      } else {
        stop = new Date(fme.done_at);
      }
      totalTime += stop - start;
      e.push(
        dv.sectionLink(
          fme.uuid,
          "## Content",
          false,
          fme.uuid.slice(0, 8)
        )
      );
      e.push(Math.round((stop - start) / (1e3 * 60 * 60) * 10) / 10);
      if (fme.reviewed === void 0 || fme.reviewed === 0) {
        e.push(0);
      } else {
        e.push(fme.reviewed);
      }
      buff.push(e);
    }
    if (buff.length > 0) {
      dv.header(2, "Logs");
      dv.table(["created_at", "uuid", "session", "reviewed"], buff);
      if (totalTime > 0) {
        dv.paragraph(
          `_totalTime (h):_ ${Math.round(totalTime / (1e3 * 60 * 60) * 10) / 10}`
        );
      }
    }
  },
  media(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    const pages = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
    if (pages.length !== 1) {
      return;
    }
    const media = pages[0];
    const mediaFm = media.file.frontmatter;
    AutoField.title(dv, mediaFm);
    dv.paragraph(Renderer.makeLinkAlias(dv, media.file));
    AutoField.authors(dv, mediaFm);
    AutoField.tags(dv, mediaFm, 3);
    const logEntries = dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((p) => p.type === 6).sort((k) => k.created_at, "desc");
    AutoField.logs(dv, logEntries);
  },
  autoFieldTitle(dv, fm) {
    const title = fm.alias;
    if (title == void 0) {
      return;
    }
    dv.header(1, title);
  },
  autoFieldAuthors(dv, fm) {
    const authors = fm.authors;
    if (authors === void 0 || authors.length === 0) {
      return;
    }
    dv.header(2, "Authors");
    dv.list(authors);
  },
  autoFieldTags(dv, fm) {
    const tags = fm.tags;
    if (tags == void 0 || tags.length === 0) {
      return;
    }
    tags.sort();
    dv.header(2, "Tags");
    let s = "";
    for (const tag of tags) {
      s += ` #${tag}`;
    }
    dv.paragraph(s);
  },
  literature(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      return;
    }
    if (Helper.nilCheck(fm.authors)) {
    } else {
      this.autoFieldTitle(dv, fm);
      this.autoFieldAuthors(dv, fm);
      this.autoFieldTags(dv, fm);
    }
  },
  goal(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      console.warn("fm is required");
      return;
    }
    const created_at = new Date(fm.created_at);
    const logEntries = dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((p) => p.type === 6).sort((k) => k.created_at, "desc");
    const buff = [];
    for (const entry of logEntries) {
      const fme = entry.file.frontmatter;
      const e = [];
      if (fme === void 0 || fme.created_at === void 0) {
        throw new Error(`Invalid frontmatter: ${fme.uuid}`);
      }
      const start = new Date(fme.created_at);
      e.push(start.toISOString().slice(0, 10));
      e.push(
        dv.sectionLink(
          fme.uuid,
          "## Content",
          false,
          fme.uuid.slice(0, 8)
        )
      );
      buff.push(e);
    }
    const before = new Date(fm.before);
    const timeframe = (before.getTime() - created_at.getTime()) / (1e3 * 3600 * 24);
    let timeframeText = "";
    dv.header(3, "Timeframe");
    if (timeframe > 0 && timeframe < 30) {
      timeframeText = "runaway";
    } else if (timeframe < 60) {
      timeframeText = "10,000 feet";
    } else if (timeframe < 360) {
      timeframeText = "20,000 feet";
    } else if (timeframe < 720) {
      timeframeText = "30,000 feet";
    } else if (timeframe < 1080) {
      timeframeText = "40,000 feet";
    } else {
      timeframeText = "50,000 feet";
    }
    dv.paragraph(timeframeText);
    if (buff.length > 0) {
      dv.header(2, "Reviews");
      dv.table(["reviewed_at", "uuid"], buff);
    }
  },
  daily(dv) {
    const current = dv.current().file.frontmatter;
    const currentAt = new Date(current.at);
    const currentAtShort = currentAt.toISOString().slice(0, 10);
    const gonext = app.plugins.plugins.obsidian_gonext;
    const noteHelper = new NoteHelper(gonext, dv, new Frontmatter(gonext));
    const pages = dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (current.uuid === fm.uuid) {
        return false;
      }
      if (fm.fm.status !== "todo" || fm.getProject() === "daily") {
        return false;
      }
      const now = currentAt;
      let fmAtShort = void 0;
      try {
        fmAtShort = fm.at.toISOString().slice(0, 10);
      } catch (e) {
        throw new Error(`${fm.uuid}`);
      }
      if (!noteHelper.isDoable(page, currentAt)) {
        return false;
      }
      if (page.file.frontmatter.at !== void 0 && fmAtShort === currentAtShort) {
        return true;
      }
      if (page.file.frontmatter.at !== void 0 && fm.at.getTime() < now.getTime()) {
        return true;
      }
      if (page.file.frontmatter.before !== void 0 && fm.before.getTime() > now.getTime()) {
        return true;
      }
      if (page.file.frontmatter.after !== void 0 && fm.after.getTime() < now.getTime()) {
        return true;
      }
      return false;
    }).sort((k) => k.at, "asc");
    if (pages.length === 0) {
      return;
    }
    const buff = [];
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      const h = String(fm.at.getHours()).padStart(2, "0");
      const m = String(fm.at.getMinutes()).padStart(2, "0");
      if (page.file.frontmatter.status === "done") {
        buff.push([
          `~~${Renderer.makeLinkShortUUID(dv, page.file, "Task")}~~`,
          `~~${h}:${m}~~`
        ]);
      } else {
        buff.push([
          `${Renderer.makeLinkShortUUID(dv, page.file, "Task")}`,
          `${h}:${m}`
        ]);
      }
    }
    dv.table(["uuid", "at"], buff);
    AutoField.dailyJoural(dv);
  },
  dailyJoural(dv) {
    const current = new FrontmatterJS(dv.current());
    const currentAtShort = current.at.toISOString().slice(0, 10);
    console.log(currentAtShort);
    const pages = dv.pages(`"Journal"`).where((page) => {
      const fm = new FrontmatterJS(page);
      const atShort = fm.createdAt.toISOString().slice(0, 10);
      if (atShort === currentAtShort) {
        return true;
      }
      return false;
    }).sort((k) => k.created_at, "asc");
    dv.header(2, "Journal");
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      if (page.file.frontmatter.alias !== void 0) {
        page.file.frontmatter.name = page.file.frontmatter.alias;
      } else if (fm.getProject() !== void 0) {
        page.file.frontmatter.name = fm.getProject();
      } else if (fm.getDomain() !== void 0) {
        page.file.frontmatter.name = fm.getDomain();
      }
      dv.paragraph(Renderer.makeLinkName(dv, page.file));
    }
  },
  dailyGoals(dv) {
    const current = dv.current().file.frontmatter;
    const currentAt = new Date(current.at);
    const pages = dv.pages(`"${Paths.Goals}"`).where((page) => {
      if (page.file.frontmatter.status !== "active") {
        return false;
      } else {
        return true;
      }
    }).sort((k) => k.at, "asc");
    if (pages.length === 0) {
      return;
    }
    for (const page of pages) {
      dv.paragraph(Renderer.makeLinkShortUUID(dv, page.file));
    }
  },
  task(dv) {
    const dvLib = new DvLib();
    dvLib.autoFieldTask(dv);
  },
  log(dv) {
    const current = dv.current();
    const curFm = new FrontmatterJS(current);
    const currentId = curFm.uuid;
    const currentParentId = current.file.path.split("/")[1];
    Assert.True(
      currentParentId !== void 0,
      `currentParentId undefined for ${curFm.uuid}`
    );
    const pages = dv.pages(`"${Paths.Logs}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      const parentId = page.file.path.split("/")[1];
      Assert.True(
        parentId !== void 0,
        `parentId undefined for ${fm.uuid}`
      );
      if (parentId !== currentParentId) {
        return false;
      }
      return true;
    }).sort((k) => k.created_at, "asc");
    for (let i = 0; i < pages.length; i++) {
      const page = pages[i];
      Assert.True(page !== void 0, "ass ert failed");
      const fm = new FrontmatterJS(page);
      if (fm.uuid === currentId) {
        if (i === 0) {
          const dvLib = new DvLib();
          dvLib.autoFieldLog(dv);
        } else {
          dv.paragraph(Renderer.makeLinkShortUUID(dv, pages[i - 1].file));
        }
      }
    }
  }
};
var Renderer = {
  makeLinkName(dv, f, anchor = "Content") {
    if (Helper.nilCheck(f.frontmatter.name)) {
      return Renderer.makeLinkShortUUID(dv, f, anchor);
    }
    return dv.sectionLink(f.path, anchor, false, `${f.frontmatter.name}`);
  },
  makeLinkAlias(dv, f, anchor = "Content") {
    if (Helper.nilCheck(f.frontmatter.alias)) {
      return Renderer.makeLinkShortUUID(dv, f, anchor);
    }
    return dv.sectionLink(f.path, anchor, false, `${f.frontmatter.alias}`);
  },
  makeLinkShortUUID(dv, f, anchor = "Content") {
    return dv.sectionLink(
      f.path,
      anchor,
      false,
      `${f.frontmatter.uuid.slice(0, 8)}`
    );
  },
  makeLink(dv, f, name = void 0, anchor = "Content") {
    return dv.sectionLink(f.path, anchor, false, name);
  },
  projectLogs(dv, data) {
    const cols = ["type", "task_id", "log_id", "took", "reviewed"];
    const buff = [];
    let totalTime = 0;
    for (const d of data) {
      const f = d.file;
      const fm = d.file.frontmatter;
      Assert.True(
        !Helper.nilCheck(fm.uuid),
        `"uuid" id not defined for: ${f.path}`
      );
      Assert.True(
        !Helper.nilCheck(fm.type),
        `"type" id not defined for: ${f.path}`
      );
      const createdAt = new Date(fm.created_at);
      const doneAt = new Date(fm.done_at);
      const delta = doneAt.getTime() - createdAt.getTime();
      totalTime += delta;
      const record = {
        taskId: "",
        logId: Renderer.makeLinkAlias(dv, f),
        took: Math.round(delta / (1e3 * 60 * 60) * 10) / 10,
        reviewed: Helper.nilCheck(fm.reviewed) ? 0 : fm.reviewed,
        type: void 0
      };
      const pages = dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
      if (pages.length !== 1) {
        throw new Error(
          `parent task with id: "${fm.parent_id}" does not exists`
        );
      }
      const parent = pages[0];
      switch (parent.file.frontmatter.type) {
        case Types.Task:
          record.type = `<font color=8B0000>task</font>`;
          record.taskId = Renderer.makeLinkShortUUID(
            dv,
            parent.file,
            "Task"
          );
          break;
        case Types.Media:
          record.type = `<font color=00008B>media</font>`;
          record.taskId = Renderer.makeLinkShortUUID(
            dv,
            parent.file,
            "Content"
          );
          break;
        case Types.Praxis:
          record.type = `<font color=FF8C00>praxis</font>`;
          record.taskId = Renderer.makeLinkShortUUID(
            dv,
            parent.file,
            "Content"
          );
          break;
        case Types.Provision:
          record.type = `<font color=DC143C>provision</font>`;
          record.taskId = Renderer.makeLinkShortUUID(
            dv,
            parent.file,
            "Content"
          );
          break;
        default:
          throw new Error(
            `Renderer.projectLogs: type "${parent.file.frontmatter.type}" not implemented`
          );
      }
      buff.push([
        record.type,
        record.taskId,
        record.logId,
        record.took,
        record.reviewed
      ]);
    }
    dv.table(cols, buff);
  },
  goal(dv, data) {
    const buff = [];
    for (const fm of data) {
      const created_at = fm.createdAt;
      const logEntries = dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((p) => p.type === 6).sort((k) => k.created_at, "desc");
      const before = new Date(fm.fm.before);
      const timeframe = (before.getTime() - created_at.getTime()) / (1e3 * 3600 * 24);
      let timeframeText = "";
      if (timeframe > 0 && timeframe < 30) {
        timeframeText = "runaway";
      } else if (timeframe < 60) {
        timeframeText = "10,000 feet";
      } else if (timeframe < 360) {
        timeframeText = "20,000 feet";
      } else if (timeframe < 720) {
        timeframeText = "30,000 feet";
      } else if (timeframe < 1080) {
        timeframeText = "40,000 feet";
      } else {
        timeframeText = "50,000 feet";
      }
      buff.push([
        before.toISOString().slice(0, 10),
        dv.sectionLink(
          fm.uuid,
          "## Content",
          false,
          fm.uuid.slice(0, 8)
        ),
        fm.getDomain(),
        timeframeText
      ]);
    }
    dv.table(["deadline", "uuid", "domain", "timeframe"], buff);
  },
  inboxEntry(dv, data) {
    const cols = [
      "uuid",
      // "type",
      // "age",
      // "size",
      "name"
      // "project",
      // "domain",
      // "components",
    ];
    const buff = [];
    for (const d of data) {
      const f = d.file;
      const fm = d.file.frontmatter;
      Assert.True(
        !Helper.nilCheck(fm.uuid),
        `"uuid" id not defined for: ${f.path}`
      );
      Assert.True(
        !Helper.nilCheck(fm.type),
        `"type" id not defined for: ${f.path}`
      );
      const now = new Date();
      const delta = now.getTime() - fm.createdAt.getTime();
      const since = Helper.msecToStringDuration(delta);
      let name = "";
      if (fm.domain !== "domain/undefined") {
        name = fm.domain;
      } else if (fm.project !== void 0) {
        name = fm.project;
      } else {
        name = "\\-";
      }
      const record = {
        uuid: Helper.numberTypeToString(fm) === "fleeting" ? `&#128196 ${Renderer.makeLinkAlias(dv, f)}` : Renderer.makeLinkAlias(dv, f),
        // uuid: `&#9728 ${Renderer.makeLinkAlias(dv, f)}`,
        type: Helper.numberTypeToString(fm),
        since: `${since}`,
        size: f.size,
        project: fm.project === void 0 ? "\\-" : fm.project.slice(8),
        domain: fm.domain === void 0 ? "\\-" : fm.domain.slice(7),
        //Renderer.domainBase(dv, fm.domain),
        name
      };
      if (record.type === "log") {
        const pages = dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
        if (pages.length !== 1) {
          throw new Error(`${fm.parent_id} ${fm.id}`);
        }
        const parent = pages[0];
        switch (parent.type) {
          case Types.Task:
            record.uuid = `&#128211 ${record.uuid}`;
            record.type = `<font color=8B0000>task</font>`;
            break;
          case Types.Praxis:
            record.uuid = `&#128188 ${record.uuid}`;
            record.type = `<font color=FF8C00>praxis</font>`;
            break;
          case Types.Media:
            record.uuid = `&#128191 ${record.uuid}`;
            record.type = `<font color=00008B>media</font>`;
            break;
          case Types.Provision:
            record.type = `<font color=DC143C>provision</font>`;
            break;
          default:
            break;
        }
      }
      buff.push([
        record.uuid,
        // record.type,
        // record.since,
        // record.size,
        record.name
        // record.project,
        // record.domain,
      ]);
    }
    dv.table(cols, buff);
  },
  resourceBase(dv, data) {
    const cols = ["uuid"];
    const buff = [];
    for (const d of data) {
      const f = d.file;
      const fm = d.file.frontmatter;
      Assert.True(
        !Helper.nilCheck(fm.uuid),
        `"uuid" id not defined for: ${f.path}`
      );
      buff.push([Renderer.makeLinkAlias(dv, f)]);
    }
    dv.table(cols, buff);
  },
  basicRelation(dv, data) {
    const cols = ["uuid", "name"];
    const buff = [];
    for (const d of data) {
      const f = d.file;
      const fm = d.file.frontmatter;
      Assert.True(
        !Helper.nilCheck(fm.uuid),
        `"uuid" id not defined for: ${f.path}`
      );
      buff.push([Renderer.makeLinkAlias(dv, f), fm.name]);
    }
    dv.table(cols, buff);
  },
  praxisBase(dv, data) {
    const buff = [];
    const cols = ["tasks", "uuid", "estimate"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      buff.push([
        dv.markdownTaskList(f.tasks),
        dv.fileLink(f.path, false, f.name.slice(0, 8)),
        fm.time_estimate
      ]);
    }
    dv.table(cols, buff);
  },
  waitingTask(dv, data) {
    const buff = [];
    const cols = ["tasks", "uuid", "estimate", "cause"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      buff.push([
        dv.markdownTaskList(f.tasks),
        dv.fileLink(f.path, false, f.name.slice(0, 8)),
        fm.time_estimate,
        fm.cause
      ]);
    }
    dv.table(cols, buff);
  },
  readyTask(dv, data) {
    const buff = [];
    const cols = ["uuid", "task", "estimate", "area"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      buff.push([
        Renderer.makeLinkAlias(dv, f, "Task"),
        dv.markdownTaskList(f.tasks),
        fm.time_estimate,
        Helper.getField(Helper.getArea(fm, true), "\\-")
      ]);
    }
    dv.table(cols, buff);
  },
  provisionBase(dv, data) {
    const buff = [];
    const cols = ["uuid", "supplier", "content", "estimate"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      buff.push([
        dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
        fm.supplier,
        dv.markdownTaskList(f.tasks),
        fm.time_estimate
      ]);
    }
    dv.table(cols, buff);
  },
  basicTaskJournalNextAction(dv, data) {
    const buff = [];
    const cols = ["uuid", "priority", "estimate", "tasks"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const domain = Helper.getDomain(fm, true) === void 0 ? "\\-" : Helper.getDomain(fm);
      if (fm.ref_id === void 0) {
        buff.push([
          // journal.contains(fm.uuid) ? "->" : "\\-",
          dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
          fm.priority,
          fm.time_estimate,
          dv.markdownTaskList(f.tasks)
        ]);
      } else {
        const ref = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
        if (ref.length === 0) {
          throw new Error(
            `task: '${fm.uuid}' has an undefined ref_id: '${fm.ref_id}'`
          );
        } else {
          buff.push([
            dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
            Renderer.makeLinkAlias(dv, ref[0].file),
            fm.time_estimate,
            domain
          ]);
        }
      }
    }
    dv.table(cols, buff);
  },
  basicTaskJournalWaiting(dv, data) {
    const buff = [];
    const cols = ["uuid", "cause", "tasks"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const domain = Helper.getDomain(fm, true) === void 0 ? "\\-" : Helper.getDomain(fm);
      if (fm.ref_id === void 0) {
        buff.push([
          // journal.contains(fm.uuid) ? "->" : "\\-",
          dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
          d.cause,
          dv.markdownTaskList(f.tasks)
        ]);
      } else {
        const ref = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
        if (ref.length === 0) {
          throw new Error(
            `task: '${fm.uuid}' has an undefined ref_id: '${fm.ref_id}'`
          );
        } else {
          buff.push([
            dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
            Renderer.makeLinkAlias(dv, ref[0].file),
            fm.time_estimate,
            domain
          ]);
        }
      }
    }
    dv.table(cols, buff);
  },
  basicTaskJournal(dv, data) {
    const buff = [];
    const cols = ["uuid", "tasks", "estimate"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const domain = Helper.getDomain(fm, true) === void 0 ? "\\-" : Helper.getDomain(fm);
      if (fm.ref_id === void 0) {
        buff.push([
          // journal.contains(fm.uuid) ? "->" : "\\-",
          dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
          dv.markdownTaskList(f.tasks),
          fm.time_estimate
        ]);
      } else {
        const ref = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
        if (ref.length === 0) {
          throw new Error(
            `task: '${fm.uuid}' has an undefined ref_id: '${fm.ref_id}'`
          );
        } else {
          buff.push([
            dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
            Renderer.makeLinkAlias(dv, ref[0].file),
            fm.time_estimate,
            domain
          ]);
        }
      }
    }
    dv.table(cols, buff);
  },
  activeTask(dv, data) {
    const buff = [];
    const cols = ["uuid", "tasks", "session"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const logs = dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((p) => p.type === 6).sort((k) => k.created_at, "desc");
      const last = logs[0];
      const createdAt = new Date(last.created_at);
      const now = new Date();
      buff.push([
        dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
        dv.markdownTaskList(f.tasks),
        ((t) => {
          return Math.round(t / (3600 * 1e3) * 10) / 10;
        })(now.getTime() - createdAt.getTime())
      ]);
    }
    dv.table(cols, buff);
  },
  basicTask(dv, data) {
    const buff = [];
    const cols = ["uuid", "tasks", "estimate", "domain"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const domain = Helper.getDomain(fm, true) === void 0 ? "\\-" : Helper.getDomain(fm);
      if (fm.ref_id === void 0) {
        buff.push([
          dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
          dv.markdownTaskList(f.tasks),
          fm.time_estimate,
          domain
        ]);
      } else {
        const ref = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
        if (ref.length === 0) {
          throw new Error(
            `task: '${fm.uuid}' has an undefined ref_id: '${fm.ref_id}'`
          );
        } else {
          buff.push([
            dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
            Renderer.makeLinkAlias(dv, ref[0].file),
            fm.time_estimate,
            domain
          ]);
        }
      }
    }
    dv.table(cols, buff);
  },
  logs(dv, entries) {
    const buff = [];
    let totalTime = 0;
    for (const entry of entries) {
      const fme = entry.file.frontmatter;
      const e = [];
      let start = 0;
      let stop = 0;
      if (fme === void 0 || fme.created_at === void 0) {
        throw new Error(`Invalid frontmatter: ${fme.uuid}`);
      }
      start = new Date(fme.created_at);
      e.push(start.toISOString().slice(0, 10));
      if (fme.done_at === void 0) {
        stop = Date.now();
      } else {
        stop = new Date(fme.done_at);
      }
      totalTime += stop - start;
      e.push(
        dv.sectionLink(
          fme.uuid,
          "## Content",
          false,
          fme.uuid.slice(0, 8)
        )
      );
      e.push(Math.round((stop - start) / (1e3 * 60 * 60) * 10) / 10);
      if (fme.reviewed === void 0 || fme.reviewed === 0) {
        e.push(0);
      } else {
        e.push(fme.reviewed);
      }
      buff.push(e);
    }
    if (buff.length > 0) {
      dv.header(2, "Logs");
      dv.table(["created_at", "uuid", "session", "reviewed"], buff);
      if (totalTime > 0) {
        dv.paragraph(
          `_totalTime (h):_ ${Math.round(totalTime / (1e3 * 60 * 60) * 10) / 10}`
        );
      }
    }
  },
  mediaWithLogs(dv, data) {
    const buff = [];
    const cols = ["uuid", "tasks", "estimate", "current", "domain"];
    for (const d of data) {
      const f = d.file;
      const fm = f.frontmatter;
      const ref = dv.pages(`"${Paths.Refs}/${fm.ref_id}"`).array();
      if (ref.length === 0) {
        throw new Error(
          `task: '${fm.uuid}' has an undefined ref_id: '${fm.ref_id}'`
        );
      }
      const domain = Helper.getDomain(fm, true) === void 0 ? "\\-" : Helper.getDomain(fm);
      const logEntries = dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((p) => p.type === Types.Log).sort((k) => k.created_at, "desc");
      let totalTime = 0;
      for (const entry of logEntries) {
        const fme = entry.file.frontmatter;
        const e = [];
        let start = 0;
        let stop = 0;
        if (fme === void 0 || fme.created_at === void 0) {
          throw new Error(`Invalid frontmatter: ${fme.uuid}`);
        }
        start = new Date(fme.created_at);
        try {
          e.push(start.toISOString().slice(0, 10));
        } catch (e2) {
          console.error(entry.uuid);
        }
        if (fme.done_at === void 0) {
          stop = Date.now();
        } else {
          stop = new Date(fme.done_at);
        }
        totalTime += stop - start;
      }
      buff.push([
        dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
        Renderer.makeLinkAlias(dv, ref[0].file),
        fm.time_estimate,
        `${Math.round(totalTime / (1e3 * 60 * 60) * 10) / 10}h`,
        domain
      ]);
    }
    dv.table(cols, buff);
  },
  taskDoneWithLogs(dv, data) {
    const buff = [];
    const cols = [
      "taskId",
      "logId",
      "createdAt",
      "doneAt",
      "timeEstimate",
      "took",
      "project"
    ];
    for (const d of data) {
      const f = d.file;
      const fm = d.file.frontmatter;
      const createdAt = new Date(fm.created_at);
      const doneAt = new Date(fm.done_at);
      const timeEstimate = "";
      const took = (doneAt - createdAt) / (1e3 * 3600);
      const pages = dv.pages(`"${Paths.Tasks}"`).where((page) => page.file.frontmatter.uuid === fm.parent_id);
      if (pages.length !== 1) {
        throw new Error();
      }
      const parent = pages[0];
      const parentFm = parent.file.frontmatter;
      const parentF = parent.file;
      buff.push([
        Renderer.makeLinkShortUUID(dv, parent.file, "Task"),
        Renderer.makeLinkShortUUID(dv, f),
        createdAt.toISOString().slice(0, 10),
        doneAt.toISOString().slice(0, 10),
        timeEstimate,
        ((t) => {
          return Math.round(t * 10) / 10;
        })(took),
        Helper.getProject(parentFm)
      ]);
    }
    dv.table(cols, buff);
  },
  projects(dv, pages) {
    const cols = ["name"];
    const buff = [];
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      buff.push([Renderer.makeLink(dv, page.file, fm.getName())]);
    }
    dv.table(cols, buff);
  },
  basicDoneTaskWithLogs(dv, data) {
    const cols = [
      "uuid",
      "createdAt",
      "doneAt",
      "timeEstimate",
      "took",
      "delta",
      "project",
      "area"
    ];
    dv.table(cols, data);
  },
  basicDoneTaskWithoutLogs(dv, data) {
    const cols = ["taskId", "createdAt", "project", "area"];
    dv.table(cols, data);
  },
  basicProgressedTaskWithLog(dv, data) {
    const cols = [
      "taskId",
      "logId",
      // "createdAt",
      // "doneAt",
      "took",
      // "tookAcc",
      "project"
      // "domain",
    ];
    dv.table(cols, data);
  },
  // dailyTask(dv, data) {
  // 	Renderer.makeLinkShortUUID(this.dv, page.file),
  // 	dv.
  // 				rs.push([
  // 					"paragraph",
  // 					Renderer.makeLinkShortUUID(this.dv, page.file),
  // 				]);
  // }
  do(dv, rs) {
    for (const row of rs) {
      switch (row[0]) {
        case "header":
          const [, level, heading] = row;
          dv.header(level, heading);
          break;
        case "paragraph":
          const [, text] = row;
          dv.paragraph(text);
          break;
        case "array":
          const [, renderer, data] = row;
          renderer(dv, data);
          break;
        case "stats":
          const [, name, unit, value] = row;
          dv.paragraph(`${name} (${unit}): ${value}`);
          break;
        default:
          throw new Error(`Unsuported opcode: "fuckoff"`);
      }
    }
  }
};
var Frontmatter = class {
  constructor(gonext) {
    this.gonext = gonext;
  }
  projectParseMeta(dv) {
    const current = dv.current();
    const projectName = current.file.folder.slice(
      Paths.Projects.length + 1
    );
    const projectDir = current.file.folder;
    if (projectName.contains("/")) {
      throw new Error(
        `projectDir: ${projectDir} folder: ${current.file.folder}`
      );
    }
    const pages = dv.pages(`"${projectDir}/meta"`).array();
    if (pages.length !== 1) {
      throw new Error(`len: ${pages.length}`);
    }
    const fm = pages[0].file.frontmatter;
    const uuid = fm.uuid;
    if (Helper.nilCheck(uuid)) {
      throw new Error(`project 'uuid' is not defined`);
    }
    const name = fm.name;
    if (Helper.nilCheck(name)) {
      throw new Error(`'name' is not defined`);
    }
    const domains = fm.domains;
    if (!Array.isArray(domains)) {
      throw new Error(`'domains' must be of array type`);
    }
    return {
      uuid,
      name,
      domains
    };
  }
  getCreatedAt(f) {
    return Helper.nilCheck(f.frontmatter.created_at) ? new Date(f.ctime.ts) : new Date(f.frontmatter.created_at);
  }
  getCurrentFrontmatter() {
    const file = this.gonext.workspace.getActiveFile();
    const fileContent = this.gonext.metadataCache.getFileCache(file);
    if (fileContent === void 0) {
      return void 0;
    }
    const fm = fileContent.frontmatter;
    if (fm === void 0) {
      return void 0;
    }
    return fm;
  }
  parseListByNamespace(fm) {
    const byAreas = fm.by_areas === void 0 ? [] : fm.by_areas;
    const byContexts = fm.by_contexts === void 0 ? [] : fm.by_contexts;
    const byLayers = fm.by_layers === void 0 ? [] : fm.by_layers;
    const byOrgs = fm.by_orgs === void 0 ? [] : fm.by_orgs;
    const byProjects = fm.by_projects === void 0 ? [] : fm.by_projects;
    return [byAreas, byContexts, byLayers, byOrgs, byProjects];
  }
  parseListBeforeAfter(fm) {
    const before = Helper.getDate(fm.before);
    const after = Helper.getDate(fm.after);
    return [before, after];
  }
  parseListFilterBy(fm) {
    if (fm === void 0) {
      return [];
    }
    const filterBy = fm.filter_by;
    if (!Array.isArray(filterBy)) {
      return [];
    }
    return filterBy;
  }
  parseListGroupBy(fm) {
    if (fm === void 0) {
      return "";
    }
    const groupBy = fm.group_by;
    if (!(typeof groupBy === "undefined") && !(typeof groupBy === "string")) {
      return "";
    }
    return groupBy;
  }
  parseAllProgressedTasks() {
    const fm = this.getCurrentFrontmatter();
    if (fm === void 0) {
      throw new Error(`Invalid frontmatter, cannot proceed`);
    }
    const groupBy = this.parseListGroupBy(fm);
    const filterBy = this.parseListFilterBy(fm);
    const [before, after] = this.parseListBeforeAfter(fm);
    return [groupBy, filterBy, before, after];
  }
  parseAllDoneTasks() {
    return this.parseAllProgressedTasks();
  }
  parseAllDoneTaskWithoutLog() {
    return this.parseAllProgressedTasks();
  }
  parseAllTodoAdHoc() {
    const fm = this.getCurrentFrontmatter();
    if (fm === void 0) {
      throw new Error(`Invalid frontmatter, cannot proceed`);
    }
    const groupBy = this.parseListGroupBy(fm);
    const filterBy = this.parseListFilterBy(fm);
    const [before, after] = this.parseListBeforeAfter(fm);
    const minPriority = Helper.getField(fm.min_priority, 0);
    return [groupBy, filterBy, before, after, minPriority];
  }
  parseInbox() {
    const fm = this.getCurrentFrontmatter();
    if (fm === void 0) {
      return [[], [], 0, 4294967295];
    }
    const source = Helper.nilCheck(fm.source) ? ["logs", "fleeting"] : fm.source;
    const groupBy = Helper.nilCheck(fm.group_by) ? "none" : fm.group_by;
    const filterBy = this.parseListFilterBy(fm);
    const minSize = Helper.nilCheck(fm.min_size) ? 0 : fm.min_size;
    const maxSize = Helper.nilCheck(fm.max_size) ? 4294967295 : fm.max_size;
    return [source, groupBy, filterBy, minSize, maxSize];
  }
  parseTodoList() {
    const fm = this.getCurrentFrontmatter();
    if (fm === void 0) {
      return [[], [], [], [], [], 0];
    }
    const [byAreas, byContexts, byLayers, byOrgs, byProjects] = this.parseListByNamespace(fm);
    const minPriority = Helper.getField(fm.min_priority, 0);
    return [byAreas, byContexts, byLayers, byOrgs, byProjects, minPriority];
  }
  parseDoneList() {
    const fm = this.getCurrentFrontmatter();
    if (fm === void 0) {
      return [[], [], [], [], [], [], []];
    }
    const [byAreas, byContexts, byLayers, byOrgs, byProjects] = this.parseListByNamespace(fm);
    const [before, after] = this.parseListBeforeAfter(fm);
    const fields = Helper.getField(fm.fields, []);
    const stats = Helper.getField(fm.stats, []);
    return [
      byAreas,
      byContexts,
      byLayers,
      byOrgs,
      byProjects,
      fields,
      stats,
      before,
      after
    ];
  }
};
var NoteHelper = class {
  constructor(gonext, dv, frontmatter) {
    this.gonext = gonext;
    this.dv = dv;
    this.frontmatter = frontmatter;
  }
  isDoable(task, at = void 0) {
    const fm = task.file.frontmatter;
    if (fm.status !== Status.Todo) {
      return false;
    }
    if (fm.after !== void 0) {
      const after = new Date(fm.after);
      if (Date.now() <= after.getTime()) {
        return false;
      }
    }
    if (at !== void 0) {
      const fmAt = new Date(fm.at);
      fmAt.setHours(0);
      fmAt.setMinutes(0);
      fmAt.setSeconds(0);
      if (at.getTime() < fmAt.getTime()) {
        return false;
      }
    } else {
      if (fm.at !== void 0) {
        const at2 = new Date(fm.at);
        if (Date.now() <= at2.getTime()) {
          return false;
        }
      }
    }
    const deps = fm.needs;
    if (deps === void 0 || deps.length === 0) {
      return true;
    }
    if (this.hasPendingDependencies(deps)) {
      return false;
    }
    return true;
  }
  hasPendingDependencies(deps) {
    for (const dep of deps) {
      const task = this.dv.pages(`"${Paths.Tasks}/${dep}"`).array();
      if (task.length === 0) {
        console.warn(
          `hasPendingDependencies: "${Paths.Tasks}/${dep}" task does not exists`
        );
        continue;
      }
      const fm = task[0].file.frontmatter;
      if (fm.type !== Types.Task && fm.type !== Types.Provision && fm.type !== Types.Praxis) {
        continue;
      }
      if (fm.status === Status.Todo) {
        return true;
      }
    }
    return false;
  }
  isChildTag(parent, child) {
    if (child.length <= parent.length + 1) {
      return false;
    } else if (child.slice(0, parent.length + 1) != `${parent}/`) {
      return false;
    }
    return true;
  }
  getNamespaceContent(ns) {
    const children = [];
    const pages = this.dv.pages(`#${ns}`);
    for (const p of pages) {
      const tags = p.file.frontmatter.tags;
      if (tags === void 0 || tags.length === 0) {
        continue;
      }
      for (const tag of tags) {
        if (this.isChildTag(ns, tag)) {
          const t = tag.slice(ns.length + 1);
          if (!children.contains(t)) {
            children.push(t);
          }
        }
      }
    }
    return children;
  }
  isLastRevision(page) {
    const revisionList = (dv, root, current) => {
      let head = current;
      while (true) {
        const pages = dv.pages(`"${root}"`).where(
          (page2) => page2.file.frontmatter.next === head.file.frontmatter.uuid
        );
        if (pages.length > 1) {
          throw new Error();
        } else if (pages.length === 0) {
          break;
        }
        head = pages[0];
      }
      const buff = [];
      let cur = head;
      while (true) {
        buff.push(cur);
        const fm2 = cur.file.frontmatter;
        if (fm2.next === void 0) {
          break;
        }
        const pages = dv.pages(`"${root}/${fm2.next}"`);
        if (pages.length === 0) {
          break;
        }
        cur = pages[0];
      }
      return buff;
    };
    const note = page;
    const fm = note.file.frontmatter;
    let revisions = [];
    switch (fm.type) {
      case Types.Permanent:
        revisions = revisionList(this.dv, Paths.Slipbox, note);
        break;
      case Types.Resource:
        revisions = revisionList(this.dv, Paths.Resources, note);
        break;
      default:
        throw new Error();
    }
    if (revisions.length <= 1) {
      return true;
    }
    return revisions[0].file.frontmatter.uuid === fm.uuid;
  }
};
var Generator = class {
  constructor(app2) {
    this.app = app2;
    this.dv = app2.dv;
    this.gonext = app2.gonext;
  }
  fleeting() {
    const dt = new Date();
    const note = {
      uuid: v4_default(),
      type: 13,
      version: "0.0.4",
      created_at: dt.toISOString(),
      path: "",
      data: ""
    };
    note.path = `800 Inbox/${note.uuid}.md`;
    note.data = `---
type: 13
uuid: "${note.uuid}"
created_at: "${note.created_at}"
version: "0.0.4"
---
## Content
`;
    const f = this.app.vault.create(note.path, note.data).then((f2) => {
      return f2;
    });
    const active = this.app.workspace.activeLeaf;
    const root = active.parent;
    this.app.workspace.createLeafInParent(root, root.children.length + 1);
    const leaf = root.children[root.children.length - 1];
    f.then((file) => {
      leaf.openFile(file, { active: true });
    });
  }
  journalEntry() {
    const dt = new Date();
    const note = {
      uuid: v4_default(),
      type: 20,
      version: "0.0.4",
      created_at: dt.toISOString(),
      path: "",
      data: ""
    };
    note.path = `Journal/${note.uuid}.md`;
    note.data = `---
type: 20
uuid: "${note.uuid}"
created_at: "${note.created_at}"
version: "0.0.4"
tags:
    - project/mission
---
## Content
### entry
`;
    return this.app.vault.create(note.path, note.data).then((f) => {
      return f;
    });
  }
};
var ListMaker = class {
  constructor(gonext, dv, frontmatter) {
    this.gonext = gonext;
    this.dv = dv;
    this.frontmatter = frontmatter;
    this.noteHelper = new NoteHelper(gonext, dv, frontmatter);
  }
  nameInNamespace(fm, ns) {
    let found = false;
    if (ns.length === 0) {
      return true;
    }
    for (const a of ns) {
      const root = a.split("/");
      Assert.True(root.length === 2, `Invalid tag: '${a}'`);
      const parent = root[0].slice(0, 1) === "!" ? root[0].slice(1) : root[0];
      const name = Helper.getTag(fm, parent);
      if (a.slice(0, 1) === "!") {
        if (name === a.slice(1)) {
          return false;
        } else {
          found = true;
        }
      } else {
        if (name === a) {
          found = true;
        } else {
          found = false;
        }
      }
    }
    return found;
  }
  myNameInNamespace(name, ns) {
    let found = false;
    if (ns.length === 0) {
      return true;
    }
    for (const a of ns) {
      if (a.slice(0, 1) === "!") {
        if (name === a.slice(1)) {
          return false;
        } else {
          found = true;
        }
      } else {
        if (name === a) {
          found = true;
        } else {
          found = false;
        }
      }
    }
    return found;
  }
  filterByNamespace(fm, byAreas, byContexts, byLayers, byOrgs, byProjects) {
    if (!this.myNameInNamespace(Helper.getArea(fm), byAreas)) {
      return false;
    }
    if (!this.myNameInNamespace(Helper.getContext(fm), byContexts)) {
      return false;
    }
    if (!this.myNameInNamespace(Helper.getLayer(fm), byLayers)) {
      return false;
    }
    if (!this.myNameInNamespace(Helper.getOrg(fm), byOrgs)) {
      return false;
    }
    if (!this.myNameInNamespace(Helper.getProject(fm), byProjects)) {
      return false;
    }
    return true;
  }
  filterByDate(dt, before, after) {
    if (before !== void 0 && dt.getTime() > before.getTime()) {
      return false;
    }
    if (after !== void 0 && dt.getTime() < after.getTime()) {
      return false;
    }
    return true;
  }
  goals() {
    const rs = [];
    const bins = {};
    bins[GoalStatus.Reframe] = [];
    bins[GoalStatus.Research] = [];
    bins[GoalStatus.Operationalize] = [];
    bins[GoalStatus.Planify] = [];
    bins[GoalStatus.Dependant] = [];
    bins[GoalStatus.Active] = [];
    bins[GoalStatus.Success] = [];
    bins[GoalStatus.Failed] = [];
    const pages = this.dv.pages(`"${Paths.Goals}"`).where((page) => {
      const fmp = page.file.frontmatter;
      if (bins[fmp.status] === void 0) {
        return true;
      } else {
        const fm = new FrontmatterJS(page);
        bins[fmp.status].push(fm);
        return false;
      }
    });
    const keys = Object.keys(bins);
    keys.sort();
    for (const k of keys) {
      const buff = bins[k];
      buff.sort((a, b) => {
        const dta = new Date(a.fm.before);
        const dtb = new Date(b.fm.before);
        return dta.getTime() - dtb.getTime();
      });
    }
    const displayGoals = (k, rs2) => {
      rs2.push(["header", 3, k]);
      const buff = bins[k];
      rs2.push(["array", Renderer.goal, buff]);
    };
    rs.push(["header", 2, "operational"]);
    displayGoals("active", rs);
    displayGoals("planify", rs);
    rs.push(["header", 2, "non-operational"]);
    displayGoals("reframe", rs);
    displayGoals("research", rs);
    displayGoals("operationalize", rs);
    rs.push(["header", 2, "done"]);
    displayGoals("success", rs);
    displayGoals("failed", rs);
    return rs;
  }
  projectTasksSheetRelationFrontmatter(dv) {
    const current = dv.current();
    const fm = new FrontmatterJS(current);
    return {
      name: fm.getName(),
      uuid: fm.uuid,
      active: fm.fm.active === void 0 || fm.fm.active === true ? true : false
    };
  }
  projectTasksSheetRelation(dv) {
    const project = this.projectTasksSheetRelationFrontmatter(dv);
    const rs = [];
    const bins = {
      nextAction: [],
      waitingFor: [],
      somedayMaybe: []
    };
    {
      const pages2 = dv.pages(`"Journal"`).where((page) => {
        const fm = new FrontmatterJS(page);
        return fm.getProject() === project.name;
      }).sort((k) => k.created_at, "desc");
      if (pages2.length > 0) {
        rs.push(["header", 2, `Journal (${pages2.length})`]);
        for (const page of pages2) {
          const fm = new FrontmatterJS(page);
          const text = Renderer.makeLink(
            dv,
            fm.f,
            `${fm.createdAt.toISOString().slice(0, 10)}`,
            "entry"
          );
          rs.push(["paragraph", text]);
        }
      }
    }
    const pages = dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (fm.fm.status === "done") {
        return false;
      }
      if (["daily", "weekly", "monthly"].contains(project.name)) {
        return false;
      } else if (project.name === "adhoc" && fm.getProject() === void 0) {
        page.file.frontmatter.project = "adhoc";
        return true;
      } else if (project.name === fm.getProject()) {
        return true;
      } else {
        return false;
      }
    });
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      if (this.noteHelper.isDoable(page)) {
        if (fm.fm.priority > 0) {
          bins.nextAction.push(page);
        } else {
          bins.somedayMaybe.push(page);
        }
      } else {
        if (fm.fm.needs !== void 0 && this.noteHelper.hasPendingDependencies(fm.fm.needs)) {
          page.cause = "dependencies";
        } else {
          const fmAt = fm.at;
          const currentAt = new Date();
          const fmAfter = fm.after;
          if (fm.fm.at !== void 0) {
            fmAt.setHours(0);
            fmAt.setMinutes(0);
            fmAt.setSeconds(0);
            fmAt.setMilliseconds(0);
            currentAt.setHours(0);
            currentAt.setMinutes(0);
            currentAt.setSeconds(0);
            currentAt.setMilliseconds(0);
          }
          if (fm.after !== void 0) {
            fmAfter.setHours(0);
            fmAfter.setMinutes(0);
            fmAfter.setSeconds(0);
            fmAfter.setMilliseconds(0);
          }
          console.log(`current: ${currentAt.getTime()}`);
          console.log(`at: ${fm.at.getTime()}`);
          console.log(`after: ${fm.after.getTime()}`);
          if (fm.fm.at !== void 0 && fmAt.getTime() > currentAt.getTime()) {
            page.cause = "at";
          } else if (fm.fm.after !== void 0 && fmAfter.getTime() < currentAt.getTime()) {
            page.cause = "after";
          } else {
            page.cause = "unknown";
          }
        }
        bins.waitingFor.push(page);
      }
    }
    if (bins.nextAction.length > 0) {
      rs.push(["header", 2, `Next Actions (${bins.nextAction.length})`]);
      bins.nextAction.sort(Helper.sortByPriorityAndDurationAndAge);
      rs.push([
        "array",
        Renderer.basicTaskJournalNextAction,
        bins.nextAction
      ]);
    }
    if (bins.waitingFor.length > 0) {
      rs.push(["header", 2, `Waiting (${bins.waitingFor.length})`]);
      bins.waitingFor.sort(Helper.sortByPriorityAndDurationAndAge);
      rs.push([
        "array",
        Renderer.basicTaskJournalWaiting,
        bins.waitingFor
      ]);
    }
    if (bins.somedayMaybe.length > 0) {
      rs.push(["header", 2, `Maybe (${bins.somedayMaybe.length})`]);
      bins.somedayMaybe.sort(Helper.sortByPriorityAndDurationAndAge);
      rs.push(["array", Renderer.basicTaskJournal, bins.somedayMaybe]);
    }
    return rs;
  }
  projectLogsSheetRelation(dv) {
    const project = this.projectTasksSheetRelationFrontmatter(dv);
    const filterBy = [];
    const rs = [];
    rs.push(["header", 2, "Logs"]);
    const logs = this.dv.pages(`"${Paths.Logs}"`).where((page) => {
      if (page.type !== Types.Log) {
        return false;
      }
      if (page.file.frontmatter.reviewed > 0) {
        return false;
      }
      return true;
    });
    const buff = {};
    for (const e of logs) {
      const fm = e.file.frontmatter;
      if (filterBy.length > 0 && !this.nameInNamespace(fm, filterBy)) {
        continue;
      }
      fm.createdAt = this.frontmatter.getCreatedAt(e.file);
      Assert.True(
        !Helper.nilCheck(fm.parent_id),
        `Missing field "parent_id" from log: "${fm.uuid}"`
      );
      const parent = this.dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
      if (parent.length !== 1) {
        continue;
      }
      Assert.True(
        parent.length === 1,
        `Parent: ${fm.parent_id} not found for log: "${fm.uuid}"`
      );
      fm.project = Helper.getProject(parent[0].file.frontmatter);
      fm.area = Helper.getArea(parent[0].file.frontmatter, true);
      if (fm.project !== `project/${project.name === "adhoc" ? "none" : project.name}`) {
        continue;
      }
      if (Helper.nilCheck(fm.done_at)) {
        continue;
      }
      const date = fm.done_at.slice(0, 10);
      if (buff[date] === void 0) {
        buff[date] = [e];
      } else {
        buff[date].push(e);
      }
    }
    const keys = Object.keys(buff);
    keys.sort();
    for (const date of keys) {
      buff[date].sort(
        (a, b) => b.file.frontmatter.createdAt.getTime() - a.file.frontmatter.createdAt.getTime()
      );
    }
    for (const date of keys.reverse()) {
      rs.push(["header", 3, date]);
      rs.push(["array", Renderer.projectLogs, buff[date]]);
    }
    return rs;
  }
  getProjectLogs(dv, project) {
    const logs = this.dv.pages(`"${Paths.Logs}"`).where((page) => {
      if (page.type !== Types.Log) {
        return false;
      }
      return true;
    });
    const buff = [];
    for (const e of logs) {
      const fm = e.file.frontmatter;
      Assert.True(
        !Helper.nilCheck(fm.parent_id),
        `Missing field "parent_id" from log: "${fm.uuid}"`
      );
      const parent = this.dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
      if (parent.length !== 1) {
        continue;
      }
      fm.project = Helper.getProject(parent[0].file.frontmatter);
      fm.area = Helper.getArea(parent[0].file.frontmatter, true);
      if (fm.project !== `project/${project.name === "adhoc" ? "none" : project.name}`) {
        continue;
      }
      if (Helper.nilCheck(fm.done_at)) {
        continue;
      }
      buff.push(e);
    }
    return buff;
  }
  projectLogsSheet(dv) {
    const project = this.frontmatter.projectParseMeta(dv);
    const fml = this.frontmatter.getCurrentFrontmatter();
    if (fml === void 0) {
      throw new Error(`Invalid frontmatter, cannot proceed`);
    }
    const before = Helper.nilCheck(fml.before) ? new Date(0) : new Date(fml.before);
    const after = Helper.nilCheck(fml.after) ? new Date() : new Date(fml.after);
    const filterBy = this.frontmatter.parseListFilterBy(fml);
    const rs = [];
    let totalTime = 0;
    rs.push(["header", 1, project.name]);
    const logs = this.dv.pages(`"${Paths.Logs}"`).where((page) => {
      if (page.type !== Types.Log) {
        return false;
      }
      return true;
    });
    const buff = {};
    for (const e of logs) {
      const fm = e.file.frontmatter;
      if (filterBy.length > 0 && !this.nameInNamespace(fm, filterBy)) {
        continue;
      }
      fm.createdAt = this.frontmatter.getCreatedAt(e.file);
      Assert.True(
        !Helper.nilCheck(fm.parent_id),
        `Missing field "parent_id" from log: "${fm.uuid}"`
      );
      const parent = this.dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
      if (parent.length !== 1) {
        continue;
      }
      fm.project = Helper.getProject(parent[0].file.frontmatter);
      fm.area = Helper.getArea(parent[0].file.frontmatter, true);
      if (fm.project !== `project/${project.name === "adhoc" ? "none" : project.name}`) {
        continue;
      }
      if (Helper.nilCheck(fm.done_at)) {
        continue;
      }
      const date = fm.done_at.slice(0, 10);
      const createdAt = new Date(fm.created_at);
      const doneAt = new Date(fm.done_at);
      if (createdAt > before) {
        continue;
      }
      if (createdAt < after) {
        continue;
      }
      if (buff[date] === void 0) {
        buff[date] = [e];
      } else {
        buff[date].push(e);
      }
      const delta = doneAt.getTime() - createdAt.getTime();
      totalTime += delta;
    }
    dv.paragraph(
      `_totalTime (h):_ ${Math.round(totalTime / (1e3 * 60 * 60) * 10) / 10}`
    );
    const keys = Object.keys(buff);
    keys.sort();
    for (const date of keys) {
      buff[date].sort(
        (a, b) => b.file.frontmatter.createdAt.getTime() - a.file.frontmatter.createdAt.getTime()
      );
    }
    for (const date of keys.reverse()) {
      rs.push(["header", 3, date]);
      rs.push(["array", Renderer.projectLogs, buff[date]]);
    }
    return rs;
  }
  logs() {
    const [groupBy, filterBy, before, after] = this.frontmatter.parseAllProgressedTasks();
    const tasks = this.dv.pages(`"${Paths.Tasks}"`).where((page) => page.file.frontmatter.status !== "doing");
    const buff = [];
    for (const task of tasks) {
      const fm = task.file.frontmatter;
      if (filterBy.length > 0 && !this.nameInNamespace(fm, filterBy)) {
        continue;
      }
      const timeEstimate = Helper.durationStringToSec(fm.time_estimate);
      if (timeEstimate === void 0 && fm.time_estimate !== void 0) {
        throw new Error(
          `Invalid value: "${fm.time_estimate}" for entry: "${fm.uuid}"`
        );
      } else {
        fm.timeEstimate = timeEstimate;
      }
      const logs = this.dv.pages(`"${Paths.Logs}/${fm.uuid}"`).where((page) => page.type === Types.Log).sort((k) => k.created_at, "asc");
      if (logs.length < 1) {
        continue;
      }
      fm.took = 0;
      const project = Helper.getField(Helper.getProject(fm, true), "");
      const area = Helper.getField(Helper.getArea(fm, true), "");
      for (const log of logs) {
        const fml = log.file.frontmatter;
        const entry = {
          alias: fm.alias,
          uuid: fm.uuid,
          logId: fml.uuid,
          estimate: fm.timeEstimate,
          project,
          area,
          domain: Helper.getField(Helper.getDomain(fm, true), ""),
          path: task.file.path,
          logPath: log.file.path,
          createdAt: void 0,
          doneAt: void 0,
          took: void 0,
          tookAcc: void 0,
          deltaAcc: void 0
        };
        if (fml.created_at === void 0) {
          console.error(log);
          throw new Error(
            `task: ${fm.uuid} last entry is missing 'created_at' field`
          );
        }
        if (fml.done_at === void 0) {
          console.error(log);
          throw new Error(
            `task: ${fm.uuid} last entry is missing 'done_at' field`
          );
        }
        entry.createdAt = new Date(fml.created_at);
        entry.doneAt = new Date(fml.done_at);
        if (!this.filterByDate(entry.doneAt, before, after)) {
          continue;
        }
        const took = (entry.doneAt.getTime() - entry.createdAt.getTime()) / 1e3;
        fm.took += took;
        entry.took = took;
        entry.tookAcc = fm.took;
        entry.deltaAcc = timeEstimate - fm.took;
        buff.push(entry);
      }
    }
    const keyGetter = Helper.getKey(groupBy);
    const bins = {};
    for (const entry of buff) {
      let d = void 0;
      try {
        d = keyGetter(entry);
      } catch (e) {
        throw new Error(entry);
      }
      if (bins[d] === void 0) {
        bins[d] = [entry];
      } else {
        bins[d].push(entry);
      }
    }
    const keys = Object.keys(bins);
    keys.sort();
    const rs = [];
    for (const key of keys.reverse()) {
      rs.push(["header", 2, key]);
      const arr = [];
      let totalTime = 0;
      for (const e of bins[key]) {
        const buff2 = [];
        buff2.push(
          Renderer.makeLinkShortUUID(
            this.dv,
            { path: e.path, frontmatter: { uuid: e.uuid } },
            "Task"
          )
        );
        buff2.push(
          Renderer.makeLinkShortUUID(
            this.dv,
            { path: e.logPath, frontmatter: { uuid: e.logId } },
            "Content"
          )
        );
        const convertSecondsToHours = (t) => {
          return Math.round(t / 3600 * 10) / 10;
        };
        buff2.push(`${convertSecondsToHours(e.took)}`);
        buff2.push(`${e.project}`);
        arr.push(buff2);
        totalTime += e.took;
      }
      totalTime = Math.round(totalTime / 3600 * 10) / 10;
      rs.push(["stats", "totalTime", "h", totalTime]);
      rs.push(["array", Renderer.basicProgressedTaskWithLog, arr]);
    }
    return rs;
  }
  inbox(dv) {
    const rs = [];
    const buff = [];
    const filterBy = [];
    const minSize = 0;
    const maxSize = 4294967295;
    const fleetings = this.dv.pages(`"${Paths.Inbox}"`).array();
    for (const e of fleetings) {
      const fm = e.file.frontmatter;
      e.file.frontmatter.createdAt = this.frontmatter.getCreatedAt(
        e.file
      );
      let fmjs = null;
      try {
        fmjs = new FrontmatterJS(e);
      } catch (ValidationError2) {
        console.log(e);
        dv.paragraph(Renderer.makeLink(dv, e.file));
        break;
      }
      fm.project = Helper.getProject(fm, true);
      fm.domain = `domain/${fmjs.getDomain()}`;
      fm.components = Helper.getComponents(fm);
      if (e.file.size < minSize) {
        continue;
      }
      if (e.file.size > maxSize) {
        continue;
      }
      buff.push(e);
    }
    const logs = [];
    for (const e of logs) {
      const fm = e.file.frontmatter;
      fm.createdAt = this.frontmatter.getCreatedAt(e.file);
      Assert.True(
        !Helper.nilCheck(fm.parent_id),
        `Missing field "parent_id" from log: "${fm.uuid}"`
      );
      const parent = this.dv.pages(`"${Paths.Tasks}/${fm.parent_id}"`).array();
      Assert.True(
        parent.length === 1,
        `Parent: ${fm.parent_id} not found for log: "${fm.uuid}"`
      );
      fm.project = Helper.getProject(parent[0].file.frontmatter, true);
      fm.domain = void 0;
      fm.components = [];
      if (e.file.size < minSize) {
        continue;
      }
      if (e.file.size > maxSize) {
        continue;
      }
      buff.push(e);
    }
    const sortBySizeThenDate = function(a, b) {
      const fA = a.file;
      const fB = b.file;
      if (fA.size !== fB.size) {
        return fB.size - fA.size;
      } else {
        return fA.frontmatter.createdAt.getTime() - fB.frontmatter.createdAt.getTime();
      }
    };
    const sortByAge = (a, b) => a.file.frontmatter.createdAt.getTime() - b.file.frontmatter.createdAt.getTime();
    buff.sort(sortByAge);
    rs.push(["array", Renderer.inboxEntry, buff]);
    return rs;
  }
  projects() {
    const rs = [];
    const bins = {
      active: [],
      inactive: []
    };
    const pages = this.dv.pages(`"Projects"`).sort((k) => k.name, "asc");
    for (const project of pages) {
      const fmProject = new FrontmatterJS(project);
      if (fmProject.fm.active === false) {
        bins.inactive.push(project);
        continue;
      } else if (fmProject.getName() === "adhoc") {
        bins.active.push(project);
        continue;
      } else if (["yearly", "monthly", "weekly", "daily"].contains(
        fmProject.getName()
      )) {
        continue;
      }
      const tasks = this.dv.pages(`#project/${fmProject.getName()}`).where((page) => {
        if (page.file.folder !== `${Paths.Tasks}`) {
          return false;
        }
        const fmTask = new FrontmatterJS(page);
        if (fmTask.fm.priority === 0) {
          return false;
        }
        if (["todo", "doing", "waiting"].contains(fmTask.fm.status)) {
          return true;
        }
        return false;
      });
      if (tasks.length > 0) {
        bins.active.push(project);
      } else {
        bins.inactive.push(project);
      }
    }
    rs.push(["header", 2, "Active"]);
    rs.push(["array", Renderer.projects, bins.active]);
    rs.push(["header", 2, "Inactive"]);
    rs.push(["array", Renderer.projects, bins.inactive]);
    return rs;
  }
  praxis() {
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      if (page.file.frontmatter.type !== Types.Praxis) {
        return false;
      }
      if (page.file.frontmatter.status !== Status.Todo) {
        return false;
      }
      return true;
    }).array();
    const rs = [];
    rs.push(["header", 1, "Praxis"]);
    rs.push(["array", Renderer.basicTask, pages]);
    return rs;
  }
  planning(lastWeek = 2) {
    const rs = [];
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (fm.at === void 0) {
        return false;
      }
      if (fm.getProject() !== "daily") {
        return false;
      }
      return true;
    }).sort((page) => page.file.frontmatter.at, "desc");
    const bins = {};
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      let at = void 0;
      try {
        at = fm.at.toISOString().slice(0, 10);
      } catch (e) {
        throw new Error(`Invalid date: '${fm.fm.uuid}'`);
      }
      const weekNumber = this.getWeekNumber(fm.at);
      if (bins[weekNumber] === void 0) {
        bins[weekNumber] = [fm];
      } else {
        bins[weekNumber].push(fm);
      }
    }
    const now = new Date();
    const currentWeekNumber = this.getWeekNumber(now);
    for (const key of Object.keys(bins)) {
      const weekNumber = Number(key);
      if (weekNumber + lastWeek < currentWeekNumber) {
        continue;
      }
      if (weekNumber < currentWeekNumber) {
        rs.push(["header", 2, `~~week ${key}~~`]);
      } else if (weekNumber === currentWeekNumber) {
        rs.push(["header", 2, `*week ${key}*`]);
      } else {
        rs.push(["header", 2, `week ${key}`]);
      }
      bins[key].sort((a, b) => {
        return a.at.getTime() - b.at.getTime();
      });
      for (const task of bins[key]) {
        const day = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][task.at.getDay()];
        const text = Renderer.makeLink(
          this.dv,
          task.f,
          `${task.at.toISOString().slice(0, 10)}, ${day}`,
          "Task"
        );
        if (weekNumber < currentWeekNumber) {
          rs.push(["paragraph", `~~${text}~~`]);
        } else if (weekNumber === currentWeekNumber) {
          if (this.dayOfYear(task.at) < this.dayOfYear(now)) {
            rs.push(["paragraph", `~~${text}~~`]);
          } else {
            rs.push(["paragraph", `${text}`]);
          }
        } else {
          rs.push(["paragraph", `${text}`]);
        }
      }
    }
    return rs;
  }
  dayOfYear(dt) {
    const year = dt.getFullYear();
    const month = dt.getMonth() + 1;
    const day = dt.getDate();
    const N1 = Math.floor(275 * month / 9);
    const N2 = Math.floor((month + 9) / 12);
    const N3 = 1 + Math.floor((year - 4 * Math.floor(year / 4) + 2) / 3);
    return N1 - N2 * N3 + day - 30;
  }
  getWeekNumber(d) {
    d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
    d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));
    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
    return Math.ceil(((d - yearStart) / 864e5 + 1) / 7);
  }
  getWeekNumber4(d) {
    d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
    const firstSunday = yearStart.getUTCDay() === 0 ? yearStart : new Date(
      Date.UTC(
        d.getUTCFullYear(),
        0,
        1 + (7 - yearStart.getUTCDay())
      )
    );
    const daysSinceFirstSunday = (d - firstSunday + 864e5) / 864e5;
    return Math.ceil(daysSinceFirstSunday / 7);
  }
  getMonth(year, weekNumber) {
    const firstDayOfYear = new Date(year, 0, 1);
    const firstDayOfWeek = firstDayOfYear.getDay();
    const daysToAdd = (weekNumber - 1) * 7 - firstDayOfWeek + (firstDayOfWeek === 0 ? 1 : 0);
    const weekStartDate = new Date(
      firstDayOfYear.setDate(firstDayOfYear.getDate() + daysToAdd)
    );
    if (weekStartDate.getDate() > 24) {
      weekStartDate.setDate(weekStartDate.getDate() + 7);
    }
    const monthNumber = weekStartDate.getMonth();
    return monthNumber + 1;
  }
  getMonthName(monthNumber) {
    const date = new Date(2e3, monthNumber - 1);
    return date.toLocaleString("default", { month: "long" });
  }
  energy(dv) {
    const current = dv.current();
    if (current.energy === void 0) {
      current.energy = 0;
    }
    let comp = void 0;
    switch (current.op) {
      case ">":
        comp = (a, b) => a > b;
        break;
      case ">=":
        comp = (a, b) => a >= b;
        break;
      case "<":
        comp = (a, b) => a < b;
        break;
      case "<=":
        comp = (a, b) => a <= b;
        break;
      default:
        comp = (a, b) => a === b;
        break;
    }
    const rs = [];
    const pages = dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (fm.getProject() === "daily") {
        return false;
      }
      if (fm.fm.status !== "todo") {
        return false;
      }
      return comp(fm.energy, current.energy);
    });
    rs.push([
      "array",
      (dv2, data) => {
        for (const entry of data) {
          console.log(entry);
          dv2.paragraph(
            Renderer.makeLinkAlias(dv2, entry.file, "## Task")
          );
        }
      },
      pages
    ]);
    return rs;
  }
  mandala(dv) {
    let mandalaLo = -1;
    let mandalaHi = -1;
    const now = new Date();
    {
      const weekNumber = this.getWeekNumber4(now);
      mandalaLo = weekNumber - 6;
      mandalaHi = weekNumber - 5;
      if (mandalaLo < 0 || mandalaHi < 0) {
        dv.paragraph(`weekNumber: ${weekNumber}`);
        dv.paragraph(`mandalaLo: ${mandalaLo}`);
        dv.paragraph(`mandalaHi: ${mandalaHi}`);
        return;
      }
      dv.paragraph(`weekNumber: ${weekNumber}`);
      dv.paragraph(`mandalaLo: ${mandalaLo}`);
      dv.paragraph(`mandalaHi: ${mandalaHi}`);
    }
    const rs = [];
    const bins = {};
    const suiviWeekly = {};
    const suiviMonthly = {};
    const suiviYearly = {};
    const pages = this.dv.pages(`"Journal"`).where((page) => {
      const fm = new FrontmatterJS(page);
      const weekNumber = this.getWeekNumber4(fm.createdAt);
      console.log(weekNumber);
      if (weekNumber >= mandalaLo && weekNumber <= mandalaHi && fm.createdAt.getFullYear() === now.getFullYear()) {
        return true;
      }
      return false;
    }).sort((page) => page.file.frontmatter.created_at, "desc");
    console.log(pages.length);
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      const weekNumber = this.getWeekNumber4(fm.createdAt);
      const year = fm.createdAt.getFullYear();
      const month = fm.createdAt.getMonth() + 1;
      let msg = "";
      msg += `createdAt: ${fm.createdAt.toISOString().slice(0, 10)}
`;
      msg += `weekNumber: ${weekNumber}
`;
      msg += `year: ${year}
`;
      msg += `month: ${month}
`;
      msg += `day: ${fm.createdAt.getDay()}
`;
      const day = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][fm.createdAt.getDay()];
      msg += `day: ${day}
`;
      console.log(msg);
      if (bins[year] === void 0) {
        bins[year] = {};
      }
      if (bins[year][weekNumber.toString()] === void 0) {
        bins[year][weekNumber.toString()] = {};
      }
      if (suiviMonthly[year] === void 0) {
        suiviMonthly[year] = {};
      }
      if (suiviWeekly[year] === void 0) {
        suiviWeekly[year] = {};
      }
      let tag = "";
      if (fm.getDomain() !== void 0) {
        tag = fm.getDomain();
      } else if (fm.getProject() !== void 0) {
        tag = fm.getProject();
      } else {
        tag = "adhoc";
      }
      if (tag == "weekly") {
        if (suiviWeekly[year][weekNumber] === void 0) {
          suiviWeekly[year][weekNumber] = [page];
        } else {
          suiviWeekly[year][weekNumber].push(page);
        }
        continue;
      } else if (tag === "monthly") {
        if (suiviMonthly[year][month] === void 0) {
          suiviMonthly[year][month] = [page];
        } else {
          suiviMonthly[year][month].push(page);
        }
        continue;
      } else if (tag === "yearly") {
        if (suiviYearly[year] === void 0) {
          suiviYearly[year] = [page];
        } else {
          suiviYearly[year].push(page);
        }
        continue;
      }
      if (bins[year][weekNumber][tag] === void 0) {
        bins[year][weekNumber][tag] = [page];
      } else {
        bins[year][weekNumber][tag].push(page);
      }
    }
    {
      const years = Object.keys(bins);
      let lastYear = 9999;
      let lastMonth = 13;
      years.sort().reverse();
      for (const year of years) {
        rs.push(["header", 2, year]);
        if (parseInt(year, 10) < lastYear) {
          lastMonth = 13;
          lastYear = parseInt(year, 10);
          if (suiviYearly[year] !== void 0) {
            for (const page of suiviYearly[year]) {
              const fm = new FrontmatterJS(page);
              rs.push([
                "paragraph",
                Renderer.makeLinkAlias(this.dv, fm.f)
              ]);
            }
          }
        }
        for (let week = 52; week > 0; week--) {
          const thisMonth = this.getMonth(year, week);
          if (suiviMonthly[year][thisMonth] !== void 0) {
            if (lastMonth !== thisMonth) {
              lastMonth = thisMonth;
              rs.push([
                "header",
                3,
                this.getMonthName(lastMonth)
              ]);
              if (suiviMonthly[year][thisMonth] !== void 0) {
                for (const page of suiviMonthly[year][thisMonth]) {
                  const fm = new FrontmatterJS(page);
                  rs.push([
                    "paragraph",
                    Renderer.makeLinkAlias(this.dv, fm.f)
                  ]);
                }
              }
            }
          }
          if (suiviWeekly[year][week] === void 0 && bins[year][week] === void 0) {
            continue;
          }
          rs.push(["header", 4, `week ${week.toString()}`]);
          if (suiviWeekly[year][week] !== void 0) {
            for (const page of suiviWeekly[year][week]) {
              const fm = new FrontmatterJS(page);
              rs.push([
                "paragraph",
                Renderer.makeLinkAlias(this.dv, fm.f)
              ]);
            }
          }
          if (bins[year][week] === void 0) {
            continue;
          }
          const tags = Object.keys(bins[year][week]);
          tags.sort();
          for (const tag of tags) {
            rs.push(["header", 5, tag]);
            bins[year][week][tag].sort((a, b) => {
              const fmA = new FrontmatterJS(a);
              const fmB = new FrontmatterJS(b);
              return fmB.createdAt.getTime() - fmA.createdAt.getTime();
            });
            for (const page of bins[year][week][tag]) {
              const fm = new FrontmatterJS(page);
              if (fm.type === 6) {
              } else {
                const d = fm.createdAt.toISOString().slice(0, 10);
                const day = [
                  "Sun",
                  "Mon",
                  "Tue",
                  "Wed",
                  "Thu",
                  "Fri",
                  "Sat"
                ][fm.createdAt.getDay()];
                const text = `${d}, ${day}`;
                rs.push([
                  "paragraph",
                  Renderer.makeLink(this.dv, fm.f, text)
                ]);
              }
            }
          }
        }
      }
    }
    return rs;
  }
  journal() {
    const rs = [];
    const bins = {};
    const suiviWeekly = {};
    const suiviMonthly = {};
    const suiviYearly = {};
    const pages = this.dv.pages(`"Journal"`).sort((page) => page.file.frontmatter.created_at, "desc");
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      const weekNumber = this.getWeekNumber4(fm.createdAt);
      const year = fm.createdAt.getFullYear();
      const month = fm.createdAt.getMonth() + 1;
      let msg = "";
      msg += `createdAt: ${fm.createdAt.toISOString().slice(0, 10)}
`;
      msg += `weekNumber: ${weekNumber}
`;
      msg += `year: ${year}
`;
      msg += `month: ${month}
`;
      msg += `day: ${fm.createdAt.getDay()}
`;
      const day = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][fm.createdAt.getDay()];
      msg += `day: ${day}
`;
      if (bins[year] === void 0) {
        bins[year] = {};
      }
      if (bins[year][weekNumber.toString()] === void 0) {
        bins[year][weekNumber.toString()] = {};
      }
      if (suiviMonthly[year] === void 0) {
        suiviMonthly[year] = {};
      }
      if (suiviWeekly[year] === void 0) {
        suiviWeekly[year] = {};
      }
      let tag = "";
      if (fm.getDomain() !== void 0) {
        tag = fm.getDomain();
      } else if (fm.getProject() !== void 0) {
        tag = fm.getProject();
      } else {
        tag = "adhoc";
      }
      if (tag == "weekly") {
        if (suiviWeekly[year][weekNumber] === void 0) {
          suiviWeekly[year][weekNumber] = [page];
        } else {
          suiviWeekly[year][weekNumber].push(page);
        }
        continue;
      } else if (tag === "monthly") {
        if (suiviMonthly[year][month] === void 0) {
          suiviMonthly[year][month] = [page];
        } else {
          suiviMonthly[year][month].push(page);
        }
        continue;
      } else if (tag === "yearly") {
        if (suiviYearly[year] === void 0) {
          suiviYearly[year] = [page];
        } else {
          suiviYearly[year].push(page);
        }
        continue;
      }
      if (bins[year][weekNumber][tag] === void 0) {
        bins[year][weekNumber][tag] = [page];
      } else {
        bins[year][weekNumber][tag].push(page);
      }
    }
    {
      const years = Object.keys(bins);
      let lastYear = 9999;
      let lastMonth = 13;
      years.sort().reverse();
      for (const year of years) {
        rs.push(["header", 2, year]);
        if (parseInt(year, 10) < lastYear) {
          lastMonth = 13;
          lastYear = parseInt(year, 10);
          if (suiviYearly[year] !== void 0) {
            for (const page of suiviYearly[year]) {
              const fm = new FrontmatterJS(page);
              rs.push([
                "paragraph",
                Renderer.makeLinkAlias(this.dv, fm.f)
              ]);
            }
          }
        }
        for (let week = 52; week > 0; week--) {
          const thisMonth = this.getMonth(year, week);
          if (suiviMonthly[year][thisMonth] !== void 0) {
            if (lastMonth !== thisMonth) {
              lastMonth = thisMonth;
              rs.push([
                "header",
                3,
                this.getMonthName(lastMonth)
              ]);
              if (suiviMonthly[year][thisMonth] !== void 0) {
                for (const page of suiviMonthly[year][thisMonth]) {
                  const fm = new FrontmatterJS(page);
                  rs.push([
                    "paragraph",
                    Renderer.makeLinkAlias(this.dv, fm.f)
                  ]);
                }
              }
            }
          }
          if (suiviWeekly[year][week] === void 0 && bins[year][week] === void 0) {
            continue;
          }
          rs.push(["header", 4, `week ${week.toString()}`]);
          if (suiviWeekly[year][week] !== void 0) {
            for (const page of suiviWeekly[year][week]) {
              const fm = new FrontmatterJS(page);
              rs.push([
                "paragraph",
                Renderer.makeLinkAlias(this.dv, fm.f)
              ]);
            }
          }
          if (bins[year][week] === void 0) {
            continue;
          }
          const tags = Object.keys(bins[year][week]);
          tags.sort();
          for (const tag of tags) {
            rs.push(["header", 5, tag]);
            bins[year][week][tag].sort((a, b) => {
              const fmA = new FrontmatterJS(a);
              const fmB = new FrontmatterJS(b);
              return fmB.createdAt.getTime() - fmA.createdAt.getTime();
            });
            for (const page of bins[year][week][tag]) {
              const fm = new FrontmatterJS(page);
              if (fm.type === 6) {
              } else {
                const d = fm.createdAt.toISOString().slice(0, 10);
                const day = [
                  "Sun",
                  "Mon",
                  "Tue",
                  "Wed",
                  "Thu",
                  "Fri",
                  "Sat"
                ][fm.createdAt.getDay()];
                const text = `${d}, ${day}`;
                rs.push([
                  "paragraph",
                  Renderer.makeLink(this.dv, fm.f, text)
                ]);
              }
            }
          }
        }
      }
    }
    return rs;
  }
  calendar() {
    const rs = [];
    const bins = {};
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (fm.fm.at === void 0 && fm.fm.before === void 0 && fm.fm.after === void 0) {
        return false;
      }
      if (fm.fm.status !== "todo") {
        return false;
      }
      if (fm.getProject() === "daily") {
        return false;
      }
      return true;
    });
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      let year = 0;
      let month = 0;
      let day = 0;
      if (fm.fm.before !== void 0) {
        year = fm.before.getFullYear();
        month = fm.before.getMonth();
        day = fm.before.getUTCDate();
      } else if (fm.fm.at !== void 0) {
        year = fm.at.getFullYear();
        month = fm.at.getMonth();
        day = fm.at.getUTCDate();
      } else if (fm.after !== void 0) {
        year = fm.after.getFullYear();
        month = fm.after.getMonth();
        day = fm.after.getUTCDate();
      } else {
        throw new Error();
      }
      if (bins[year] === void 0) {
        bins[year] = {};
      }
      if (bins[year][month] === void 0) {
        bins[year][month] = {};
      }
      if (bins[year][month][day] === void 0) {
        bins[year][month][day] = {};
      }
      if (bins[year][month][day]["at"] === void 0) {
        bins[year][month][day]["at"] = [];
      }
      if (bins[year][month][day]["before"] === void 0) {
        bins[year][month][day]["before"] = [];
      }
      if (bins[year][month][day]["after"] === void 0) {
        bins[year][month][day]["after"] = [];
      }
      if (fm.fm.before !== void 0) {
        bins[year][month][day]["before"].push(page);
      } else if (fm.fm.at !== void 0) {
        bins[year][month][day]["at"].push(page);
      } else {
        bins[year][month][day]["after"].push(page);
      }
    }
    {
      const years = Object.keys(bins);
      years.sort((a, b) => parseInt(a) - parseInt(b));
      for (const year of years) {
        rs.push(["header", 2, year]);
        const months = Object.keys(bins[year]);
        months.sort((a, b) => parseInt(a) - parseInt(b));
        for (const month of months) {
          rs.push([
            "header",
            3,
            `${["January", "Febuary", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"][month]}`
          ]);
          const days = Object.keys(bins[year][month]);
          days.sort((a, b) => parseInt(a) - parseInt(b));
          for (const day of days) {
            const weeks = [
              "Sun",
              "Mon",
              "Tue",
              "Wed",
              "Thu",
              "Fri",
              "Sat"
            ];
            const before = bins[year][month][day]["before"];
            const at = bins[year][month][day]["at"];
            const after = bins[year][month][day]["after"];
            console.log(
              `year: ${year}
month: ${month}
day: ${day}`
            );
            if (before.length > 0) {
              for (const page of before) {
                console.log("--- before ---");
                console.log(page);
                console.log("------");
                const fm = new FrontmatterJS(page);
                const text = `before: ${weeks[fm.before.getDay()]} ${day} ${fm.at.toISOString().slice(11, 16)} | ${fm.getProject()}`;
                rs.push([
                  "paragraph",
                  Renderer.makeLink(
                    this.dv,
                    fm.f,
                    text,
                    "Task"
                  )
                ]);
              }
            }
            if (at.length > 0) {
              at.sort((a, b) => {
                const fmA = new FrontmatterJS(a);
                const fmB = new FrontmatterJS(b);
                return fmB.at.getTime() - fmA.at.getTime();
              });
              for (const page of at) {
                console.log("--- at ---");
                console.log(page);
                console.log("------");
                const fm = new FrontmatterJS(page);
                const text = `at: ${weeks[fm.at.getDay()]} ${day} ${fm.at.toISOString().slice(11, 16)} | ${fm.getProject()}`;
                rs.push([
                  "paragraph",
                  Renderer.makeLink(
                    this.dv,
                    fm.f,
                    text,
                    "Task"
                  )
                ]);
              }
            }
            if (after.length > 0) {
              for (const page of after) {
                console.log("--- after ---");
                console.log(page);
                console.log("------");
                const fm = new FrontmatterJS(page);
                const text = ` after: ${weeks[fm.after.getDay()]} ${day} ${fm.at.toISOString().slice(11, 16)} | ${fm.getProject()}`;
                rs.push([
                  "paragraph",
                  Renderer.makeLink(
                    this.dv,
                    fm.f,
                    text,
                    "Task"
                  )
                ]);
              }
            }
          }
        }
      }
    }
    return rs;
  }
  globalTaskList(pages) {
    const rs = [];
    const bins = {};
    for (const page of pages) {
      const fm = new FrontmatterJS(page);
      if (fm.getProject() === void 0) {
        fm.projects = ["adhoc"];
      }
      if (bins[fm.getProject()] === void 0) {
        bins[fm.getProject()] = [page];
      } else {
        bins[fm.getProject()].push(page);
      }
    }
    const projects = Object.keys(bins);
    projects.sort();
    for (const project of projects) {
      const tasks = bins[project];
      tasks.sort(Helper.sortByPriorityAndDurationAndAge);
      rs.push(["header", 2, `${project}`]);
      rs.push(["array", Renderer.basicTaskJournal, tasks]);
    }
    return rs;
  }
  nextActions(dv) {
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (["daily", "weekly", "monthly", "yearly"].contains(
        fm.getProject()
      )) {
        return false;
      }
      if (!this.projectIsActive(fm.getProject())) {
        return false;
      }
      if (!this.noteHelper.isDoable(page)) {
        return false;
      }
      if (fm.fm.priority === 0) {
        return false;
      }
      return true;
    });
    return this.globalTaskList(pages);
  }
  waitingFor(dv) {
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (["daily", "weekly", "monthly", "yearly"].contains(
        fm.getProject()
      )) {
        return false;
      }
      if (!["todo", "waiting"].contains(fm.fm.status)) {
        return false;
      }
      if (!this.projectIsActive(fm.getProject())) {
        return false;
      }
      if (this.noteHelper.isDoable(page) || fm.fm.priority === 0) {
        return false;
      }
      return true;
    });
    return this.globalTaskList(pages);
  }
  projectIsActive(name) {
    const project = this.dv.pages(`"Projects"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (fm.getName() !== name) {
        return false;
      }
      if (fm.fm.active === false) {
        return false;
      }
      return true;
    });
    return project.length > 0;
  }
  somedayMaybe(dv) {
    const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
      const fm = new FrontmatterJS(page);
      if (["daily", "weekly", "monthly", "yearly"].contains(
        fm.getProject()
      )) {
        return false;
      }
      if (!this.projectIsActive(fm.getProject())) {
        return false;
      }
      if (!this.noteHelper.isDoable(page) || fm.fm.priority > 0) {
        return false;
      }
      return true;
    });
    return this.globalTaskList(pages);
  }
};
var DvLib = class {
  constructor() {
    this.taskDir = "813 Tasks";
    this.inboxDir = "800 Inbox";
    this.refDir = "802 Refs";
    this.logDir = "600 Log";
    this.Task = {
      BASE: 3,
      DAILY: 4
    };
    this.Type = {
      TASK: 3,
      DAILY: 4,
      LOG: 6
    };
    this.Status = {
      TODO: "todo",
      DONE: "done",
      DOING: "doing",
      TRASH: "trash",
      MAYBE: "maybe",
      STANDBY: "standby"
    };
    this.Namespace = {
      AREA: "area",
      CONTEXT: "context",
      LAYER: "layer",
      ORG: "org",
      PROJECT: "project"
    };
    this.Default = {
      AREA: "none",
      CONTEXT: "any",
      LAYER: "none",
      ORG: "none",
      PROJECT: "none"
    };
    this._dv = "";
  }
  set dv(mod) {
    this._dv = mod;
  }
  get dv() {
    return this._dv;
  }
  isChildTag(parent, child) {
    if (child.length <= parent.length + 1) {
      return false;
    } else if (child.slice(0, parent.length + 1) != `${parent}/`) {
      return false;
    }
    return true;
  }
  stripTag(tag) {
    let t = "";
    if (tag.slice(-1) === "/") {
      t = tag.slice(0, -1);
    } else {
      t = tag;
    }
    if (t.slice(0, 1) === "#") {
      t = t.slice(1, t.length);
    }
    return t;
  }
  getTaskFromUUID(dv, uuid) {
    const n = dv.pages(`"${this.taskDir}/${uuid}"`);
    if (n.length === 0) {
      console.warn(`"${this.taskDir}/${uuid}" task does not exists`);
      return void 0;
    }
    return n[0];
  }
  hasValidFormat(task) {
    const fm = task.file.frontmatter;
    if (fm === void 0) {
      console.warn(
        `"${this.taskDir}/${task.uuid}" task does not have a frontmatter`
      );
      return false;
    }
    if (fm.type === void 0) {
      console.warn(
        `"${this.taskDir}/${task.uuid}" task does not have a \`type\` field`
      );
      return false;
    }
    if (fm.status === void 0) {
      console.warn(
        `"${this.taskDir}/${task.uuid}" task does not have a \`status\` field`
      );
      return false;
    }
    return true;
  }
  hasPendingDependencies(dv, deps) {
    for (const dep of deps) {
      const task = this.getTaskFromUUID(dv, dep);
      if (task === void 0) {
        continue;
      }
      if (!this.hasValidFormat(task)) {
        continue;
      }
      const fm = task.file.frontmatter;
      if (fm.type !== this.Task.BASE && fm.type !== this.Task.DAILY) {
        continue;
      }
      if (fm.status === this.Status.TODO) {
        return true;
      }
    }
    return false;
  }
  isDoable(dv, task) {
    const fm = task.file.frontmatter;
    if (fm.status !== this.Status.TODO) {
      return false;
    }
    if (fm.after !== void 0) {
      const after = new Date(fm.after);
      if (Date.now() <= after.getTime()) {
        return false;
      }
    }
    const deps = fm.needs;
    if (deps === void 0 || deps.length === 0) {
      return true;
    }
    if (this.hasPendingDependencies(dv, deps)) {
      return false;
    }
    return true;
  }
  getNamespaceContent(dv, ns) {
    const children = [];
    const resp = dv.pages(`#${ns}`);
    for (const f of resp) {
      const tags = f.tags;
      if (tags === void 0) {
        continue;
      }
      for (const tag of tags) {
        if (this.isChildTag(ns, tag)) {
          const t = tag.slice(ns.length + 1);
          if (!children.includes(t)) {
            children.push(t);
          }
        }
      }
    }
    return children;
  }
  isDone(dv, dep) {
    const task = this.getTaskFromUUID(dv, dep);
    if (task === void 0) {
      return false;
    }
    if (!this.hasValidFormat(task)) {
      return false;
    }
    const fm = task.file.frontmatter;
    if (fm.status === this.Status.DONE) {
      return true;
    }
    return false;
  }
  getTasks(dv, tag, taskType = [this.Task.BASE, this.Task.DAILY], status = this.Status.TODO) {
    const buff = [];
    const tasks = dv.pages(tag);
    for (const task of tasks) {
      const fm = task.file.frontmatter;
      if (fm === void 0) {
        continue;
      }
      if (fm.status === void 0 || fm.status !== status) {
        continue;
      }
      if (fm.type === void 0 || !taskType.contains(fm.type)) {
        continue;
      }
      buff.push(task);
    }
    return buff;
  }
  formatTask(dv, task) {
    return dv.fileLink(task.file.path);
  }
  formatTaskBis(dv, task) {
    const f = task.file;
    let ctx = "";
    for (const tag of f.tags) {
      if (tag.slice(0, 9) == "#context/") {
        ctx = tag.slice(9);
      }
    }
    return [
      dv.fileLink(f.path),
      dv.markdownTaskList(f.tasks),
      f.frontmatter.time_estimate,
      ctx
    ];
  }
  formatTaskBase(dv, task) {
    const f = task.file;
    const fm = f.frontmatter;
    const tags = fm.tags;
    const area = this.getArea(tags);
    return [
      dv.fileLink(f.path, false, fm.uuid.slice(0, 8)),
      dv.markdownTaskList(f.tasks),
      fm.time_estimate,
      area
    ];
  }
  formatTaskWaiting(dv, task) {
    const f = task.file;
    const fm = f.frontmatter;
    const deps = [];
    if (fm.needs !== void 0) {
      for (const dep of fm.needs) {
        deps.push(dv.fileLink(`${this.taskDir}/${dep}`));
      }
    }
  }
  formatTaskMaybe(dv, task) {
    const f = task.file;
    const fm = f.frontmatter;
    const deps = [];
    return [dv.fileLink(f.path)];
  }
  makeAsyncRequest(dv, uuid) {
    return dv.query(`LIST WHERE needs AND contains(needs, "${uuid}")`).then((value) => {
      return value;
    });
  }
  getDependantTasks(dv, task) {
    const buff = [];
    const uuid = task.file.name;
    if (task.file.frontmatter === void 0) {
      return buff;
    }
    const tasks = dv.pages(`"${this.taskDir}"`).where((p) => p.needs !== void 0 && p.needs.contains(uuid));
    for (const tk of tasks) {
      const t = dv.pages(`"${tk.file.path}"`);
      buff.push(t[0]);
    }
    return buff;
  }
  byDependencyAndPriorityAndCreatedAt(dv, a, b) {
    const ftA = a.file.frontmatter;
    const ftB = b.file.frontmatter;
    const prioA = ftA.priority;
    const prioB = ftB.priority;
    const depsA = this.getDependantTasks(dv, a);
    const depsB = this.getDependantTasks(dv, b);
    if (depsA.length - depsB.length !== 0) {
      return depsA.length - depsB.length;
    }
    if (prioA - prioB !== 0) {
      return prioA - prioB;
    }
    const dateA = new Date(ftA.created_at);
    const dateB = new Date(ftB.created_at);
    return (dateA.getTime() - dateB.getTime()) * -1;
  }
  formatTaskPlanningWaiting(dv, task) {
    const f = task.file;
    return [
      // ajouter alias sur le link
      dv.markdownTaskList(f.tasks),
      dv.fileLink(f.path, false, f.name.slice(0, 8)),
      f.frontmatter.time_estimate,
      f.frontmatter.cause
    ];
  }
  renderBaseAsArray(dv, tasks) {
    const arr = [];
    tasks.forEach((task) => {
      arr.push(this.formatTaskBase(dv, task));
    });
    dv.table(["uuid", "tasks", "estimate", "area"], arr);
  }
  renderPlanningWaiting(dv, tasks) {
    const arr = [];
    tasks.forEach((task) => {
      arr.push(this.formatTaskPlanningWaiting(dv, task));
    });
    dv.table(["tasks", "uuid", "estimate", "cause"], arr);
  }
  renderMaybeAsArray(dv, tasks) {
    const arr = [];
    tasks.forEach(({ ref, task }) => {
      if (task !== void 0) {
        arr.push(this.formatTaskMaybe(dv, task));
      }
    });
    dv.table(["uuid"], arr);
  }
  formatTaskDaily(dv, task) {
    const f = task.file;
    const fm = task.file.frontmatter;
    const tags = task.file.tags;
    const areas = [];
    for (const tag of tags) {
      if (tag.slice(0, 6) == "#area/") {
        areas.push(tag.slice(6));
      }
    }
    const links = [];
    for (const link of f.outlinks) {
      links.push(link);
    }
    const tasks = [];
    for (const t of f.tasks) {
      tasks.push(t);
    }
    return [
      dv.fileLink(f.path),
      links.length > 0 ? dv.markdownList(links) : dv.markdownTaskList(tasks),
      fm.time_allocated,
      areas.length > 0 ? dv.markdownList(areas) : ""
    ];
  }
  formatFleeting(dv, task) {
    const f = task.file;
    const fm = task.file.frontmatter;
    const tags = task.file.tags;
    const hours = 3600;
    const days = 86400;
    let dt = new Date();
    if (fm !== void 0 && fm.created_at !== void 0) {
      dt = new Date(fm.created_at);
    } else {
      dt = new Date(f.ctime.ts);
    }
    const now = new Date();
    const delta = (now.getTime() - dt.getTime()) / 1e3;
    let since = "";
    const toDt = (t) => {
      return String(Math.round(t * 10) / 10).padStart(2, "0");
    };
    if (delta >= days) {
      since = toDt(delta / days) + "d";
    } else {
      since = toDt(delta / hours) + "h";
    }
    if (fm.alias === void 0 || fm.alias === "") {
      return [dv.fileLink(`${f.path}`), since, f.size];
    } else {
      return [dv.fileLink(`${f.path}`, false, fm.alias), since, f.size];
    }
  }
  renderDailyAsArray(dv, tasks) {
    const arr = [];
    tasks.forEach((task) => {
      arr.push(this.formatTaskDaily(dv, task));
    });
    dv.table(["uuid", "content", "duration", "area"], arr);
  }
  renderFleetingAsArray(dv, tasks) {
    const arr = [];
    tasks.forEach((task) => {
      arr.push(this.formatFleeting(dv, task));
    });
    dv.table(["content", "age", "size"], arr);
  }
  autoFieldNeed(dv, fm) {
    if (fm.needs === void 0) {
      return;
    }
    const buff = [];
    for (const dep of fm.needs) {
      if (!this.isDone(dv, dep)) {
        buff.push(dv.fileLink(`${this.taskDir}/${dep}`));
      }
    }
    if (buff.length > 0) {
      dv.header(2, "Needs");
      dv.list(buff);
    }
  }
  autoFieldNeededBy(dv, current) {
    const tasks = this.getDependantTasks(dv, current);
    if (tasks.length === 0) {
      return;
    }
    const buff = [];
    for (const task of tasks) {
      if (!this.isDone(dv, task.uuid)) {
        buff.push(dv.fileLink(task.file.path));
      }
    }
    if (buff.length > 0) {
      dv.header(2, "NeededBy");
      dv.list(buff);
    }
  }
  autoFieldTags(dv, fm) {
    const tags = fm.tags;
    if (tags == void 0 || tags.length === 0) {
      return;
    }
    tags.sort();
    dv.header(2, "Tags");
    let s = "";
    for (const tag of tags) {
      s += ` #${tag}`;
    }
    dv.paragraph(s);
  }
  autoFieldTaskBase(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      console.warn("fm is required");
      return;
    }
    const projectName = Helper.getProject(fm);
    if (projectName !== void 0) {
      const projects = dv.pages(`"Projects"`).where((fmP) => {
        if (fmP.name === projectName.slice(8)) {
          return true;
        }
        return false;
      });
      if (projects.length) {
        dv.header(2, "Project");
        dv.paragraph(Renderer.makeLinkName(dv, projects[0].file));
      }
    }
    this.autoFieldNeed(dv, fm);
    this.autoFieldNeededBy(dv, current);
    const logEntries = dv.pages(`"${this.logDir}/${fm.uuid}"`).where((p) => p.type === 6).sort((k) => k.created_at, "desc");
    const buff = [];
    let totalTime = 0;
    for (const entry of logEntries) {
      const fme = entry.file.frontmatter;
      const e = [];
      let start = 0;
      let stop = 0;
      if (fme === void 0 || fme.created_at === void 0) {
        throw new Error(`Invalid frontmatter: ${fme.uuid}`);
      }
      start = new Date(fme.created_at);
      e.push(start.toISOString().slice(0, 10));
      if (fme.done_at === void 0) {
        stop = Date.now();
      } else {
        stop = new Date(fme.done_at);
      }
      totalTime += stop - start;
      e.push(
        dv.sectionLink(
          fme.uuid,
          "## Content",
          false,
          fme.uuid.slice(0, 8)
        )
      );
      e.push(Math.round((stop - start) / (1e3 * 60 * 60) * 10) / 10);
      if (fme.reviewed === void 0 || fme.reviewed === 0) {
        e.push(0);
      } else {
        e.push(fme.reviewed);
      }
      buff.push(e);
    }
    if (buff.length > 0) {
      dv.header(2, "Logs");
      dv.table(["created_at", "uuid", "session", "reviewed"], buff);
      if (totalTime > 0) {
        dv.paragraph(
          `_totalTime (h):_ ${Math.round(totalTime / (1e3 * 60 * 60) * 10) / 10}`
        );
      }
    }
  }
  autoFieldLog(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      return;
    }
    dv.header(2, "Parent");
    dv.paragraph(dv.fileLink(`${this.taskDir}/${fm.parent_id}`));
  }
  autoFieldAuthors(dv, fm) {
    const authors = fm.authors;
    if (authors === void 0 || authors.length === 0) {
      return;
    }
    dv.header(2, "Authors");
    dv.list(authors);
  }
  autoFieldTitle(dv, fm) {
    const title = fm.alias;
    if (title == void 0) {
      return;
    }
    dv.header(1, title);
  }
  autoFieldLiteratureNote(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      return;
    }
    this.autoFieldTitle(dv, fm);
    this.autoFieldAuthors(dv, fm);
    this.autoFieldTags(dv, fm);
  }
  autoFieldPermanent(dv) {
    const current = dv.current();
    const fm = current.file.frontmatter;
    if (fm === void 0) {
      return;
    }
    this.autoFieldTags(dv, fm);
  }
  autoFieldTask(dv) {
    return this.autoFieldTaskBase(dv);
  }
  autoFieldLiterature(dv) {
    return this.autoFieldLiteratureNote(dv);
  }
  autoFieldFleeting(dv) {
    return;
  }
  autoFieldSupply(dv) {
    return;
  }
  findTasksByProject(dv, name) {
    const buff = [];
    if (name !== "" && name !== "none") {
      const tasks = this.getTasks(dv, `${this.Namespace.PROJECT}/none`, [
        this.Task.BASE
      ]);
      for (const task of tasks) {
        const fm = task.file.frontmatter;
        if (this.isDoable(dv, task)) {
          buff.push(task);
        }
      }
    } else {
      const tasks = this.getTasks(dv, "", [this.Task.BASE]);
      for (const task of tasks) {
        const fm = task.file.frontmatter;
        const tags = fm.tags;
        if (fm.tags === void 0 && (name === "" || name === "none") || fm.tags.contains(`${this.Namespace.PROJECT}/none`)) {
          if (this.isDoable(dv, task)) {
            buff.push(task);
          }
        }
      }
    }
    buff.sort();
    return buff;
  }
  getTag(tags, type) {
    let name = "";
    let defaultValue = "";
    if (type === "area") {
      name = this.Namespace.AREA;
      defaultValue = this.Default.AREA;
    } else if (type === "context") {
      name = this.Namespace.CONTEXT;
      defaultValue = this.Default.CONTEXT;
    } else if (type === "layer") {
      name = this.Namespace.LAYER;
      defaultValue = this.Default.LAYER;
    } else if (type === "org") {
      name = this.Namespace.ORG;
      defaultValue = this.Default.ORG;
    } else if (type === "project") {
      name = this.Namespace.PROJECT;
      defaultValue = this.Default.PROJECT;
    } else {
      throw new Error(`getTag got unsuported type: ${type}`);
    }
    const len = name.length + 1;
    const defaultTag = `${name}/${defaultValue}`;
    if (tags === void 0) {
      return defaultTag;
    }
    for (const tag of tags) {
      if (tag.length > len && tag.slice(0, len) == `${name}/`) {
        return tag;
      }
    }
    return defaultTag;
  }
  getArea(tags) {
    return this.getTag(tags, "area");
  }
  getContext(tags) {
    return this.getTag(tags, "context");
  }
  getLayer(tags) {
    return this.getTag(tags, "layer");
  }
  getOrg(tags) {
    return this.getTag(tags, "org");
  }
  getProject(tags) {
    return this.getTag(tags, "project");
  }
  parseListFrontmatter(fm) {
    let minPriority = 0;
    if (fm.min_priority !== void 0) {
      minPriority = fm.min_priority;
    }
    let ignore = [];
    if (fm.ignore !== void 0) {
      ignore = fm.ignore;
    }
    let byAreas = [];
    if (fm.by_areas !== void 0) {
      byAreas = fm.by_areas;
    }
    let byProjects = [];
    if (fm.by_projects !== void 0) {
      byProjects = fm.by_projects;
    }
    return [minPriority, ignore, byAreas, byProjects];
  }
  renderNamespaceContent(dv) {
    const self = dv.current();
    const name = self.file.name.toLowerCase().slice(0, -1);
    dv.header(1, "Index");
    dv.header(2, `${self.file.name}`);
    const tags = this.getNamespaceContent(dv, name);
    tags.sort();
    for (const tag of tags) {
      dv.paragraph(`#${name}/${tag}`);
    }
  }
  renderUnprocessedLogs(dv) {
    const logs = dv.pages(`"${this.logDir}"`).where(
      (p) => p.type === this.Type.LOG && (p.reviewd === void 0 || p.reviewed < 1)
    ).sort((k) => k.created_at, "asc");
    const buff = [];
    const arr = [];
    logs.forEach((entry) => {
      const fm = entry.file.frontmatter;
      if (fm === void 0) {
        return;
      }
      const parentId = fm.parent_id;
      if (parentId === void 0) {
        throw new Error(`Invalid log entry: ${entry.file.path}`);
      }
      const parent = dv.pages(`"${this.taskDir}/${parentId}"`);
      const parentFm = parent.file.frontmatter;
      if (parentFm === void 0) {
        throw new Error(`Invalid task: ${parent.file.path}`);
      }
      let project = this.getProject(parentFm.tags);
      if (project === `${this.Namespace.PROJECT}/${this.Default.PROJECT}`) {
        project = "";
      }
      let area = this.getArea(parentFm.tags);
      if (area === `${this.Namespace.AREA}/${this.Default.AREA}`) {
        area = "";
      }
      const formated = [];
      formated.push(
        dv.sectionLink(
          entry.file.path,
          "Content",
          false,
          `${fm.uuid.slice(0, 8)}`
        )
      );
      const createdAt = new Date(fm.created_at);
      formated.push(createdAt.toISOString().slice(0, 10));
      formated.push(project);
      formated.push(area);
      arr.push(formated);
    });
    dv.table(["uuid", "created_at", "project", "area"], arr);
  }
  assertTaskDoneAt(dv, taskId) {
    const task = dv.pages(`"${this.taskDir}/${taskId}"`);
    if (task.length === 0) {
      throw new Error(`task: ${taskId} doest not exists`);
    }
    const fm = task.file.frontmatter;
    if (fm === void 0) {
      throw new Error(`task: ${taskId} does not have a frontmatter`);
    }
    const logs = dv.pages(`"${this.logDir}/${taskId}"`).sort((k) => k.created_at, "asc");
    if (logs.length < 1) {
      throw new Error(`task: ${taskId} has no Logs`);
    }
    const lastEntry = logs[logs.length - 1];
    if (lastEntry.file.frontmatter.done_at === void 0) {
      throw new Error(
        `task: ${taskId} last entry is missing 'done_at' field`
      );
    }
    const doneAt = new Date(lastEntry.file.frontmatter.done_at);
    return [
      dv.sectionLink(
        task.file.path,
        "Content",
        false,
        `${task.file.frontmatter.uuid.slice(0, 8)}`
      ),
      `${doneAt.toISOString().slice(0, 10)}`
    ];
  }
  getDoneTimeline(dv) {
    const tasks = dv.pages(`"${this.taskDir}"`).where((p) => p.status === "done");
    const buff = [];
    for (const task of tasks) {
      const fm = task.file.frontmatter;
      if (fm === void 0) {
        throw new Error(`task: ${fm.uuid} does not have a frontmatter`);
      }
      const logs = dv.pages(`"${this.logDir}/${fm.uuid}"`).sort((k) => k.created_at, "asc");
      if (logs.length < 1) {
        console.warn(`task: ${fm.uuid} has no Logs`);
      }
      const lastEntry = logs[logs.length - 1];
      if (lastEntry === void 0) {
        continue;
      }
      if (lastEntry.file.frontmatter.done_at === void 0) {
        throw new Error(
          `task: ${fm.uuid} last entry is missing 'done_at' field`
        );
      }
      fm.doneAt = new Date(lastEntry.file.frontmatter.done_at);
      buff.push(task);
    }
    buff.sort((a, b) => {
      const dateA = new Date(a.file.frontmatter.doneAt);
      const dateB = new Date(b.file.frontmatter.doneAt);
      return (dateA.getTime() - dateB.getTime()) * -1;
    });
    const arr = [];
    buff.forEach((e) => {
      arr.push([
        dv.sectionLink(
          e.file.path,
          "Content",
          false,
          `${e.file.frontmatter.uuid.slice(0, 8)}`
        ),
        `${e.file.frontmatter.doneAt.toISOString().slice(0, 16)}`
      ]);
    });
    dv.table(["uuid", "doneAt"], arr);
  }
  durationStringToSec(val) {
    const mult = val.slice(-1);
    let m = 0;
    if (mult === "h") {
      m = 60 * 60;
    } else if (mult === "m") {
      m = 60;
    } else if (mult === "d") {
      m = 24 * 60 * 60;
    } else {
      console.warn(`Unhandled case mult: ${mult}`);
    }
    return m * parseInt(val.slice(0, -1));
  }
  testDvFunc() {
    const dv = app.plugins.plugins.dataview.api;
    const tasks = dv.pages(`"${this.taskDir}"`).where((p) => p.status === "done");
    const buff = [];
    for (const task of tasks) {
      const fm = task.file.frontmatter;
      if (fm === void 0) {
        throw new Error(`task: ${fm.uuid} does not have a frontmatter`);
      }
      const logs = dv.pages(`"${this.logDir}/${fm.uuid}"`).sort((k) => k.created_at, "asc");
      if (logs.length < 1) {
        console.warn(`task: ${fm.uuid} has no Logs`);
      }
      const lastEntry = logs[logs.length - 1];
      if (lastEntry === void 0) {
        continue;
      }
      if (lastEntry.file.frontmatter.done_at === void 0) {
        throw new Error(
          `task: ${fm.uuid} last entry is missing 'done_at' field`
        );
      }
      fm.doneAt = new Date(lastEntry.file.frontmatter.done_at);
      buff.push(task);
    }
    buff.sort((a, b) => {
      const dateA = new Date(a.file.frontmatter.doneAt);
      const dateB = new Date(b.file.frontmatter.doneAt);
      return (dateA.getTime() - dateB.getTime()) * -1;
    });
    const arr = [];
    buff.forEach((e) => {
      arr.push([
        dv.sectionLink(
          e.file.path,
          "Content",
          false,
          `${e.file.frontmatter.uuid.slice(0, 8)}`
        ),
        `${e.file.frontmatter.doneAt.toISOString().slice(0, 16)}`
      ]);
    });
  }
};

// main.ts
var DEFAULT_SETTINGS = {
  mySetting: "default"
};
var dayShort = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
var monthShort = [
  "Jan",
  "Feb",
  "Mar",
  "Apr",
  "May",
  "Jun",
  "Jul",
  "Aug",
  "Sep",
  "Oct",
  "Nov",
  "Dec"
];
var MyPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.vaultContent = [];
    this.vaultContentDict = {};
  }
  openInNewTabIfNotOpened(page) {
    const active = this.app.workspace.activeLeaf;
    const root = active.parent;
    let found = false;
    let node = void 0;
    const emptyTabs = [];
    for (const leaf of root.children) {
      const file = this.getFileCacheFromLeaf(leaf);
      if (file === void 0) {
        emptyTabs.push(leaf);
        continue;
      }
      if (file.frontmatter !== void 0 && file.frontmatter.uuid === page.file.frontmatter.uuid) {
        found = true;
        node = leaf;
        break;
      }
    }
    if (!found) {
      if (emptyTabs.length > 0) {
        node = emptyTabs[0];
      } else {
        this.app.workspace.createLeafInParent(
          root,
          root.children.length + 1
        );
        node = root.children[root.children.length - 1];
      }
    }
    node.openFile(this.app.vault.getAbstractFileByPath(page.file.path), {
      active: true
    });
  }
  getFileCacheFromLeaf(leaf) {
    let file = void 0;
    try {
      file = leaf.view.getSyncViewState().state.file;
    } catch (e) {
      return void 0;
    }
    const abstractPath = app.vault.getAbstractFileByPath(file);
    return app.metadataCache.getFileCache(abstractPath);
  }
  getFileFromLeaf(leaf) {
    let file = void 0;
    try {
      file = leaf.view.getSyncViewState().state.file;
    } catch (e) {
      return void 0;
    }
    return app.vault.getAbstractFileByPath(file);
  }
  extractUUIDFromLink(link) {
    Assert.True(
      link.length >= 36,
      `extractUUIDFromLink: Invalid parameter type: link: "${link}"`
    );
    Assert.True(
      Helper.isUUID(link.slice(0, 36)),
      `extractUUIDFromLink: Invalid parameter type: link: "${link}"`
    );
    if (link.length === 36) {
      return link;
    } else {
      return link.slice(0, 36);
    }
  }
  getFileFromUUID(_id) {
    return this.vaultContentDict[_id];
  }
  getFileCacheFromUUID(_id) {
    const f = this.vaultContentDict[_id];
    if (f === void 0) {
      return void 0;
    }
    return app.metadataCache.getFileCache(f);
  }
  generateJournalEntry() {
  }
  sneakyTabRenamer(app2) {
    const root = app2.workspace.activeLeaf.parent;
    for (const leaf of root.children) {
      let path = void 0;
      try {
        path = leaf.view.getSyncViewState().state.file;
      } catch (e) {
        continue;
      }
      const file = app2.vault.getAbstractFileByPath(path);
      const fm = (
        // @ts-ignore
        app2.metadataCache.getFileCache(file).frontmatter
      );
      if (fm === void 0) {
        continue;
      }
      let text = "";
      if (fm.type === 3 && Helper.getProject(fm) !== void 0) {
        if (Helper.getProject(fm) === "project/daily") {
          const at = new Date(fm.at);
          text = `(D) ${dayShort[at.getDay()]}. ${at.getDate()} ${monthShort[at.getMonth()]}`;
        } else {
          text = `(T) ${Helper.getProject(fm).slice(8)}`;
        }
      } else if (fm.type === 2) {
        if (!Helper.nilCheck(fm.alias)) {
          let buff = "";
          for (const alias of fm.alias) {
            if (buff.length === 0) {
              buff = alias;
            } else if (alias.length < buff.length) {
              buff = alias;
            }
          }
          const note = this.getFileCacheFromLeaf(leaf);
          text = `\u{1F4DC} ${buff}`;
          if (note.headings.length > 1) {
            for (const heading of note.headings) {
              if (heading.level === 3 && heading.heading === "index") {
                text = `(I) ${buff}`;
                break;
              }
            }
          }
        } else {
          const note = this.getFileCacheFromLeaf(leaf);
          if (note.headings.length < 1) {
            continue;
          }
          let found = false;
          for (const heading of note.headings) {
            if (heading.level === 3) {
              found = true;
              text = `\u{1F4DC} ${heading.heading}`;
              break;
            }
          }
          if (!found) {
            text = note.frontmatter.uuid;
          }
        }
      } else if (fm.type === 20) {
        const createdAt = new Date(fm.created_at);
        if (fm.alias !== void 0) {
          text = `(J) ${fm.alias}`;
        } else {
          text = `(J) ${dayShort[createdAt.getDay()]}. ${createdAt.getDate()} ${monthShort[createdAt.getMonth()]}`;
        }
      } else if (fm.type === 12) {
        if (fm.name !== void 0 && fm.name !== "") {
          text = `(P) ${fm.name}`;
        }
      } else if (fm.type === 13) {
        text = `(I) ${fm.uuid}`;
      } else {
        continue;
      }
      if (text !== "") {
        leaf.tabHeaderInnerTitleEl.innerText = text;
        leaf.tabHeaderInnerTitleEl.innerHTML = text;
      }
    }
  }
  async onload() {
    var _a, _b;
    console.log("gonext - onload()");
    await this.loadSettings();
    this.metadataCache = this.app.metadataCache;
    this.workspace = this.app.workspace;
    this.dv = this.app.plugins.plugins.dataview.api;
    this.frontmatter = new Frontmatter(this);
    this.listMaker = new ListMaker(this, this.dv, this.frontmatter);
    this.generate = new Generator(this.app);
    this.files = {};
    this.api = {
      getArea: Helper.getArea,
      getContext: Helper.getContext,
      getDomain: Helper.getDomain,
      getLayer: Helper.getLayer,
      getOrg: Helper.getOrg,
      getProject: Helper.getProject,
      durationStringToSec: Helper.durationStringToSec,
      paths: Paths,
      types: Types,
      status: Status,
      namespace: Namespace,
      default: Default,
      frontmatter: this.frontmatter,
      listMaker: this.listMaker,
      renderer: Renderer,
      autoField: AutoField,
      dvLib: new DvLib(),
      notify
    };
    window.gonext = {
      // @ts-ignore
      state: (_b = (_a = window.gonext) == null ? void 0 : _a.state) != null ? _b : {},
      // @ts-ignore
      app: this.app
    };
    (0, import_obsidian.addIcon)(
      "GoNextIcon",
      `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="currentColor" d="M20 12V2h2v10zm4 0V2h2v10zm4 0V2h2v10zm-12 8a3.912 3.912 0 0 1-4-4a3.912 3.912 0 0 1 4-4v-2a6 6 0 1 0 6 6h-2a3.912 3.912 0 0 1-4 4"></path><path fill="currentColor" d="M28.893 18.454L26.098 16l-1.318 1.504l2.792 2.452l-2.36 4.088l-3.427-1.16a9.032 9.032 0 0 1-2.714 1.565L18.36 28h-4.72l-.71-3.55a9.095 9.095 0 0 1-2.695-1.572l-3.447 1.166l-2.36-4.088l2.725-2.395a8.926 8.926 0 0 1-.007-3.128l-2.718-2.39l2.36-4.087l3.427 1.16A9.03 9.03 0 0 1 12.93 7.55L13.64 4H16V2h-2.36a2 2 0 0 0-1.961 1.608l-.504 2.519a10.967 10.967 0 0 0-1.327.753l-2.42-.819a1.998 1.998 0 0 0-2.372.895l-2.36 4.088a2 2 0 0 0 .411 2.502l1.931 1.697C5.021 15.495 5 15.745 5 16c0 .258.01.513.028.766l-1.92 1.688a2 2 0 0 0-.413 2.502l2.36 4.088a1.998 1.998 0 0 0 2.374.895l2.434-.824a10.974 10.974 0 0 0 1.312.759l.503 2.518A2 2 0 0 0 13.64 30h4.72a2 2 0 0 0 1.961-1.608l.504-2.519a10.967 10.967 0 0 0 1.327-.753l2.419.818a1.998 1.998 0 0 0 2.373-.894l2.36-4.088a2 2 0 0 0-.411-2.502"></path></svg>`
    );
    this.addRibbonIcon("GoNextIcon", "[g]o[n]ext", async () => {
      this.generate.fleeting();
    });
    this.app.workspace.on("active-leaf-change", () => {
      return this.sneakyTabRenamer(this.app);
    });
    this.app.workspace.on("quick-preview", () => {
      return this.sneakyTabRenamer(this.app);
    });
    this.app.workspace.on("resize", () => {
      return this.sneakyTabRenamer(this.app);
    });
    this.addCommand({
      id: "goto-active-task-logs",
      name: "Goto Active Tasks Logs'",
      // @ts-ignore
      callback: () => {
        const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
          if (page.file.frontmatter.status === "doing") {
            return true;
          }
          return false;
        });
        if (pages.length === 0) {
          return;
        }
        const tFm = new FrontmatterJS(pages[0]);
        const logs = this.dv.pages(`"${Paths.Logs}/${tFm.uuid}"`).sort((k) => k.created_at, "desc");
        if (logs.length === 0) {
          return;
        }
        this.openInNewTabIfNotOpened(logs[0]);
      }
    });
    this.addCommand({
      id: "goto-children",
      name: "Goto Child",
      // @ts-ignore
      callback: () => {
        const file = this.getFileFromLeaf(
          this.app.workspace.activeLeaf
        );
        if (file === void 0) {
          console.error("goto-children: File is undefined");
          return;
        }
        const cache = this.getFileCacheFromLeaf(
          this.app.workspace.activeLeaf
        );
        const fm = cache.frontmatter;
        if (fm === void 0) {
          console.error("goto-children: Invalid FrontMatter");
          return;
        }
        const active = this.app.workspace.activeLeaf;
        const dir = file.path.split("/")[0];
        if (dir === Paths.Tasks) {
          const page = { file: { frontmatter: fm, path: file.path } };
          const curFm = new FrontmatterJS(page);
          const curAt = curFm.at.toISOString().slice(0, 10);
          if (curFm.getProject() === "daily") {
            const pages = this.dv.pages(`"${Paths.Journal}"`).where((page2) => {
              const jFm = new FrontmatterJS(page2);
              if (jFm.getProject() !== "mission") {
                return false;
              }
              const jAt = jFm.createdAt.toISOString().slice(0, 10);
              if (curAt !== jAt) {
                return false;
              }
              return true;
            });
            if (pages.length === 0) {
              const note = this.generate.journalEntry();
              note.then((file2) => {
                active.openFile(file2, { active: true });
              });
              return;
            } else {
              const children = this.app.vault.getAbstractFileByPath(
                pages[0].file.path
              );
              Assert.True(
                !Helper.nilCheck(children),
                `goto-children: Unexpected undefined file: ${pages[0].file.path}`
              );
              active.openFile(children);
              return;
            }
          } else {
            const pages = this.dv.pages(`"${Paths.Logs}/${curFm.uuid}"`).sort((k) => k.created_at, "desc");
            if (pages.length === 0) {
              return;
            }
            const children = this.app.vault.getAbstractFileByPath(
              pages[0].file.path
            );
            Assert.True(
              !Helper.nilCheck(children),
              `goto-children: Unexpected undefined file: ${pages[0].file.path}`
            );
            active.openFile(children);
          }
        } else {
          console.error(
            "goto-children: Not Implemented outside Journal, Tasks"
          );
          return;
        }
      }
    });
    this.addCommand({
      id: "goto-parent",
      name: "Goto Parent",
      // @ts-ignore
      callback: () => {
        console.log("goto-parent:");
        const file = this.getFileFromLeaf(
          this.app.workspace.activeLeaf
        );
        if (file === void 0) {
          console.error("goto-parent: File is undefined");
          return;
        }
        const cache = this.getFileCacheFromLeaf(
          this.app.workspace.activeLeaf
        );
        const fm = cache.frontmatter;
        if (fm === void 0) {
          console.error("goto-parent: Invalid FrontMatter");
          return;
        }
        const active = this.app.workspace.activeLeaf;
        const dir = file.path.split("/")[0];
        if (dir === Paths.Slipbox) {
          const parent = this.findFirstParentInDomains(file, cache);
          if (parent !== void 0) {
            const file2 = this.getFileFromUUID(
              parent.frontmatter.uuid
            );
            active.openFile(file2);
          } else {
            active.openFile(
              this.app.vault.getAbstractFileByPath("Index.md")
            );
          }
        } else if (dir === Paths.Logs) {
          const taskId = file.path.split("/")[1];
          Assert.True(
            taskId !== void 0,
            `Invalid logDir: ${file.path}`
          );
          const task = this.app.vault.getAbstractFileByPath(
            `${Paths.Tasks}/${fm.parent_id}.md`
          );
          if (Helper.nilCheck(task)) {
            console.error(`Undefined Task: ${taskId}`);
          } else {
            active.openFile(task);
          }
        } else if (dir === Paths.Tasks) {
          const page = { file: { frontmatter: fm, path: file.path } };
          const curFm = new FrontmatterJS(page);
          const curAt = curFm.at.toISOString().slice(0, 10);
          if (curFm.getProject() === "daily") {
            const pages = this.dv.pages(`"${Paths.Journal}"`).where((page2) => {
              const jFm = new FrontmatterJS(page2);
              if (jFm.getProject() !== "mission") {
                return false;
              }
              const jAt = jFm.at.toISOString().slice(0, 10);
              if (curAt !== jAt) {
                return false;
              }
              return true;
            });
            if (pages.length === 0) {
              console.log("Must create journal entry first");
              return;
            } else {
              throw new Error("Not Implemented");
            }
          } else {
            console.error(
              "goto-parent: Not Implemented for non-daily Task"
            );
            return;
          }
        } else if (dir === Paths.Journal) {
          const page = { file: { frontmatter: fm, path: file.path } };
          const curFm = new FrontmatterJS(page);
          const curAt = curFm.createdAt.toISOString().slice(0, 10);
          if (curFm.getProject() === "mission") {
            const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page2) => {
              if (page2.file.frontmatter.at === void 0) {
                return false;
              }
              const tFm = new FrontmatterJS(page2);
              if (tFm.getProject() !== "daily") {
                return false;
              }
              const tAt = tFm.at.toISOString().slice(0, 10);
              if (curAt !== tAt) {
                return false;
              }
              return true;
            });
            Assert.True(
              pages.length === 1,
              `Non existant or non unique Task: ${pages.file.frontmatter.uuid}`
            );
            const f = this.app.vault.getAbstractFileByPath(
              pages[0].file.path
            );
            Assert.True(
              !Helper.nilCheck(f),
              `Unexpected non-existant Task: ${pages[0].file.path}`
            );
            active.openFile(f);
          } else {
            console.error(
              "goto-parent: Not Implemented for non-mission Journal Entry"
            );
            return;
          }
        } else {
          console.error(
            "goto-parent: Not Implemented outside Index, Logs"
          );
          return;
        }
      }
    });
    this.addCommand({
      id: "goto-active-task",
      name: "Goto Active Task",
      // @ts-ignore
      callback: () => {
        const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
          if (page.file.frontmatter.status === "doing") {
            return true;
          }
          return false;
        });
        console.log(`found ${pages.length} active task(s)`);
        if (pages.length === 0) {
          return;
        }
        this.openInNewTabIfNotOpened(pages[0]);
      }
    });
    this.addCommand({
      id: "open-todays-daily",
      name: "Open Today's Daily",
      // @ts-ignore
      callback: () => {
        const now = new Date();
        const nowIso = now.toISOString().slice(0, 10);
        const pages = this.dv.pages(`"${Paths.Tasks}"`).where((page) => {
          if (page.file.frontmatter.at === void 0) {
            return false;
          }
          const fm = new FrontmatterJS(page);
          if (fm.getProject() !== "daily") {
            return false;
          }
          let fmIso = void 0;
          try {
            fmIso = fm.at.toISOString().slice(0, 10);
          } catch (e) {
            console.warn(`possible invalid data in ${fm.uuid}`);
            return false;
          }
          if (fmIso === nowIso) {
            return true;
          }
          return false;
        });
        if (pages.length === 0) {
          return;
        }
        this.openInNewTabIfNotOpened(pages[0]);
      }
    });
    this.addCommand({
      id: "gonext-generate-fleeting",
      name: "Generate fleeting note",
      // @ts-ignore
      callback: () => {
        this.generate.fleeting();
      }
    });
    this.addCommand({
      id: "safe-delete",
      name: "Safe Delete",
      // @ts-ignore
      callback: () => {
        const file = app.workspace.getActiveFile();
        const fm = app.metadataCache.getFileCache(file).frontmatter;
        if (fm === void 0) {
          return;
        }
        const rootPath = [
          `${Paths.Journal}.md`,
          `${Paths.Inbox}.md`,
          "Ad Hoc.md",
          "allDoneTasks.md",
          "allDoneTasksWithoutLog.md",
          "allMedia.md",
          "allProgressedTasks.md",
          "noteLocator.md",
          "Praxis.md"
        ];
        for (const p of rootPath) {
          if (file.path === p) {
            return;
          }
        }
        if (
          // @ts-ignore
          file.path.split(0, Paths.Resources.length) === // @ts-ignore
          Paths.Resources
        ) {
          return;
        }
        console.log(`deleted file: ${file.path}`);
        app.vault.delete(file);
      }
    });
    this.addCommand({
      id: "display-modal",
      name: "Display modal",
      callback: () => {
        new ExampleModal(this.app).open();
      }
    });
    this.addCommand({
      id: "go-parent",
      name: "Go Parent",
      // @ts-ignore
      callback: () => {
        const file = app.workspace.getActiveFile();
        const fm = app.metadataCache.getFileCache(file).frontmatter;
        if (fm === void 0) {
          return;
        }
        if (fm.parent_id === void 0 && fm.ref_id === void 0) {
          console.warn(
            `parent_id: '${fm.parent_id}' ref_id: '${fm.ref_id}'`
          );
          return;
        }
        if (fm.type === void 0 || fm.type !== Types.Log && fm.type !== Types.Media && fm.type !== Types.Fleeting) {
          console.warn(
            `invalid type: '${fm.type}' for note: '${fm.uuid}'`
          );
          return;
        }
        const parent = fm.type === Types.Log ? `${Paths.Tasks}/${fm.parent_id}.md` : `${Paths.Refs}/${fm.ref_id}.md`;
        const page = app.vault.getAbstractFileByPath(parent);
        app.workspace.openLinkText(parent, "/", false);
      }
    });
    this.app.metadataCache.on(
      "changed",
      (file, data, cache) => {
        const fm = cache.frontmatter;
        if (fm.type === 2) {
          if (this.files[fm.uuid] !== void 0) {
            const [path, note] = this.files[fm.uuid];
            fm.alias = [path.join(" / ")];
          }
        }
      }
    );
    this.app.workspace.onLayoutReady(() => {
      console.log("workspace - layout-ready");
      for (const f of this.app.vault.getFiles()) {
        if (!Helper.isUUID(f.basename)) {
          continue;
        }
        this.vaultContentDict[f.basename] = f;
      }
      this.loadIndex();
    });
  }
  getIndexDomains() {
    const indexPath = this.app.vault.getAbstractFileByPath("Index.md");
    const index = this.app.metadataCache.getFileCache(indexPath);
    const domains = [];
    let start = void 0;
    let end = void 0;
    let found = false;
    for (const heading of index.headings) {
      if (heading.level === 2 && found) {
        end = heading.position.start.offset;
        break;
      } else if (heading.level === 2 && heading.heading === "domains") {
        start = heading.position.end.offset;
        found = true;
      }
    }
    for (const link of index.links) {
      const pos = link.position;
      if (pos.start.offset < start || pos.end.offset > end) {
        continue;
      }
      const indexContent = this.getFileCacheFromUUID(link.link);
      if (indexContent === void 0) {
        continue;
      }
      if (indexContent.headings.length < 2) {
        console.error(`Invalid Index: ${link.link}`);
        continue;
      }
      domains.push(indexContent);
    }
    return domains;
  }
  getDomainComponents(domains) {
    const components = {};
    for (const domain of domains) {
      const name = domain.headings[1].heading;
      const start = domain.headings[1].position.end.offset;
      let end = 0;
      if (domain.headings[2] !== void 0) {
        end = domain.headings[2].position.start.offset;
      } else {
        end = domain.sections[domain.sections.length - 1].position.end.offset;
      }
      for (const component of domain.links) {
        if (component.position.start.offset < start || component.position.end.offset > end) {
          continue;
        }
        if (components[name] === void 0) {
          components[name] = {};
        }
        const cache = this.getFileCacheFromUUID(
          this.extractUUIDFromLink(component.link)
        );
        const componentName = component.displayText;
        if (![
          "patterns",
          "concepts",
          "guidelines",
          "procedures",
          "material"
        ].contains(componentName)) {
          continue;
        }
        if (components[name][componentName] === void 0) {
          components[name][componentName] = [];
        }
        if (cache.links === void 0 || cache.links.length === 0) {
          continue;
        }
        for (const link of cache.links) {
          components[name][componentName].push(
            this.getFileCacheFromUUID(
              this.extractUUIDFromLink(link.link)
            )
          );
        }
      }
    }
    return components;
  }
  commonDataValidation(path, note) {
    const fm = note.frontmatter;
    Assert.True(
      fm !== void 0,
      `Invalid FrontMatter in: ${path.join("/")}`
    );
    Assert.True(note.headings !== void 0, `Blank resource: ${fm.uuid}`);
  }
  getContentBoundaries(note) {
    const fm = note.frontmatter;
    let found = false;
    let start = 0;
    let end = 0;
    for (const heading of note.headings) {
      if (heading.level === 2 && heading.heading.toLowerCase() === "content") {
        found = true;
        start = heading.position.end.offset;
        continue;
      }
      if (found && heading.level === 2 && heading.heading.toLowerCase() !== "content") {
        end = heading.position.start.offset;
      }
    }
    Assert.True(found, `Resource does not declares content: ${fm.uuid}`);
    if (end === 0) {
      end = note.sections[note.sections.length - 1].position.end.offset;
    }
    return [start, end];
  }
  getResourceName(note, start, end) {
    let resourceName = "";
    let lvl3HeadingCount = 0;
    const fm = note.frontmatter;
    for (const heading of note.headings) {
      if (heading.level === 3 && heading.position.start.offset > start && heading.position.end.offset < end) {
        resourceName = heading.heading;
        lvl3HeadingCount++;
      }
    }
    Assert.False(
      lvl3HeadingCount > 1,
      `Resource has multiple names: ${fm.uuid}`
    );
    return resourceName;
  }
  parseComponentConcepts(path, note, q, results) {
    this.commonDataValidation(path, note);
    const [start, end] = this.getContentBoundaries(note);
    const resourceName = this.getResourceName(note, start, end);
    const fm = note.frontmatter;
    results.push([[...path, resourceName], note]);
    if (note.links === void 0 || note.links.length === 0) {
      return;
    }
    for (const link of note.links) {
      if (link.position.start.offset > start && link.position.end.offset < end) {
        Assert.True(
          Helper.isUUID(link.link.slice(0, 36)),
          `Invalid link in resource: ${fm.uuid}`
        );
        if (!Helper.isUUID(link.link.slice(0, 36))) {
          continue;
        }
        const f = this.getFileCacheFromUUID(
          this.extractUUIDFromLink(link.link)
        );
        if (f === void 0 || f.frontmatter === void 0 || f.frontmatter.type !== 2) {
          continue;
        }
        q.push([[...path, resourceName], f]);
      }
    }
  }
  parseComponentPatterns(path, note, q, results) {
    this.commonDataValidation(path, note);
    const [start, end] = this.getContentBoundaries(note);
    const resourceName = this.getResourceName(note, start, end);
    if (this.isSequence(note)) {
      results.push([[...path, resourceName], note]);
      return;
    }
    if (note.links === void 0 || note.links.length === 0) {
      return;
    }
    for (const link of note.links) {
      if (link.position.start.offset < start || link.position.end.offset > end) {
        continue;
      }
      if (!Helper.isUUID(link.link.slice(0, 36))) {
        continue;
      }
      const f = this.getFileCacheFromUUID(
        this.extractUUIDFromLink(link.link)
      );
      if (f === void 0 || f.frontmatter === void 0 || f.frontmatter.type !== 2) {
        continue;
      }
      q.push([[...path, resourceName], f]);
    }
  }
  parseComponentTree(components, domainName, componentName) {
    const q = [];
    const results = [];
    if (components[domainName][componentName] === void 0) {
      return;
    }
    for (const pattern of components[domainName][componentName]) {
      q.push([[domainName, componentName], pattern]);
    }
    while (q.length > 0) {
      const [path, note] = q.shift();
      Assert.True(path.length >= 2, `Invalid component path: ${path}`);
      const componentName2 = path[1];
      switch (componentName2) {
        case "patterns":
          this.parseComponentPatterns(path, note, q, results);
          break;
        case "concepts":
          this.parseComponentConcepts(path, note, q, results);
          break;
        default:
          break;
      }
    }
    return results;
  }
  loadIndex() {
    console.log("gonext - loadIndex()");
    const domains = this.getIndexDomains();
    const components = this.getDomainComponents(domains);
    const renamed = {};
    for (const domain of Object.keys(components)) {
      for (const component of Object.keys(components[domain])) {
        const results = this.parseComponentTree(
          components,
          domain,
          component
        );
        if (results === void 0) {
          continue;
        }
        const reserved = ["strength routine", "strength routine", "stretch routine", "stretch routine"];
        for (const [path, note] of results) {
          const fm = note.frontmatter;
          this.files[fm.uuid] = [path, note];
          if (renamed[fm.uuid] !== true && fm.type === 2) {
            if (fm.alias === void 0) {
              fm.alias = [path.join(" / ")];
            } else if (Array.isArray(fm.alias)) {
              fm.alias.push(path.join(" / "));
            } else {
              fm.alias = [fm.alias, path.join(" / ")];
            }
            renamed[fm.uuid] = true;
          }
        }
      }
    }
  }
  findFirstParentInDomains(file, resource) {
    const domains = this.getIndexDomains();
    const q = [];
    for (const domain of domains) {
      q.push(domain);
    }
    while (q.length > 0) {
      const cur = q.pop();
      if (cur === void 0) {
        continue;
        return void 0;
      }
      if (cur.links === void 0 || cur.links.length === 0) {
        continue;
      }
      if (cur.frontmatter === void 0) {
        continue;
      }
      const f = this.getFileFromUUID(cur.frontmatter.uuid);
      if (f === void 0) {
        continue;
      }
      if (f.parent.name !== Paths.Slipbox) {
        continue;
      }
      const [start, end] = this.getContentBoundaries(cur);
      for (const link of cur.links) {
        if (link.link.length !== 36) {
          continue;
        }
        const pos = link.position;
        if (pos.start.offset < start || pos.end.offset > end) {
          continue;
        }
        if (link.link === resource.frontmatter.uuid) {
          return cur;
        } else {
          q.push(this.getFileCacheFromUUID(link.link));
        }
      }
    }
    return void 0;
  }
  isSequence(note) {
    Assert.True(
      note.headings.length > 0,
      `isSequence: Invalid parameter: note: ${note.frontmatter.uuid}`
    );
    for (const heading of note.headings) {
      if (heading.level === 4 && heading.heading === "steps") {
        return true;
      }
    }
    return false;
  }
  onunload() {
    console.log("gonext - onunload()");
    delete window.gonext;
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var ExampleModal = class extends import_obsidian.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    const { contentEl } = this;
    const dv = this.app.plugins.plugins.dataview.api;
    const tasks = dv.pages().array().slice(0, 10);
    let s = "";
    for (const task of tasks) {
      s += `${task.file.path}

`;
    }
    contentEl.setText(s);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJjb25zdGFudHMudHMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9zdHJpbmdpZnkuanMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9ybmcuanMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9uYXRpdmUuanMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92NC5qcyIsICJhcGkudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7XG5cdEFwcCxcblx0TW9kYWwsXG5cdFBsdWdpbixcblx0V29ya3NwYWNlLFxuXHQvLyBAdHMtaWdub3JlXG5cdEhUTUxFbGVtZW50LFxuXHRhZGRJY29uLFxuXHRDYWNoZWRNZXRhZGF0YSxcblx0VEZpbGUsXG5cdE1ldGFkYXRhQ2FjaGUsXG5cdFRBYnN0cmFjdEZpbGUsXG59IGZyb20gXCJvYnNpZGlhblwiO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHtcblx0SGVscGVyLFxuXHRGcm9udG1hdHRlcixcblx0TGlzdE1ha2VyLFxuXHQvLyBAdHMtaWdub3JlXG5cdE5hbWVzcGFjZSxcblx0Ly8gQHRzLWlnbm9yZVxuXHRSZW5kZXJlcixcblx0Ly8gQHRzLWlnbm9yZVxuXHRBdXRvRmllbGQsXG5cdC8vIEB0cy1pZ25vcmVcblx0RnJvbnRtYXR0ZXJKUyxcblx0RHZMaWIsXG5cdC8vIEB0cy1pZ25vcmVcblx0R2VuZXJhdG9yLFxuXHQvLyBAdHMtaWdub3JlXG5cdG5vdGlmeSxcblx0Ly8gQHRzLWlnbm9yZVxuXHRBc3NlcnQsXG59IGZyb20gXCIuL2FwaVwiO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgUGF0aHMsIFN0YXR1cywgVHlwZXMsIE5hbWVzcGFjZSwgRGVmYXVsdCB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuLy8gaW1wb3J0IHsgcmFuZG9tVVVJRCB9IGZyb20gXCJjcnlwdG9cIjtcbi8vIGNvbnN0IHsgcmFuZG9tVVVJRCB9ID0gcmVxdWlyZShcImNyeXB0b1wiKTtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBjb250aW51ZWRJbmRlbnQgfSBmcm9tIFwiQGNvZGVtaXJyb3IvbGFuZ3VhZ2VcIjtcbmltcG9ydCB7IHRocm93cyB9IGZyb20gXCJhc3NlcnRcIjtcblxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXG5pbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XG5cdG15U2V0dGluZzogc3RyaW5nO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeVBsdWdpblNldHRpbmdzID0ge1xuXHRteVNldHRpbmc6IFwiZGVmYXVsdFwiLFxufTtcblxuY29uc3QgZGF5U2hvcnQgPSBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl07XG5jb25zdCBtb250aFNob3J0ID0gW1xuXHRcIkphblwiLFxuXHRcIkZlYlwiLFxuXHRcIk1hclwiLFxuXHRcIkFwclwiLFxuXHRcIk1heVwiLFxuXHRcIkp1blwiLFxuXHRcIkp1bFwiLFxuXHRcIkF1Z1wiLFxuXHRcIlNlcFwiLFxuXHRcIk9jdFwiLFxuXHRcIk5vdlwiLFxuXHRcIkRlY1wiLFxuXTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncztcblx0d29ya3NwYWNlOiBXb3Jrc3BhY2U7XG5cdG1ldGFkYXRhQ2FjaGU6IGFueTtcblx0ZHY6IGFueTtcblx0Ly8gQHRzLWlnbm9yZVxuXHRyZW5kZXI6IFJlbmRlcjtcblx0ZGVidWc6IGJvb2xlYW47XG5cdHRhc2tJblN0YXR1c0JhcjogSFRNTEVsZW1lbnQ7XG5cdGFwaTogYW55O1xuXHRsaXN0TWFrZXI6IExpc3RNYWtlcjtcblx0ZnJvbnRtYXR0ZXI6IEZyb250bWF0dGVyO1xuXHRnZW5lcmF0ZTogR2VuZXJhdG9yO1xuXHRub3RpZnk6IGFueTtcblx0dmF1bHRDb250ZW50OiBURmlsZVtdID0gW107XG5cdHZhdWx0Q29udGVudERpY3Q6IHtbIGlkOiBzdHJpbmddOiBURmlsZX0gPSB7fTtcblxuXHRvcGVuSW5OZXdUYWJJZk5vdE9wZW5lZChwYWdlKSB7XG5cdFx0Y29uc3QgYWN0aXZlID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnN0IHJvb3QgPSBhY3RpdmUucGFyZW50O1xuXHRcdC8vIHJlY2hlcmNoZXIgc2kgcGFzIGRcdTAwRTlqYSBvdXZlcnQgZGFucyBsZXMgb25nbGV0cyBhY3RpZnNcblx0XHQvLyBzaW5vbiBjclx1MDBFOWVyIHVuIG5vdXZlbCBvbmdsZXQsIG91dnJpciBsZSBmaWNoaWVyLCBldCBlbiBmYWlyZSBsJ29uZ2xldCBhY3RpZlxuXHRcdGxldCBmb3VuZCA9IGZhbHNlO1xuXHRcdGxldCBub2RlID0gdW5kZWZpbmVkO1xuXHRcdGNvbnN0IGVtcHR5VGFicyA9IFtdO1xuXG5cdFx0Zm9yIChjb25zdCBsZWFmIG9mIHJvb3QuY2hpbGRyZW4pIHtcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmdldEZpbGVDYWNoZUZyb21MZWFmKGxlYWYpO1xuXHRcdFx0aWYgKGZpbGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRlbXB0eVRhYnMucHVzaChsZWFmKTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChcblx0XHRcdFx0ZmlsZS5mcm9udG1hdHRlciAhPT0gdW5kZWZpbmVkICYmXG5cdFx0XHRcdGZpbGUuZnJvbnRtYXR0ZXIudXVpZCA9PT0gcGFnZS5maWxlLmZyb250bWF0dGVyLnV1aWRcblx0XHRcdCkge1xuXHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHRcdG5vZGUgPSBsZWFmO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIWZvdW5kKSB7XG5cdFx0XHRpZiAoZW1wdHlUYWJzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0bm9kZSA9IGVtcHR5VGFic1swXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5jcmVhdGVMZWFmSW5QYXJlbnQoXG5cdFx0XHRcdFx0cm9vdCxcblx0XHRcdFx0XHRyb290LmNoaWxkcmVuLmxlbmd0aCArIDEsXG5cdFx0XHRcdCk7XG5cdFx0XHRcdG5vZGUgPSByb290LmNoaWxkcmVuW3Jvb3QuY2hpbGRyZW4ubGVuZ3RoIC0gMV07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bm9kZS5vcGVuRmlsZSh0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGFnZS5maWxlLnBhdGgpLCB7XG5cdFx0XHRhY3RpdmU6IHRydWUsXG5cdFx0fSk7XG5cdH1cblxuXHRnZXRGaWxlQ2FjaGVGcm9tTGVhZihsZWFmKTogQ2FjaGVkTWV0YWRhdGEge1xuXHRcdGxldCBmaWxlID0gdW5kZWZpbmVkO1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRmaWxlID0gbGVhZi52aWV3LmdldFN5bmNWaWV3U3RhdGUoKS5zdGF0ZS5maWxlO1xuXHRcdH0gY2F0Y2gge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnN0IGFic3RyYWN0UGF0aCA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZSk7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdHJldHVybiBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWJzdHJhY3RQYXRoKTtcblx0fVxuXG5cdGdldEZpbGVGcm9tTGVhZihsZWFmKTogVEFic3RyYWN0RmlsZSB7XG5cdFx0bGV0IGZpbGUgPSB1bmRlZmluZWQ7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGZpbGUgPSBsZWFmLnZpZXcuZ2V0U3luY1ZpZXdTdGF0ZSgpLnN0YXRlLmZpbGU7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0cmV0dXJuIGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZSk7XG5cdH1cblxuXHRleHRyYWN0VVVJREZyb21MaW5rKGxpbms6IHN0cmluZykge1xuXHRcdEFzc2VydC5UcnVlKFxuXHRcdFx0bGluay5sZW5ndGggPj0gMzYsXG5cdFx0XHRgZXh0cmFjdFVVSURGcm9tTGluazogSW52YWxpZCBwYXJhbWV0ZXIgdHlwZTogbGluazogXCIke2xpbmt9XCJgLFxuXHRcdCk7XG5cblx0XHQvLyBhdCB0aGlzIHBvaW50IGxpbmsgaXMgZWl0aGVyIGZvcm0gdXVpZCNoZWFkaW5nIHx8IGludmFsaWRcblx0XHQvLyB3ZSBjYW4gc2FmZWx5IGFzc3VtZSAwOjM2IGlzIHRoZSB1dWlkXG5cdFx0QXNzZXJ0LlRydWUoXG5cdFx0XHRIZWxwZXIuaXNVVUlEKGxpbmsuc2xpY2UoMCwgMzYpKSxcblx0XHRcdGBleHRyYWN0VVVJREZyb21MaW5rOiBJbnZhbGlkIHBhcmFtZXRlciB0eXBlOiBsaW5rOiBcIiR7bGlua31cImAsXG5cdFx0KTtcblx0XHRpZiAobGluay5sZW5ndGggPT09IDM2KSB7XG5cdFx0XHRyZXR1cm4gbGluaztcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGxpbmsuc2xpY2UoMCwgMzYpO1xuXHRcdH1cblx0fVxuXG5cdGdldEZpbGVGcm9tVVVJRChfaWQ6IHN0cmluZyk6IFRBYnN0cmFjdEZpbGUge1xuXHRcdHJldHVybiB0aGlzLnZhdWx0Q29udGVudERpY3RbX2lkXTtcblx0fVxuXG5cdGdldEZpbGVDYWNoZUZyb21VVUlEKF9pZDogc3RyaW5nKTogQ2FjaGVkTWV0YWRhdGEge1xuXHRcdGNvbnN0IGYgPSB0aGlzLnZhdWx0Q29udGVudERpY3RbX2lkXTtcblx0XHRpZiAoZiA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdHJldHVybiBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZik7XG5cdH1cblxuXHRnZW5lcmF0ZUpvdXJuYWxFbnRyeSgpIHsgfVxuXG5cdHNuZWFreVRhYlJlbmFtZXIoYXBwKSB7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnN0IHJvb3QgPSBhcHAud29ya3NwYWNlLmFjdGl2ZUxlYWYucGFyZW50O1xuXG5cdFx0Zm9yIChjb25zdCBsZWFmIG9mIHJvb3QuY2hpbGRyZW4pIHtcblx0XHRcdGxldCBwYXRoID0gdW5kZWZpbmVkO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0cGF0aCA9IGxlYWYudmlldy5nZXRTeW5jVmlld1N0YXRlKCkuc3RhdGUuZmlsZTtcblx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0Y29uc3QgZm0gPVxuXHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKS5mcm9udG1hdHRlcjtcblxuXHRcdFx0aWYgKGZtID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGxldCB0ZXh0ID0gXCJcIjtcblxuXHRcdFx0aWYgKGZtLnR5cGUgPT09IDMgJiYgSGVscGVyLmdldFByb2plY3QoZm0pICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0aWYgKEhlbHBlci5nZXRQcm9qZWN0KGZtKSA9PT0gXCJwcm9qZWN0L2RhaWx5XCIpIHtcblx0XHRcdFx0XHRjb25zdCBhdCA9IG5ldyBEYXRlKGZtLmF0KTtcblx0XHRcdFx0XHR0ZXh0ID0gYChEKSAke2RheVNob3J0W2F0LmdldERheSgpXX0uICR7YXQuZ2V0RGF0ZSgpfSAke21vbnRoU2hvcnRbYXQuZ2V0TW9udGgoKV19YDtcblx0XHRcdFx0XHQvLyB0ZXh0ID0gYFx1RDgzRFx1RENDNSAke2RheVNob3J0W2F0LmdldERheSgpXX0uICR7YXQuZ2V0RGF5KCl9ICR7bW9udGhTaG9ydFthdC5nZXRNb250aCgpXX1gO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRleHQgPSBgKFQpICR7SGVscGVyLmdldFByb2plY3QoZm0pLnNsaWNlKDgpfWA7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoZm0udHlwZSA9PT0gMikge1xuXHRcdFx0XHRpZiAoIUhlbHBlci5uaWxDaGVjayhmbS5hbGlhcykpIHtcblx0XHRcdFx0XHRsZXQgYnVmZiA9IFwiXCI7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBhbGlhcyBvZiBmbS5hbGlhcykge1xuXHRcdFx0XHRcdFx0aWYgKGJ1ZmYubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdGJ1ZmYgPSBhbGlhcztcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoYWxpYXMubGVuZ3RoIDwgYnVmZi5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0YnVmZiA9IGFsaWFzO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNvbnN0IG5vdGUgPSB0aGlzLmdldEZpbGVDYWNoZUZyb21MZWFmKGxlYWYpO1xuXHRcdFx0XHRcdHRleHQgPSBgXHVEODNEXHVEQ0RDICR7YnVmZn1gO1xuXG5cdFx0XHRcdFx0aWYgKG5vdGUuaGVhZGluZ3MubGVuZ3RoID4gMSkge1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBoZWFkaW5nIG9mIG5vdGUuaGVhZGluZ3MpIHtcblx0XHRcdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0XHRcdGhlYWRpbmcubGV2ZWwgPT09IDMgJiZcblx0XHRcdFx0XHRcdFx0XHRoZWFkaW5nLmhlYWRpbmcgPT09IFwiaW5kZXhcIlxuXHRcdFx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdFx0XHR0ZXh0ID0gYChJKSAke2J1ZmZ9YDtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyByZWFkIGxldmVsIDMgaGVhZGluZ1xuXHRcdFx0XHRcdGNvbnN0IG5vdGUgPSB0aGlzLmdldEZpbGVDYWNoZUZyb21MZWFmKGxlYWYpO1xuXHRcdFx0XHRcdGlmIChub3RlLmhlYWRpbmdzLmxlbmd0aCA8IDEpIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGxldCBmb3VuZCA9IGZhbHNlO1xuXHRcdFx0XHRcdGZvciAoY29uc3QgaGVhZGluZyBvZiBub3RlLmhlYWRpbmdzKSB7XG5cdFx0XHRcdFx0XHRpZiAoaGVhZGluZy5sZXZlbCA9PT0gMykge1xuXHRcdFx0XHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdHRleHQgPSBgXHVEODNEXHVEQ0RDICR7aGVhZGluZy5oZWFkaW5nfWA7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIWZvdW5kKSB7XG5cdFx0XHRcdFx0XHR0ZXh0ID0gbm90ZS5mcm9udG1hdHRlci51dWlkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChmbS50eXBlID09PSAyMCkge1xuXHRcdFx0XHRjb25zdCBjcmVhdGVkQXQgPSBuZXcgRGF0ZShmbS5jcmVhdGVkX2F0KTtcblx0XHRcdFx0Ly8gdGV4dCA9IGBcdUQ4M0RcdURDRDMgJHtkYXlTaG9ydFthdC5nZXREYXkoKV19LiAke2F0LmdldERheSgpfSAke21vbnRoU2hvcnRbYXQuZ2V0TW9udGgoKV19YDtcblx0XHRcdFx0aWYgKGZtLmFsaWFzICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHR0ZXh0ID0gYChKKSAke2ZtLmFsaWFzfWA7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGV4dCA9IGAoSikgJHtkYXlTaG9ydFtjcmVhdGVkQXQuZ2V0RGF5KCldfS4gJHtjcmVhdGVkQXQuZ2V0RGF0ZSgpfSAke21vbnRoU2hvcnRbY3JlYXRlZEF0LmdldE1vbnRoKCldfWA7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoZm0udHlwZSA9PT0gMTIpIHtcblx0XHRcdFx0aWYgKGZtLm5hbWUgIT09IHVuZGVmaW5lZCAmJiBmbS5uYW1lICE9PSBcIlwiKSB7XG5cdFx0XHRcdFx0dGV4dCA9IGAoUCkgJHtmbS5uYW1lfWA7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoZm0udHlwZSA9PT0gMTMpIHtcblx0XHRcdFx0dGV4dCA9IGAoSSkgJHtmbS51dWlkfWA7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGlmICh0ZXh0ICE9PSBcIlwiKSB7XG5cdFx0XHRcdC8vIFx1RDgzRFx1RENEM1xuXHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdGxlYWYudGFiSGVhZGVySW5uZXJUaXRsZUVsLmlubmVyVGV4dCA9IHRleHQ7XG5cdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0bGVhZi50YWJIZWFkZXJJbm5lclRpdGxlRWwuaW5uZXJIVE1MID0gdGV4dDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJnb25leHQgLSBvbmxvYWQoKVwiKTtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXHRcdHRoaXMubWV0YWRhdGFDYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGU7XG5cdFx0dGhpcy53b3Jrc3BhY2UgPSB0aGlzLmFwcC53b3Jrc3BhY2U7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdHRoaXMuZHYgPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnMuZGF0YXZpZXcuYXBpO1xuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHR0aGlzLmZyb250bWF0dGVyID0gbmV3IEZyb250bWF0dGVyKHRoaXMpO1xuXHRcdHRoaXMubGlzdE1ha2VyID0gbmV3IExpc3RNYWtlcih0aGlzLCB0aGlzLmR2LCB0aGlzLmZyb250bWF0dGVyKTtcblx0XHR0aGlzLmdlbmVyYXRlID0gbmV3IEdlbmVyYXRvcih0aGlzLmFwcCk7XG5cdFx0dGhpcy5maWxlcyA9IHt9O1xuXG5cdFx0dGhpcy5hcGkgPSB7XG5cdFx0XHRnZXRBcmVhOiBIZWxwZXIuZ2V0QXJlYSxcblx0XHRcdGdldENvbnRleHQ6IEhlbHBlci5nZXRDb250ZXh0LFxuXHRcdFx0Z2V0RG9tYWluOiBIZWxwZXIuZ2V0RG9tYWluLFxuXHRcdFx0Z2V0TGF5ZXI6IEhlbHBlci5nZXRMYXllcixcblx0XHRcdGdldE9yZzogSGVscGVyLmdldE9yZyxcblx0XHRcdGdldFByb2plY3Q6IEhlbHBlci5nZXRQcm9qZWN0LFxuXHRcdFx0ZHVyYXRpb25TdHJpbmdUb1NlYzogSGVscGVyLmR1cmF0aW9uU3RyaW5nVG9TZWMsXG5cdFx0XHRwYXRoczogUGF0aHMsXG5cdFx0XHR0eXBlczogVHlwZXMsXG5cdFx0XHRzdGF0dXM6IFN0YXR1cyxcblx0XHRcdG5hbWVzcGFjZTogTmFtZXNwYWNlLFxuXHRcdFx0ZGVmYXVsdDogRGVmYXVsdCxcblx0XHRcdGZyb250bWF0dGVyOiB0aGlzLmZyb250bWF0dGVyLFxuXHRcdFx0bGlzdE1ha2VyOiB0aGlzLmxpc3RNYWtlcixcblx0XHRcdHJlbmRlcmVyOiBSZW5kZXJlcixcblx0XHRcdGF1dG9GaWVsZDogQXV0b0ZpZWxkLFxuXHRcdFx0ZHZMaWI6IG5ldyBEdkxpYigpLFxuXHRcdFx0bm90aWZ5OiBub3RpZnksXG5cdFx0fTtcblxuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHR3aW5kb3cuZ29uZXh0ID0ge1xuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0c3RhdGU6IHdpbmRvdy5nb25leHQ/LnN0YXRlID8/IHt9LFxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0YXBwOiB0aGlzLmFwcCxcblx0XHR9O1xuXHRcdGFkZEljb24oXG5cdFx0XHRcIkdvTmV4dEljb25cIixcblx0XHRcdGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjMyXCIgaGVpZ2h0PVwiMzJcIiB2aWV3Qm94PVwiMCAwIDMyIDMyXCI+PHBhdGggZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNMjAgMTJWMmgydjEwem00IDBWMmgydjEwem00IDBWMmgydjEwem0tMTIgOGEzLjkxMiAzLjkxMiAwIDAgMS00LTRhMy45MTIgMy45MTIgMCAwIDEgNC00di0yYTYgNiAwIDEgMCA2IDZoLTJhMy45MTIgMy45MTIgMCAwIDEtNCA0XCI+PC9wYXRoPjxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTTI4Ljg5MyAxOC40NTRMMjYuMDk4IDE2bC0xLjMxOCAxLjUwNGwyLjc5MiAyLjQ1MmwtMi4zNiA0LjA4OGwtMy40MjctMS4xNmE5LjAzMiA5LjAzMiAwIDAgMS0yLjcxNCAxLjU2NUwxOC4zNiAyOGgtNC43MmwtLjcxLTMuNTVhOS4wOTUgOS4wOTUgMCAwIDEtMi42OTUtMS41NzJsLTMuNDQ3IDEuMTY2bC0yLjM2LTQuMDg4bDIuNzI1LTIuMzk1YTguOTI2IDguOTI2IDAgMCAxLS4wMDctMy4xMjhsLTIuNzE4LTIuMzlsMi4zNi00LjA4N2wzLjQyNyAxLjE2QTkuMDMgOS4wMyAwIDAgMSAxMi45MyA3LjU1TDEzLjY0IDRIMTZWMmgtMi4zNmEyIDIgMCAwIDAtMS45NjEgMS42MDhsLS41MDQgMi41MTlhMTAuOTY3IDEwLjk2NyAwIDAgMC0xLjMyNy43NTNsLTIuNDItLjgxOWExLjk5OCAxLjk5OCAwIDAgMC0yLjM3Mi44OTVsLTIuMzYgNC4wODhhMiAyIDAgMCAwIC40MTEgMi41MDJsMS45MzEgMS42OTdDNS4wMjEgMTUuNDk1IDUgMTUuNzQ1IDUgMTZjMCAuMjU4LjAxLjUxMy4wMjguNzY2bC0xLjkyIDEuNjg4YTIgMiAwIDAgMC0uNDEzIDIuNTAybDIuMzYgNC4wODhhMS45OTggMS45OTggMCAwIDAgMi4zNzQuODk1bDIuNDM0LS44MjRhMTAuOTc0IDEwLjk3NCAwIDAgMCAxLjMxMi43NTlsLjUwMyAyLjUxOEEyIDIgMCAwIDAgMTMuNjQgMzBoNC43MmEyIDIgMCAwIDAgMS45NjEtMS42MDhsLjUwNC0yLjUxOWExMC45NjcgMTAuOTY3IDAgMCAwIDEuMzI3LS43NTNsMi40MTkuODE4YTEuOTk4IDEuOTk4IDAgMCAwIDIuMzczLS44OTRsMi4zNi00LjA4OGEyIDIgMCAwIDAtLjQxMS0yLjUwMlwiPjwvcGF0aD48L3N2Zz5gLFxuXHRcdCk7XG5cblx0XHR0aGlzLmFkZFJpYmJvbkljb24oXCJHb05leHRJY29uXCIsIFwiW2ddb1tuXWV4dFwiLCBhc3luYyAoKSA9PiB7XG5cdFx0XHR0aGlzLmdlbmVyYXRlLmZsZWV0aW5nKCk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJhY3RpdmUtbGVhZi1jaGFuZ2VcIiwgKCkgPT4ge1xuXHRcdFx0cmV0dXJuIHRoaXMuc25lYWt5VGFiUmVuYW1lcih0aGlzLmFwcCk7XG5cdFx0fSk7XG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwicXVpY2stcHJldmlld1wiLCAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gdGhpcy5zbmVha3lUYWJSZW5hbWVyKHRoaXMuYXBwKTtcblx0XHR9KTtcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJyZXNpemVcIiwgKCkgPT4ge1xuXHRcdFx0cmV0dXJuIHRoaXMuc25lYWt5VGFiUmVuYW1lcih0aGlzLmFwcCk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiZ290by1hY3RpdmUtdGFzay1sb2dzXCIsXG5cdFx0XHRuYW1lOiBcIkdvdG8gQWN0aXZlIFRhc2tzIExvZ3MnXCIsXG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdGNvbnN0IHBhZ2VzID0gdGhpcy5kdlxuXHRcdFx0XHRcdC5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfVwiYClcblx0XHRcdFx0XHQud2hlcmUoKHBhZ2UpID0+IHtcblx0XHRcdFx0XHRcdGlmIChwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuc3RhdHVzID09PSBcImRvaW5nXCIpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpZiAocGFnZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgdEZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZXNbMF0pO1xuXHRcdFx0XHRjb25zdCBsb2dzID0gdGhpcy5kdi5wYWdlcyhgXCIke1BhdGhzLkxvZ3N9LyR7dEZtLnV1aWR9XCJgKS5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiZGVzY1wiKTtcblx0XHRcdFx0aWYgKGxvZ3MubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5vcGVuSW5OZXdUYWJJZk5vdE9wZW5lZChsb2dzWzBdKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJnb3RvLWNoaWxkcmVuXCIsXG5cdFx0XHRuYW1lOiBcIkdvdG8gQ2hpbGRcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmdldEZpbGVGcm9tTGVhZihcblx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZixcblx0XHRcdFx0KTtcblx0XHRcdFx0aWYgKGZpbGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJnb3RvLWNoaWxkcmVuOiBGaWxlIGlzIHVuZGVmaW5lZFwiKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBjYWNoZSA9IHRoaXMuZ2V0RmlsZUNhY2hlRnJvbUxlYWYoXG5cdFx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWYsXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGNvbnN0IGZtID0gY2FjaGUuZnJvbnRtYXR0ZXI7XG5cdFx0XHRcdGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcImdvdG8tY2hpbGRyZW46IEludmFsaWQgRnJvbnRNYXR0ZXJcIik7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgYWN0aXZlID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG5cdFx0XHRcdGNvbnN0IGRpciA9IGZpbGUucGF0aC5zcGxpdChcIi9cIilbMF07XG5cblx0XHRcdFx0aWYgKGRpciA9PT0gUGF0aHMuVGFza3MpIHtcblx0XHRcdFx0XHRjb25zdCBwYWdlID0geyBmaWxlOiB7IGZyb250bWF0dGVyOiBmbSwgcGF0aDogZmlsZS5wYXRoIH0gfTtcblx0XHRcdFx0XHRjb25zdCBjdXJGbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuXHRcdFx0XHRcdGNvbnN0IGN1ckF0ID0gY3VyRm0uYXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG5cblx0XHRcdFx0XHRpZiAoY3VyRm0uZ2V0UHJvamVjdCgpID09PSBcImRhaWx5XCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHBhZ2VzID0gdGhpcy5kdlxuXHRcdFx0XHRcdFx0XHQucGFnZXMoYFwiJHtQYXRocy5Kb3VybmFsfVwiYClcblx0XHRcdFx0XHRcdFx0LndoZXJlKChwYWdlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgakZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGpGbS5nZXRQcm9qZWN0KCkgIT09IFwibWlzc2lvblwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgakF0ID0gakZtLmNyZWF0ZWRBdFxuXHRcdFx0XHRcdFx0XHRcdFx0LnRvSVNPU3RyaW5nKClcblx0XHRcdFx0XHRcdFx0XHRcdC5zbGljZSgwLCAxMCk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGN1ckF0ICE9PSBqQXQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdGlmIChwYWdlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdFx0Ly8gY3JlYXRlIGpvdXJuYWwgcGFnZVxuXHRcdFx0XHRcdFx0XHRjb25zdCBub3RlID0gdGhpcy5nZW5lcmF0ZS5qb3VybmFsRW50cnkoKTtcblx0XHRcdFx0XHRcdFx0bm90ZS50aGVuKChmaWxlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0YWN0aXZlLm9wZW5GaWxlKGZpbGUsIHsgYWN0aXZlOiB0cnVlIH0pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgY2hpbGRyZW4gPVxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcblx0XHRcdFx0XHRcdFx0XHRcdHBhZ2VzWzBdLmZpbGUucGF0aCxcblx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRBc3NlcnQuVHJ1ZShcblx0XHRcdFx0XHRcdFx0XHQhSGVscGVyLm5pbENoZWNrKGNoaWxkcmVuKSxcblx0XHRcdFx0XHRcdFx0XHRgZ290by1jaGlsZHJlbjogVW5leHBlY3RlZCB1bmRlZmluZWQgZmlsZTogJHtwYWdlc1swXS5maWxlLnBhdGh9YCxcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0YWN0aXZlLm9wZW5GaWxlKGNoaWxkcmVuKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zdCBwYWdlcyA9IHRoaXMuZHZcblx0XHRcdFx0XHRcdFx0LnBhZ2VzKGBcIiR7UGF0aHMuTG9nc30vJHtjdXJGbS51dWlkfVwiYClcblx0XHRcdFx0XHRcdFx0LnNvcnQoKGspID0+IGsuY3JlYXRlZF9hdCwgXCJkZXNjXCIpO1xuXHRcdFx0XHRcdFx0aWYgKHBhZ2VzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGNvbnN0IGNoaWxkcmVuID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFxuXHRcdFx0XHRcdFx0XHRwYWdlc1swXS5maWxlLnBhdGgsXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0QXNzZXJ0LlRydWUoXG5cdFx0XHRcdFx0XHRcdCFIZWxwZXIubmlsQ2hlY2soY2hpbGRyZW4pLFxuXHRcdFx0XHRcdFx0XHRgZ290by1jaGlsZHJlbjogVW5leHBlY3RlZCB1bmRlZmluZWQgZmlsZTogJHtwYWdlc1swXS5maWxlLnBhdGh9YCxcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRhY3RpdmUub3BlbkZpbGUoY2hpbGRyZW4pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFxuXHRcdFx0XHRcdFx0XCJnb3RvLWNoaWxkcmVuOiBOb3QgSW1wbGVtZW50ZWQgb3V0c2lkZSBKb3VybmFsLCBUYXNrc1wiLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImdvdG8tcGFyZW50XCIsXG5cdFx0XHRuYW1lOiBcIkdvdG8gUGFyZW50XCIsXG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcImdvdG8tcGFyZW50OlwiKVxuXHRcdFx0XHRjb25zdCBmaWxlID0gdGhpcy5nZXRGaWxlRnJvbUxlYWYoXG5cdFx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWYsXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGlmIChmaWxlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiZ290by1wYXJlbnQ6IEZpbGUgaXMgdW5kZWZpbmVkXCIpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGNhY2hlID0gdGhpcy5nZXRGaWxlQ2FjaGVGcm9tTGVhZihcblx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZixcblx0XHRcdFx0KTtcblx0XHRcdFx0Y29uc3QgZm0gPSBjYWNoZS5mcm9udG1hdHRlcjtcblx0XHRcdFx0aWYgKGZtID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiZ290by1wYXJlbnQ6IEludmFsaWQgRnJvbnRNYXR0ZXJcIik7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgYWN0aXZlID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG5cdFx0XHRcdGNvbnN0IGRpciA9IGZpbGUucGF0aC5zcGxpdChcIi9cIilbMF07XG5cblx0XHRcdFx0aWYgKGRpciA9PT0gUGF0aHMuU2xpcGJveCkge1xuXHRcdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0XHRjb25zdCBwYXJlbnQgPSB0aGlzLmZpbmRGaXJzdFBhcmVudEluRG9tYWlucyhmaWxlLCBjYWNoZSk7XG5cdFx0XHRcdFx0aWYgKHBhcmVudCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlID0gdGhpcy5nZXRGaWxlRnJvbVVVSUQoXG5cdFx0XHRcdFx0XHRcdHBhcmVudC5mcm9udG1hdHRlci51dWlkLFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGFjdGl2ZS5vcGVuRmlsZShmaWxlKTtcblx0XHRcdFx0XHRcdC8vIHRoaXMub3BlbkluTmV3VGFiSWZOb3RPcGVuZWQocGFnZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGFjdGl2ZS5vcGVuRmlsZShcblx0XHRcdFx0XHRcdFx0dGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5kZXgubWRcIiksXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmIChkaXIgPT09IFBhdGhzLkxvZ3MpIHtcblx0XHRcdFx0XHRjb25zdCB0YXNrSWQgPSBmaWxlLnBhdGguc3BsaXQoXCIvXCIpWzFdO1xuXHRcdFx0XHRcdEFzc2VydC5UcnVlKFxuXHRcdFx0XHRcdFx0dGFza0lkICE9PSB1bmRlZmluZWQsXG5cdFx0XHRcdFx0XHRgSW52YWxpZCBsb2dEaXI6ICR7ZmlsZS5wYXRofWAsXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRjb25zdCB0YXNrID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFxuXHRcdFx0XHRcdFx0YCR7UGF0aHMuVGFza3N9LyR7Zm0ucGFyZW50X2lkfS5tZGAsXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRpZiAoSGVscGVyLm5pbENoZWNrKHRhc2spKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGBVbmRlZmluZWQgVGFzazogJHt0YXNrSWR9YCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGFjdGl2ZS5vcGVuRmlsZSh0YXNrKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAoZGlyID09PSBQYXRocy5UYXNrcykge1xuXHRcdFx0XHRcdGNvbnN0IHBhZ2UgPSB7IGZpbGU6IHsgZnJvbnRtYXR0ZXI6IGZtLCBwYXRoOiBmaWxlLnBhdGggfSB9O1xuXHRcdFx0XHRcdGNvbnN0IGN1ckZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG5cdFx0XHRcdFx0Y29uc3QgY3VyQXQgPSBjdXJGbS5hdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcblx0XHRcdFx0XHRpZiAoY3VyRm0uZ2V0UHJvamVjdCgpID09PSBcImRhaWx5XCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHBhZ2VzID0gdGhpcy5kdlxuXHRcdFx0XHRcdFx0XHQucGFnZXMoYFwiJHtQYXRocy5Kb3VybmFsfVwiYClcblx0XHRcdFx0XHRcdFx0LndoZXJlKChwYWdlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgakZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGpGbS5nZXRQcm9qZWN0KCkgIT09IFwibWlzc2lvblwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgakF0ID0gakZtLmF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChjdXJBdCAhPT0gakF0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0aWYgKHBhZ2VzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHQvLyBjcmVhdGUgam91cm5hbCBwYWdlXG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiTXVzdCBjcmVhdGUgam91cm5hbCBlbnRyeSBmaXJzdFwiKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IEltcGxlbWVudGVkXCIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFxuXHRcdFx0XHRcdFx0XHRcImdvdG8tcGFyZW50OiBOb3QgSW1wbGVtZW50ZWQgZm9yIG5vbi1kYWlseSBUYXNrXCIsXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmIChkaXIgPT09IFBhdGhzLkpvdXJuYWwpIHtcblx0XHRcdFx0XHRjb25zdCBwYWdlID0geyBmaWxlOiB7IGZyb250bWF0dGVyOiBmbSwgcGF0aDogZmlsZS5wYXRoIH0gfTtcblx0XHRcdFx0XHRjb25zdCBjdXJGbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuXHRcdFx0XHRcdGNvbnN0IGN1ckF0ID0gY3VyRm0uY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuXHRcdFx0XHRcdGlmIChjdXJGbS5nZXRQcm9qZWN0KCkgPT09IFwibWlzc2lvblwiKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBwYWdlcyA9IHRoaXMuZHZcblx0XHRcdFx0XHRcdFx0LnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKVxuXHRcdFx0XHRcdFx0XHQud2hlcmUoKHBhZ2UpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRpZiAocGFnZS5maWxlLmZyb250bWF0dGVyLmF0ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRjb25zdCB0Rm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAodEZtLmdldFByb2plY3QoKSAhPT0gXCJkYWlseVwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgdEF0ID0gdEZtLmF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChjdXJBdCAhPT0gdEF0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRBc3NlcnQuVHJ1ZShcblx0XHRcdFx0XHRcdFx0cGFnZXMubGVuZ3RoID09PSAxLFxuXHRcdFx0XHRcdFx0XHRgTm9uIGV4aXN0YW50IG9yIG5vbiB1bmlxdWUgVGFzazogJHtwYWdlcy5maWxlLmZyb250bWF0dGVyLnV1aWR9YCxcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRjb25zdCBmID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFxuXHRcdFx0XHRcdFx0XHRwYWdlc1swXS5maWxlLnBhdGgsXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0QXNzZXJ0LlRydWUoXG5cdFx0XHRcdFx0XHRcdCFIZWxwZXIubmlsQ2hlY2soZiksXG5cdFx0XHRcdFx0XHRcdGBVbmV4cGVjdGVkIG5vbi1leGlzdGFudCBUYXNrOiAke3BhZ2VzWzBdLmZpbGUucGF0aH1gLFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGFjdGl2ZS5vcGVuRmlsZShmKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcblx0XHRcdFx0XHRcdFx0XCJnb3RvLXBhcmVudDogTm90IEltcGxlbWVudGVkIGZvciBub24tbWlzc2lvbiBKb3VybmFsIEVudHJ5XCIsXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFxuXHRcdFx0XHRcdFx0XCJnb3RvLXBhcmVudDogTm90IEltcGxlbWVudGVkIG91dHNpZGUgSW5kZXgsIExvZ3NcIixcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJnb3RvLWFjdGl2ZS10YXNrXCIsXG5cdFx0XHRuYW1lOiBcIkdvdG8gQWN0aXZlIFRhc2tcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0Y29uc3QgcGFnZXMgPSB0aGlzLmR2XG5cdFx0XHRcdFx0LnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKVxuXHRcdFx0XHRcdC53aGVyZSgocGFnZSkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHBhZ2UuZmlsZS5mcm9udG1hdHRlci5zdGF0dXMgPT09IFwiZG9pbmdcIikge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKGBmb3VuZCAke3BhZ2VzLmxlbmd0aH0gYWN0aXZlIHRhc2socylgKTtcblx0XHRcdFx0aWYgKHBhZ2VzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMub3BlbkluTmV3VGFiSWZOb3RPcGVuZWQocGFnZXNbMF0pO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJvcGVuLXRvZGF5cy1kYWlseVwiLFxuXHRcdFx0bmFtZTogXCJPcGVuIFRvZGF5J3MgRGFpbHlcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG5cdFx0XHRcdGNvbnN0IG5vd0lzbyA9IG5vdy50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcblx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRjb25zdCBwYWdlcyA9IHRoaXMuZHZcblx0XHRcdFx0XHQucGFnZXMoYFwiJHtQYXRocy5UYXNrc31cImApXG5cdFx0XHRcdFx0LndoZXJlKChwYWdlKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAocGFnZS5maWxlLmZyb250bWF0dGVyLmF0ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBhc3NpZ24gbm93IHNpIGF0ID09PSB1bmRlZmluZWRcblx0XHRcdFx0XHRcdGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG5cdFx0XHRcdFx0XHRpZiAoZm0uZ2V0UHJvamVjdCgpICE9PSBcImRhaWx5XCIpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRsZXQgZm1Jc28gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRmbUlzbyA9IGZtLmF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybihgcG9zc2libGUgaW52YWxpZCBkYXRhIGluICR7Zm0udXVpZH1gKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoZm1Jc28gPT09IG5vd0lzbykge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGlmIChwYWdlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLm9wZW5Jbk5ld1RhYklmTm90T3BlbmVkKHBhZ2VzWzBdKTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiZ29uZXh0LWdlbmVyYXRlLWZsZWV0aW5nXCIsXG5cdFx0XHRuYW1lOiBcIkdlbmVyYXRlIGZsZWV0aW5nIG5vdGVcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuZ2VuZXJhdGUuZmxlZXRpbmcoKTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwic2FmZS1kZWxldGVcIixcblx0XHRcdG5hbWU6IFwiU2FmZSBEZWxldGVcIixcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRcdFx0Y29uc3QgZm0gPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSkuZnJvbnRtYXR0ZXI7XG5cdFx0XHRcdGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3Qgcm9vdFBhdGggPSBbXG5cdFx0XHRcdFx0YCR7UGF0aHMuSm91cm5hbH0ubWRgLFxuXHRcdFx0XHRcdGAke1BhdGhzLkluYm94fS5tZGAsXG5cdFx0XHRcdFx0XCJBZCBIb2MubWRcIixcblx0XHRcdFx0XHRcImFsbERvbmVUYXNrcy5tZFwiLFxuXHRcdFx0XHRcdFwiYWxsRG9uZVRhc2tzV2l0aG91dExvZy5tZFwiLFxuXHRcdFx0XHRcdFwiYWxsTWVkaWEubWRcIixcblx0XHRcdFx0XHRcImFsbFByb2dyZXNzZWRUYXNrcy5tZFwiLFxuXHRcdFx0XHRcdFwibm90ZUxvY2F0b3IubWRcIixcblx0XHRcdFx0XHRcIlByYXhpcy5tZFwiLFxuXHRcdFx0XHRdO1xuXHRcdFx0XHRmb3IgKGNvbnN0IHAgb2Ygcm9vdFBhdGgpIHtcblx0XHRcdFx0XHRpZiAoZmlsZS5wYXRoID09PSBwKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRcdGZpbGUucGF0aC5zcGxpdCgwLCBQYXRocy5SZXNvdXJjZXMubGVuZ3RoKSA9PT1cblx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdFx0UGF0aHMuUmVzb3VyY2VzXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnNvbGUubG9nKGBkZWxldGVkIGZpbGU6ICR7ZmlsZS5wYXRofWApO1xuXHRcdFx0XHRhcHAudmF1bHQuZGVsZXRlKGZpbGUpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJkaXNwbGF5LW1vZGFsXCIsXG5cdFx0XHRuYW1lOiBcIkRpc3BsYXkgbW9kYWxcIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdG5ldyBFeGFtcGxlTW9kYWwodGhpcy5hcHApLm9wZW4oKTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiZ28tcGFyZW50XCIsXG5cdFx0XHRuYW1lOiBcIkdvIFBhcmVudFwiLFxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0Y29uc3QgZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdFx0XHRjb25zdCBmbSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKS5mcm9udG1hdHRlcjtcblx0XHRcdFx0aWYgKGZtID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoZm0ucGFyZW50X2lkID09PSB1bmRlZmluZWQgJiYgZm0ucmVmX2lkID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRjb25zb2xlLndhcm4oXG5cdFx0XHRcdFx0XHRgcGFyZW50X2lkOiAnJHtmbS5wYXJlbnRfaWR9JyByZWZfaWQ6ICcke2ZtLnJlZl9pZH0nYCxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHRmbS50eXBlID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0XHQoZm0udHlwZSAhPT0gVHlwZXMuTG9nICYmXG5cdFx0XHRcdFx0XHRmbS50eXBlICE9PSBUeXBlcy5NZWRpYSAmJlxuXHRcdFx0XHRcdFx0Zm0udHlwZSAhPT0gVHlwZXMuRmxlZXRpbmcpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdGNvbnNvbGUud2Fybihcblx0XHRcdFx0XHRcdGBpbnZhbGlkIHR5cGU6ICcke2ZtLnR5cGV9JyBmb3Igbm90ZTogJyR7Zm0udXVpZH0nYCxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGh0dHBzOi8vZG9jcy5vYnNpZGlhbi5tZC9SZWZlcmVuY2UvVHlwZVNjcmlwdCtBUEkvV29ya3NwYWNlL2NyZWF0ZUxlYWZJblBhcmVudFxuXHRcdFx0XHQvLyBhcHAud29ya3NwYWNlLmNyZWF0ZUxlYWZJblBhcmVudCgpO1xuXHRcdFx0XHQvLyBjb25zdCBsZWFmID0gYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpO1xuXHRcdFx0XHQvLyBwYXJlbnQgaWRcblx0XHRcdFx0Y29uc3QgcGFyZW50ID1cblx0XHRcdFx0XHRmbS50eXBlID09PSBUeXBlcy5Mb2dcblx0XHRcdFx0XHRcdD8gYCR7UGF0aHMuVGFza3N9LyR7Zm0ucGFyZW50X2lkfS5tZGBcblx0XHRcdFx0XHRcdDogYCR7UGF0aHMuUmVmc30vJHtmbS5yZWZfaWR9Lm1kYDtcblx0XHRcdFx0Y29uc3QgcGFnZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGFyZW50KTtcblx0XHRcdFx0YXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQocGFyZW50LCBcIi9cIiwgZmFsc2UpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIGhvb2sgcG91ciBtZXR0cmUgXHUwMEUwIGpvdXIgbGVzIGFsaWFzXG5cdFx0dGhpcy5hcHAubWV0YWRhdGFDYWNoZS5vbihcblx0XHRcdFwiY2hhbmdlZFwiLFxuXHRcdFx0KGZpbGU6IFRGaWxlLCBkYXRhOiBzdHJpbmcsIGNhY2hlOiBDYWNoZWRNZXRhZGF0YSkgPT4ge1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIm1ldGFkYXRhQ2FjaGUgLSBjaGFuZ2VkXCIpO1xuXHRcdFx0XHRjb25zdCBmbSA9IGNhY2hlLmZyb250bWF0dGVyO1xuXHRcdFx0XHRpZiAoZm0udHlwZSA9PT0gMikge1xuXHRcdFx0XHRcdGlmICh0aGlzLmZpbGVzW2ZtLnV1aWRdICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdGNvbnN0IFtwYXRoLCBub3RlXSA9IHRoaXMuZmlsZXNbZm0udXVpZF07XG5cdFx0XHRcdFx0XHRmbS5hbGlhcyA9IFtwYXRoLmpvaW4oXCIgLyBcIildO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHQpO1xuXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xuXHRcdFx0Y29uc29sZS5sb2coXCJ3b3Jrc3BhY2UgLSBsYXlvdXQtcmVhZHlcIik7XG5cdFx0XHRmb3IgKGNvbnN0IGYgb2YgdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKSkge1xuXHRcdFx0XHRpZiAoIUhlbHBlci5pc1VVSUQoZi5iYXNlbmFtZSkpIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMudmF1bHRDb250ZW50RGljdFtmLmJhc2VuYW1lXSA9IGY7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMubG9hZEluZGV4KCk7XG5cdFx0fSk7XG5cdH1cblxuXHRnZXRJbmRleERvbWFpbnMoKSB7XG5cdFx0Y29uc3QgaW5kZXhQYXRoID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5kZXgubWRcIik7XG5cdFx0Y29uc3QgaW5kZXggPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShpbmRleFBhdGgpO1xuXHRcdGNvbnN0IGRvbWFpbnMgPSBbXTtcblxuXHRcdGxldCBzdGFydCA9IHVuZGVmaW5lZDtcblx0XHRsZXQgZW5kID0gdW5kZWZpbmVkO1xuXHRcdGxldCBmb3VuZCA9IGZhbHNlO1xuXG5cdFx0Ly8gcmVjaGVyY2hlIGR1IHRvcCBsZXZlbCBoZWFkaW5nIGAjIyBkb21haW5zYFxuXHRcdGZvciAoY29uc3QgaGVhZGluZyBvZiBpbmRleC5oZWFkaW5ncykge1xuXHRcdFx0aWYgKGhlYWRpbmcubGV2ZWwgPT09IDIgJiYgZm91bmQpIHtcblx0XHRcdFx0ZW5kID0gaGVhZGluZy5wb3NpdGlvbi5zdGFydC5vZmZzZXQ7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fSBlbHNlIGlmIChoZWFkaW5nLmxldmVsID09PSAyICYmIGhlYWRpbmcuaGVhZGluZyA9PT0gXCJkb21haW5zXCIpIHtcblx0XHRcdFx0c3RhcnQgPSBoZWFkaW5nLnBvc2l0aW9uLmVuZC5vZmZzZXQ7XG5cdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyByZWNoZXJjaGUgZGVzIGxpZW5zIHF1aSBzb250IGNvbnRlbnVzIGRhbnMgbGVzIGJvcm5lcyBkdSB0b3AgbGV2ZWwgaGVhZGluZyBgIyMgZG9tYWluc2Bcblx0XHRmb3IgKGNvbnN0IGxpbmsgb2YgaW5kZXgubGlua3MpIHtcblx0XHRcdGNvbnN0IHBvcyA9IGxpbmsucG9zaXRpb247XG5cdFx0XHRpZiAocG9zLnN0YXJ0Lm9mZnNldCA8IHN0YXJ0IHx8IHBvcy5lbmQub2Zmc2V0ID4gZW5kKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBpbmRleENvbnRlbnQgPSB0aGlzLmdldEZpbGVDYWNoZUZyb21VVUlEKGxpbmsubGluayk7XG5cdFx0XHRpZiAoaW5kZXhDb250ZW50ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpbmRleENvbnRlbnQuaGVhZGluZ3MubGVuZ3RoIDwgMikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKGBJbnZhbGlkIEluZGV4OiAke2xpbmsubGlua31gKTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGRvbWFpbnMucHVzaChpbmRleENvbnRlbnQpO1xuXHRcdH1cblxuXHRcdHJldHVybiBkb21haW5zO1xuXHR9XG5cblx0Z2V0RG9tYWluQ29tcG9uZW50cyhkb21haW5zKSB7XG5cdFx0Ly8gcmVjaGVyY2hlIGRhbnMgbGVzIGluZGV4IGRlcyBkb21haW5zIHJlc3BlY3RpZnMgcydpbCB5IGEgcHJcdTAwRTlzZW5jZSBkJ3VuZSBlbnRyeSBgIyMjIHBhdHRlcm5zYFxuXHRcdC8vIC0+IGNvbXBvbmVudHNcblx0XHRjb25zdCBjb21wb25lbnRzID0ge307XG5cdFx0Zm9yIChjb25zdCBkb21haW4gb2YgZG9tYWlucykge1xuXHRcdFx0Y29uc3QgbmFtZSA9IGRvbWFpbi5oZWFkaW5nc1sxXS5oZWFkaW5nO1xuXHRcdFx0Y29uc3Qgc3RhcnQgPSBkb21haW4uaGVhZGluZ3NbMV0ucG9zaXRpb24uZW5kLm9mZnNldDtcblx0XHRcdGxldCBlbmQgPSAwO1xuXHRcdFx0aWYgKGRvbWFpbi5oZWFkaW5nc1syXSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGVuZCA9IGRvbWFpbi5oZWFkaW5nc1syXS5wb3NpdGlvbi5zdGFydC5vZmZzZXQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbmQgPVxuXHRcdFx0XHRcdGRvbWFpbi5zZWN0aW9uc1tkb21haW4uc2VjdGlvbnMubGVuZ3RoIC0gMV0ucG9zaXRpb24uZW5kXG5cdFx0XHRcdFx0XHQub2Zmc2V0O1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBkb21haW4ubGlua3MpIHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdGNvbXBvbmVudC5wb3NpdGlvbi5zdGFydC5vZmZzZXQgPCBzdGFydCB8fFxuXHRcdFx0XHRcdGNvbXBvbmVudC5wb3NpdGlvbi5lbmQub2Zmc2V0ID4gZW5kXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGNvbXBvbmVudHNbbmFtZV0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGNvbXBvbmVudHNbbmFtZV0gPSB7fTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGNhY2hlID0gdGhpcy5nZXRGaWxlQ2FjaGVGcm9tVVVJRChcblx0XHRcdFx0XHR0aGlzLmV4dHJhY3RVVUlERnJvbUxpbmsoY29tcG9uZW50LmxpbmspLFxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQuZGlzcGxheVRleHQ7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQhW1xuXHRcdFx0XHRcdFx0XCJwYXR0ZXJuc1wiLFxuXHRcdFx0XHRcdFx0XCJjb25jZXB0c1wiLFxuXHRcdFx0XHRcdFx0XCJndWlkZWxpbmVzXCIsXG5cdFx0XHRcdFx0XHRcInByb2NlZHVyZXNcIixcblx0XHRcdFx0XHRcdFwibWF0ZXJpYWxcIixcblx0XHRcdFx0XHRdLmNvbnRhaW5zKGNvbXBvbmVudE5hbWUpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGNvbXBvbmVudHNbbmFtZV1bY29tcG9uZW50TmFtZV0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGNvbXBvbmVudHNbbmFtZV1bY29tcG9uZW50TmFtZV0gPSBbXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjYWNoZS5saW5rcyA9PT0gdW5kZWZpbmVkIHx8IGNhY2hlLmxpbmtzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Zm9yIChjb25zdCBsaW5rIG9mIGNhY2hlLmxpbmtzKSB7XG5cdFx0XHRcdFx0Y29tcG9uZW50c1tuYW1lXVtjb21wb25lbnROYW1lXS5wdXNoKFxuXHRcdFx0XHRcdFx0dGhpcy5nZXRGaWxlQ2FjaGVGcm9tVVVJRChcblx0XHRcdFx0XHRcdFx0dGhpcy5leHRyYWN0VVVJREZyb21MaW5rKGxpbmsubGluayksXG5cdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY29tcG9uZW50cztcblx0fVxuXG5cdGNvbW1vbkRhdGFWYWxpZGF0aW9uKHBhdGg6IHN0cmluZ1tdLCBub3RlOiBDYWNoZWRNZXRhZGF0YSkge1xuXHRcdC8vIHBhcyBkJ2FjY2VzIGF1IG5vbSBkdSBmaWNoaWVyLCBhdSBjaGVtaW4gYXZlYyBsZSBDYWNoZWRNZXRhZGF0YVxuXHRcdC8vIGNvdW50IGRlIGhlYWRpbmdzIGxldmVsIDMgPT09IDFcblx0XHRjb25zdCBmbSA9IG5vdGUuZnJvbnRtYXR0ZXI7XG5cdFx0QXNzZXJ0LlRydWUoXG5cdFx0XHRmbSAhPT0gdW5kZWZpbmVkLFxuXHRcdFx0YEludmFsaWQgRnJvbnRNYXR0ZXIgaW46ICR7cGF0aC5qb2luKFwiL1wiKX1gLFxuXHRcdCk7XG5cdFx0QXNzZXJ0LlRydWUobm90ZS5oZWFkaW5ncyAhPT0gdW5kZWZpbmVkLCBgQmxhbmsgcmVzb3VyY2U6ICR7Zm0udXVpZH1gKTtcblx0fVxuXG5cdGdldENvbnRlbnRCb3VuZGFyaWVzKG5vdGU6IENhY2hlZE1ldGFkYXRhKSB7XG5cdFx0Ly8gbG9jYXRlIGNvbnRlbnQgb2Zmc2V0XG5cdFx0Y29uc3QgZm0gPSBub3RlLmZyb250bWF0dGVyO1xuXHRcdGxldCBmb3VuZCA9IGZhbHNlO1xuXHRcdGxldCBzdGFydCA9IDA7XG5cdFx0bGV0IGVuZCA9IDA7XG5cblx0XHRmb3IgKGNvbnN0IGhlYWRpbmcgb2Ygbm90ZS5oZWFkaW5ncykge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRoZWFkaW5nLmxldmVsID09PSAyICYmXG5cdFx0XHRcdGhlYWRpbmcuaGVhZGluZy50b0xvd2VyQ2FzZSgpID09PSBcImNvbnRlbnRcIlxuXHRcdFx0KSB7XG5cdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0c3RhcnQgPSBoZWFkaW5nLnBvc2l0aW9uLmVuZC5vZmZzZXQ7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0Ly8gcydpbCB5IGEgdW4gYXV0cmUgaGVhZGluZyBsZXZlbCAyIGFwcmVzLCBlbmQgPSBzdGFydC5vZmZzZXRcblx0XHRcdGlmIChcblx0XHRcdFx0Zm91bmQgJiZcblx0XHRcdFx0aGVhZGluZy5sZXZlbCA9PT0gMiAmJlxuXHRcdFx0XHRoZWFkaW5nLmhlYWRpbmcudG9Mb3dlckNhc2UoKSAhPT0gXCJjb250ZW50XCJcblx0XHRcdCkge1xuXHRcdFx0XHRlbmQgPSBoZWFkaW5nLnBvc2l0aW9uLnN0YXJ0Lm9mZnNldDtcblx0XHRcdH1cblx0XHR9XG5cdFx0QXNzZXJ0LlRydWUoZm91bmQsIGBSZXNvdXJjZSBkb2VzIG5vdCBkZWNsYXJlcyBjb250ZW50OiAke2ZtLnV1aWR9YCk7XG5cdFx0Ly8gc2lub24gZW5kID0gZW5kIGRvY3VtZW50XG5cdFx0aWYgKGVuZCA9PT0gMCkge1xuXHRcdFx0ZW5kID0gbm90ZS5zZWN0aW9uc1tub3RlLnNlY3Rpb25zLmxlbmd0aCAtIDFdLnBvc2l0aW9uLmVuZC5vZmZzZXQ7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIFtzdGFydCwgZW5kXTtcblx0fVxuXG5cdGdldFJlc291cmNlTmFtZShub3RlOiBDYWNoZWRNZXRhZGF0YSwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiBzdHJpbmcge1xuXHRcdGxldCByZXNvdXJjZU5hbWUgPSBcIlwiO1xuXHRcdGxldCBsdmwzSGVhZGluZ0NvdW50ID0gMDtcblx0XHRjb25zdCBmbSA9IG5vdGUuZnJvbnRtYXR0ZXI7XG5cblx0XHRmb3IgKGNvbnN0IGhlYWRpbmcgb2Ygbm90ZS5oZWFkaW5ncykge1xuXHRcdFx0Ly8gaGVhZGluZyBsdmwgMyBpbiBib3VuZCBvZiBgY29udGVudGBcblx0XHRcdGlmIChcblx0XHRcdFx0aGVhZGluZy5sZXZlbCA9PT0gMyAmJlxuXHRcdFx0XHRoZWFkaW5nLnBvc2l0aW9uLnN0YXJ0Lm9mZnNldCA+IHN0YXJ0ICYmXG5cdFx0XHRcdGhlYWRpbmcucG9zaXRpb24uZW5kLm9mZnNldCA8IGVuZFxuXHRcdFx0KSB7XG5cdFx0XHRcdHJlc291cmNlTmFtZSA9IGhlYWRpbmcuaGVhZGluZztcblx0XHRcdFx0bHZsM0hlYWRpbmdDb3VudCsrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIGRhbnMgIyMgQ29udGVudFxuXHRcdC8vIHVuIHNldWwgaGVhZGluZyBuaXZlYXUgM1xuXHRcdC8vIEFzc2VydC5GYWxzZShcblx0XHQvLyAgIGx2bDNIZWFkaW5nQ291bnQgPT09IDAsXG5cdFx0Ly8gICBgUmVzb3VyY2UgZG9lcyBub3QgZGVjbGFyZXMgYSBuYW1lOiAke2ZtLnV1aWR9YCxcblx0XHQvLyApO1xuXHRcdEFzc2VydC5GYWxzZShcblx0XHRcdGx2bDNIZWFkaW5nQ291bnQgPiAxLFxuXHRcdFx0YFJlc291cmNlIGhhcyBtdWx0aXBsZSBuYW1lczogJHtmbS51dWlkfWAsXG5cdFx0KTtcblxuXHRcdHJldHVybiByZXNvdXJjZU5hbWU7XG5cdH1cblxuXHRwYXJzZUNvbXBvbmVudENvbmNlcHRzKHBhdGg6IHN0cmluZ1tdLCBub3RlOiBDYWNoZWRNZXRhZGF0YSwgcSwgcmVzdWx0cykge1xuXHRcdHRoaXMuY29tbW9uRGF0YVZhbGlkYXRpb24ocGF0aCwgbm90ZSk7XG5cdFx0Y29uc3QgW3N0YXJ0LCBlbmRdID0gdGhpcy5nZXRDb250ZW50Qm91bmRhcmllcyhub3RlKTtcblx0XHRjb25zdCByZXNvdXJjZU5hbWUgPSB0aGlzLmdldFJlc291cmNlTmFtZShub3RlLCBzdGFydCwgZW5kKTtcblx0XHRjb25zdCBmbSA9IG5vdGUuZnJvbnRtYXR0ZXI7XG5cblx0XHRyZXN1bHRzLnB1c2goW1suLi5wYXRoLCByZXNvdXJjZU5hbWVdLCBub3RlXSk7XG5cblx0XHQvLyBsZWFmXG5cdFx0aWYgKG5vdGUubGlua3MgPT09IHVuZGVmaW5lZCB8fCBub3RlLmxpbmtzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGZvciAoY29uc3QgbGluayBvZiBub3RlLmxpbmtzKSB7XG5cdFx0XHQvLyBsaW5rIGluIGJvdW5kIGNvbnRlbnQgaGVhZGluZ1xuXHRcdFx0Ly8gc2hvdWxkIGJlIG5hbWUsIGJ1dCBjb250ZW50IGJvdW5kYXJpZXMgYXJlIGtub3duIGFuZCBzaW1pbGFyXG5cdFx0XHRpZiAoXG5cdFx0XHRcdGxpbmsucG9zaXRpb24uc3RhcnQub2Zmc2V0ID4gc3RhcnQgJiZcblx0XHRcdFx0bGluay5wb3NpdGlvbi5lbmQub2Zmc2V0IDwgZW5kXG5cdFx0XHQpIHtcblx0XHRcdFx0Ly8gdGhlcmUgaXMgYW4gaW4gYm91bmQgbGlua1xuXHRcdFx0XHQvLyByZXNvdXJjZSBpcyBjb25zaWRlcmVkIGEgbm9kZVxuXHRcdFx0XHRBc3NlcnQuVHJ1ZShcblx0XHRcdFx0XHRIZWxwZXIuaXNVVUlEKGxpbmsubGluay5zbGljZSgwLCAzNikpLFxuXHRcdFx0XHRcdGBJbnZhbGlkIGxpbmsgaW4gcmVzb3VyY2U6ICR7Zm0udXVpZH1gLFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRpZiAoIUhlbHBlci5pc1VVSUQobGluay5saW5rLnNsaWNlKDAsIDM2KSkpIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGYgPSB0aGlzLmdldEZpbGVDYWNoZUZyb21VVUlEKFxuXHRcdFx0XHRcdHRoaXMuZXh0cmFjdFVVSURGcm9tTGluayhsaW5rLmxpbmspLFxuXHRcdFx0XHQpO1xuXHRcdFx0XHQvLyBlcnJldXJzIGRlIGZvcm1hdHMgcGFzc1x1MDBFOWVzIHNvdXMgc2lsZW5jZVxuXHRcdFx0XHQvLyBvbiBpZ25vcmUgbGVzIGxpZW4gdmVycyBsZXMgcmVzb3VyY2VzIGF1dHJlIHF1ZSBQZXJtYW5lbnRcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdGYgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHRcdGYuZnJvbnRtYXR0ZXIgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHRcdGYuZnJvbnRtYXR0ZXIudHlwZSAhPT0gMlxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHEucHVzaChbWy4uLnBhdGgsIHJlc291cmNlTmFtZV0sIGZdKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gdXRpbGl0eSBsaW5rXG5cdFx0Ly8gZGV0ZWN0ZXIgdXVpZFxuXHRcdC8vIGRldGVjdGVyIGxpbmsgdmVycyByZXNvdXJjZSBtYXJrZG93blxuXHRcdC8vIGRldGVjdGVyIGxpbmsgdmVycyBhc3NldFxuXHRcdC8vXG5cdH1cblxuXHRwYXJzZUNvbXBvbmVudFBhdHRlcm5zKHBhdGg6IHN0cmluZ1tdLCBub3RlOiBDYWNoZWRNZXRhZGF0YSwgcSwgcmVzdWx0cykge1xuXHRcdHRoaXMuY29tbW9uRGF0YVZhbGlkYXRpb24ocGF0aCwgbm90ZSk7XG5cdFx0Y29uc3QgW3N0YXJ0LCBlbmRdID0gdGhpcy5nZXRDb250ZW50Qm91bmRhcmllcyhub3RlKTtcblx0XHRjb25zdCByZXNvdXJjZU5hbWUgPSB0aGlzLmdldFJlc291cmNlTmFtZShub3RlLCBzdGFydCwgZW5kKTtcblxuXHRcdGlmICh0aGlzLmlzU2VxdWVuY2Uobm90ZSkpIHtcblx0XHRcdC8vIGRvbWFpbiBuYW1lIC8gcGF0dGVybnMgLyBwYXR0ZXJuIG5hbWUgYSAvIHBhdHRlcm4gbmFtZSBiIC8gc2VxdWVuY2UgbmFtZSAtPiB1dWlkIHwgZmlsZSBjYWNoZSB8IGZpbGUgcGF0aFxuXHRcdFx0cmVzdWx0cy5wdXNoKFtbLi4ucGF0aCwgcmVzb3VyY2VOYW1lXSwgbm90ZV0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmIChub3RlLmxpbmtzID09PSB1bmRlZmluZWQgfHwgbm90ZS5saW5rcy5sZW5ndGggPT09IDApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRmb3IgKGNvbnN0IGxpbmsgb2Ygbm90ZS5saW5rcykge1xuXHRcdFx0Ly8gbGluayBpbiBib3VuZCBuYW1lSGVhZGluZ1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRsaW5rLnBvc2l0aW9uLnN0YXJ0Lm9mZnNldCA8IHN0YXJ0IHx8XG5cdFx0XHRcdGxpbmsucG9zaXRpb24uZW5kLm9mZnNldCA+IGVuZFxuXHRcdFx0KSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBjb25zb2xlLmxvZyhsaW5rLmxpbmsuc2xpY2UobGluay5saW5rLmxlbmd0aC0zLCBsaW5rLmxpbmsubGVuZ3RoKSlcblx0XHRcdGlmICghSGVscGVyLmlzVVVJRChsaW5rLmxpbmsuc2xpY2UoMCwgMzYpKSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgZiA9IHRoaXMuZ2V0RmlsZUNhY2hlRnJvbVVVSUQoXG5cdFx0XHRcdHRoaXMuZXh0cmFjdFVVSURGcm9tTGluayhsaW5rLmxpbmspLFxuXHRcdFx0KTtcblxuXHRcdFx0aWYgKFxuXHRcdFx0XHRmID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0Zi5mcm9udG1hdHRlciA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdGYuZnJvbnRtYXR0ZXIudHlwZSAhPT0gMlxuXHRcdFx0KSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRxLnB1c2goW1suLi5wYXRoLCByZXNvdXJjZU5hbWVdLCBmXSk7XG5cdFx0fVxuXHR9XG5cblx0cGFyc2VDb21wb25lbnRUcmVlKGNvbXBvbmVudHMsIGRvbWFpbk5hbWUsIGNvbXBvbmVudE5hbWUpIHtcblx0XHRjb25zdCBxID0gW107XG5cdFx0Y29uc3QgcmVzdWx0cyA9IFtdO1xuXG5cdFx0aWYgKGNvbXBvbmVudHNbZG9tYWluTmFtZV1bY29tcG9uZW50TmFtZV0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGZvciAoY29uc3QgcGF0dGVybiBvZiBjb21wb25lbnRzW2RvbWFpbk5hbWVdW2NvbXBvbmVudE5hbWVdKSB7XG5cdFx0XHRxLnB1c2goW1tkb21haW5OYW1lLCBjb21wb25lbnROYW1lXSwgcGF0dGVybl0pO1xuXHRcdH1cblxuXHRcdC8vIGxlcyBsaW5rcyBkb2l2ZW50IGV0cmUgaW4gYm91bmQgZGFucyBgIyMjIG5hbWVgXG5cdFx0d2hpbGUgKHEubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3QgW3BhdGgsIG5vdGVdID0gcS5zaGlmdCgpO1xuXHRcdFx0Ly8gaWwgeSBhIHVuIGJ1ZyBwb3VyIGxlcyBjb25jZXB0cyBxdWkgdXRpbGlzZW50IGRlcyBsaWVucyBpbmxpbmUgdmVycyBkJ2F1dHJlcyByZXNvdXJjZXMgZG9udCBlbGxlcyBuZSBzb250IHBhcyB1biBjb250YWluZXIgZGlyZWN0XG5cdFx0XHQvLyBleGVtcGxlIHBvdXIgdW5lIHJlZmVyZW5jZSBpbmxpbmVcblx0XHRcdC8vIGF2ZWMgbGUgc2NoZW1lIGFjdHVlbFxuXHRcdFx0Ly8gbGUgZG9tYWluIHNlIHRyb3V2ZSBcdTAwRTAgbCdpbmRleCAwXG5cdFx0XHQvLyBsZSBub20gZHUgY29tcG9uZW50IHNlIHRyb3V2ZSBcdTAwRTAgbCdpbmRleCAxIGR1IGNoZW1pblxuXHRcdFx0QXNzZXJ0LlRydWUocGF0aC5sZW5ndGggPj0gMiwgYEludmFsaWQgY29tcG9uZW50IHBhdGg6ICR7cGF0aH1gKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKHBhdGgpO1xuXHRcdFx0Ly8gY29uc29sZS5sb2cobm90ZSk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhcIlxcblxcblxcblwiKTtcblxuXHRcdFx0Y29uc3QgY29tcG9uZW50TmFtZSA9IHBhdGhbMV07XG5cdFx0XHRzd2l0Y2ggKGNvbXBvbmVudE5hbWUpIHtcblx0XHRcdFx0Y2FzZSBcInBhdHRlcm5zXCI6XG5cdFx0XHRcdFx0dGhpcy5wYXJzZUNvbXBvbmVudFBhdHRlcm5zKHBhdGgsIG5vdGUsIHEsIHJlc3VsdHMpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiY29uY2VwdHNcIjpcblx0XHRcdFx0XHR0aGlzLnBhcnNlQ29tcG9uZW50Q29uY2VwdHMocGF0aCwgbm90ZSwgcSwgcmVzdWx0cyk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKGBVbnN1cG9ydGVkIGNvbXBvbmVudDogJHtjb21wb25lbnROYW1lfWApXG5cdFx0XHRcdC8vIHRocm93IG5ldyBFcnJvcihgVW5zdXBvcnRlZCBjb21wb25lbnQ6ICR7Y29tcG9uZW50TmFtZX1gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0cztcblx0fVxuXG5cdGxvYWRJbmRleCgpIHtcblx0XHRjb25zb2xlLmxvZyhcImdvbmV4dCAtIGxvYWRJbmRleCgpXCIpO1xuXHRcdGNvbnN0IGRvbWFpbnMgPSB0aGlzLmdldEluZGV4RG9tYWlucygpO1xuXHRcdGNvbnN0IGNvbXBvbmVudHMgPSB0aGlzLmdldERvbWFpbkNvbXBvbmVudHMoZG9tYWlucyk7XG5cdFx0Y29uc3QgcmVuYW1lZCA9IHt9O1xuXG5cdFx0Zm9yIChjb25zdCBkb21haW4gb2YgT2JqZWN0LmtleXMoY29tcG9uZW50cykpIHtcblx0XHRcdGZvciAoY29uc3QgY29tcG9uZW50IG9mIE9iamVjdC5rZXlzKGNvbXBvbmVudHNbZG9tYWluXSkpIHtcblx0XHRcdFx0Y29uc3QgcmVzdWx0cyA9IHRoaXMucGFyc2VDb21wb25lbnRUcmVlKFxuXHRcdFx0XHRcdGNvbXBvbmVudHMsXG5cdFx0XHRcdFx0ZG9tYWluLFxuXHRcdFx0XHRcdGNvbXBvbmVudCxcblx0XHRcdFx0KTtcblx0XHRcdFx0aWYgKHJlc3VsdHMgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgcmVzZXJ2ZWQgPSBbXCJzdHJlbmd0aCByb3V0aW5lXCIsIFwic3RyZW5ndGggcm91dGluZVwiLCBcInN0cmV0Y2ggcm91dGluZVwiLCBcInN0cmV0Y2ggcm91dGluZVwiXTtcblx0XHRcdFx0Zm9yIChjb25zdCBbcGF0aCwgbm90ZV0gb2YgcmVzdWx0cykge1xuXHRcdFx0XHRcdGNvbnN0IGZtID0gbm90ZS5mcm9udG1hdHRlcjtcblx0XHRcdFx0XHR0aGlzLmZpbGVzW2ZtLnV1aWRdID0gW3BhdGgsIG5vdGVdO1xuXG5cdFx0XHRcdFx0aWYgKHJlbmFtZWRbZm0udXVpZF0gIT09IHRydWUgJiYgZm0udHlwZSA9PT0gMikge1xuXHRcdFx0XHRcdFx0aWYgKGZtLmFsaWFzID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0Zm0uYWxpYXMgPSBbcGF0aC5qb2luKFwiIC8gXCIpXTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShmbS5hbGlhcykpIHtcblx0XHRcdFx0XHRcdFx0Zm0uYWxpYXMucHVzaChwYXRoLmpvaW4oXCIgLyBcIikpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Zm0uYWxpYXMgPSBbZm0uYWxpYXMsIHBhdGguam9pbihcIiAvIFwiKV07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZW5hbWVkW2ZtLnV1aWRdID0gdHJ1ZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGZpbmRGaXJzdFBhcmVudEluRG9tYWlucyhmaWxlOiBUQWJzdHJhY3RGaWxlLCByZXNvdXJjZTogQ2FjaGVkTWV0YWRhdGEpIHtcblx0XHRjb25zdCBkb21haW5zID0gdGhpcy5nZXRJbmRleERvbWFpbnMoKTtcblx0XHRjb25zdCBxID0gW107XG5cdFx0Zm9yIChjb25zdCBkb21haW4gb2YgZG9tYWlucykge1xuXHRcdFx0cS5wdXNoKGRvbWFpbik7XG5cdFx0fVxuXG5cdFx0d2hpbGUgKHEubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3QgY3VyID0gcS5wb3AoKTtcblx0XHRcdGlmIChjdXIgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHQvLyBzcGVjaWFsIGNhc2UgZm9yIEluZGV4XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoY3VyLmxpbmtzID09PSB1bmRlZmluZWQgfHwgY3VyLmxpbmtzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGN1ci5mcm9udG1hdHRlciA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBmID0gdGhpcy5nZXRGaWxlRnJvbVVVSUQoY3VyLmZyb250bWF0dGVyLnV1aWQpO1xuXHRcdFx0aWYgKGYgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGYucGFyZW50Lm5hbWUgIT09IFBhdGhzLlNsaXBib3gpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IFtzdGFydCwgZW5kXSA9IHRoaXMuZ2V0Q29udGVudEJvdW5kYXJpZXMoY3VyKTtcblx0XHRcdGZvciAoY29uc3QgbGluayBvZiBjdXIubGlua3MpIHtcblx0XHRcdFx0aWYgKGxpbmsubGluay5sZW5ndGggIT09IDM2KSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gQXNzZXJ0LlRydWUobGluay5saW5rLmxlbmd0aCA9PT0gMzYsIGBOb24gMzYgbGVuZ3RoIGxpbms6ICR7bGluay5saW5rfWApXG5cblx0XHRcdFx0Y29uc3QgcG9zID0gbGluay5wb3NpdGlvbjtcblx0XHRcdFx0aWYgKHBvcy5zdGFydC5vZmZzZXQgPCBzdGFydCB8fCBwb3MuZW5kLm9mZnNldCA+IGVuZCkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGxpbmsubGluayA9PT0gcmVzb3VyY2UuZnJvbnRtYXR0ZXIudXVpZCkge1xuXHRcdFx0XHRcdHJldHVybiBjdXI7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cS5wdXNoKHRoaXMuZ2V0RmlsZUNhY2hlRnJvbVVVSUQobGluay5saW5rKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHR9XG5cblx0aXNTZXF1ZW5jZShub3RlOiBDYWNoZWRNZXRhZGF0YSk6IGJvb2xlYW4ge1xuXHRcdEFzc2VydC5UcnVlKFxuXHRcdFx0bm90ZS5oZWFkaW5ncy5sZW5ndGggPiAwLFxuXHRcdFx0YGlzU2VxdWVuY2U6IEludmFsaWQgcGFyYW1ldGVyOiBub3RlOiAke25vdGUuZnJvbnRtYXR0ZXIudXVpZH1gLFxuXHRcdCk7XG5cdFx0Zm9yIChjb25zdCBoZWFkaW5nIG9mIG5vdGUuaGVhZGluZ3MpIHtcblx0XHRcdGlmIChoZWFkaW5nLmxldmVsID09PSA0ICYmIGhlYWRpbmcuaGVhZGluZyA9PT0gXCJzdGVwc1wiKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiZ29uZXh0IC0gb251bmxvYWQoKVwiKTtcblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0ZGVsZXRlIHdpbmRvdy5nb25leHQ7XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oXG5cdFx0XHR7fSxcblx0XHRcdERFRkFVTFRfU0VUVElOR1MsXG5cdFx0XHRhd2FpdCB0aGlzLmxvYWREYXRhKCksXG5cdFx0KTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBFeGFtcGxlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0Y29uc3QgZHYgPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnMuZGF0YXZpZXcuYXBpO1xuXHRcdGNvbnN0IHRhc2tzID0gZHYucGFnZXMoKS5hcnJheSgpLnNsaWNlKDAsIDEwKTtcblx0XHRsZXQgcyA9IFwiXCI7XG5cdFx0Zm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XG5cdFx0XHRzICs9IGAke3Rhc2suZmlsZS5wYXRofVxcblxcbmA7XG5cdFx0fVxuXHRcdGNvbnRlbnRFbC5zZXRUZXh0KHMpO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuIiwgImV4cG9ydCBjb25zdCBQYXRocyA9IHtcblx0VGFza3M6IFwiODEzIFRhc2tzXCIsXG5cdENvbXBvbmVudHM6IFwiQ29tcG9uZW50c1wiLFxuXHRHb2FsczogXCJHb2Fsc1wiLFxuXHRTbGlwYm94OiBcIjgwMyBTbGlwYm94XCIsXG5cdEluYm94OiBcIjgwMCBJbmJveFwiLFxuXHRSZWZzOiBcIjgwMiBSZWZzXCIsXG5cdEFyY2hpdmVzOiBcIjQwMCBBcmNoaXZlc1wiLFxuXHRMb2dzOiBcIjYwMCBMb2dcIixcblx0QXR0YWNobWVudHM6IFwiMDAwIEF0dGFjaG1lbnRzXCIsXG5cdEpvdXJuYWw6IFwiSm91cm5hbFwiLFxuXHRSZXNvdXJjZXM6IFwiUmVzb3VyY2VzXCIsXG5cdFByb2plY3RzOiBcIjEwMCBQcm9qZWN0c1wiLFxuXHREb21haW5zOiBcIkRvbWFpbnNcIixcblx0TmFtZXM6IFwiTmFtZXNcIixcbn07XG5cbmV4cG9ydCBjb25zdCBTdGF0dXMgPSB7XG5cdFRvZG86IFwidG9kb1wiLFxuXHREb2luZzogXCJkb2luZ1wiLFxuXHREb25lOiBcImRvbmVcIixcblx0TWF5YmU6IFwibWF5YmVcIixcblx0U3RhbmRieTogXCJzdGFuZGJ5XCIsXG5cdFRyYXNoOiBcInRyYXNoXCIsXG59O1xuZXhwb3J0IGNvbnN0IEdvYWxTdGF0dXMgPSB7XG5cdFJlZnJhbWU6IFwicmVmcmFtZVwiLFxuXHRSZXNlYXJjaDogXCJyZXNlYXJjaFwiLFxuXHRPcGVyYXRpb25hbGl6ZTogXCJvcGVyYXRpb25hbGl6ZVwiLFxuXHRQbGFuaWZ5OiBcInBsYW5pZnlcIixcblx0RGVwZW5kYW50OiBcImRlcGVuZGFudFwiLFxuXHRBY3RpdmU6IFwiYWN0aXZlXCIsXG5cdEZhaWxlZDogXCJmYWlsZWRcIixcblx0U3VjY2VzczogXCJzdWNjZXNzXCIsXG59O1xuXG5leHBvcnQgY29uc3QgVHlwZXMgPSB7XG5cdEZsZWV0aW5nOiAxMyxcblx0TGl0ZXJhdHVyZTogMSxcblx0UGVybWFuZW50OiAyLFxuXHRUYXNrOiAzLFxuXHRQcmF4aXM6IDQsXG5cdFByb3Zpc2lvbjogNSxcblx0TG9nOiA2LFxuXHRSZXNvdXJjZTogNyxcblx0TWVkaWE6IDgsXG5cdFByb2plY3Q6IDEyLFxuXHRPcmc6IDksXG5cdERvbWFpbjogMTAsXG5cdENvbXBvbmVudDogMTEsXG59O1xuXG5leHBvcnQgY29uc3QgTmFtZXNwYWNlID0ge1xuXHRBcmVhOiBcImFyZWFcIixcblx0Q29udGV4dDogXCJjb250ZXh0XCIsXG5cdExheWVyOiBcImxheWVyXCIsXG5cdE9yZzogXCJvcmdcIixcblx0UHJvamVjdDogXCJwcm9qZWN0XCIsXG59O1xuXG5leHBvcnQgY29uc3QgRGVmYXVsdCA9IHtcblx0QXJlYTogXCJub25lXCIsXG5cdENvbnRleHQ6IFwiYW55XCIsXG5cdExheWVyOiBcIm5vbmVcIixcblx0T3JnOiBcIm5vbmVcIixcblx0UHJvamVjdDogXCJub25lXCIsXG59O1xuIiwgImltcG9ydCB2YWxpZGF0ZSBmcm9tICcuL3ZhbGlkYXRlLmpzJztcblxuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG52YXIgYnl0ZVRvSGV4ID0gW107XG5mb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleC5wdXNoKChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zbGljZSgxKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgLy9cbiAgLy8gTm90ZSB0byBmdXR1cmUtc2VsZjogTm8sIHlvdSBjYW4ndCByZW1vdmUgdGhlIGB0b0xvd2VyQ2FzZSgpYCBjYWxsLlxuICAvLyBSRUY6IGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZC9wdWxsLzY3NyNpc3N1ZWNvbW1lbnQtMTc1NzM1MTM1MVxuICByZXR1cm4gKGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgM11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDVdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA3XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDhdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxM11dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNV1dKS50b0xvd2VyQ2FzZSgpO1xufVxuZnVuY3Rpb24gc3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICB2YXIgdXVpZCA9IHVuc2FmZVN0cmluZ2lmeShhcnIsIG9mZnNldCk7XG4gIC8vIENvbnNpc3RlbmN5IGNoZWNrIGZvciB2YWxpZCBVVUlELiAgSWYgdGhpcyB0aHJvd3MsIGl0J3MgbGlrZWx5IGR1ZSB0byBvbmVcbiAgLy8gb2YgdGhlIGZvbGxvd2luZzpcbiAgLy8gLSBPbmUgb3IgbW9yZSBpbnB1dCBhcnJheSB2YWx1ZXMgZG9uJ3QgbWFwIHRvIGEgaGV4IG9jdGV0IChsZWFkaW5nIHRvXG4gIC8vIFwidW5kZWZpbmVkXCIgaW4gdGhlIHV1aWQpXG4gIC8vIC0gSW52YWxpZCBpbnB1dCB2YWx1ZXMgZm9yIHRoZSBSRkMgYHZlcnNpb25gIG9yIGB2YXJpYW50YCBmaWVsZHNcbiAgaWYgKCF2YWxpZGF0ZSh1dWlkKSkge1xuICAgIHRocm93IFR5cGVFcnJvcignU3RyaW5naWZpZWQgVVVJRCBpcyBpbnZhbGlkJyk7XG4gIH1cbiAgcmV0dXJuIHV1aWQ7XG59XG5leHBvcnQgZGVmYXVsdCBzdHJpbmdpZnk7IiwgIi8vIFVuaXF1ZSBJRCBjcmVhdGlvbiByZXF1aXJlcyBhIGhpZ2ggcXVhbGl0eSByYW5kb20gIyBnZW5lcmF0b3IuIEluIHRoZSBicm93c2VyIHdlIHRoZXJlZm9yZVxuLy8gcmVxdWlyZSB0aGUgY3J5cHRvIEFQSSBhbmQgZG8gbm90IHN1cHBvcnQgYnVpbHQtaW4gZmFsbGJhY2sgdG8gbG93ZXIgcXVhbGl0eSByYW5kb20gbnVtYmVyXG4vLyBnZW5lcmF0b3JzIChsaWtlIE1hdGgucmFuZG9tKCkpLlxuXG52YXIgZ2V0UmFuZG9tVmFsdWVzO1xudmFyIHJuZHM4ID0gbmV3IFVpbnQ4QXJyYXkoMTYpO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcm5nKCkge1xuICAvLyBsYXp5IGxvYWQgc28gdGhhdCBlbnZpcm9ubWVudHMgdGhhdCBuZWVkIHRvIHBvbHlmaWxsIGhhdmUgYSBjaGFuY2UgdG8gZG8gc29cbiAgaWYgKCFnZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAvLyBnZXRSYW5kb21WYWx1ZXMgbmVlZHMgdG8gYmUgaW52b2tlZCBpbiBhIGNvbnRleHQgd2hlcmUgXCJ0aGlzXCIgaXMgYSBDcnlwdG8gaW1wbGVtZW50YXRpb24uXG4gICAgZ2V0UmFuZG9tVmFsdWVzID0gdHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKTtcbiAgICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCcpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbn0iLCAidmFyIHJhbmRvbVVVSUQgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCAmJiBjcnlwdG8ucmFuZG9tVVVJRC5iaW5kKGNyeXB0byk7XG5leHBvcnQgZGVmYXVsdCB7XG4gIHJhbmRvbVVVSURcbn07IiwgImltcG9ydCBuYXRpdmUgZnJvbSAnLi9uYXRpdmUuanMnO1xuaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgeyB1bnNhZmVTdHJpbmdpZnkgfSBmcm9tICcuL3N0cmluZ2lmeS5qcyc7XG5mdW5jdGlvbiB2NChvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICBpZiAobmF0aXZlLnJhbmRvbVVVSUQgJiYgIWJ1ZiAmJiAhb3B0aW9ucykge1xuICAgIHJldHVybiBuYXRpdmUucmFuZG9tVVVJRCgpO1xuICB9XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgcm5kcyA9IG9wdGlvbnMucmFuZG9tIHx8IChvcHRpb25zLnJuZyB8fCBybmcpKCk7XG5cbiAgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuICBybmRzWzZdID0gcm5kc1s2XSAmIDB4MGYgfCAweDQwO1xuICBybmRzWzhdID0gcm5kc1s4XSAmIDB4M2YgfCAweDgwO1xuXG4gIC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuICBpZiAoYnVmKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICBidWZbb2Zmc2V0ICsgaV0gPSBybmRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gYnVmO1xuICB9XG4gIHJldHVybiB1bnNhZmVTdHJpbmdpZnkocm5kcyk7XG59XG5leHBvcnQgZGVmYXVsdCB2NDsiLCAiaW1wb3J0IHsgYXNzZXJ0LCBncm91cCwgdGltZSB9IGZyb20gXCJjb25zb2xlXCI7XG5pbXBvcnQgeyB1bnppcCB9IGZyb20gXCJ6bGliXCI7XG5pbXBvcnQge1xuICBQYXRocyxcbiAgU3RhdHVzLFxuICBUeXBlcyxcbiAgTmFtZXNwYWNlLFxuICBEZWZhdWx0LFxuICBHb2FsU3RhdHVzLFxufSBmcm9tIFwiLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyB1bmxpbmsgfSBmcm9tIFwiZnNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG5vdGlmeShtc2c6IHN0cmluZykge1xuICBjb25zdCBQVVNIT1ZFUl9VUkkgPSBcImFwaS5wdXNob3Zlci5uZXRcIjtcbiAgY29uc3QgZCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkSnNvbihcIi5wdXNob3Zlci5qc29uXCIpO1xuICBjb25zdCBkYXRhID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgbWVzc2FnZTogbXNnLFxuICAgIHRva2VuOiBkLnB1c2hvdmVyX3Rva2VuLFxuICAgIHVzZXI6IGQucHVzaG92ZXJfdXNlcixcbiAgfSk7XG4gIGNvbnNvbGUubG9nKGRhdGEudG9TdHJpbmcoKSk7XG5cbiAgYXdhaXQgZmV0Y2goYGh0dHBzOi8vJHtQVVNIT1ZFUl9VUkl9LzEvbWVzc2FnZXMuanNvbmAsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIC8vIG1vZGU6ICduby1jb3JzJyxcbiAgICBjYWNoZTogXCJuby1jYWNoZVwiLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIFwiQ29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsXG4gICAgfSxcbiAgICBib2R5OiBkYXRhLFxuICB9KTtcbn1cblxuY2xhc3MgRmlsdGVyQnkge1xuICBwdWJsaWMgZm06IGFueTtcbiAgcHVibGljIHByZWRpY2F0ZXM6IHN0cmluZ1tdO1xuICBwdWJsaWMgY29udGV4dHM6IHN0cmluZ1tdO1xuXG4gIGNvbnN0cnVjdG9yKGZtOiBhbnkpIHtcbiAgICB0aGlzLmZtID0gZm07XG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMucHJlZGljYXRlcyA9IFtdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnByZWRpY2F0ZXMgPSBBcnJheS5pc0FycmF5KGZtLmZpbHRlcl9ieSkgPyBmbS5maWx0ZXJfYnkgOiBbXTtcbiAgICB9XG4gIH1cblxuICBuYW1lSW5OYW1lc3BhY2UoZm06IGFueSwgbnM6IHN0cmluZ1tdKSB7XG4gICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgaWYgKG5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBhIG9mIG5zKSB7XG4gICAgICBjb25zdCByb290ID0gYS5zcGxpdChcIi9cIik7XG4gICAgICBBc3NlcnQuVHJ1ZShyb290Lmxlbmd0aCA9PT0gMiwgYEludmFsaWQgdGFnOiAnJHthfSdgKTtcbiAgICAgIGNvbnN0IHBhcmVudCA9XG4gICAgICAgIHJvb3RbMF0uc2xpY2UoMCwgMSkgPT09IFwiIVwiID8gcm9vdFswXS5zbGljZSgxKSA6IHJvb3RbMF07XG4gICAgICBjb25zdCBuYW1lID0gSGVscGVyLmdldFRhZyhmbSwgcGFyZW50KTtcblxuICAgICAgaWYgKGEuc2xpY2UoMCwgMSkgPT09IFwiIVwiKSB7XG4gICAgICAgIC8vIG5lZ2F0aXZlIG1hdGNoLCBkaXNjYXJkIGVudHJ5XG4gICAgICAgIGlmIChuYW1lID09PSBhLnNsaWNlKDEpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIC8vIG5vIG1hdGNoLCByZWluaXRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHBvc2l0aXZlIG1hdGNoLCBrZWVwIGVudHJ5XG4gICAgICAgIGlmIChuYW1lID09PSBhKSB7XG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgIC8vIG5vIG1hdGNoLCByZWluaXRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3VuZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvdW5kO1xuICB9XG5cbiAgZmlsdGVyKGZtOiBhbnkpIHtcbiAgICBpZiAodGhpcy5wcmVkaWNhdGVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiAhdGhpcy5uYW1lSW5OYW1lc3BhY2UoZm0sIHRoaXMucHJlZGljYXRlcyk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZyb250bWF0dGVySlMge1xuICBwdWJsaWMgdXVpZDogc3RyaW5nO1xuICBwdWJsaWMgdmVyc2lvbjogc3RyaW5nO1xuICBwdWJsaWMgdHlwZTogbnVtYmVyO1xuICBwdWJsaWMgY3JlYXRlZEF0OiBEYXRlO1xuICBwdWJsaWMgYXQ6IERhdGU7XG4gIHB1YmxpYyBiZWZvcmU6IERhdGU7XG4gIHB1YmxpYyBhZnRlcjogRGF0ZTtcbiAgcHVibGljIGNvbXBvbmVudHM6IHN0cmluZ1tdO1xuICBwdWJsaWMgZG9tYWluczogc3RyaW5nW107XG4gIHB1YmxpYyBuYW1lczogc3RyaW5nW107XG4gIHB1YmxpYyBwcm9qZWN0czogc3RyaW5nW107XG4gIHB1YmxpYyBmbTtcbiAgcHVibGljIGNvbnRlbnRzOiBzdHJpbmdbXTtcbiAgcHVibGljIHRyYWl0czogc3RyaW5nW107XG4gIHB1YmxpYyBjb250ZXh0czogc3RyaW5nW107XG4gIHB1YmxpYyBzdGF0dXM6IHN0cmluZztcbiAgcHVibGljIGY7XG4gIHB1YmxpYyBlbmVyZ3k6IG51bWJlcjtcblxuICBzaW5ndWxhcih2YWx1ZXM6IHN0cmluZ1tdLCBmaWVsZDogc3RyaW5nKSB7XG4gICAgaWYgKCFIZWxwZXIubmlsQ2hlY2sodGhpcy5mbVtmaWVsZF0pKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZm1bZmllbGRdO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAoIXZhbHVlcy5jb250YWlucyh2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBgJyR7ZmllbGR9JyBpcyBpZ25vcmVkLCBpbnZhbGlkIGRhdGEtdHlwZTogJyR7dHlwZW9mIHRoaXMuZm1bZmllbGRdfSdgLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHBsdXJhbCh2YWx1ZXM6IHN0cmluZ1tdLCBmaWVsZDogc3RyaW5nKSB7XG4gICAgaWYgKCFIZWxwZXIubmlsQ2hlY2sodGhpcy5mbVtmaWVsZF0pKSB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5mbVtmaWVsZF0pKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBgJyR7ZmllbGR9JyBpcyBpZ25vcmVkLCBpbnZhbGlkIGRhdGEtdHlwZTogJyR7ZmllbGR9J2AsXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuZm1bZmllbGRdKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgaWYgKCF2YWx1ZXMuY29udGFpbnModmFsdWUpKSB7XG4gICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICBgJyR7dmFsdWV9cy4ke3ZhbHVlfScgaXMgaWdub3JlZCwgaW52YWxpZCBkYXRhLXR5cGU6ICcke3R5cGVvZiB2YWx1ZX0nYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3IocGFnZSkge1xuICAgIEFzc2VydC5UcnVlKHBhZ2UgIT09IHVuZGVmaW5lZCwgXCIncGFnZScgaXMgdW5kZWZpbmVkXCIpO1xuICAgIHRoaXMuZiA9IHBhZ2UuZmlsZTtcbiAgICBjb25zdCBmID0gdGhpcy5mO1xuICAgIEFzc2VydC5UcnVlKGYgIT09IHVuZGVmaW5lZCwgXCInZicgaXMgdW5kZWZpbmVkXCIpO1xuICAgIHRoaXMuZm0gPSBmLmZyb250bWF0dGVyO1xuICAgIEFzc2VydC5UcnVlKHRoaXMuZm0gIT09IHVuZGVmaW5lZCwgXCInZm0nIGlzIHVuZGVmaW5lZFwiKTtcbiAgICBBc3NlcnQuVHJ1ZShcbiAgICAgIHRoaXMuZm0udXVpZCAhPT0gdW5kZWZpbmVkLFxuICAgICAgYCd1dWlkJyBpcyB1bmRlZmluZWQgZm9yICcke3RoaXMuZi5wYXRofSdgLFxuICAgICk7XG4gICAgLy8gQXNzZXJ0LlRydWUodGhpcy5mbS52ZXJzaW9uICE9PSB1bmRlZmluZWQsIFwiJ3ZlcnNpb24nIGlzIHVuZGVmaW5lZFwiKTtcbiAgICAvLyBBc3NlcnQuVHJ1ZShmbS5jcmVhdGVkX2F0ICE9PSB1bmRlZmluZWQsIFwiJ2NyZWF0ZWRfYXQnIGlzIHVuZGVmaW5lZFwiKTtcblxuICAgIHRoaXMudXVpZCA9IHRoaXMuZm0udXVpZDtcbiAgICB0aGlzLnZlcnNpb24gPSB0aGlzLmZtLnZlcnNpb247XG4gICAgdGhpcy50eXBlID0gdGhpcy5mbS50eXBlO1xuICAgIHRoaXMuY3JlYXRlZEF0ID0gbmV3IERhdGUodGhpcy5mbS5jcmVhdGVkX2F0KTtcbiAgICB0aGlzLmF0ID0gdGhpcy5mbS5hdCAhPT0gdW5kZWZpbmVkID8gbmV3IERhdGUodGhpcy5mbS5hdCkgOiBuZXcgRGF0ZSgpO1xuICAgIHRoaXMuYmVmb3JlID1cbiAgICAgIHRoaXMuZm0uYmVmb3JlICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBuZXcgRGF0ZSh0aGlzLmZtLmJlZm9yZSlcbiAgICAgICAgOiBuZXcgRGF0ZSgpO1xuICAgIHRoaXMuYWZ0ZXIgPVxuICAgICAgdGhpcy5mbS5hZnRlciAhPT0gdW5kZWZpbmVkID8gbmV3IERhdGUodGhpcy5mbS5hZnRlcikgOiBuZXcgRGF0ZSgpO1xuICAgIHRoaXMuY29tcG9uZW50cyA9IFtdO1xuICAgIHRoaXMuZG9tYWlucyA9IFtdO1xuICAgIHRoaXMucHJvamVjdHMgPSBbXTtcbiAgICB0aGlzLmNvbnRleHRzID0gW107XG4gICAgdGhpcy50cmFpdHMgPSBbXTtcbiAgICB0aGlzLmVuZXJneSA9IHRoaXMuZm0uZW5lcmd5ICE9PSB1bmRlZmluZWQgPyB0aGlzLmZtLmVuZXJneSA6IDk7XG5cbiAgICBjb25zdCBkb21haW5zID0gW107XG4gICAgY29uc3QgY29tcG9uZW50cyA9IFtdO1xuICAgIGNvbnN0IHByb2plY3RzID0gW107XG4gICAgY29uc3QgbmFtZXMgPSBbXTtcbiAgICBjb25zdCBjb250ZXh0cyA9IFtdO1xuICAgIGNvbnN0IGNvbnRlbnRzID0gW107XG4gICAgY29uc3QgdHJhaXRzID0gW107XG5cbiAgICBpZiAoIUhlbHBlci5uaWxDaGVjayh0aGlzLmZtLnRhZ3MpKSB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5mbS50YWdzKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCIndGFncycgaXMgaWdub3JlZCwgaW52YWxpZCBkYXRhLXR5cGVcIik7XG4gICAgICAgIHRoaXMuZm0udGFncyA9IFtdO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IHRhZyBvZiB0aGlzLmZtLnRhZ3MpIHtcbiAgICAgICAgaWYgKHRhZy5zbGljZSgwLCA3KSA9PT0gXCJkb21haW4vXCIpIHtcbiAgICAgICAgICBkb21haW5zLnB1c2godGFnLnNsaWNlKDcpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YWcuc2xpY2UoMCwgMTApID09PSBcImNvbXBvbmVudC9cIikge1xuICAgICAgICAgIGNvbXBvbmVudHMucHVzaCh0YWcuc2xpY2UoMTApKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YWcuc2xpY2UoMCwgOCkgPT09IFwicHJvamVjdC9cIikge1xuICAgICAgICAgIHByb2plY3RzLnB1c2godGFnLnNsaWNlKDgpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YWcuc2xpY2UoMCwgNSkgPT09IFwibmFtZS9cIikge1xuICAgICAgICAgIG5hbWVzLnB1c2godGFnLnNsaWNlKDUpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YWcuc2xpY2UoMCwgOCkgPT0gXCJjb250ZXh0L1wiKSB7XG4gICAgICAgICAgY29udGV4dHMucHVzaCh0YWcuc2xpY2UoOCkpO1xuICAgICAgICB9IGVsc2UgaWYgKHRhZy5zbGljZSgwLCA4KSA9PSBcImNvbnRlbnQvXCIpIHtcbiAgICAgICAgICBjb250ZW50cy5wdXNoKHRhZy5zbGljZSg4KSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGFnLnNsaWNlKDAsIDYpID09IFwidHJhaXQvXCIpIHtcbiAgICAgICAgICB0cmFpdHMucHVzaCh0YWcuc2xpY2UoNikpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zaW5ndWxhcihkb21haW5zLCBcImRvbWFpblwiKTtcbiAgICB0aGlzLnBsdXJhbChkb21haW5zLCBcImRvbWFpbnNcIik7XG4gICAgdGhpcy5zaW5ndWxhcihjb21wb25lbnRzLCBcImNvbXBvbmVudHNcIik7XG4gICAgdGhpcy5wbHVyYWwoY29tcG9uZW50cywgXCJjb21wb25lbnRzXCIpO1xuICAgIHRoaXMuc2luZ3VsYXIocHJvamVjdHMsIFwicHJvamVjdFwiKTtcbiAgICB0aGlzLnBsdXJhbChwcm9qZWN0cywgXCJwcm9qZWN0c1wiKTtcbiAgICB0aGlzLnNpbmd1bGFyKGNvbnRlbnRzLCBcImNvbnRlbnRzXCIpO1xuICAgIHRoaXMucGx1cmFsKGNvbnRlbnRzLCBcImNvbnRlbnRzXCIpO1xuICAgIHRoaXMuc2luZ3VsYXIobmFtZXMsIFwibmFtZVwiKTtcbiAgICB0aGlzLnBsdXJhbChuYW1lcywgXCJuYW1lc1wiKTtcbiAgICB0aGlzLnBsdXJhbChuYW1lcywgXCJhbGlhc1wiKTtcbiAgICB0aGlzLnNpbmd1bGFyKHRyYWl0cywgXCJ0cmFpdFwiKTtcbiAgICB0aGlzLnBsdXJhbCh0cmFpdHMsIFwidHJhaXRzXCIpO1xuXG4gICAgdGhpcy5kb21haW5zID0gZG9tYWlucztcbiAgICB0aGlzLmNvbXBvbmVudHMgPSBjb21wb25lbnRzO1xuICAgIHRoaXMucHJvamVjdHMgPSBwcm9qZWN0cztcbiAgICB0aGlzLm5hbWVzID0gbmFtZXM7XG4gICAgdGhpcy5jb250ZXh0cyA9IGNvbnRleHRzO1xuICAgIHRoaXMuY29udGVudHMgPSBjb250ZW50cztcbiAgICB0aGlzLnRyYWl0cyA9IHRyYWl0cztcbiAgfVxuXG4gIGdldERvbWFpbihlbXB0eURlZmF1bHQgPSB0cnVlKTogc3RyaW5nIHtcbiAgICBpZiAoZW1wdHlEZWZhdWx0KSB7XG4gICAgICByZXR1cm4gdGhpcy5kb21haW5zWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5kb21haW5zWzBdID09PSB1bmRlZmluZWQgPyBcInVua25vd25cIiA6IHRoaXMuZG9tYWluc1swXTtcbiAgICB9XG4gIH1cblxuICBnZXREb21haW5zKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGhpcy5kb21haW5zO1xuICB9XG5cbiAgZ2V0VHJhaXRzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGhpcy50cmFpdHM7XG4gIH1cblxuICBnZXRDb21wb25lbnRzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnRzO1xuICB9XG5cbiAgZ2V0UHJvamVjdChlbXB0eURlZmF1bHQgPSB0cnVlKTogc3RyaW5nIHtcbiAgICBpZiAoZW1wdHlEZWZhdWx0KSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9qZWN0c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucHJvamVjdHNbMF0gPT09IHVuZGVmaW5lZCA/IFwiXCIgOiB0aGlzLnByb2plY3RzWzBdO1xuICAgIH1cbiAgfVxuXG4gIGdldFByb2plY3RzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdGhpcy5wcm9qZWN0cztcbiAgfVxuXG4gIGdldE5hbWUoZW1wdHlEZWZhdWx0ID0gdHJ1ZSk6IHN0cmluZyB7XG4gICAgaWYgKGVtcHR5RGVmYXVsdCkge1xuICAgICAgcmV0dXJuIHRoaXMubmFtZXNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLm5hbWVzWzBdID09PSB1bmRlZmluZWQgPyBcIlwiIDogdGhpcy5uYW1lc1swXTtcbiAgICB9XG4gIH1cblxuICBnZXRDb250ZW50KGVtcHR5RGVmYXVsdCA9IHRydWUpOiBzdHJpbmcge1xuICAgIGlmIChlbXB0eURlZmF1bHQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZW50c1swXSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHRoaXMuY29udGVudHNbMF07XG4gICAgfVxuICB9XG5cbiAgZ2V0TmFtZXMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLm5hbWVzO1xuICB9XG5cbiAgZ2V0Q29udGV4dChlbXB0eURlZmF1bHQgPSB0cnVlKTogc3RyaW5nIHtcbiAgICBpZiAoZW1wdHlEZWZhdWx0KSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZXh0c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuY29udGV4dHNbMF0gPT09IHVuZGVmaW5lZCA/IFwiXCIgOiB0aGlzLmNvbnRleHRzWzBdO1xuICAgIH1cbiAgfVxuXG4gIHJlc29sdmUoZHYpIHtcbiAgICBjb25zdCBkb21haW5zID0gW107XG4gICAgZm9yIChjb25zdCBkb21haW4gb2YgdGhpcy5kb21haW5zKSB7XG4gICAgICBpZiAoSGVscGVyLmlzVVVJRChkb21haW4pKSB7XG4gICAgICAgIGNvbnN0IHBhZ2VzID0gZHZcbiAgICAgICAgICAucGFnZXMoYFwiJHtQYXRocy5Eb21haW5zfVwiYClcbiAgICAgICAgICAud2hlcmUoKHBhZ2UpID0+IHBhZ2UuZmlsZS5mcm9udG1hdHRlci51dWlkID09PSBkb21haW4pO1xuICAgICAgICBpZiAocGFnZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICB9IGVsc2UgaWYgKHBhZ2VzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGNvbnN0IHBhZ2UgPSBwYWdlc1swXTtcbiAgICAgICAgICBkb21haW5zLnB1c2gocGFnZS5maWxlLmZyb250bWF0dGVyLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBwYWdlcyA9IGR2XG4gICAgICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuRG9tYWluc31cImApXG4gICAgICAgICAgLndoZXJlKChwYWdlKSA9PiBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIubmFtZSA9PT0gZG9tYWluKTtcbiAgICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfSBlbHNlIGlmIChwYWdlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBjb25zdCBwYWdlID0gcGFnZXNbMF07XG4gICAgICAgICAgZG9tYWlucy5wdXNoKHBhZ2UuZmlsZS5mcm9udG1hdHRlci5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZG9tYWlucy5sZW5ndGggIT09IHRoaXMuZG9tYWlucy5sZW5ndGgpIHtcbiAgICAgIGNvbnNvbGUud2FybihgRG9tYWluIHJlc29sdXRpb24gZmFpbGVkIGZvcjogJHt0aGlzLmRvbWFpbnN9YCk7XG4gICAgfVxuXG4gICAgdGhpcy5kb21haW5zID0gZG9tYWlucztcbiAgfVxufVxuXG5jbGFzcyBWYWxpZGF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICBzdXBlcihtZXNzYWdlKTsgLy8gKDEpXG4gICAgdGhpcy5uYW1lID0gXCJWYWxpZGF0aW9uRXJyb3JcIjsgLy8gKDIpXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IEFzc2VydCA9IHtcbiAgVHJ1ZShwcmVkaWNhdGU6IGJvb2xlYW4sIG1lc3NhZ2U6IHN0cmluZywgc3RyaWN0ID0gdHJ1ZSkge1xuICAgIGlmICghcHJlZGljYXRlKSB7XG4gICAgICBpZiAoc3RyaWN0KSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IobWVzc2FnZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgRmFsc2UocHJlZGljYXRlOiBib29sZWFuLCBtZXNzYWdlOiBzdHJpbmcsIHN0cmljdCA9IGZhbHNlKSB7XG4gICAgaWYgKHByZWRpY2F0ZSkge1xuICAgICAgaWYgKHN0cmljdCkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKG1lc3NhZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgSGVscGVyID0ge1xuICBuaWxDaGVjayh2YWw6IGFueSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB2YWwgPT09IHVuZGVmaW5lZCB8fCB2YWwgPT09IG51bGw7XG4gIH0sXG5cbiAgZ2V0S2V5RnVjayhncm91cEJ5KSB7XG4gICAgc3dpdGNoIChncm91cEJ5KSB7XG4gICAgICBkZWZhdWx0OlxuICAgICAgY2FzZSBcImRvbmVBdFwiOlxuICAgICAgICByZXR1cm4gKGVudHJ5KSA9PlxuICAgICAgICAgIGVudHJ5LmZpbGUuZnJvbnRtYXR0ZXIuZG9uZUF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJjcmVhdGVkQXRcIjpcbiAgICAgICAgcmV0dXJuIChlbnRyeSkgPT5cbiAgICAgICAgICBlbnRyeS5maWxlLmZyb250bWF0dGVyLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwicHJvamVjdFwiOlxuICAgICAgICByZXR1cm4gKGVudHJ5KSA9PiBlbnRyeS5maWxlLmZyb250bWF0dGVyLnByb2plY3Q7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImFyZWFcIjpcbiAgICAgICAgcmV0dXJuIChlbnRyeSkgPT4gZW50cnkuZmlsZS5mcm9udG1hdHRlci5hcmVhO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0sXG5cbiAgZ2V0S2V5KGdyb3VwQnkpIHtcbiAgICBzd2l0Y2ggKGdyb3VwQnkpIHtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICBjYXNlIFwiZG9uZUF0XCI6XG4gICAgICAgIHJldHVybiAoZW50cnkpID0+IGVudHJ5LmRvbmVBdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiY3JlYXRlZEF0XCI6XG4gICAgICAgIHJldHVybiAoZW50cnkpID0+IGVudHJ5LmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwicHJvamVjdFwiOlxuICAgICAgICByZXR1cm4gKGVudHJ5KSA9PiBlbnRyeS5wcm9qZWN0O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJhcmVhXCI6XG4gICAgICAgIHJldHVybiAoZW50cnkpID0+IGVudHJ5LmFyZWE7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSxcblxuICBudW1iZXJUeXBlVG9TdHJpbmcodmFsKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHZhbC50eXBlKSB7XG4gICAgICBjYXNlIFR5cGVzLkZsZWV0aW5nOlxuICAgICAgICByZXR1cm4gXCJmbGVldGluZ1wiO1xuICAgICAgY2FzZSBUeXBlcy5Mb2c6XG4gICAgICAgIHJldHVybiBcImxvZ1wiO1xuICAgICAgY2FzZSBUeXBlcy5Qcm9qZWN0OlxuICAgICAgICByZXR1cm4gXCJwcm9qZWN0XCI7XG4gICAgICBjYXNlIFR5cGVzLk9yZzpcbiAgICAgICAgcmV0dXJuIFwib3JnXCI7XG4gICAgICBjYXNlIFR5cGVzLkRvbWFpbjpcbiAgICAgICAgcmV0dXJuIFwiZG9tYWluXCI7XG4gICAgICBjYXNlIFR5cGVzLkNvbXBvbmVudDpcbiAgICAgICAgcmV0dXJuIFwiY29tcG9uZW50XCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYG51bWJlclR5cGVUb1N0cmluZzogdHlwZTogXCIke3ZhbC50eXBlfVwiIG5vdCBpbXBsZW1lbnRlZCBcIiR7dmFsLnV1aWR9XCJgLFxuICAgICAgICApO1xuICAgIH1cbiAgfSxcblxuICByb3VuZFRvT25lRGVjaW1hbCh2YWw6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQodmFsICogMTApIC8gMTA7XG4gIH0sXG5cbiAgaXNDaGlsZFRhZyhwYXJlbnQsIGNoaWxkKSB7XG4gICAgaWYgKGNoaWxkLmxlbmd0aCA8PSBwYXJlbnQubGVuZ3RoICsgMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQuc2xpY2UoMCwgcGFyZW50Lmxlbmd0aCArIDEpICE9IGAke3BhcmVudH0vYCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcblxuICBnZXRGaWVsZChmaWVsZCwgZGVmYXVsdFZhbHVlKSB7XG4gICAgaWYgKGZpZWxkID09PSB1bmRlZmluZWQgfHwgZmllbGQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmaWVsZDtcbiAgICB9XG4gIH0sXG5cbiAgZ2V0RGF0ZShkdCkge1xuICAgIGlmIChkdCA9PT0gXCJcIiB8fCBkdCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKGR0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGR0ID0gbmV3IERhdGUoZHQpO1xuICAgICAgaWYgKGlzTmFOKGR0KSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGR0O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSxcblxuICBnZXRUYWcoZm0sIHR5cGUsIGVtcHR5RGVmYXVsdCA9IHVuZGVmaW5lZCkge1xuICAgIGxldCBuYW1lID0gXCJcIjtcbiAgICBsZXQgZGVmYXVsdFZhbHVlID0gXCJcIjtcblxuICAgIGlmICh0eXBlID09PSBcImFyZWFcIikge1xuICAgICAgbmFtZSA9IE5hbWVzcGFjZS5BcmVhO1xuICAgICAgZGVmYXVsdFZhbHVlID0gRGVmYXVsdC5BcmVhO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJjb250ZXh0XCIpIHtcbiAgICAgIG5hbWUgPSBOYW1lc3BhY2UuQ29udGV4dDtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IERlZmF1bHQuQ29udGV4dDtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwibGF5ZXJcIikge1xuICAgICAgbmFtZSA9IE5hbWVzcGFjZS5MYXllcjtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IERlZmF1bHQuTGF5ZXI7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcIm9yZ1wiKSB7XG4gICAgICBuYW1lID0gTmFtZXNwYWNlLk9yZztcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IERlZmF1bHQuT3JnO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJwcm9qZWN0XCIpIHtcbiAgICAgIG5hbWUgPSBOYW1lc3BhY2UuUHJvamVjdDtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IERlZmF1bHQuUHJvamVjdDtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJkb21haW5cIikge1xuICAgICAgbmFtZSA9IFwiZG9tYWluXCI7XG4gICAgICBkZWZhdWx0VmFsdWUgPSBcIm5vbmVcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBnZXRUYWcgZ290IHVuc3Vwb3J0ZWQgdHlwZTogJyR7dHlwZX0nYCk7XG4gICAgfVxuXG4gICAgY29uc3QgbGVuID0gbmFtZS5sZW5ndGggKyAxO1xuICAgIGNvbnN0IGRlZmF1bHRUYWcgPSBgJHtuYW1lfS8ke2RlZmF1bHRWYWx1ZX1gO1xuXG4gICAgbGV0IGRlZmF1bHRSZXRWYWwgPSBkZWZhdWx0VGFnO1xuICAgIGlmIChlbXB0eURlZmF1bHQpIHtcbiAgICAgIGRlZmF1bHRSZXRWYWwgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0UmV0VmFsO1xuICAgIH1cblxuICAgIGNvbnN0IHRhZ3MgPSBmbS50YWdzO1xuICAgIGlmICh0YWdzID09PSB1bmRlZmluZWQgfHwgdGFncy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBkZWZhdWx0UmV0VmFsO1xuICAgIH1cbiAgICAvLyAtPiB0YWcgbidleGlzdGUgcGFzIC0+IHZhbGV1ciBwYXIgZGVmYXV0XG4gICAgLy8gLT4gdGFnIGV4aXN0ZSBtYWlzIGlsIGEgdW5lIHZhbGV1ciBwYXIgZGVmYXV0IC0+IHZhbGV1ciBwYXIgZGVmYXV0XG4gICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgaWYgKHRhZyA9PSBkZWZhdWx0VGFnKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0UmV0VmFsO1xuICAgICAgfVxuXG4gICAgICBpZiAodGFnLmxlbmd0aCA+IGxlbiAmJiB0YWcuc2xpY2UoMCwgbGVuKSA9PSBgJHtuYW1lfS9gKSB7XG4gICAgICAgIHJldHVybiB0YWc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlZmF1bHRSZXRWYWw7XG4gIH0sXG5cbiAgZ2V0TmFtZShmbSk6IHN0cmluZyB7XG4gICAgY29uc3QgY29tcG9uZW50cyA9IEhlbHBlci5nZXRDb21wb25lbnRzKGZtKTtcbiAgICBpZiAoY29tcG9uZW50cy5sZW5ndGggPCAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEhlbHBlci5nZXROYW1lKCkgJHtmbX1gKTtcbiAgICB9XG5cbiAgICBsZXQgbmFtZSA9IHVuZGVmaW5lZDtcbiAgICBsZXQgb2NjdXJlbmNlcyA9IDA7XG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgY29tcG9uZW50cykge1xuICAgICAgaWYgKGNvbXBvbmVudC5zbGljZSgwLCAxNSkgPT09IFwiY29tcG9uZW50L25hbWUvXCIpIHtcbiAgICAgICAgbmFtZSA9IGNvbXBvbmVudC5zbGljZSgxNSk7XG4gICAgICAgIG9jY3VyZW5jZXMgKz0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob2NjdXJlbmNlcyA+IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEhlbHBlci5nZXROYW1lKCkgJHtmbX0gbXVsdGlwbGUgb2NjdXJlbmNlcyBvZiAnY29tcG9uZW50L25hbWUnYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKG5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSGVscGVyLmdldE5hbWUoKSAke2ZtfSAnY29tcG9uZW50L25hbWUnIHVuZGVmaW5lZGAsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBuYW1lO1xuICB9LFxuXG4gIGdldENvbXBvbmVudHMoZm0pIHtcbiAgICBjb25zdCBjb21wb25lbnRzID0gW107XG4gICAgaWYgKEhlbHBlci5uaWxDaGVjayhmbS50YWdzKSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHRhZyBvZiBmbS50YWdzKSB7XG4gICAgICBpZiAodGFnLmxlbmd0aCA+IDEwICYmIHRhZy5zbGljZSgwLCAxMCkgPT09IFwiY29tcG9uZW50L1wiKSB7XG4gICAgICAgIGNvbXBvbmVudHMucHVzaCh0YWcpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29tcG9uZW50cztcbiAgfSxcblxuICBnZXRBcmVhKGZtLCBlbXB0eURlZmF1bHQgPSBmYWxzZSkge1xuICAgIHJldHVybiBIZWxwZXIuZ2V0VGFnKGZtLCBcImFyZWFcIiwgZW1wdHlEZWZhdWx0KTtcbiAgfSxcblxuICBnZXRDb250ZXh0KGZtLCBlbXB0eURlZmF1bHQgPSBmYWxzZSkge1xuICAgIHJldHVybiBIZWxwZXIuZ2V0VGFnKGZtLCBcImNvbnRleHRcIiwgZW1wdHlEZWZhdWx0KTtcbiAgfSxcblxuICBnZXREb21haW4oZm0sIGVtcHR5RGVmYXVsdCA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIEhlbHBlci5nZXRUYWcoZm0sIFwiZG9tYWluXCIsIGVtcHR5RGVmYXVsdCk7XG4gIH0sXG5cbiAgZ2V0TGF5ZXIoZm0sIGVtcHR5RGVmYXVsdCA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIEhlbHBlci5nZXRUYWcoZm0sIFwibGF5ZXJcIiwgZW1wdHlEZWZhdWx0KTtcbiAgfSxcblxuICBnZXRPcmcoZm0sIGVtcHR5RGVmYXVsdCA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIEhlbHBlci5nZXRUYWcoZm0sIFwib3JnXCIsIGVtcHR5RGVmYXVsdCk7XG4gIH0sXG5cbiAgZ2V0UHJvamVjdChmbSwgZW1wdHlEZWZhdWx0ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gSGVscGVyLmdldFRhZyhmbSwgXCJwcm9qZWN0XCIsIGVtcHR5RGVmYXVsdCk7XG4gIH0sXG5cbiAgZHVyYXRpb25TdHJpbmdUb1NlYyh2YWwpIHtcbiAgICBpZiAodmFsID09PSB1bmRlZmluZWQgfHwgdmFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGNvbnN0IG11bHQgPSB2YWwuc2xpY2UoLTEpO1xuICAgIGxldCBtID0gMDtcbiAgICBpZiAobXVsdCA9PT0gXCJoXCIpIHtcbiAgICAgIG0gPSA2MCAqIDYwO1xuICAgIH0gZWxzZSBpZiAobXVsdCA9PT0gXCJtXCIpIHtcbiAgICAgIG0gPSA2MDtcbiAgICB9IGVsc2UgaWYgKG11bHQgPT09IFwiZFwiKSB7XG4gICAgICBtID0gMjQgKiA2MCAqIDYwO1xuICAgIH0gZWxzZSBpZiAobXVsdCA9PSBcIndcIikge1xuICAgICAgbSA9IDI0ICogNjAgKiA2MCAqIDc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybihgVW5oYW5kbGVkIGNhc2UgdmFsOiAke3ZhbH1gKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG0gKiBwYXJzZUludCh2YWwuc2xpY2UoMCwgLTEpKTtcbiAgfSxcblxuICBtc2VjVG9TdHJpbmdEdXJhdGlvbih2YWw6IG51bWJlcikge1xuICAgIGNvbnN0IG9uZUhvdXJJbk1zZWMgPSAzNjAwMDAwOyAvLyAxIGhvdXIgaW4gbXNlY1xuICAgIGNvbnN0IG9uZURheUluTXNlYyA9IDg2NDAwMDAwOyAvLyAxIGRheSBpbiBtc2VjXG4gICAgaWYgKHZhbCA+PSAyNCAqIG9uZUhvdXJJbk1zZWMpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIFN0cmluZyhIZWxwZXIucm91bmRUb09uZURlY2ltYWwodmFsIC8gb25lRGF5SW5Nc2VjKSkucGFkU3RhcnQoXG4gICAgICAgICAgMixcbiAgICAgICAgICBcIjBcIixcbiAgICAgICAgKSArIFwiIGRcIlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgU3RyaW5nKEhlbHBlci5yb3VuZFRvT25lRGVjaW1hbCh2YWwgLyBvbmVIb3VySW5Nc2VjKSkucGFkU3RhcnQoXG4gICAgICAgICAgMixcbiAgICAgICAgICBcIjBcIixcbiAgICAgICAgKSArIFwiIGhcIlxuICAgICAgKTtcbiAgICB9XG4gIH0sXG5cbiAgaXNVVUlEKHZhbDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKHR5cGVvZiB2YWwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbC5sZW5ndGggPT09IDM2O1xuICB9LFxuXG4gIHNvcnRCeUFnZShhLCBiKSB7XG4gICAgY29uc3QgZm1BID0gbmV3IEZyb250bWF0dGVySlMoYSk7XG4gICAgY29uc3QgZm1CID0gbmV3IEZyb250bWF0dGVySlMoYik7XG5cbiAgICByZXR1cm4gZm1BLmNyZWF0ZWRBdC5nZXRUaW1lKCkgLSBmbUIuY3JlYXRlZEF0LmdldFRpbWUoKTtcbiAgfSxcblxuICBzb3J0QnlQcmlvcml0eShhLCBiKSB7XG4gICAgY29uc3QgZm1BID0gbmV3IEZyb250bWF0dGVySlMoYSk7XG4gICAgY29uc3QgZm1CID0gbmV3IEZyb250bWF0dGVySlMoYik7XG5cbiAgICByZXR1cm4gZm1CLmZtLnByaW9yaXR5IC0gZm1BLmZtLnByaW9yaXR5O1xuICB9LFxuXG4gIHNvcnRCeVByaW9yaXR5QW5kQWdlKGEsIGIpIHtcbiAgICBjb25zdCBmbUEgPSBuZXcgRnJvbnRtYXR0ZXJKUyhhKTtcbiAgICBjb25zdCBmbUIgPSBuZXcgRnJvbnRtYXR0ZXJKUyhiKTtcblxuICAgIGlmIChmbUEuZm0ucHJpb3JpdHkgIT09IGZtQi5mbS5wcmlvcml0eS5wcmlvcml0eSkge1xuICAgICAgcmV0dXJuIEhlbHBlci5zb3J0QnlQcmlvcml0eShhLCBiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIEhlbHBlci5zb3J0QnlBZ2UoYSwgYik7XG4gICAgfVxuICB9LFxuXG4gIHNvcnRCeUR1cmF0aW9uKGEsIGIpIHtcbiAgICBjb25zdCBmbUEgPSBuZXcgRnJvbnRtYXR0ZXJKUyhhKTtcbiAgICBjb25zdCBmbUIgPSBuZXcgRnJvbnRtYXR0ZXJKUyhiKTtcbiAgICByZXR1cm4gKFxuICAgICAgSGVscGVyLmR1cmF0aW9uU3RyaW5nVG9TZWMoZm1BLmZtLnRpbWVfZXN0aW1hdGUpIC1cbiAgICAgIEhlbHBlci5kdXJhdGlvblN0cmluZ1RvU2VjKGZtQi5mbS50aW1lX2VzdGltYXRlKVxuICAgICk7XG4gIH0sXG5cbiAgc29ydEJ5UHJpb3JpdHlBbmREdXJhdGlvbihhLCBiKSB7XG4gICAgY29uc3QgZm1BID0gbmV3IEZyb250bWF0dGVySlMoYSk7XG4gICAgY29uc3QgZm1CID0gbmV3IEZyb250bWF0dGVySlMoYik7XG5cbiAgICBpZiAoZm1BLmZtLnByaW9yaXR5ICE9PSBmbUIuZm0ucHJpb3JpdHkpIHtcbiAgICAgIHJldHVybiBIZWxwZXIuc29ydEJ5UHJpb3JpdHkoYSwgYik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBIZWxwZXIuc29ydEJ5RHVyYXRpb24oYSwgYik7XG4gICAgfVxuICB9LFxuXG4gIHNvcnRCeVByaW9yaXR5QW5kRHVyYXRpb25BbmRBZ2UoYSwgYikge1xuICAgIGNvbnN0IGZtQSA9IG5ldyBGcm9udG1hdHRlckpTKGEpO1xuICAgIGNvbnN0IGZtQiA9IG5ldyBGcm9udG1hdHRlckpTKGIpO1xuXG4gICAgaWYgKGZtQS5mbS5wcmlvcml0eSAhPT0gZm1CLmZtLnByaW9yaXR5KSB7XG4gICAgICByZXR1cm4gSGVscGVyLnNvcnRCeVByaW9yaXR5KGEsIGIpO1xuICAgIH0gZWxzZSBpZiAoZm1BLmZtLnRpbWVfZXN0aW1hdGUgIT09IGZtQi5mbS50aW1lX2VzdGltYXRlKSB7XG4gICAgICByZXR1cm4gSGVscGVyLnNvcnRCeUR1cmF0aW9uKGEsIGIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gSGVscGVyLnNvcnRCeUFnZShhLCBiKTtcbiAgICB9XG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgQXV0b0ZpZWxkID0ge1xuICB0YWdzKGR2LCBmbSwgbGV2ZWwgPSAyKSB7XG4gICAgY29uc3QgdGFncyA9IGZtLnRhZ3M7XG4gICAgaWYgKHRhZ3MgPT0gdW5kZWZpbmVkIHx8IHRhZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGFncy5zb3J0KCk7XG4gICAgZHYuaGVhZGVyKGxldmVsLCBcIlRhZ3NcIik7XG4gICAgbGV0IHMgPSBcIlwiO1xuICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAgIHMgKz0gYCAjJHt0YWd9YDtcbiAgICB9XG4gICAgZHYucGFyYWdyYXBoKHMpO1xuICB9LFxuXG4gIGhlYWxtb24oZHYpIHtcbiAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKGR2LmN1cnJlbnQoKSk7XG4gICAgY29uc3QgY3VycmVudCA9IGZtLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcblxuICAgIGNvbnN0IHBhZ2VzID0gZHYucGFnZXMoYFwiJHtQYXRocy5Kb3VybmFsfVwiYCkud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgIGNvbnN0IGpGbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgaWYgKGpGbS5nZXRQcm9qZWN0KCkgIT09IFwiaG9tZWNvb2tcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGxldCBqQ3VycmVudCA9IG51bGw7XG4gICAgICAvLyBsYSBmaWNoZSBob21lY29vayBzZSB0cm91dmUgdG91am91cnMgXHUwMEUwIGxhIGRhdGUgai0xXG4gICAgICBjb25zdCBjdXJyZW50TWludXNPbmUgPSBuZXcgRGF0ZShcbiAgICAgICAgZm0uY3JlYXRlZEF0LmdldFRpbWUoKSAtIDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgICApO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gb24gcydpbnRcdTAwRTlyZXNzZSBhdSByZXBhcyBkZSBsYSB2ZWlsbGUgZGFucyBoZWFsbW9uXG4gICAgICAgIC8vIG5lIGNvdXZyZSBwYXMgb3UgbGUgcmVwYXMgZXN0IHByaXMgYXByZXMgMDBoIGxlIGpvdXIgZW4gY291cnNcbiAgICAgICAgLy8gc2VyYSBnXHUwMEU5clx1MDBFOSBhdmVjIGxhIGZpY2hlIGRpcmVjdGVtZW50IHBvdXIgbGUgbW9tZW50XG4gICAgICAgIGpDdXJyZW50ID0gakZtLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICBkdi5wYXJhZ3JhcGgoXG4gICAgICAgICAgYEludmFsaWQgZGF0ZTogJHtSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChkdiwgcGFnZS5maWxlKX1gLFxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmVycm9yKGpGbSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXJyZW50TWludXNPbmUudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkgIT09IGpDdXJyZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICBkdi5oZWFkZXIoNCwgXCJyZXBhcyAodmVpbGxlKVwiKTtcbiAgICBpZiAocGFnZXMubGVuZ3RoKSB7XG4gICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgcGFnZXMpIHtcbiAgICAgICAgZHYucGFyYWdyYXBoKFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKGR2LCBwYWdlLmZpbGUpKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgYXV0aG9ycyhkdiwgZm0pIHtcbiAgICBjb25zdCBhdXRob3JzID0gZm0uYXV0aG9ycztcbiAgICBpZiAoYXV0aG9ycyA9PT0gdW5kZWZpbmVkIHx8IGF1dGhvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZHYuaGVhZGVyKDMsIFwiQXV0aG9yc1wiKTtcbiAgICBkdi5saXN0KGF1dGhvcnMpO1xuICB9LFxuXG4gIHRpdGxlKGR2LCBmbSkge1xuICAgIGNvbnN0IHRpdGxlID0gZm0uYWxpYXM7XG4gICAgaWYgKHRpdGxlID09PSB1bmRlZmluZWQgfHwgdGl0bGUubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZHYuaGVhZGVyKDMsIHRpdGxlKTtcbiAgfSxcblxuICBsb2dzKGR2LCBlbnRyaWVzKSB7XG4gICAgY29uc29sZS5sb2coXCJjb3Vjb3UsIHR1IHZldXggdm9pciBtYSBiaXRlP1wiKTtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgbGV0IHRvdGFsVGltZSA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgIGNvbnN0IGZtZSA9IGVudHJ5LmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBjb25zdCBlID0gW107XG4gICAgICBsZXQgc3RhcnQ6IGFueSA9IDA7XG4gICAgICBsZXQgc3RvcDogYW55ID0gMDtcbiAgICAgIGlmIChmbWUgPT09IHVuZGVmaW5lZCB8fCBmbWUuY3JlYXRlZF9hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBmcm9udG1hdHRlcjogJHtmbWUudXVpZH1gKTtcbiAgICAgIH1cblxuICAgICAgc3RhcnQgPSBuZXcgRGF0ZShmbWUuY3JlYXRlZF9hdCk7XG4gICAgICBlLnB1c2goc3RhcnQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkpO1xuICAgICAgaWYgKGZtZS5kb25lX2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3RvcCA9IERhdGUubm93KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdG9wID0gbmV3IERhdGUoZm1lLmRvbmVfYXQpO1xuICAgICAgfVxuICAgICAgdG90YWxUaW1lICs9IHN0b3AgLSBzdGFydDtcbiAgICAgIGUucHVzaChcbiAgICAgICAgZHYuc2VjdGlvbkxpbmsoXG4gICAgICAgICAgZm1lLnV1aWQsXG4gICAgICAgICAgXCIjIyBDb250ZW50XCIsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgZm1lLnV1aWQuc2xpY2UoMCwgOCksXG4gICAgICAgICksXG4gICAgICApO1xuICAgICAgZS5wdXNoKE1hdGgucm91bmQoKChzdG9wIC0gc3RhcnQpIC8gKDEwMDAgKiA2MCAqIDYwKSkgKiAxMCkgLyAxMCk7XG4gICAgICBpZiAoZm1lLnJldmlld2VkID09PSB1bmRlZmluZWQgfHwgZm1lLnJldmlld2VkID09PSAwKSB7XG4gICAgICAgIGUucHVzaCgwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGUucHVzaChmbWUucmV2aWV3ZWQpO1xuICAgICAgfVxuICAgICAgYnVmZi5wdXNoKGUpO1xuICAgIH1cblxuICAgIGlmIChidWZmLmxlbmd0aCA+IDApIHtcbiAgICAgIGR2LmhlYWRlcigyLCBcIkxvZ3NcIik7XG4gICAgICBkdi50YWJsZShbXCJjcmVhdGVkX2F0XCIsIFwidXVpZFwiLCBcInNlc3Npb25cIiwgXCJyZXZpZXdlZFwiXSwgYnVmZik7XG4gICAgICBpZiAodG90YWxUaW1lID4gMCkge1xuICAgICAgICBkdi5wYXJhZ3JhcGgoXG4gICAgICAgICAgYF90b3RhbFRpbWUgKGgpOl8gJHtNYXRoLnJvdW5kKCh0b3RhbFRpbWUgLyAoMTAwMCAqIDYwICogNjApKSAqIDEwKSAvIDEwXG4gICAgICAgICAgfWAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIG1lZGlhKGR2KSB7XG4gICAgY29uc3QgY3VycmVudCA9IGR2LmN1cnJlbnQoKTtcbiAgICBjb25zdCBmbSA9IGN1cnJlbnQuZmlsZS5mcm9udG1hdHRlcjtcbiAgICBjb25zdCBwYWdlcyA9IGR2LnBhZ2VzKGBcIiR7UGF0aHMuUmVmc30vJHtmbS5yZWZfaWR9XCJgKS5hcnJheSgpO1xuICAgIGlmIChwYWdlcy5sZW5ndGggIT09IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWVkaWEgPSBwYWdlc1swXTtcbiAgICBjb25zdCBtZWRpYUZtID0gbWVkaWEuZmlsZS5mcm9udG1hdHRlcjtcbiAgICBBdXRvRmllbGQudGl0bGUoZHYsIG1lZGlhRm0pO1xuICAgIGR2LnBhcmFncmFwaChSZW5kZXJlci5tYWtlTGlua0FsaWFzKGR2LCBtZWRpYS5maWxlKSk7XG4gICAgQXV0b0ZpZWxkLmF1dGhvcnMoZHYsIG1lZGlhRm0pO1xuICAgIEF1dG9GaWVsZC50YWdzKGR2LCBtZWRpYUZtLCAzKTtcblxuICAgIGNvbnN0IGxvZ0VudHJpZXMgPSBkdlxuICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuTG9nc30vJHtmbS51dWlkfVwiYClcbiAgICAgIC53aGVyZSgocCkgPT4gcC50eXBlID09PSA2KVxuICAgICAgLnNvcnQoKGspID0+IGsuY3JlYXRlZF9hdCwgXCJkZXNjXCIpO1xuICAgIEF1dG9GaWVsZC5sb2dzKGR2LCBsb2dFbnRyaWVzKTtcbiAgfSxcblxuICBhdXRvRmllbGRUaXRsZShkdiwgZm0pIHtcbiAgICBjb25zdCB0aXRsZSA9IGZtLmFsaWFzO1xuICAgIGlmICh0aXRsZSA9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkdi5oZWFkZXIoMSwgdGl0bGUpO1xuICB9LFxuXG4gIGF1dG9GaWVsZEF1dGhvcnMoZHYsIGZtKSB7XG4gICAgY29uc3QgYXV0aG9ycyA9IGZtLmF1dGhvcnM7XG4gICAgaWYgKGF1dGhvcnMgPT09IHVuZGVmaW5lZCB8fCBhdXRob3JzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkdi5oZWFkZXIoMiwgXCJBdXRob3JzXCIpO1xuICAgIGR2Lmxpc3QoYXV0aG9ycyk7XG4gIH0sXG5cbiAgYXV0b0ZpZWxkVGFncyhkdiwgZm0pIHtcbiAgICBjb25zdCB0YWdzID0gZm0udGFncztcbiAgICBpZiAodGFncyA9PSB1bmRlZmluZWQgfHwgdGFncy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0YWdzLnNvcnQoKTtcbiAgICBkdi5oZWFkZXIoMiwgXCJUYWdzXCIpO1xuICAgIGxldCBzID0gXCJcIjtcbiAgICBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgICBzICs9IGAgIyR7dGFnfWA7XG4gICAgfVxuICAgIGR2LnBhcmFncmFwaChzKTtcbiAgfSxcblxuICBsaXRlcmF0dXJlKGR2KSB7XG4gICAgY29uc3QgY3VycmVudCA9IGR2LmN1cnJlbnQoKTtcbiAgICBjb25zdCBmbSA9IGN1cnJlbnQuZmlsZS5mcm9udG1hdHRlcjtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoSGVscGVyLm5pbENoZWNrKGZtLmF1dGhvcnMpKSB7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYXV0b0ZpZWxkVGl0bGUoZHYsIGZtKTtcbiAgICAgIHRoaXMuYXV0b0ZpZWxkQXV0aG9ycyhkdiwgZm0pO1xuICAgICAgdGhpcy5hdXRvRmllbGRUYWdzKGR2LCBmbSk7XG4gICAgfVxuICB9LFxuXG4gIGdvYWwoZHYpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gZHYuY3VycmVudCgpO1xuICAgIGNvbnN0IGZtID0gY3VycmVudC5maWxlLmZyb250bWF0dGVyO1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJmbSBpcyByZXF1aXJlZFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyB0aGlzLmF1dG9GaWVsZE5lZWQoZHYsIGZtKTtcbiAgICAvLyB0aGlzLmF1dG9GaWVsZE5lZWRlZEJ5KGR2LCBjdXJyZW50KTtcbiAgICAvLyB0aGlzLmF1dG9GaWVsZFRhZ3MoZHYsIGZtKTtcbiAgICAvL1xuICAgIGNvbnN0IGNyZWF0ZWRfYXQgPSBuZXcgRGF0ZShmbS5jcmVhdGVkX2F0KTtcbiAgICBjb25zdCBsb2dFbnRyaWVzID0gZHZcbiAgICAgIC5wYWdlcyhgXCIke1BhdGhzLkxvZ3N9LyR7Zm0udXVpZH1cImApXG4gICAgICAud2hlcmUoKHApID0+IHAudHlwZSA9PT0gNilcbiAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiZGVzY1wiKTtcblxuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGxvZ0VudHJpZXMpIHtcbiAgICAgIGNvbnN0IGZtZSA9IGVudHJ5LmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBjb25zdCBlID0gW107XG5cbiAgICAgIGlmIChmbWUgPT09IHVuZGVmaW5lZCB8fCBmbWUuY3JlYXRlZF9hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBmcm9udG1hdHRlcjogJHtmbWUudXVpZH1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZShmbWUuY3JlYXRlZF9hdCk7XG4gICAgICBlLnB1c2goc3RhcnQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkpO1xuXG4gICAgICBlLnB1c2goXG4gICAgICAgIGR2LnNlY3Rpb25MaW5rKFxuICAgICAgICAgIGZtZS51dWlkLFxuICAgICAgICAgIFwiIyMgQ29udGVudFwiLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIGZtZS51dWlkLnNsaWNlKDAsIDgpLFxuICAgICAgICApLFxuICAgICAgKTtcblxuICAgICAgYnVmZi5wdXNoKGUpO1xuICAgIH1cblxuICAgIGNvbnN0IGJlZm9yZSA9IG5ldyBEYXRlKGZtLmJlZm9yZSk7XG4gICAgLy8gZGF5c1xuICAgIGNvbnN0IHRpbWVmcmFtZSA9XG4gICAgICAoYmVmb3JlLmdldFRpbWUoKSAtIGNyZWF0ZWRfYXQuZ2V0VGltZSgpKSAvICgxMDAwICogMzYwMCAqIDI0KTtcbiAgICBsZXQgdGltZWZyYW1lVGV4dCA9IFwiXCI7XG4gICAgLy8gMSBqb3VyXG4gICAgLy8gMSBzZW1haW5lXG4gICAgLy8gMiBzZW1haW5lXG4gICAgLy8gMSBtb2lzXG4gICAgLy8gMiBtb2lzXG4gICAgLy8gNiBtb2lzXG4gICAgLy8gMSBhblxuICAgIC8vIDIgYW5zXG4gICAgLy8gNSBhbnNcbiAgICBkdi5oZWFkZXIoMywgXCJUaW1lZnJhbWVcIik7XG4gICAgaWYgKHRpbWVmcmFtZSA+IDAgJiYgdGltZWZyYW1lIDwgMzApIHtcbiAgICAgIHRpbWVmcmFtZVRleHQgPSBcInJ1bmF3YXlcIjtcbiAgICB9IGVsc2UgaWYgKHRpbWVmcmFtZSA8IDYwKSB7XG4gICAgICB0aW1lZnJhbWVUZXh0ID0gXCIxMCwwMDAgZmVldFwiO1xuICAgIH0gZWxzZSBpZiAodGltZWZyYW1lIDwgMzYwKSB7XG4gICAgICB0aW1lZnJhbWVUZXh0ID0gXCIyMCwwMDAgZmVldFwiO1xuICAgIH0gZWxzZSBpZiAodGltZWZyYW1lIDwgNzIwKSB7XG4gICAgICB0aW1lZnJhbWVUZXh0ID0gXCIzMCwwMDAgZmVldFwiO1xuICAgIH0gZWxzZSBpZiAodGltZWZyYW1lIDwgMTA4MCkge1xuICAgICAgdGltZWZyYW1lVGV4dCA9IFwiNDAsMDAwIGZlZXRcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZWZyYW1lVGV4dCA9IFwiNTAsMDAwIGZlZXRcIjtcbiAgICB9XG5cbiAgICBkdi5wYXJhZ3JhcGgodGltZWZyYW1lVGV4dCk7XG5cbiAgICBpZiAoYnVmZi5sZW5ndGggPiAwKSB7XG4gICAgICBkdi5oZWFkZXIoMiwgXCJSZXZpZXdzXCIpO1xuICAgICAgZHYudGFibGUoW1wicmV2aWV3ZWRfYXRcIiwgXCJ1dWlkXCJdLCBidWZmKTtcbiAgICB9XG4gIH0sXG5cbiAgZGFpbHkoZHYpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gZHYuY3VycmVudCgpLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgY29uc3QgY3VycmVudEF0ID0gbmV3IERhdGUoY3VycmVudC5hdCk7XG4gICAgY29uc3QgY3VycmVudEF0U2hvcnQgPSBjdXJyZW50QXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgZ29uZXh0ID0gYXBwLnBsdWdpbnMucGx1Z2lucy5vYnNpZGlhbl9nb25leHQ7XG4gICAgY29uc3Qgbm90ZUhlbHBlciA9IG5ldyBOb3RlSGVscGVyKGdvbmV4dCwgZHYsIG5ldyBGcm9udG1hdHRlcihnb25leHQpKTtcblxuICAgIGNvbnN0IHBhZ2VzID0gZHZcbiAgICAgIC5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfVwiYClcbiAgICAgIC53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgICAvLyBpZiAocGFnZS5maWxlLmZyb250bWF0dGVyLmF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gXHRyZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIH1cblxuICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICBpZiAoY3VycmVudC51dWlkID09PSBmbS51dWlkKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZtLmZtLnN0YXR1cyAhPT0gXCJ0b2RvXCIgfHwgZm0uZ2V0UHJvamVjdCgpID09PSBcImRhaWx5XCIpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBub3cgPSBjdXJyZW50QXQ7XG4gICAgICAgIGxldCBmbUF0U2hvcnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm1BdFNob3J0ID0gZm0uYXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtmbS51dWlkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFub3RlSGVscGVyLmlzRG9hYmxlKHBhZ2UsIGN1cnJlbnRBdCkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiAoZm0udXVpZCA9PT0gXCIyYTk3ZGUzNS1jYTg3LTQyNjctOTE1OS02YzA5NmQ0MTYzZjFcIikge1xuICAgICAgICAvLyBcdGNvbnNvbGUubG9nKGB1dWlkOiAke2ZtLnV1aWR9YCk7XG4gICAgICAgIC8vIFx0Y29uc29sZS5sb2coYG5vdzogJHtub3d9YCk7XG4gICAgICAgIC8vIFx0Y29uc29sZS5sb2coYGZtLmF0OiAke2ZtLmF0fWApO1xuICAgICAgICAvLyBcdGNvbnNvbGUubG9nKGBmbUF0U2hvcnQ6ICR7Zm1BdFNob3J0fWApO1xuICAgICAgICAvLyBcdGNvbnNvbGUubG9nKGBjdXJyZW50QXRTaG9ydDogJHtjdXJyZW50QXRTaG9ydH1gKTtcbiAgICAgICAgLy8gXHRjb25zb2xlLmxvZyhgY29uZGl0aW9uOiAke2ZtLmF0ICE9PSB1bmRlZmluZWQgJiYgZm1BdFNob3J0ID09PSBjdXJyZW50QXRTaG9ydH1gKTtcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuYXQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgIGZtQXRTaG9ydCA9PT0gY3VycmVudEF0U2hvcnRcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgcGFnZS5maWxlLmZyb250bWF0dGVyLmF0ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICBmbS5hdC5nZXRUaW1lKCkgPCBub3cuZ2V0VGltZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHBhZ2UuZmlsZS5mcm9udG1hdHRlci5iZWZvcmUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgIGZtLmJlZm9yZS5nZXRUaW1lKCkgPiBub3cuZ2V0VGltZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHBhZ2UuZmlsZS5mcm9udG1hdHRlci5hZnRlciAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgZm0uYWZ0ZXIuZ2V0VGltZSgpIDwgbm93LmdldFRpbWUoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0pXG4gICAgICAuc29ydCgoaykgPT4gay5hdCwgXCJhc2NcIik7XG5cbiAgICBpZiAocGFnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGNvbnN0IGggPSBTdHJpbmcoZm0uYXQuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuICAgICAgY29uc3QgbSA9IFN0cmluZyhmbS5hdC5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICAgIGlmIChwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuc3RhdHVzID09PSBcImRvbmVcIikge1xuICAgICAgICBidWZmLnB1c2goW1xuICAgICAgICAgIGB+fiR7UmVuZGVyZXIubWFrZUxpbmtTaG9ydFVVSUQoZHYsIHBhZ2UuZmlsZSwgXCJUYXNrXCIpfX5+YCxcbiAgICAgICAgICBgfn4ke2h9OiR7bX1+fmAsXG4gICAgICAgIF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgICBgJHtSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChkdiwgcGFnZS5maWxlLCBcIlRhc2tcIil9YCxcbiAgICAgICAgICBgJHtofToke219YCxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgfVxuICAgIGR2LnRhYmxlKFtcInV1aWRcIiwgXCJhdFwiXSwgYnVmZik7XG5cbiAgICBBdXRvRmllbGQuZGFpbHlKb3VyYWwoZHYpO1xuICB9LFxuXG4gIGRhaWx5Sm91cmFsKGR2KSB7XG4gICAgY29uc3QgY3VycmVudCA9IG5ldyBGcm9udG1hdHRlckpTKGR2LmN1cnJlbnQoKSk7XG4gICAgY29uc3QgY3VycmVudEF0U2hvcnQgPSBjdXJyZW50LmF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuICAgIGNvbnNvbGUubG9nKGN1cnJlbnRBdFNob3J0KTtcbiAgICBjb25zdCBwYWdlcyA9IGR2XG4gICAgICAucGFnZXMoYFwiSm91cm5hbFwiYClcbiAgICAgIC53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICBjb25zdCBhdFNob3J0ID0gZm0uY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuICAgICAgICBpZiAoYXRTaG9ydCA9PT0gY3VycmVudEF0U2hvcnQpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0pXG4gICAgICAuc29ydCgoaykgPT4gay5jcmVhdGVkX2F0LCBcImFzY1wiKTtcblxuICAgIGR2LmhlYWRlcigyLCBcIkpvdXJuYWxcIik7XG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgaWYgKHBhZ2UuZmlsZS5mcm9udG1hdHRlci5hbGlhcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBhZ2UuZmlsZS5mcm9udG1hdHRlci5uYW1lID0gcGFnZS5maWxlLmZyb250bWF0dGVyLmFsaWFzO1xuICAgICAgfSBlbHNlIGlmIChmbS5nZXRQcm9qZWN0KCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIubmFtZSA9IGZtLmdldFByb2plY3QoKTtcbiAgICAgIH0gZWxzZSBpZiAoZm0uZ2V0RG9tYWluKCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIubmFtZSA9IGZtLmdldERvbWFpbigpO1xuICAgICAgfVxuXG4gICAgICBkdi5wYXJhZ3JhcGgoUmVuZGVyZXIubWFrZUxpbmtOYW1lKGR2LCBwYWdlLmZpbGUpKTtcbiAgICAgIC8vIGR2LnBhcmFncmFwaChSZW5kZXJlci5tYWtlTGlua0FsaWFzKGR2LCBwYWdlLmZpbGUpKTtcbiAgICB9XG4gIH0sXG5cbiAgZGFpbHlHb2Fscyhkdikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBkdi5jdXJyZW50KCkuZmlsZS5mcm9udG1hdHRlcjtcbiAgICBjb25zdCBjdXJyZW50QXQgPSBuZXcgRGF0ZShjdXJyZW50LmF0KTtcblxuICAgIGNvbnN0IHBhZ2VzID0gZHZcbiAgICAgIC5wYWdlcyhgXCIke1BhdGhzLkdvYWxzfVwiYClcbiAgICAgIC53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgICBpZiAocGFnZS5maWxlLmZyb250bWF0dGVyLnN0YXR1cyAhPT0gXCJhY3RpdmVcIikge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5zb3J0KChrKSA9PiBrLmF0LCBcImFzY1wiKTtcblxuICAgIGlmIChwYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgcGFnZXMpIHtcbiAgICAgIGR2LnBhcmFncmFwaChSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChkdiwgcGFnZS5maWxlKSk7XG4gICAgfVxuICB9LFxuXG4gIHRhc2soZHYpIHtcbiAgICBjb25zdCBkdkxpYiA9IG5ldyBEdkxpYigpO1xuICAgIGR2TGliLmF1dG9GaWVsZFRhc2soZHYpO1xuICB9LFxuXG4gIGxvZyhkdikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBkdi5jdXJyZW50KCk7XG4gICAgY29uc3QgY3VyRm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhjdXJyZW50KTtcbiAgICBjb25zdCBjdXJyZW50SWQgPSBjdXJGbS51dWlkO1xuICAgIGNvbnN0IGN1cnJlbnRQYXJlbnRJZCA9IGN1cnJlbnQuZmlsZS5wYXRoLnNwbGl0KFwiL1wiKVsxXTtcbiAgICBBc3NlcnQuVHJ1ZShcbiAgICAgIGN1cnJlbnRQYXJlbnRJZCAhPT0gdW5kZWZpbmVkLFxuICAgICAgYGN1cnJlbnRQYXJlbnRJZCB1bmRlZmluZWQgZm9yICR7Y3VyRm0udXVpZH1gLFxuICAgICk7XG5cbiAgICBjb25zdCBwYWdlcyA9IGR2XG4gICAgICAucGFnZXMoYFwiJHtQYXRocy5Mb2dzfVwiYClcbiAgICAgIC53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICBjb25zdCBwYXJlbnRJZCA9IHBhZ2UuZmlsZS5wYXRoLnNwbGl0KFwiL1wiKVsxXTtcbiAgICAgICAgQXNzZXJ0LlRydWUoXG4gICAgICAgICAgcGFyZW50SWQgIT09IHVuZGVmaW5lZCxcbiAgICAgICAgICBgcGFyZW50SWQgdW5kZWZpbmVkIGZvciAke2ZtLnV1aWR9YCxcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHBhcmVudElkICE9PSBjdXJyZW50UGFyZW50SWQpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pXG4gICAgICAuc29ydCgoaykgPT4gay5jcmVhdGVkX2F0LCBcImFzY1wiKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHBhZ2UgPSBwYWdlc1tpXTtcbiAgICAgIEFzc2VydC5UcnVlKHBhZ2UgIT09IHVuZGVmaW5lZCwgXCJhc3MgZXJ0IGZhaWxlZFwiKTtcbiAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICBpZiAoZm0udXVpZCA9PT0gY3VycmVudElkKSB7XG4gICAgICAgIC8vIGdvdGNoYVxuICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgIGNvbnN0IGR2TGliID0gbmV3IER2TGliKCk7XG4gICAgICAgICAgZHZMaWIuYXV0b0ZpZWxkTG9nKGR2KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkdi5wYXJhZ3JhcGgoUmVuZGVyZXIubWFrZUxpbmtTaG9ydFVVSUQoZHYsIHBhZ2VzW2kgLSAxXS5maWxlKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG59O1xuXG4vLyB0aGlzIG11c3QgYmUgY2FsbGVkIGZyb20gYGRhdGF2aWV3anNgIGNvZGVibG9ja3NcbmV4cG9ydCBjb25zdCBSZW5kZXJlciA9IHtcbiAgbWFrZUxpbmtOYW1lKGR2LCBmLCBhbmNob3IgPSBcIkNvbnRlbnRcIikge1xuICAgIGlmIChIZWxwZXIubmlsQ2hlY2soZi5mcm9udG1hdHRlci5uYW1lKSkge1xuICAgICAgcmV0dXJuIFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKGR2LCBmLCBhbmNob3IpO1xuICAgIH1cblxuICAgIHJldHVybiBkdi5zZWN0aW9uTGluayhmLnBhdGgsIGFuY2hvciwgZmFsc2UsIGAke2YuZnJvbnRtYXR0ZXIubmFtZX1gKTtcbiAgfSxcblxuICBtYWtlTGlua0FsaWFzKGR2LCBmLCBhbmNob3IgPSBcIkNvbnRlbnRcIikge1xuICAgIGlmIChIZWxwZXIubmlsQ2hlY2soZi5mcm9udG1hdHRlci5hbGlhcykpIHtcbiAgICAgIHJldHVybiBSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChkdiwgZiwgYW5jaG9yKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZHYuc2VjdGlvbkxpbmsoZi5wYXRoLCBhbmNob3IsIGZhbHNlLCBgJHtmLmZyb250bWF0dGVyLmFsaWFzfWApO1xuICB9LFxuXG4gIG1ha2VMaW5rU2hvcnRVVUlEKGR2LCBmLCBhbmNob3IgPSBcIkNvbnRlbnRcIikge1xuICAgIHJldHVybiBkdi5zZWN0aW9uTGluayhcbiAgICAgIGYucGF0aCxcbiAgICAgIGFuY2hvcixcbiAgICAgIGZhbHNlLFxuICAgICAgYCR7Zi5mcm9udG1hdHRlci51dWlkLnNsaWNlKDAsIDgpfWAsXG4gICAgKTtcbiAgfSxcblxuICBtYWtlTGluayhkdiwgZiwgbmFtZSA9IHVuZGVmaW5lZCwgYW5jaG9yID0gXCJDb250ZW50XCIpIHtcbiAgICByZXR1cm4gZHYuc2VjdGlvbkxpbmsoZi5wYXRoLCBhbmNob3IsIGZhbHNlLCBuYW1lKTtcbiAgfSxcblxuICBwcm9qZWN0TG9ncyhkdiwgZGF0YSkge1xuICAgIGNvbnN0IGNvbHMgPSBbXCJ0eXBlXCIsIFwidGFza19pZFwiLCBcImxvZ19pZFwiLCBcInRvb2tcIiwgXCJyZXZpZXdlZFwiXTtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgbGV0IHRvdGFsVGltZSA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xuICAgICAgY29uc3QgZiA9IGQuZmlsZTtcbiAgICAgIGNvbnN0IGZtID0gZC5maWxlLmZyb250bWF0dGVyO1xuICAgICAgQXNzZXJ0LlRydWUoXG4gICAgICAgICFIZWxwZXIubmlsQ2hlY2soZm0udXVpZCksXG4gICAgICAgIGBcInV1aWRcIiBpZCBub3QgZGVmaW5lZCBmb3I6ICR7Zi5wYXRofWAsXG4gICAgICApO1xuICAgICAgQXNzZXJ0LlRydWUoXG4gICAgICAgICFIZWxwZXIubmlsQ2hlY2soZm0udHlwZSksXG4gICAgICAgIGBcInR5cGVcIiBpZCBub3QgZGVmaW5lZCBmb3I6ICR7Zi5wYXRofWAsXG4gICAgICApO1xuXG4gICAgICBjb25zdCBjcmVhdGVkQXQgPSBuZXcgRGF0ZShmbS5jcmVhdGVkX2F0KTtcbiAgICAgIGNvbnN0IGRvbmVBdCA9IG5ldyBEYXRlKGZtLmRvbmVfYXQpO1xuICAgICAgY29uc3QgZGVsdGEgPSBkb25lQXQuZ2V0VGltZSgpIC0gY3JlYXRlZEF0LmdldFRpbWUoKTtcblxuICAgICAgdG90YWxUaW1lICs9IGRlbHRhO1xuICAgICAgY29uc3QgcmVjb3JkID0ge1xuICAgICAgICB0YXNrSWQ6IFwiXCIsXG4gICAgICAgIGxvZ0lkOiBSZW5kZXJlci5tYWtlTGlua0FsaWFzKGR2LCBmKSxcbiAgICAgICAgdG9vazogTWF0aC5yb3VuZCgoZGVsdGEgLyAoMTAwMCAqIDYwICogNjApKSAqIDEwKSAvIDEwLFxuICAgICAgICByZXZpZXdlZDogSGVscGVyLm5pbENoZWNrKGZtLnJldmlld2VkKSA/IDAgOiBmbS5yZXZpZXdlZCxcbiAgICAgICAgdHlwZTogdW5kZWZpbmVkLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHBhZ2VzID0gZHYucGFnZXMoYFwiJHtQYXRocy5UYXNrc30vJHtmbS5wYXJlbnRfaWR9XCJgKS5hcnJheSgpO1xuICAgICAgaWYgKHBhZ2VzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYHBhcmVudCB0YXNrIHdpdGggaWQ6IFwiJHtmbS5wYXJlbnRfaWR9XCIgZG9lcyBub3QgZXhpc3RzYCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcmVudCA9IHBhZ2VzWzBdO1xuICAgICAgc3dpdGNoIChwYXJlbnQuZmlsZS5mcm9udG1hdHRlci50eXBlKSB7XG4gICAgICAgIGNhc2UgVHlwZXMuVGFzazpcbiAgICAgICAgICByZWNvcmQudHlwZSA9IGA8Zm9udCBjb2xvcj04QjAwMDA+dGFzazwvZm9udD5gO1xuICAgICAgICAgIHJlY29yZC50YXNrSWQgPSBSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChcbiAgICAgICAgICAgIGR2LFxuICAgICAgICAgICAgcGFyZW50LmZpbGUsXG4gICAgICAgICAgICBcIlRhc2tcIixcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGVzLk1lZGlhOlxuICAgICAgICAgIHJlY29yZC50eXBlID0gYDxmb250IGNvbG9yPTAwMDA4Qj5tZWRpYTwvZm9udD5gO1xuICAgICAgICAgIHJlY29yZC50YXNrSWQgPSBSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChcbiAgICAgICAgICAgIGR2LFxuICAgICAgICAgICAgcGFyZW50LmZpbGUsXG4gICAgICAgICAgICBcIkNvbnRlbnRcIixcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGVzLlByYXhpczpcbiAgICAgICAgICByZWNvcmQudHlwZSA9IGA8Zm9udCBjb2xvcj1GRjhDMDA+cHJheGlzPC9mb250PmA7XG4gICAgICAgICAgcmVjb3JkLnRhc2tJZCA9IFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKFxuICAgICAgICAgICAgZHYsXG4gICAgICAgICAgICBwYXJlbnQuZmlsZSxcbiAgICAgICAgICAgIFwiQ29udGVudFwiLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZXMuUHJvdmlzaW9uOlxuICAgICAgICAgIHJlY29yZC50eXBlID0gYDxmb250IGNvbG9yPURDMTQzQz5wcm92aXNpb248L2ZvbnQ+YDtcbiAgICAgICAgICByZWNvcmQudGFza0lkID0gUmVuZGVyZXIubWFrZUxpbmtTaG9ydFVVSUQoXG4gICAgICAgICAgICBkdixcbiAgICAgICAgICAgIHBhcmVudC5maWxlLFxuICAgICAgICAgICAgXCJDb250ZW50XCIsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgUmVuZGVyZXIucHJvamVjdExvZ3M6IHR5cGUgXCIke3BhcmVudC5maWxlLmZyb250bWF0dGVyLnR5cGV9XCIgbm90IGltcGxlbWVudGVkYCxcbiAgICAgICAgICApO1xuICAgICAgfVxuICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgcmVjb3JkLnR5cGUsXG4gICAgICAgIHJlY29yZC50YXNrSWQsXG4gICAgICAgIHJlY29yZC5sb2dJZCxcbiAgICAgICAgcmVjb3JkLnRvb2ssXG4gICAgICAgIHJlY29yZC5yZXZpZXdlZCxcbiAgICAgIF0pO1xuICAgIH1cblxuICAgIGR2LnRhYmxlKGNvbHMsIGJ1ZmYpO1xuICAgIC8vIE1hdGgucm91bmQoKHRvdGFsVGltZSAvICgxMDAwICogNjAgKiA2MCkpICogMTApIC8gMTAsXG4gIH0sXG5cbiAgZ29hbChkdiwgZGF0YSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGZtIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGNyZWF0ZWRfYXQgPSBmbS5jcmVhdGVkQXQ7XG4gICAgICBjb25zdCBsb2dFbnRyaWVzID0gZHZcbiAgICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuTG9nc30vJHtmbS51dWlkfVwiYClcbiAgICAgICAgLndoZXJlKChwKSA9PiBwLnR5cGUgPT09IDYpXG4gICAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiZGVzY1wiKTtcbiAgICAgIGNvbnN0IGJlZm9yZSA9IG5ldyBEYXRlKGZtLmZtLmJlZm9yZSk7XG5cbiAgICAgIGNvbnN0IHRpbWVmcmFtZSA9XG4gICAgICAgIChiZWZvcmUuZ2V0VGltZSgpIC0gY3JlYXRlZF9hdC5nZXRUaW1lKCkpIC8gKDEwMDAgKiAzNjAwICogMjQpO1xuICAgICAgbGV0IHRpbWVmcmFtZVRleHQgPSBcIlwiO1xuICAgICAgaWYgKHRpbWVmcmFtZSA+IDAgJiYgdGltZWZyYW1lIDwgMzApIHtcbiAgICAgICAgdGltZWZyYW1lVGV4dCA9IFwicnVuYXdheVwiO1xuICAgICAgfSBlbHNlIGlmICh0aW1lZnJhbWUgPCA2MCkge1xuICAgICAgICB0aW1lZnJhbWVUZXh0ID0gXCIxMCwwMDAgZmVldFwiO1xuICAgICAgfSBlbHNlIGlmICh0aW1lZnJhbWUgPCAzNjApIHtcbiAgICAgICAgdGltZWZyYW1lVGV4dCA9IFwiMjAsMDAwIGZlZXRcIjtcbiAgICAgIH0gZWxzZSBpZiAodGltZWZyYW1lIDwgNzIwKSB7XG4gICAgICAgIHRpbWVmcmFtZVRleHQgPSBcIjMwLDAwMCBmZWV0XCI7XG4gICAgICB9IGVsc2UgaWYgKHRpbWVmcmFtZSA8IDEwODApIHtcbiAgICAgICAgdGltZWZyYW1lVGV4dCA9IFwiNDAsMDAwIGZlZXRcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWVmcmFtZVRleHQgPSBcIjUwLDAwMCBmZWV0XCI7XG4gICAgICB9XG5cbiAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgIGJlZm9yZS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKSxcbiAgICAgICAgZHYuc2VjdGlvbkxpbmsoXG4gICAgICAgICAgZm0udXVpZCxcbiAgICAgICAgICBcIiMjIENvbnRlbnRcIixcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICBmbS51dWlkLnNsaWNlKDAsIDgpLFxuICAgICAgICApLFxuICAgICAgICBmbS5nZXREb21haW4oKSxcbiAgICAgICAgdGltZWZyYW1lVGV4dCxcbiAgICAgIF0pO1xuICAgIH1cblxuICAgIGR2LnRhYmxlKFtcImRlYWRsaW5lXCIsIFwidXVpZFwiLCBcImRvbWFpblwiLCBcInRpbWVmcmFtZVwiXSwgYnVmZik7XG4gIH0sXG5cbiAgaW5ib3hFbnRyeShkdiwgZGF0YSkge1xuICAgIGNvbnN0IGNvbHMgPSBbXG4gICAgICBcInV1aWRcIixcbiAgICAgIC8vIFwidHlwZVwiLFxuICAgICAgLy8gXCJhZ2VcIixcbiAgICAgIC8vIFwic2l6ZVwiLFxuICAgICAgXCJuYW1lXCIsXG4gICAgICAvLyBcInByb2plY3RcIixcbiAgICAgIC8vIFwiZG9tYWluXCIsXG4gICAgICAvLyBcImNvbXBvbmVudHNcIixcbiAgICBdO1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xuICAgICAgY29uc3QgZiA9IGQuZmlsZTtcbiAgICAgIGNvbnN0IGZtID0gZC5maWxlLmZyb250bWF0dGVyO1xuICAgICAgQXNzZXJ0LlRydWUoXG4gICAgICAgICFIZWxwZXIubmlsQ2hlY2soZm0udXVpZCksXG4gICAgICAgIGBcInV1aWRcIiBpZCBub3QgZGVmaW5lZCBmb3I6ICR7Zi5wYXRofWAsXG4gICAgICApO1xuICAgICAgQXNzZXJ0LlRydWUoXG4gICAgICAgICFIZWxwZXIubmlsQ2hlY2soZm0udHlwZSksXG4gICAgICAgIGBcInR5cGVcIiBpZCBub3QgZGVmaW5lZCBmb3I6ICR7Zi5wYXRofWAsXG4gICAgICApO1xuXG4gICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29uc3QgZGVsdGEgPSBub3cuZ2V0VGltZSgpIC0gZm0uY3JlYXRlZEF0LmdldFRpbWUoKTtcbiAgICAgIGNvbnN0IHNpbmNlID0gSGVscGVyLm1zZWNUb1N0cmluZ0R1cmF0aW9uKGRlbHRhKTtcbiAgICAgIGxldCBuYW1lID0gXCJcIjtcblxuICAgICAgaWYgKGZtLmRvbWFpbiAhPT0gXCJkb21haW4vdW5kZWZpbmVkXCIpIHtcbiAgICAgICAgbmFtZSA9IGZtLmRvbWFpbjtcbiAgICAgIH0gZWxzZSBpZiAoZm0ucHJvamVjdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5hbWUgPSBmbS5wcm9qZWN0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmFtZSA9IFwiXFxcXC1cIjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVjb3JkID0ge1xuICAgICAgICB1dWlkOlxuICAgICAgICAgIEhlbHBlci5udW1iZXJUeXBlVG9TdHJpbmcoZm0pID09PSBcImZsZWV0aW5nXCJcbiAgICAgICAgICAgID8gYCYjMTI4MTk2ICR7UmVuZGVyZXIubWFrZUxpbmtBbGlhcyhkdiwgZil9YFxuICAgICAgICAgICAgOiBSZW5kZXJlci5tYWtlTGlua0FsaWFzKGR2LCBmKSxcbiAgICAgICAgLy8gdXVpZDogYCYjOTcyOCAke1JlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIGYpfWAsXG4gICAgICAgIHR5cGU6IEhlbHBlci5udW1iZXJUeXBlVG9TdHJpbmcoZm0pLFxuICAgICAgICBzaW5jZTogYCR7c2luY2V9YCxcbiAgICAgICAgc2l6ZTogZi5zaXplLFxuICAgICAgICBwcm9qZWN0OiBmbS5wcm9qZWN0ID09PSB1bmRlZmluZWQgPyBcIlxcXFwtXCIgOiBmbS5wcm9qZWN0LnNsaWNlKDgpLFxuICAgICAgICBkb21haW46IGZtLmRvbWFpbiA9PT0gdW5kZWZpbmVkID8gXCJcXFxcLVwiIDogZm0uZG9tYWluLnNsaWNlKDcpLCAvL1JlbmRlcmVyLmRvbWFpbkJhc2UoZHYsIGZtLmRvbWFpbiksXG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICB9O1xuXG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibG9nXCIpIHtcbiAgICAgICAgY29uc3QgcGFnZXMgPSBkdlxuICAgICAgICAgIC5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfS8ke2ZtLnBhcmVudF9pZH1cImApXG4gICAgICAgICAgLmFycmF5KCk7XG4gICAgICAgIGlmIChwYWdlcy5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Zm0ucGFyZW50X2lkfSAke2ZtLmlkfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IHBhZ2VzWzBdO1xuICAgICAgICBzd2l0Y2ggKHBhcmVudC50eXBlKSB7XG4gICAgICAgICAgY2FzZSBUeXBlcy5UYXNrOlxuICAgICAgICAgICAgcmVjb3JkLnV1aWQgPSBgJiMxMjgyMTEgJHtyZWNvcmQudXVpZH1gO1xuICAgICAgICAgICAgcmVjb3JkLnR5cGUgPSBgPGZvbnQgY29sb3I9OEIwMDAwPnRhc2s8L2ZvbnQ+YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgVHlwZXMuUHJheGlzOlxuICAgICAgICAgICAgcmVjb3JkLnV1aWQgPSBgJiMxMjgxODggJHtyZWNvcmQudXVpZH1gO1xuICAgICAgICAgICAgcmVjb3JkLnR5cGUgPSBgPGZvbnQgY29sb3I9RkY4QzAwPnByYXhpczwvZm9udD5gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBUeXBlcy5NZWRpYTpcbiAgICAgICAgICAgIHJlY29yZC51dWlkID0gYCYjMTI4MTkxICR7cmVjb3JkLnV1aWR9YDtcbiAgICAgICAgICAgIHJlY29yZC50eXBlID0gYDxmb250IGNvbG9yPTAwMDA4Qj5tZWRpYTwvZm9udD5gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBUeXBlcy5Qcm92aXNpb246XG4gICAgICAgICAgICByZWNvcmQudHlwZSA9IGA8Zm9udCBjb2xvcj1EQzE0M0M+cHJvdmlzaW9uPC9mb250PmA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgcmVjb3JkLnV1aWQsXG4gICAgICAgIC8vIHJlY29yZC50eXBlLFxuICAgICAgICAvLyByZWNvcmQuc2luY2UsXG4gICAgICAgIC8vIHJlY29yZC5zaXplLFxuICAgICAgICByZWNvcmQubmFtZSxcbiAgICAgICAgLy8gcmVjb3JkLnByb2plY3QsXG4gICAgICAgIC8vIHJlY29yZC5kb21haW4sXG4gICAgICBdKTtcbiAgICB9XG5cbiAgICBkdi50YWJsZShjb2xzLCBidWZmKTtcbiAgfSxcblxuICByZXNvdXJjZUJhc2UoZHYsIGRhdGEpIHtcbiAgICBjb25zdCBjb2xzID0gW1widXVpZFwiXTtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgZm9yIChjb25zdCBkIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGYgPSBkLmZpbGU7XG4gICAgICBjb25zdCBmbSA9IGQuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIEFzc2VydC5UcnVlKFxuICAgICAgICAhSGVscGVyLm5pbENoZWNrKGZtLnV1aWQpLFxuICAgICAgICBgXCJ1dWlkXCIgaWQgbm90IGRlZmluZWQgZm9yOiAke2YucGF0aH1gLFxuICAgICAgKTtcbiAgICAgIGJ1ZmYucHVzaChbUmVuZGVyZXIubWFrZUxpbmtBbGlhcyhkdiwgZildKTtcbiAgICB9XG5cbiAgICBkdi50YWJsZShjb2xzLCBidWZmKTtcbiAgfSxcblxuICBiYXNpY1JlbGF0aW9uKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgY29scyA9IFtcInV1aWRcIiwgXCJuYW1lXCJdO1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xuICAgICAgY29uc3QgZiA9IGQuZmlsZTtcbiAgICAgIGNvbnN0IGZtID0gZC5maWxlLmZyb250bWF0dGVyO1xuICAgICAgQXNzZXJ0LlRydWUoXG4gICAgICAgICFIZWxwZXIubmlsQ2hlY2soZm0udXVpZCksXG4gICAgICAgIGBcInV1aWRcIiBpZCBub3QgZGVmaW5lZCBmb3I6ICR7Zi5wYXRofWAsXG4gICAgICApO1xuICAgICAgYnVmZi5wdXNoKFtSZW5kZXJlci5tYWtlTGlua0FsaWFzKGR2LCBmKSwgZm0ubmFtZV0pO1xuICAgIH1cblxuICAgIGR2LnRhYmxlKGNvbHMsIGJ1ZmYpO1xuICB9LFxuXG4gIHByYXhpc0Jhc2UoZHYsIGRhdGEpIHtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgY29uc3QgY29scyA9IFtcInRhc2tzXCIsIFwidXVpZFwiLCBcImVzdGltYXRlXCJdO1xuICAgIGZvciAoY29uc3QgZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCBmID0gZC5maWxlO1xuICAgICAgY29uc3QgZm0gPSBmLmZyb250bWF0dGVyO1xuICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgZHYubWFya2Rvd25UYXNrTGlzdChmLnRhc2tzKSxcbiAgICAgICAgZHYuZmlsZUxpbmsoZi5wYXRoLCBmYWxzZSwgZi5uYW1lLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgZm0udGltZV9lc3RpbWF0ZSxcbiAgICAgIF0pO1xuICAgIH1cblxuICAgIGR2LnRhYmxlKGNvbHMsIGJ1ZmYpO1xuICB9LFxuXG4gIHdhaXRpbmdUYXNrKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGNvbnN0IGNvbHMgPSBbXCJ0YXNrc1wiLCBcInV1aWRcIiwgXCJlc3RpbWF0ZVwiLCBcImNhdXNlXCJdO1xuICAgIGZvciAoY29uc3QgZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCBmID0gZC5maWxlO1xuICAgICAgY29uc3QgZm0gPSBmLmZyb250bWF0dGVyO1xuICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgZHYubWFya2Rvd25UYXNrTGlzdChmLnRhc2tzKSxcbiAgICAgICAgZHYuZmlsZUxpbmsoZi5wYXRoLCBmYWxzZSwgZi5uYW1lLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgZm0udGltZV9lc3RpbWF0ZSxcbiAgICAgICAgZm0uY2F1c2UsXG4gICAgICBdKTtcbiAgICB9XG5cbiAgICBkdi50YWJsZShjb2xzLCBidWZmKTtcbiAgfSxcblxuICByZWFkeVRhc2soZHYsIGRhdGEpIHtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgY29uc3QgY29scyA9IFtcInV1aWRcIiwgXCJ0YXNrXCIsIFwiZXN0aW1hdGVcIiwgXCJhcmVhXCJdO1xuICAgIGZvciAoY29uc3QgZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCBmID0gZC5maWxlO1xuICAgICAgY29uc3QgZm0gPSBmLmZyb250bWF0dGVyO1xuXG4gICAgICBidWZmLnB1c2goW1xuICAgICAgICBSZW5kZXJlci5tYWtlTGlua0FsaWFzKGR2LCBmLCBcIlRhc2tcIiksXG4gICAgICAgIGR2Lm1hcmtkb3duVGFza0xpc3QoZi50YXNrcyksXG4gICAgICAgIGZtLnRpbWVfZXN0aW1hdGUsXG4gICAgICAgIEhlbHBlci5nZXRGaWVsZChIZWxwZXIuZ2V0QXJlYShmbSwgdHJ1ZSksIFwiXFxcXC1cIiksXG4gICAgICBdKTtcbiAgICB9XG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgcHJvdmlzaW9uQmFzZShkdiwgZGF0YSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBjb25zdCBjb2xzID0gW1widXVpZFwiLCBcInN1cHBsaWVyXCIsIFwiY29udGVudFwiLCBcImVzdGltYXRlXCJdO1xuICAgIGZvciAoY29uc3QgZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCBmID0gZC5maWxlO1xuICAgICAgY29uc3QgZm0gPSBmLmZyb250bWF0dGVyO1xuICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgZHYuZmlsZUxpbmsoZi5wYXRoLCBmYWxzZSwgZm0udXVpZC5zbGljZSgwLCA4KSksXG4gICAgICAgIGZtLnN1cHBsaWVyLFxuICAgICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgICBmbS50aW1lX2VzdGltYXRlLFxuICAgICAgXSk7XG4gICAgfVxuICAgIGR2LnRhYmxlKGNvbHMsIGJ1ZmYpO1xuICB9LFxuXG4gIGJhc2ljVGFza0pvdXJuYWxOZXh0QWN0aW9uKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIC8vIGNvbnN0IGNvbHMgPSBbXCJqb3VybmFsXCIsIFwidXVpZFwiLCBcInRhc2tzXCIsIFwiZXN0aW1hdGVcIl07XG4gICAgY29uc3QgY29scyA9IFtcInV1aWRcIiwgXCJwcmlvcml0eVwiLCBcImVzdGltYXRlXCIsIFwidGFza3NcIl07XG4gICAgLy8gY29uc3Qgam91cm5hbCA9IGR2LnBhZ2VzKGBcIiR7UGF0aHMuSm91cm5hbH1cImApLmFycmF5KClbMF0uZmlsZVxuICAgIC8vIFx0LmZyb250bWF0dGVyLnRhc2tzO1xuXG4gICAgZm9yIChjb25zdCBkIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGYgPSBkLmZpbGU7XG4gICAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgICBjb25zdCBkb21haW4gPVxuICAgICAgICBIZWxwZXIuZ2V0RG9tYWluKGZtLCB0cnVlKSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyBcIlxcXFwtXCJcbiAgICAgICAgICA6IEhlbHBlci5nZXREb21haW4oZm0pO1xuXG4gICAgICBpZiAoZm0ucmVmX2lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coYG5hbWU6ICR7ZC5maWxlLnBhdGh9YClcbiAgICAgICAgLy8gY29uc29sZS5sb2coYHRhc2tzOiAke2QuZmlsZS50YXNrcy5sZW5ndGh9YClcbiAgICAgICAgLy8gY29uc29sZS5sb2coYHRhc2tzQjogJHtmLnRhc2tzLmxlbmd0aH1gKVxuICAgICAgICBidWZmLnB1c2goW1xuICAgICAgICAgIC8vIGpvdXJuYWwuY29udGFpbnMoZm0udXVpZCkgPyBcIi0+XCIgOiBcIlxcXFwtXCIsXG4gICAgICAgICAgZHYuZmlsZUxpbmsoZi5wYXRoLCBmYWxzZSwgZm0udXVpZC5zbGljZSgwLCA4KSksXG4gICAgICAgICAgZm0ucHJpb3JpdHksXG4gICAgICAgICAgZm0udGltZV9lc3RpbWF0ZSxcbiAgICAgICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgICBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHJlZiA9IGR2LnBhZ2VzKGBcIiR7UGF0aHMuUmVmc30vJHtmbS5yZWZfaWR9XCJgKS5hcnJheSgpO1xuICAgICAgICBpZiAocmVmLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGB0YXNrOiAnJHtmbS51dWlkfScgaGFzIGFuIHVuZGVmaW5lZCByZWZfaWQ6ICcke2ZtLnJlZl9pZH0nYCxcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIHJlZlswXS5maWxlKSxcbiAgICAgICAgICAgIGZtLnRpbWVfZXN0aW1hdGUsXG4gICAgICAgICAgICBkb21haW4sXG4gICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgYmFzaWNUYXNrSm91cm5hbFdhaXRpbmcoZHYsIGRhdGEpIHtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgY29uc3QgY29scyA9IFtcInV1aWRcIiwgXCJjYXVzZVwiLCBcInRhc2tzXCJdO1xuXG4gICAgZm9yIChjb25zdCBkIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGYgPSBkLmZpbGU7XG4gICAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgICBjb25zdCBkb21haW4gPVxuICAgICAgICBIZWxwZXIuZ2V0RG9tYWluKGZtLCB0cnVlKSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyBcIlxcXFwtXCJcbiAgICAgICAgICA6IEhlbHBlci5nZXREb21haW4oZm0pO1xuXG4gICAgICBpZiAoZm0ucmVmX2lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coYG5hbWU6ICR7ZC5maWxlLnBhdGh9YClcbiAgICAgICAgLy8gY29uc29sZS5sb2coYHRhc2tzOiAke2QuZmlsZS50YXNrcy5sZW5ndGh9YClcbiAgICAgICAgLy8gY29uc29sZS5sb2coYHRhc2tzQjogJHtmLnRhc2tzLmxlbmd0aH1gKVxuICAgICAgICBidWZmLnB1c2goW1xuICAgICAgICAgIC8vIGpvdXJuYWwuY29udGFpbnMoZm0udXVpZCkgPyBcIi0+XCIgOiBcIlxcXFwtXCIsXG4gICAgICAgICAgZHYuZmlsZUxpbmsoZi5wYXRoLCBmYWxzZSwgZm0udXVpZC5zbGljZSgwLCA4KSksXG4gICAgICAgICAgZC5jYXVzZSxcbiAgICAgICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgICBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHJlZiA9IGR2LnBhZ2VzKGBcIiR7UGF0aHMuUmVmc30vJHtmbS5yZWZfaWR9XCJgKS5hcnJheSgpO1xuICAgICAgICBpZiAocmVmLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGB0YXNrOiAnJHtmbS51dWlkfScgaGFzIGFuIHVuZGVmaW5lZCByZWZfaWQ6ICcke2ZtLnJlZl9pZH0nYCxcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIHJlZlswXS5maWxlKSxcbiAgICAgICAgICAgIGZtLnRpbWVfZXN0aW1hdGUsXG4gICAgICAgICAgICBkb21haW4sXG4gICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG4gIGJhc2ljVGFza0pvdXJuYWwoZHYsIGRhdGEpIHtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgLy8gY29uc3QgY29scyA9IFtcImpvdXJuYWxcIiwgXCJ1dWlkXCIsIFwidGFza3NcIiwgXCJlc3RpbWF0ZVwiXTtcbiAgICBjb25zdCBjb2xzID0gW1widXVpZFwiLCBcInRhc2tzXCIsIFwiZXN0aW1hdGVcIl07XG4gICAgLy8gY29uc3Qgam91cm5hbCA9IGR2LnBhZ2VzKGBcIiR7UGF0aHMuSm91cm5hbH1cImApLmFycmF5KClbMF0uZmlsZVxuICAgIC8vIFx0LmZyb250bWF0dGVyLnRhc2tzO1xuXG4gICAgZm9yIChjb25zdCBkIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGYgPSBkLmZpbGU7XG4gICAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgICBjb25zdCBkb21haW4gPVxuICAgICAgICBIZWxwZXIuZ2V0RG9tYWluKGZtLCB0cnVlKSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyBcIlxcXFwtXCJcbiAgICAgICAgICA6IEhlbHBlci5nZXREb21haW4oZm0pO1xuXG4gICAgICBpZiAoZm0ucmVmX2lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coYG5hbWU6ICR7ZC5maWxlLnBhdGh9YClcbiAgICAgICAgLy8gY29uc29sZS5sb2coYHRhc2tzOiAke2QuZmlsZS50YXNrcy5sZW5ndGh9YClcbiAgICAgICAgLy8gY29uc29sZS5sb2coYHRhc2tzQjogJHtmLnRhc2tzLmxlbmd0aH1gKVxuICAgICAgICBidWZmLnB1c2goW1xuICAgICAgICAgIC8vIGpvdXJuYWwuY29udGFpbnMoZm0udXVpZCkgPyBcIi0+XCIgOiBcIlxcXFwtXCIsXG4gICAgICAgICAgZHYuZmlsZUxpbmsoZi5wYXRoLCBmYWxzZSwgZm0udXVpZC5zbGljZSgwLCA4KSksXG4gICAgICAgICAgZHYubWFya2Rvd25UYXNrTGlzdChmLnRhc2tzKSxcbiAgICAgICAgICBmbS50aW1lX2VzdGltYXRlLFxuICAgICAgICBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHJlZiA9IGR2LnBhZ2VzKGBcIiR7UGF0aHMuUmVmc30vJHtmbS5yZWZfaWR9XCJgKS5hcnJheSgpO1xuICAgICAgICBpZiAocmVmLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGB0YXNrOiAnJHtmbS51dWlkfScgaGFzIGFuIHVuZGVmaW5lZCByZWZfaWQ6ICcke2ZtLnJlZl9pZH0nYCxcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIHJlZlswXS5maWxlKSxcbiAgICAgICAgICAgIGZtLnRpbWVfZXN0aW1hdGUsXG4gICAgICAgICAgICBkb21haW4sXG4gICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG4gIGFjdGl2ZVRhc2soZHYsIGRhdGEpIHtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgY29uc3QgY29scyA9IFtcInV1aWRcIiwgXCJ0YXNrc1wiLCBcInNlc3Npb25cIl07XG4gICAgZm9yIChjb25zdCBkIG9mIGRhdGEpIHtcbiAgICAgIGNvbnN0IGYgPSBkLmZpbGU7XG4gICAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgICBjb25zdCBsb2dzID0gZHZcbiAgICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuTG9nc30vJHtmbS51dWlkfVwiYClcbiAgICAgICAgLndoZXJlKChwKSA9PiBwLnR5cGUgPT09IDYpXG4gICAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiZGVzY1wiKTtcbiAgICAgIGNvbnN0IGxhc3QgPSBsb2dzWzBdO1xuICAgICAgY29uc3QgY3JlYXRlZEF0ID0gbmV3IERhdGUobGFzdC5jcmVhdGVkX2F0KTtcbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICBidWZmLnB1c2goW1xuICAgICAgICBkdi5maWxlTGluayhmLnBhdGgsIGZhbHNlLCBmbS51dWlkLnNsaWNlKDAsIDgpKSxcbiAgICAgICAgZHYubWFya2Rvd25UYXNrTGlzdChmLnRhc2tzKSxcbiAgICAgICAgKCh0KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoKHQgLyAoMzYwMCAqIDEwMDApKSAqIDEwKSAvIDEwO1xuICAgICAgICB9KShub3cuZ2V0VGltZSgpIC0gY3JlYXRlZEF0LmdldFRpbWUoKSksXG4gICAgICBdKTtcbiAgICB9XG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgYmFzaWNUYXNrKGR2LCBkYXRhKSB7XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGNvbnN0IGNvbHMgPSBbXCJ1dWlkXCIsIFwidGFza3NcIiwgXCJlc3RpbWF0ZVwiLCBcImRvbWFpblwiXTtcbiAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xuICAgICAgY29uc3QgZiA9IGQuZmlsZTtcbiAgICAgIGNvbnN0IGZtID0gZi5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IGRvbWFpbiA9XG4gICAgICAgIEhlbHBlci5nZXREb21haW4oZm0sIHRydWUpID09PSB1bmRlZmluZWRcbiAgICAgICAgICA/IFwiXFxcXC1cIlxuICAgICAgICAgIDogSGVscGVyLmdldERvbWFpbihmbSk7XG5cbiAgICAgIGlmIChmbS5yZWZfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhgbmFtZTogJHtkLmZpbGUucGF0aH1gKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgdGFza3M6ICR7ZC5maWxlLnRhc2tzLmxlbmd0aH1gKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgdGFza3NCOiAke2YudGFza3MubGVuZ3RofWApXG4gICAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgICAgZHYuZmlsZUxpbmsoZi5wYXRoLCBmYWxzZSwgZm0udXVpZC5zbGljZSgwLCA4KSksXG4gICAgICAgICAgZHYubWFya2Rvd25UYXNrTGlzdChmLnRhc2tzKSxcbiAgICAgICAgICBmbS50aW1lX2VzdGltYXRlLFxuICAgICAgICAgIGRvbWFpbixcbiAgICAgICAgXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCByZWYgPSBkdi5wYWdlcyhgXCIke1BhdGhzLlJlZnN9LyR7Zm0ucmVmX2lkfVwiYCkuYXJyYXkoKTtcbiAgICAgICAgaWYgKHJlZi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgdGFzazogJyR7Zm0udXVpZH0nIGhhcyBhbiB1bmRlZmluZWQgcmVmX2lkOiAnJHtmbS5yZWZfaWR9J2AsXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBidWZmLnB1c2goW1xuICAgICAgICAgICAgZHYuZmlsZUxpbmsoZi5wYXRoLCBmYWxzZSwgZm0udXVpZC5zbGljZSgwLCA4KSksXG4gICAgICAgICAgICBSZW5kZXJlci5tYWtlTGlua0FsaWFzKGR2LCByZWZbMF0uZmlsZSksXG4gICAgICAgICAgICBmbS50aW1lX2VzdGltYXRlLFxuICAgICAgICAgICAgZG9tYWluLFxuICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGR2LnRhYmxlKGNvbHMsIGJ1ZmYpO1xuICB9LFxuXG4gIGxvZ3MoZHYsIGVudHJpZXMpIHtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgbGV0IHRvdGFsVGltZSA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgIGNvbnN0IGZtZSA9IGVudHJ5LmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBjb25zdCBlID0gW107XG4gICAgICBsZXQgc3RhcnQ6IGFueSA9IDA7XG4gICAgICBsZXQgc3RvcDogYW55ID0gMDtcbiAgICAgIGlmIChmbWUgPT09IHVuZGVmaW5lZCB8fCBmbWUuY3JlYXRlZF9hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBmcm9udG1hdHRlcjogJHtmbWUudXVpZH1gKTtcbiAgICAgIH1cblxuICAgICAgc3RhcnQgPSBuZXcgRGF0ZShmbWUuY3JlYXRlZF9hdCk7XG4gICAgICBlLnB1c2goc3RhcnQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkpO1xuICAgICAgaWYgKGZtZS5kb25lX2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3RvcCA9IERhdGUubm93KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdG9wID0gbmV3IERhdGUoZm1lLmRvbmVfYXQpO1xuICAgICAgfVxuICAgICAgdG90YWxUaW1lICs9IHN0b3AgLSBzdGFydDtcbiAgICAgIGUucHVzaChcbiAgICAgICAgZHYuc2VjdGlvbkxpbmsoXG4gICAgICAgICAgZm1lLnV1aWQsXG4gICAgICAgICAgXCIjIyBDb250ZW50XCIsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgZm1lLnV1aWQuc2xpY2UoMCwgOCksXG4gICAgICAgICksXG4gICAgICApO1xuICAgICAgZS5wdXNoKE1hdGgucm91bmQoKChzdG9wIC0gc3RhcnQpIC8gKDEwMDAgKiA2MCAqIDYwKSkgKiAxMCkgLyAxMCk7XG4gICAgICBpZiAoZm1lLnJldmlld2VkID09PSB1bmRlZmluZWQgfHwgZm1lLnJldmlld2VkID09PSAwKSB7XG4gICAgICAgIGUucHVzaCgwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGUucHVzaChmbWUucmV2aWV3ZWQpO1xuICAgICAgfVxuICAgICAgYnVmZi5wdXNoKGUpO1xuICAgIH1cblxuICAgIGlmIChidWZmLmxlbmd0aCA+IDApIHtcbiAgICAgIGR2LmhlYWRlcigyLCBcIkxvZ3NcIik7XG4gICAgICBkdi50YWJsZShbXCJjcmVhdGVkX2F0XCIsIFwidXVpZFwiLCBcInNlc3Npb25cIiwgXCJyZXZpZXdlZFwiXSwgYnVmZik7XG4gICAgICBpZiAodG90YWxUaW1lID4gMCkge1xuICAgICAgICBkdi5wYXJhZ3JhcGgoXG4gICAgICAgICAgYF90b3RhbFRpbWUgKGgpOl8gJHtNYXRoLnJvdW5kKCh0b3RhbFRpbWUgLyAoMTAwMCAqIDYwICogNjApKSAqIDEwKSAvIDEwXG4gICAgICAgICAgfWAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIG1lZGlhV2l0aExvZ3MoZHYsIGRhdGEpIHtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgY29uc3QgY29scyA9IFtcInV1aWRcIiwgXCJ0YXNrc1wiLCBcImVzdGltYXRlXCIsIFwiY3VycmVudFwiLCBcImRvbWFpblwiXTtcblxuICAgIGZvciAoY29uc3QgZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCBmID0gZC5maWxlO1xuICAgICAgY29uc3QgZm0gPSBmLmZyb250bWF0dGVyO1xuICAgICAgY29uc3QgcmVmID0gZHYucGFnZXMoYFwiJHtQYXRocy5SZWZzfS8ke2ZtLnJlZl9pZH1cImApLmFycmF5KCk7XG4gICAgICBpZiAocmVmLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYHRhc2s6ICcke2ZtLnV1aWR9JyBoYXMgYW4gdW5kZWZpbmVkIHJlZl9pZDogJyR7Zm0ucmVmX2lkfSdgLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgZG9tYWluID1cbiAgICAgICAgSGVscGVyLmdldERvbWFpbihmbSwgdHJ1ZSkgPT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gXCJcXFxcLVwiXG4gICAgICAgICAgOiBIZWxwZXIuZ2V0RG9tYWluKGZtKTtcbiAgICAgIGNvbnN0IGxvZ0VudHJpZXMgPSBkdlxuICAgICAgICAucGFnZXMoYFwiJHtQYXRocy5Mb2dzfS8ke2ZtLnV1aWR9XCJgKVxuICAgICAgICAud2hlcmUoKHApID0+IHAudHlwZSA9PT0gVHlwZXMuTG9nKVxuICAgICAgICAuc29ydCgoaykgPT4gay5jcmVhdGVkX2F0LCBcImRlc2NcIik7XG4gICAgICBsZXQgdG90YWxUaW1lID0gMDtcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgbG9nRW50cmllcykge1xuICAgICAgICBjb25zdCBmbWUgPSBlbnRyeS5maWxlLmZyb250bWF0dGVyO1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGxldCBzdGFydDogYW55ID0gMDtcbiAgICAgICAgbGV0IHN0b3A6IGFueSA9IDA7XG4gICAgICAgIGlmIChmbWUgPT09IHVuZGVmaW5lZCB8fCBmbWUuY3JlYXRlZF9hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGZyb250bWF0dGVyOiAke2ZtZS51dWlkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhcnQgPSBuZXcgRGF0ZShmbWUuY3JlYXRlZF9hdCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZS5wdXNoKHN0YXJ0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlbnRyeS51dWlkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZm1lLmRvbmVfYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHN0b3AgPSBEYXRlLm5vdygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0b3AgPSBuZXcgRGF0ZShmbWUuZG9uZV9hdCk7XG4gICAgICAgIH1cbiAgICAgICAgdG90YWxUaW1lICs9IHN0b3AgLSBzdGFydDtcbiAgICAgIH1cblxuICAgICAgYnVmZi5wdXNoKFtcbiAgICAgICAgZHYuZmlsZUxpbmsoZi5wYXRoLCBmYWxzZSwgZm0udXVpZC5zbGljZSgwLCA4KSksXG4gICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIHJlZlswXS5maWxlKSxcbiAgICAgICAgZm0udGltZV9lc3RpbWF0ZSxcbiAgICAgICAgYCR7TWF0aC5yb3VuZCgodG90YWxUaW1lIC8gKDEwMDAgKiA2MCAqIDYwKSkgKiAxMCkgLyAxMH1oYCxcbiAgICAgICAgZG9tYWluLFxuICAgICAgXSk7XG4gICAgfVxuXG4gICAgZHYudGFibGUoY29scywgYnVmZik7XG4gIH0sXG5cbiAgdGFza0RvbmVXaXRoTG9ncyhkdiwgZGF0YSkge1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBjb25zdCBjb2xzID0gW1xuICAgICAgXCJ0YXNrSWRcIixcbiAgICAgIFwibG9nSWRcIixcbiAgICAgIFwiY3JlYXRlZEF0XCIsXG4gICAgICBcImRvbmVBdFwiLFxuICAgICAgXCJ0aW1lRXN0aW1hdGVcIixcbiAgICAgIFwidG9va1wiLFxuICAgICAgXCJwcm9qZWN0XCIsXG4gICAgXTtcbiAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xuICAgICAgY29uc3QgZiA9IGQuZmlsZTtcbiAgICAgIGNvbnN0IGZtID0gZC5maWxlLmZyb250bWF0dGVyO1xuICAgICAgY29uc3QgY3JlYXRlZEF0OiBhbnkgPSBuZXcgRGF0ZShmbS5jcmVhdGVkX2F0KTtcbiAgICAgIGNvbnN0IGRvbmVBdDogYW55ID0gbmV3IERhdGUoZm0uZG9uZV9hdCk7XG4gICAgICBjb25zdCB0aW1lRXN0aW1hdGUgPSBcIlwiO1xuICAgICAgY29uc3QgdG9vayA9IChkb25lQXQgLSBjcmVhdGVkQXQpIC8gKDEwMDAgKiAzNjAwKTtcbiAgICAgIGNvbnN0IHBhZ2VzID0gZHZcbiAgICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKVxuICAgICAgICAud2hlcmUoKHBhZ2UpID0+IHBhZ2UuZmlsZS5mcm9udG1hdHRlci51dWlkID09PSBmbS5wYXJlbnRfaWQpO1xuICAgICAgaWYgKHBhZ2VzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcmVudCA9IHBhZ2VzWzBdO1xuICAgICAgY29uc3QgcGFyZW50Rm0gPSBwYXJlbnQuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IHBhcmVudEYgPSBwYXJlbnQuZmlsZTtcbiAgICAgIGJ1ZmYucHVzaChbXG4gICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKGR2LCBwYXJlbnQuZmlsZSwgXCJUYXNrXCIpLFxuICAgICAgICBSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRChkdiwgZiksXG4gICAgICAgIGNyZWF0ZWRBdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKSxcbiAgICAgICAgZG9uZUF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApLFxuICAgICAgICB0aW1lRXN0aW1hdGUsXG4gICAgICAgICgodCkgPT4ge1xuICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHQgKiAxMCkgLyAxMDtcbiAgICAgICAgfSkodG9vayksXG4gICAgICAgIEhlbHBlci5nZXRQcm9qZWN0KHBhcmVudEZtKSxcbiAgICAgIF0pO1xuICAgIH1cblxuICAgIGR2LnRhYmxlKGNvbHMsIGJ1ZmYpO1xuICB9LFxuXG4gIHByb2plY3RzKGR2LCBwYWdlcykge1xuICAgIGNvbnN0IGNvbHMgPSBbXCJuYW1lXCJdO1xuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcblxuICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGJ1ZmYucHVzaChbUmVuZGVyZXIubWFrZUxpbmsoZHYsIHBhZ2UuZmlsZSwgZm0uZ2V0TmFtZSgpKV0pO1xuICAgIH1cblxuICAgIGR2LnRhYmxlKGNvbHMsIGJ1ZmYpO1xuICB9LFxuXG4gIGJhc2ljRG9uZVRhc2tXaXRoTG9ncyhkdiwgZGF0YSkge1xuICAgIGNvbnN0IGNvbHMgPSBbXG4gICAgICBcInV1aWRcIixcbiAgICAgIFwiY3JlYXRlZEF0XCIsXG4gICAgICBcImRvbmVBdFwiLFxuICAgICAgXCJ0aW1lRXN0aW1hdGVcIixcbiAgICAgIFwidG9va1wiLFxuICAgICAgXCJkZWx0YVwiLFxuICAgICAgXCJwcm9qZWN0XCIsXG4gICAgICBcImFyZWFcIixcbiAgICBdO1xuICAgIGR2LnRhYmxlKGNvbHMsIGRhdGEpO1xuICB9LFxuXG4gIGJhc2ljRG9uZVRhc2tXaXRob3V0TG9ncyhkdiwgZGF0YSkge1xuICAgIGNvbnN0IGNvbHMgPSBbXCJ0YXNrSWRcIiwgXCJjcmVhdGVkQXRcIiwgXCJwcm9qZWN0XCIsIFwiYXJlYVwiXTtcbiAgICBkdi50YWJsZShjb2xzLCBkYXRhKTtcbiAgfSxcblxuICBiYXNpY1Byb2dyZXNzZWRUYXNrV2l0aExvZyhkdiwgZGF0YSkge1xuICAgIGNvbnN0IGNvbHMgPSBbXG4gICAgICBcInRhc2tJZFwiLFxuICAgICAgXCJsb2dJZFwiLFxuICAgICAgLy8gXCJjcmVhdGVkQXRcIixcbiAgICAgIC8vIFwiZG9uZUF0XCIsXG4gICAgICBcInRvb2tcIixcbiAgICAgIC8vIFwidG9va0FjY1wiLFxuICAgICAgXCJwcm9qZWN0XCIsXG4gICAgICAvLyBcImRvbWFpblwiLFxuICAgIF07XG4gICAgZHYudGFibGUoY29scywgZGF0YSk7XG4gIH0sXG5cbiAgLy8gZGFpbHlUYXNrKGR2LCBkYXRhKSB7XG4gIC8vIFx0UmVuZGVyZXIubWFrZUxpbmtTaG9ydFVVSUQodGhpcy5kdiwgcGFnZS5maWxlKSxcbiAgLy8gXHRkdi5cbiAgLy8gXHRcdFx0XHRycy5wdXNoKFtcbiAgLy8gXHRcdFx0XHRcdFwicGFyYWdyYXBoXCIsXG4gIC8vIFx0XHRcdFx0XHRSZW5kZXJlci5tYWtlTGlua1Nob3J0VVVJRCh0aGlzLmR2LCBwYWdlLmZpbGUpLFxuICAvLyBcdFx0XHRcdF0pO1xuICAvLyB9XG5cbiAgZG8oZHYsIHJzKSB7XG4gICAgZm9yIChjb25zdCByb3cgb2YgcnMpIHtcbiAgICAgIHN3aXRjaCAocm93WzBdKSB7XG4gICAgICAgIGNhc2UgXCJoZWFkZXJcIjpcbiAgICAgICAgICBjb25zdCBbLCBsZXZlbCwgaGVhZGluZ10gPSByb3c7XG4gICAgICAgICAgZHYuaGVhZGVyKGxldmVsLCBoZWFkaW5nKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInBhcmFncmFwaFwiOlxuICAgICAgICAgIGNvbnN0IFssIHRleHRdID0gcm93O1xuICAgICAgICAgIGR2LnBhcmFncmFwaCh0ZXh0KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImFycmF5XCI6XG4gICAgICAgICAgY29uc3QgWywgcmVuZGVyZXIsIGRhdGFdID0gcm93O1xuICAgICAgICAgIHJlbmRlcmVyKGR2LCBkYXRhKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInN0YXRzXCI6XG4gICAgICAgICAgY29uc3QgWywgbmFtZSwgdW5pdCwgdmFsdWVdID0gcm93O1xuICAgICAgICAgIGR2LnBhcmFncmFwaChgJHtuYW1lfSAoJHt1bml0fSk6ICR7dmFsdWV9YCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cG9ydGVkIG9wY29kZTogXCJmdWNrb2ZmXCJgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG59O1xuXG5leHBvcnQgY2xhc3MgRnJvbnRtYXR0ZXIge1xuICBnb25leHQ6IGFueTtcblxuICBjb25zdHJ1Y3Rvcihnb25leHQpIHtcbiAgICB0aGlzLmdvbmV4dCA9IGdvbmV4dDtcbiAgfVxuXG4gIHByb2plY3RQYXJzZU1ldGEoZHYpIHtcbiAgICAvLyBmYXV0ZSBkZSBtaWV1eCBwb3VyIGxlIG1vbWVudFxuICAgIGNvbnN0IGN1cnJlbnQgPSBkdi5jdXJyZW50KCk7XG4gICAgY29uc3QgcHJvamVjdE5hbWUgPSBjdXJyZW50LmZpbGUuZm9sZGVyLnNsaWNlKFxuICAgICAgUGF0aHMuUHJvamVjdHMubGVuZ3RoICsgMSxcbiAgICApO1xuICAgIGNvbnN0IHByb2plY3REaXIgPSBjdXJyZW50LmZpbGUuZm9sZGVyO1xuICAgIGlmIChwcm9qZWN0TmFtZS5jb250YWlucyhcIi9cIikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYHByb2plY3REaXI6ICR7cHJvamVjdERpcn0gZm9sZGVyOiAke2N1cnJlbnQuZmlsZS5mb2xkZXJ9YCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgcGFnZXMgPSBkdi5wYWdlcyhgXCIke3Byb2plY3REaXJ9L21ldGFcImApLmFycmF5KCk7XG4gICAgaWYgKHBhZ2VzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgLy8gY29uc29sZS5sb2cocGFnZXMpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBsZW46ICR7cGFnZXMubGVuZ3RofWApO1xuICAgIH1cblxuICAgIGNvbnN0IGZtID0gcGFnZXNbMF0uZmlsZS5mcm9udG1hdHRlcjtcbiAgICBjb25zdCB1dWlkID0gZm0udXVpZDtcbiAgICBpZiAoSGVscGVyLm5pbENoZWNrKHV1aWQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHByb2plY3QgJ3V1aWQnIGlzIG5vdCBkZWZpbmVkYCk7XG4gICAgfVxuXG4gICAgY29uc3QgbmFtZSA9IGZtLm5hbWU7XG4gICAgaWYgKEhlbHBlci5uaWxDaGVjayhuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGAnbmFtZScgaXMgbm90IGRlZmluZWRgKTtcbiAgICB9XG5cbiAgICBjb25zdCBkb21haW5zID0gZm0uZG9tYWlucztcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZG9tYWlucykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgJ2RvbWFpbnMnIG11c3QgYmUgb2YgYXJyYXkgdHlwZWApO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB1dWlkOiB1dWlkLFxuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIGRvbWFpbnM6IGRvbWFpbnMsXG4gICAgfTtcbiAgfVxuXG4gIGdldENyZWF0ZWRBdChmKTogRGF0ZSB7XG4gICAgcmV0dXJuIEhlbHBlci5uaWxDaGVjayhmLmZyb250bWF0dGVyLmNyZWF0ZWRfYXQpXG4gICAgICA/IG5ldyBEYXRlKGYuY3RpbWUudHMpXG4gICAgICA6IG5ldyBEYXRlKGYuZnJvbnRtYXR0ZXIuY3JlYXRlZF9hdCk7XG4gIH1cblxuICBnZXRDdXJyZW50RnJvbnRtYXR0ZXIoKSB7XG4gICAgY29uc3QgZmlsZSA9IHRoaXMuZ29uZXh0LndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgY29uc3QgZmlsZUNvbnRlbnQgPSB0aGlzLmdvbmV4dC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICBpZiAoZmlsZUNvbnRlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gY29uc29sZS53YXJuKFwiJ2ZpbGVDb250ZW50JyBpcyB1bmRlZmluZWRcIik7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IGZtID0gZmlsZUNvbnRlbnQuZnJvbnRtYXR0ZXI7XG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGNvbnNvbGUud2FybihcIidmbScgaXMgdW5kZWZpbmVkXCIpO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gZm07XG4gIH1cblxuICBwYXJzZUxpc3RCeU5hbWVzcGFjZShmbSkge1xuICAgIGNvbnN0IGJ5QXJlYXMgPSBmbS5ieV9hcmVhcyA9PT0gdW5kZWZpbmVkID8gW10gOiBmbS5ieV9hcmVhcztcbiAgICBjb25zdCBieUNvbnRleHRzID0gZm0uYnlfY29udGV4dHMgPT09IHVuZGVmaW5lZCA/IFtdIDogZm0uYnlfY29udGV4dHM7XG4gICAgY29uc3QgYnlMYXllcnMgPSBmbS5ieV9sYXllcnMgPT09IHVuZGVmaW5lZCA/IFtdIDogZm0uYnlfbGF5ZXJzO1xuICAgIGNvbnN0IGJ5T3JncyA9IGZtLmJ5X29yZ3MgPT09IHVuZGVmaW5lZCA/IFtdIDogZm0uYnlfb3JncztcbiAgICBjb25zdCBieVByb2plY3RzID0gZm0uYnlfcHJvamVjdHMgPT09IHVuZGVmaW5lZCA/IFtdIDogZm0uYnlfcHJvamVjdHM7XG5cbiAgICByZXR1cm4gW2J5QXJlYXMsIGJ5Q29udGV4dHMsIGJ5TGF5ZXJzLCBieU9yZ3MsIGJ5UHJvamVjdHNdO1xuICB9XG5cbiAgcGFyc2VMaXN0QmVmb3JlQWZ0ZXIoZm0pIHtcbiAgICBjb25zdCBiZWZvcmUgPSBIZWxwZXIuZ2V0RGF0ZShmbS5iZWZvcmUpO1xuICAgIGNvbnN0IGFmdGVyID0gSGVscGVyLmdldERhdGUoZm0uYWZ0ZXIpO1xuICAgIHJldHVybiBbYmVmb3JlLCBhZnRlcl07XG4gIH1cblxuICBwYXJzZUxpc3RGaWx0ZXJCeShmbSkge1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgZmlsdGVyQnkgPSBmbS5maWx0ZXJfYnk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGZpbHRlckJ5KSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiBmaWx0ZXJCeTtcbiAgfVxuXG4gIHBhcnNlTGlzdEdyb3VwQnkoZm0pIHtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuXG4gICAgY29uc3QgZ3JvdXBCeSA9IGZtLmdyb3VwX2J5O1xuICAgIGlmIChcbiAgICAgICEodHlwZW9mIGdyb3VwQnkgPT09IFwidW5kZWZpbmVkXCIpICYmXG4gICAgICAhKHR5cGVvZiBncm91cEJ5ID09PSBcInN0cmluZ1wiKVxuICAgICkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdyb3VwQnk7XG4gIH1cblxuICBwYXJzZUFsbFByb2dyZXNzZWRUYXNrcygpIHtcbiAgICBjb25zdCBmbSA9IHRoaXMuZ2V0Q3VycmVudEZyb250bWF0dGVyKCk7XG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBmcm9udG1hdHRlciwgY2Fubm90IHByb2NlZWRgKTtcbiAgICB9XG5cbiAgICBjb25zdCBncm91cEJ5ID0gdGhpcy5wYXJzZUxpc3RHcm91cEJ5KGZtKTtcbiAgICBjb25zdCBmaWx0ZXJCeSA9IHRoaXMucGFyc2VMaXN0RmlsdGVyQnkoZm0pO1xuICAgIGNvbnN0IFtiZWZvcmUsIGFmdGVyXSA9IHRoaXMucGFyc2VMaXN0QmVmb3JlQWZ0ZXIoZm0pO1xuXG4gICAgcmV0dXJuIFtncm91cEJ5LCBmaWx0ZXJCeSwgYmVmb3JlLCBhZnRlcl07XG4gIH1cblxuICBwYXJzZUFsbERvbmVUYXNrcygpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZUFsbFByb2dyZXNzZWRUYXNrcygpO1xuICB9XG5cbiAgcGFyc2VBbGxEb25lVGFza1dpdGhvdXRMb2coKSB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2VBbGxQcm9ncmVzc2VkVGFza3MoKTtcbiAgfVxuXG4gIHBhcnNlQWxsVG9kb0FkSG9jKCkge1xuICAgIGNvbnN0IGZtID0gdGhpcy5nZXRDdXJyZW50RnJvbnRtYXR0ZXIoKTtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGZyb250bWF0dGVyLCBjYW5ub3QgcHJvY2VlZGApO1xuICAgIH1cblxuICAgIGNvbnN0IGdyb3VwQnkgPSB0aGlzLnBhcnNlTGlzdEdyb3VwQnkoZm0pO1xuICAgIGNvbnN0IGZpbHRlckJ5ID0gdGhpcy5wYXJzZUxpc3RGaWx0ZXJCeShmbSk7XG4gICAgY29uc3QgW2JlZm9yZSwgYWZ0ZXJdID0gdGhpcy5wYXJzZUxpc3RCZWZvcmVBZnRlcihmbSk7XG4gICAgY29uc3QgbWluUHJpb3JpdHkgPSBIZWxwZXIuZ2V0RmllbGQoZm0ubWluX3ByaW9yaXR5LCAwKTtcblxuICAgIHJldHVybiBbZ3JvdXBCeSwgZmlsdGVyQnksIGJlZm9yZSwgYWZ0ZXIsIG1pblByaW9yaXR5XTtcbiAgfVxuXG4gIHBhcnNlSW5ib3goKSB7XG4gICAgY29uc3QgZm0gPSB0aGlzLmdldEN1cnJlbnRGcm9udG1hdHRlcigpO1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gW1tdLCBbXSwgMCwgMHhmZmZmZmZmZl07XG4gICAgfVxuXG4gICAgY29uc3Qgc291cmNlID0gSGVscGVyLm5pbENoZWNrKGZtLnNvdXJjZSlcbiAgICAgID8gW1wibG9nc1wiLCBcImZsZWV0aW5nXCJdXG4gICAgICA6IGZtLnNvdXJjZTtcbiAgICBjb25zdCBncm91cEJ5ID0gSGVscGVyLm5pbENoZWNrKGZtLmdyb3VwX2J5KSA/IFwibm9uZVwiIDogZm0uZ3JvdXBfYnk7XG4gICAgY29uc3QgZmlsdGVyQnkgPSB0aGlzLnBhcnNlTGlzdEZpbHRlckJ5KGZtKTtcbiAgICBjb25zdCBtaW5TaXplID0gSGVscGVyLm5pbENoZWNrKGZtLm1pbl9zaXplKSA/IDAgOiBmbS5taW5fc2l6ZTtcbiAgICBjb25zdCBtYXhTaXplID0gSGVscGVyLm5pbENoZWNrKGZtLm1heF9zaXplKSA/IDB4ZmZmZmZmZmYgOiBmbS5tYXhfc2l6ZTtcblxuICAgIHJldHVybiBbc291cmNlLCBncm91cEJ5LCBmaWx0ZXJCeSwgbWluU2l6ZSwgbWF4U2l6ZV07XG4gIH1cblxuICBwYXJzZVRvZG9MaXN0KCkge1xuICAgIGNvbnN0IGZtID0gdGhpcy5nZXRDdXJyZW50RnJvbnRtYXR0ZXIoKTtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIFtbXSwgW10sIFtdLCBbXSwgW10sIDBdO1xuICAgIH1cblxuICAgIGNvbnN0IFtieUFyZWFzLCBieUNvbnRleHRzLCBieUxheWVycywgYnlPcmdzLCBieVByb2plY3RzXSA9XG4gICAgICB0aGlzLnBhcnNlTGlzdEJ5TmFtZXNwYWNlKGZtKTtcbiAgICBjb25zdCBtaW5Qcmlvcml0eSA9IEhlbHBlci5nZXRGaWVsZChmbS5taW5fcHJpb3JpdHksIDApO1xuXG4gICAgcmV0dXJuIFtieUFyZWFzLCBieUNvbnRleHRzLCBieUxheWVycywgYnlPcmdzLCBieVByb2plY3RzLCBtaW5Qcmlvcml0eV07XG4gIH1cblxuICBwYXJzZURvbmVMaXN0KCkge1xuICAgIGNvbnN0IGZtID0gdGhpcy5nZXRDdXJyZW50RnJvbnRtYXR0ZXIoKTtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIFtbXSwgW10sIFtdLCBbXSwgW10sIFtdLCBbXV07XG4gICAgfVxuXG4gICAgY29uc3QgW2J5QXJlYXMsIGJ5Q29udGV4dHMsIGJ5TGF5ZXJzLCBieU9yZ3MsIGJ5UHJvamVjdHNdID1cbiAgICAgIHRoaXMucGFyc2VMaXN0QnlOYW1lc3BhY2UoZm0pO1xuICAgIGNvbnN0IFtiZWZvcmUsIGFmdGVyXSA9IHRoaXMucGFyc2VMaXN0QmVmb3JlQWZ0ZXIoZm0pO1xuICAgIGNvbnN0IGZpZWxkcyA9IEhlbHBlci5nZXRGaWVsZChmbS5maWVsZHMsIFtdKTtcbiAgICBjb25zdCBzdGF0cyA9IEhlbHBlci5nZXRGaWVsZChmbS5zdGF0cywgW10pO1xuXG4gICAgcmV0dXJuIFtcbiAgICAgIGJ5QXJlYXMsXG4gICAgICBieUNvbnRleHRzLFxuICAgICAgYnlMYXllcnMsXG4gICAgICBieU9yZ3MsXG4gICAgICBieVByb2plY3RzLFxuICAgICAgZmllbGRzLFxuICAgICAgc3RhdHMsXG4gICAgICBiZWZvcmUsXG4gICAgICBhZnRlcixcbiAgICBdO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBOb3RlSGVscGVyIHtcbiAgZHY6IGFueTtcbiAgZ29uZXh0OiBhbnk7XG4gIGZyb250bWF0dGVyOiBGcm9udG1hdHRlcjtcblxuICBjb25zdHJ1Y3Rvcihnb25leHQsIGR2LCBmcm9udG1hdHRlcikge1xuICAgIHRoaXMuZ29uZXh0ID0gZ29uZXh0O1xuICAgIHRoaXMuZHYgPSBkdjtcbiAgICB0aGlzLmZyb250bWF0dGVyID0gZnJvbnRtYXR0ZXI7XG4gIH1cblxuICBpc0RvYWJsZSh0YXNrLCBhdCA9IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IGZtID0gdGFzay5maWxlLmZyb250bWF0dGVyO1xuICAgIGlmIChmbS5zdGF0dXMgIT09IFN0YXR1cy5Ub2RvKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGZtLmFmdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IGFmdGVyID0gbmV3IERhdGUoZm0uYWZ0ZXIpO1xuICAgICAgaWYgKERhdGUubm93KCkgPD0gYWZ0ZXIuZ2V0VGltZSgpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgZm1BdCA9IG5ldyBEYXRlKGZtLmF0KTtcbiAgICAgIGZtQXQuc2V0SG91cnMoMCk7XG4gICAgICBmbUF0LnNldE1pbnV0ZXMoMCk7XG4gICAgICBmbUF0LnNldFNlY29uZHMoMCk7XG5cbiAgICAgIC8vIGlmIChmbS51dWlkID09PSBcIjJhOTdkZTM1LWNhODctNDI2Ny05MTU5LTZjMDk2ZDQxNjNmMVwiKSB7XG4gICAgICAvLyBcdGNvbnNvbGUubG9nKGB1dWlkOiAke2ZtLnV1aWR9YCk7XG4gICAgICAvLyBcdGNvbnNvbGUubG9nKGBhdDogJHthdC5nZXRUaW1lKCl9YCk7XG4gICAgICAvLyBcdGNvbnNvbGUubG9nKGBmbUF0OiAke2ZtQXQuZ2V0VGltZSgpfWApO1xuICAgICAgLy8gXHRjb25zb2xlLmxvZyhgaWY6ICR7YXQuZ2V0VGltZSgpIDwgZm1BdC5nZXRUaW1lKCl9YCk7XG4gICAgICAvLyB9XG5cbiAgICAgIGlmIChhdC5nZXRUaW1lKCkgPCBmbUF0LmdldFRpbWUoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChmbS5hdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGF0ID0gbmV3IERhdGUoZm0uYXQpO1xuICAgICAgICBpZiAoRGF0ZS5ub3coKSA8PSBhdC5nZXRUaW1lKCkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkZXBzID0gZm0ubmVlZHM7XG4gICAgaWYgKGRlcHMgPT09IHVuZGVmaW5lZCB8fCBkZXBzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFzUGVuZGluZ0RlcGVuZGVuY2llcyhkZXBzKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaGFzUGVuZGluZ0RlcGVuZGVuY2llcyhkZXBzKSB7XG4gICAgZm9yIChjb25zdCBkZXAgb2YgZGVwcykge1xuICAgICAgY29uc3QgdGFzayA9IHRoaXMuZHYucGFnZXMoYFwiJHtQYXRocy5UYXNrc30vJHtkZXB9XCJgKS5hcnJheSgpO1xuICAgICAgaWYgKHRhc2subGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBgaGFzUGVuZGluZ0RlcGVuZGVuY2llczogXCIke1BhdGhzLlRhc2tzfS8ke2RlcH1cIiB0YXNrIGRvZXMgbm90IGV4aXN0c2AsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmbSA9IHRhc2tbMF0uZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGlmIChcbiAgICAgICAgZm0udHlwZSAhPT0gVHlwZXMuVGFzayAmJlxuICAgICAgICBmbS50eXBlICE9PSBUeXBlcy5Qcm92aXNpb24gJiZcbiAgICAgICAgZm0udHlwZSAhPT0gVHlwZXMuUHJheGlzXG4gICAgICApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChmbS5zdGF0dXMgPT09IFN0YXR1cy5Ub2RvKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlzQ2hpbGRUYWcocGFyZW50LCBjaGlsZCkge1xuICAgIGlmIChjaGlsZC5sZW5ndGggPD0gcGFyZW50Lmxlbmd0aCArIDEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKGNoaWxkLnNsaWNlKDAsIHBhcmVudC5sZW5ndGggKyAxKSAhPSBgJHtwYXJlbnR9L2ApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBnZXROYW1lc3BhY2VDb250ZW50KG5zOiBzdHJpbmcpIHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IFtdO1xuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5kdi5wYWdlcyhgIyR7bnN9YCk7XG4gICAgZm9yIChjb25zdCBwIG9mIHBhZ2VzKSB7XG4gICAgICBjb25zdCB0YWdzID0gcC5maWxlLmZyb250bWF0dGVyLnRhZ3M7XG5cbiAgICAgIGlmICh0YWdzID09PSB1bmRlZmluZWQgfHwgdGFncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNDaGlsZFRhZyhucywgdGFnKSkge1xuICAgICAgICAgIGNvbnN0IHQgPSB0YWcuc2xpY2UobnMubGVuZ3RoICsgMSk7XG4gICAgICAgICAgaWYgKCFjaGlsZHJlbi5jb250YWlucyh0KSkge1xuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaCh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cblxuICBpc0xhc3RSZXZpc2lvbihwYWdlKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcmV2aXNpb25MaXN0ID0gKGR2LCByb290OiBzdHJpbmcsIGN1cnJlbnQpID0+IHtcbiAgICAgIGxldCBoZWFkID0gY3VycmVudDtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IHBhZ2VzID0gZHZcbiAgICAgICAgICAucGFnZXMoYFwiJHtyb290fVwiYClcbiAgICAgICAgICAud2hlcmUoXG4gICAgICAgICAgICAocGFnZSkgPT5cbiAgICAgICAgICAgICAgcGFnZS5maWxlLmZyb250bWF0dGVyLm5leHQgPT09XG4gICAgICAgICAgICAgIGhlYWQuZmlsZS5mcm9udG1hdHRlci51dWlkLFxuICAgICAgICAgICk7XG4gICAgICAgIGlmIChwYWdlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgIH0gZWxzZSBpZiAocGFnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaGVhZCA9IHBhZ2VzWzBdO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBidWZmID0gW107XG4gICAgICBsZXQgY3VyID0gaGVhZDtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGJ1ZmYucHVzaChjdXIpO1xuICAgICAgICBjb25zdCBmbSA9IGN1ci5maWxlLmZyb250bWF0dGVyO1xuICAgICAgICBpZiAoZm0ubmV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFnZXMgPSBkdi5wYWdlcyhgXCIke3Jvb3R9LyR7Zm0ubmV4dH1cImApO1xuICAgICAgICBpZiAocGFnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY3VyID0gcGFnZXNbMF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBidWZmO1xuICAgIH07XG5cbiAgICBjb25zdCBub3RlID0gcGFnZTtcbiAgICBjb25zdCBmbSA9IG5vdGUuZmlsZS5mcm9udG1hdHRlcjtcbiAgICBsZXQgcmV2aXNpb25zID0gW107XG4gICAgc3dpdGNoIChmbS50eXBlKSB7XG4gICAgICBjYXNlIFR5cGVzLlBlcm1hbmVudDpcbiAgICAgICAgcmV2aXNpb25zID0gcmV2aXNpb25MaXN0KHRoaXMuZHYsIFBhdGhzLlNsaXBib3gsIG5vdGUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVHlwZXMuUmVzb3VyY2U6XG4gICAgICAgIHJldmlzaW9ucyA9IHJldmlzaW9uTGlzdCh0aGlzLmR2LCBQYXRocy5SZXNvdXJjZXMsIG5vdGUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cblxuICAgIGlmIChyZXZpc2lvbnMubGVuZ3RoIDw9IDEpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiByZXZpc2lvbnNbMF0uZmlsZS5mcm9udG1hdHRlci51dWlkID09PSBmbS51dWlkO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHZW5lcmF0b3Ige1xuICBhcHA6IGFueTtcbiAgZHY6IGFueTtcbiAgZ29uZXh0OiBhbnk7XG5cbiAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgdGhpcy5kdiA9IGFwcC5kdjtcbiAgICB0aGlzLmdvbmV4dCA9IGFwcC5nb25leHQ7XG4gIH1cblxuICBmbGVldGluZygpIHtcbiAgICBjb25zdCBkdCA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3Qgbm90ZSA9IHtcbiAgICAgIHV1aWQ6IHV1aWR2NCgpLFxuICAgICAgdHlwZTogMTMsXG4gICAgICB2ZXJzaW9uOiBcIjAuMC40XCIsXG4gICAgICBjcmVhdGVkX2F0OiBkdC50b0lTT1N0cmluZygpLFxuICAgICAgcGF0aDogXCJcIixcbiAgICAgIGRhdGE6IFwiXCIsXG4gICAgfTtcblxuICAgIG5vdGUucGF0aCA9IGA4MDAgSW5ib3gvJHtub3RlLnV1aWR9Lm1kYDtcbiAgICBub3RlLmRhdGEgPSBgLS0tXFxudHlwZTogMTNcXG51dWlkOiBcIiR7bm90ZS51dWlkfVwiXFxuY3JlYXRlZF9hdDogXCIke25vdGUuY3JlYXRlZF9hdH1cIlxcbnZlcnNpb246IFwiMC4wLjRcIlxcbi0tLVxcbiMjIENvbnRlbnRcXG5gO1xuXG4gICAgY29uc3QgZiA9IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShub3RlLnBhdGgsIG5vdGUuZGF0YSkudGhlbigoZikgPT4ge1xuICAgICAgcmV0dXJuIGY7XG4gICAgfSk7XG4gICAgY29uc3QgYWN0aXZlID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IHJvb3QgPSBhY3RpdmUucGFyZW50O1xuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5jcmVhdGVMZWFmSW5QYXJlbnQocm9vdCwgcm9vdC5jaGlsZHJlbi5sZW5ndGggKyAxKTtcbiAgICBjb25zdCBsZWFmID0gcm9vdC5jaGlsZHJlbltyb290LmNoaWxkcmVuLmxlbmd0aCAtIDFdO1xuICAgIGYudGhlbigoZmlsZSkgPT4ge1xuICAgICAgbGVhZi5vcGVuRmlsZShmaWxlLCB7IGFjdGl2ZTogdHJ1ZSB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGpvdXJuYWxFbnRyeSgpIHtcbiAgICBjb25zdCBkdCA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3Qgbm90ZSA9IHtcbiAgICAgIHV1aWQ6IHV1aWR2NCgpLFxuICAgICAgdHlwZTogMjAsXG4gICAgICB2ZXJzaW9uOiBcIjAuMC40XCIsXG4gICAgICBjcmVhdGVkX2F0OiBkdC50b0lTT1N0cmluZygpLFxuICAgICAgcGF0aDogXCJcIixcbiAgICAgIGRhdGE6IFwiXCIsXG4gICAgfTtcblxuICAgIG5vdGUucGF0aCA9IGBKb3VybmFsLyR7bm90ZS51dWlkfS5tZGA7XG4gICAgbm90ZS5kYXRhID0gYC0tLVxcbnR5cGU6IDIwXFxudXVpZDogXCIke25vdGUudXVpZH1cIlxcbmNyZWF0ZWRfYXQ6IFwiJHtub3RlLmNyZWF0ZWRfYXR9XCJcXG52ZXJzaW9uOiBcIjAuMC40XCJcXG50YWdzOlxcbiAgICAtIHByb2plY3QvbWlzc2lvblxcbi0tLVxcbiMjIENvbnRlbnRcXG4jIyMgZW50cnlcXG5gO1xuXG4gICAgcmV0dXJuIHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShub3RlLnBhdGgsIG5vdGUuZGF0YSkudGhlbigoZikgPT4ge1xuICAgICAgcmV0dXJuIGY7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIExpc3RNYWtlciB7XG4gIGR2OiBhbnk7XG4gIGdvbmV4dDogYW55O1xuICBmcm9udG1hdHRlcjogRnJvbnRtYXR0ZXI7XG4gIG5vdGVIZWxwZXI6IE5vdGVIZWxwZXI7XG5cbiAgY29uc3RydWN0b3IoZ29uZXh0LCBkdiwgZnJvbnRtYXR0ZXIpIHtcbiAgICB0aGlzLmdvbmV4dCA9IGdvbmV4dDtcbiAgICB0aGlzLmR2ID0gZHY7XG4gICAgdGhpcy5mcm9udG1hdHRlciA9IGZyb250bWF0dGVyO1xuICAgIHRoaXMubm90ZUhlbHBlciA9IG5ldyBOb3RlSGVscGVyKGdvbmV4dCwgZHYsIGZyb250bWF0dGVyKTtcbiAgfVxuXG4gIG5hbWVJbk5hbWVzcGFjZShmbTogYW55LCBuczogc3RyaW5nW10pIHtcbiAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICBpZiAobnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGEgb2YgbnMpIHtcbiAgICAgIGNvbnN0IHJvb3QgPSBhLnNwbGl0KFwiL1wiKTtcbiAgICAgIEFzc2VydC5UcnVlKHJvb3QubGVuZ3RoID09PSAyLCBgSW52YWxpZCB0YWc6ICcke2F9J2ApO1xuICAgICAgY29uc3QgcGFyZW50ID1cbiAgICAgICAgcm9vdFswXS5zbGljZSgwLCAxKSA9PT0gXCIhXCIgPyByb290WzBdLnNsaWNlKDEpIDogcm9vdFswXTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHBhcmVudClcbiAgICAgIGNvbnN0IG5hbWUgPSBIZWxwZXIuZ2V0VGFnKGZtLCBwYXJlbnQpO1xuXG4gICAgICBpZiAoYS5zbGljZSgwLCAxKSA9PT0gXCIhXCIpIHtcbiAgICAgICAgLy8gbmVnYXRpdmUgbWF0Y2gsIGRpc2NhcmQgZW50cnlcbiAgICAgICAgaWYgKG5hbWUgPT09IGEuc2xpY2UoMSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgLy8gbm8gbWF0Y2gsIHJlaW5pdFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcG9zaXRpdmUgbWF0Y2gsIGtlZXAgZW50cnlcbiAgICAgICAgaWYgKG5hbWUgPT09IGEpIHtcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgLy8gbm8gbWF0Y2gsIHJlaW5pdFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvdW5kID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZm91bmQ7XG4gIH1cblxuICBteU5hbWVJbk5hbWVzcGFjZShuYW1lOiBzdHJpbmcsIG5zOiBzdHJpbmdbXSkge1xuICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgIGlmIChucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgYSBvZiBucykge1xuICAgICAgaWYgKGEuc2xpY2UoMCwgMSkgPT09IFwiIVwiKSB7XG4gICAgICAgIC8vIG5lZ2F0aXZlIG1hdGNoLCBkaXNjYXJkIGVudHJ5XG4gICAgICAgIGlmIChuYW1lID09PSBhLnNsaWNlKDEpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIC8vIG5vIG1hdGNoLCByZWluaXRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHBvc2l0aXZlIG1hdGNoLCBrZWVwIGVudHJ5XG4gICAgICAgIGlmIChuYW1lID09PSBhKSB7XG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgIC8vIG5vIG1hdGNoLCByZWluaXRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3VuZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvdW5kO1xuICB9XG5cbiAgZmlsdGVyQnlOYW1lc3BhY2UoXG4gICAgZm06IGFueSxcbiAgICBieUFyZWFzOiBzdHJpbmdbXSxcbiAgICBieUNvbnRleHRzOiBzdHJpbmdbXSxcbiAgICBieUxheWVyczogc3RyaW5nW10sXG4gICAgYnlPcmdzOiBzdHJpbmdbXSxcbiAgICBieVByb2plY3RzOiBzdHJpbmdbXSxcbiAgKTogYm9vbGVhbiB7XG4gICAgLy8gaWYgKGJ5QXJlYXMubGVuZ3RoID4gMCAmJiAhYnlBcmVhcy5jb250YWlucyhIZWxwZXIuZ2V0QXJlYShmbSkpKSB7XG4gICAgLy8gXHRyZXR1cm4gZmFsc2U7XG4gICAgLy8gfVxuXG4gICAgaWYgKCF0aGlzLm15TmFtZUluTmFtZXNwYWNlKEhlbHBlci5nZXRBcmVhKGZtKSwgYnlBcmVhcykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBjb25zdCBhcmVhID0gSGVscGVyLmdldEFyZWEoZm0pO1xuICAgIC8vIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgIC8vIGZvciAoY29uc3QgYSBvZiBieUFyZWFzKSB7XG4gICAgLy8gXHRpZiAoYS5zbGljZSgwLCAxKSA9PT0gXCIhXCIpIHtcbiAgICAvLyBcdFx0Ly8gbmVnYXRpdmUgbWF0Y2gsIGRpc2NhcmQgZW50cnlcbiAgICAvLyBcdFx0aWYgKGFyZWEgPT09IGEuc2xpY2UoMSkpIHtcbiAgICAvLyBcdFx0XHRyZXR1cm4gZmFsc2U7XG4gICAgLy8gXHRcdFx0Ly8gbm8gbWF0Y2gsIHJlaW5pdFxuICAgIC8vIFx0XHR9IGVsc2Uge1xuICAgIC8vIFx0XHRcdGZvdW5kID0gdHJ1ZTtcbiAgICAvLyBcdFx0fVxuICAgIC8vIFx0fSBlbHNlIHtcbiAgICAvLyBcdFx0Ly8gcG9zaXRpdmUgbWF0Y2gsIGtlZXAgZW50cnlcbiAgICAvLyBcdFx0aWYgKGFyZWEgPT09IGEpIHtcbiAgICAvLyBcdFx0XHRmb3VuZCA9IHRydWU7XG4gICAgLy8gXHRcdFx0Ly8gbm8gbWF0Y2gsIHJlaW5pdFxuICAgIC8vIFx0XHR9IGVsc2Uge1xuICAgIC8vIFx0XHRcdGZvdW5kID0gZmFsc2U7XG4gICAgLy8gXHRcdH1cbiAgICAvLyBcdH1cbiAgICAvLyB9XG4gICAgLy9cbiAgICAvLyBpZiAoIWZvdW5kKSB7XG4gICAgLy8gXHRyZXR1cm4gZmFsc2U7XG4gICAgLy8gfVxuXG4gICAgLy8gaWYgKFxuICAgIC8vIFx0YnlDb250ZXh0cy5sZW5ndGggPiAwICYmXG4gICAgLy8gXHQhYnlDb250ZXh0cy5jb250YWlucyhIZWxwZXIuZ2V0Q29udGV4dChmbSkpXG4gICAgLy8gKSB7XG4gICAgLy8gXHRyZXR1cm4gZmFsc2U7XG4gICAgLy8gfVxuICAgIGlmICghdGhpcy5teU5hbWVJbk5hbWVzcGFjZShIZWxwZXIuZ2V0Q29udGV4dChmbSksIGJ5Q29udGV4dHMpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gaWYgKGJ5TGF5ZXJzLmxlbmd0aCA+IDAgJiYgIWJ5TGF5ZXJzLmNvbnRhaW5zKEhlbHBlci5nZXRMYXllcihmbSkpKSB7XG4gICAgLy8gXHRyZXR1cm4gZmFsc2U7XG4gICAgLy8gfVxuICAgIGlmICghdGhpcy5teU5hbWVJbk5hbWVzcGFjZShIZWxwZXIuZ2V0TGF5ZXIoZm0pLCBieUxheWVycykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBpZiAoYnlPcmdzLmxlbmd0aCA+IDAgJiYgIWJ5T3Jncy5jb250YWlucyhIZWxwZXIuZ2V0T3JnKGZtKSkpIHtcbiAgICAvLyBcdHJldHVybiBmYWxzZTtcbiAgICAvLyB9XG4gICAgaWYgKCF0aGlzLm15TmFtZUluTmFtZXNwYWNlKEhlbHBlci5nZXRPcmcoZm0pLCBieU9yZ3MpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gaWYgKFxuICAgIC8vIFx0YnlQcm9qZWN0cy5sZW5ndGggPiAwICYmXG4gICAgLy8gXHQhYnlQcm9qZWN0cy5jb250YWlucyhIZWxwZXIuZ2V0UHJvamVjdChmbSkpXG4gICAgLy8gKSB7XG4gICAgLy8gXHRyZXR1cm4gZmFsc2U7XG4gICAgLy8gfVxuICAgIGlmICghdGhpcy5teU5hbWVJbk5hbWVzcGFjZShIZWxwZXIuZ2V0UHJvamVjdChmbSksIGJ5UHJvamVjdHMpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBmaWx0ZXJCeURhdGUoZHQ6IERhdGUsIGJlZm9yZTogRGF0ZSwgYWZ0ZXI6IERhdGUpOiBib29sZWFuIHtcbiAgICBpZiAoYmVmb3JlICE9PSB1bmRlZmluZWQgJiYgZHQuZ2V0VGltZSgpID4gYmVmb3JlLmdldFRpbWUoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChhZnRlciAhPT0gdW5kZWZpbmVkICYmIGR0LmdldFRpbWUoKSA8IGFmdGVyLmdldFRpbWUoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZ29hbHMoKSB7XG4gICAgLy8gY29uc3QgZm0gPSB0aGlzLmZyb250bWF0dGVyLmdldEN1cnJlbnRGcm9udG1hdHRlcigpO1xuICAgIGNvbnN0IHJzID0gW107XG4gICAgY29uc3QgYmlucyA9IHt9O1xuICAgIGJpbnNbR29hbFN0YXR1cy5SZWZyYW1lXSA9IFtdO1xuICAgIGJpbnNbR29hbFN0YXR1cy5SZXNlYXJjaF0gPSBbXTtcbiAgICBiaW5zW0dvYWxTdGF0dXMuT3BlcmF0aW9uYWxpemVdID0gW107XG4gICAgYmluc1tHb2FsU3RhdHVzLlBsYW5pZnldID0gW107XG4gICAgYmluc1tHb2FsU3RhdHVzLkRlcGVuZGFudF0gPSBbXTtcbiAgICBiaW5zW0dvYWxTdGF0dXMuQWN0aXZlXSA9IFtdO1xuICAgIGJpbnNbR29hbFN0YXR1cy5TdWNjZXNzXSA9IFtdO1xuICAgIGJpbnNbR29hbFN0YXR1cy5GYWlsZWRdID0gW107XG5cbiAgICBjb25zdCBwYWdlcyA9IHRoaXMuZHYucGFnZXMoYFwiJHtQYXRocy5Hb2Fsc31cImApLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICBjb25zdCBmbXAgPSBwYWdlLmZpbGUuZnJvbnRtYXR0ZXI7XG5cbiAgICAgIGlmIChiaW5zW2ZtcC5zdGF0dXNdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gY29uc29sZS5lcnJvcihgSW52YWxpZCBzdGF0dXMgZm9yIGdvYWw6IFwiJHtmbXAudXVpZH1cImApO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgIGJpbnNbZm1wLnN0YXR1c10ucHVzaChmbSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhiaW5zKTtcbiAgICBrZXlzLnNvcnQoKTtcbiAgICBmb3IgKGNvbnN0IGsgb2Yga2V5cykge1xuICAgICAgY29uc3QgYnVmZiA9IGJpbnNba107XG4gICAgICBidWZmLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgY29uc3QgZHRhID0gbmV3IERhdGUoYS5mbS5iZWZvcmUpO1xuICAgICAgICBjb25zdCBkdGIgPSBuZXcgRGF0ZShiLmZtLmJlZm9yZSk7XG4gICAgICAgIHJldHVybiBkdGEuZ2V0VGltZSgpIC0gZHRiLmdldFRpbWUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGRpc3BsYXlHb2FscyA9IChrLCBycykgPT4ge1xuICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMywga10pO1xuICAgICAgY29uc3QgYnVmZiA9IGJpbnNba107XG4gICAgICBycy5wdXNoKFtcImFycmF5XCIsIFJlbmRlcmVyLmdvYWwsIGJ1ZmZdKTtcbiAgICB9O1xuXG4gICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgXCJvcGVyYXRpb25hbFwiXSk7XG4gICAgZGlzcGxheUdvYWxzKFwiYWN0aXZlXCIsIHJzKTtcbiAgICBkaXNwbGF5R29hbHMoXCJwbGFuaWZ5XCIsIHJzKTtcblxuICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIFwibm9uLW9wZXJhdGlvbmFsXCJdKTtcbiAgICBkaXNwbGF5R29hbHMoXCJyZWZyYW1lXCIsIHJzKTtcbiAgICBkaXNwbGF5R29hbHMoXCJyZXNlYXJjaFwiLCBycyk7XG4gICAgZGlzcGxheUdvYWxzKFwib3BlcmF0aW9uYWxpemVcIiwgcnMpO1xuICAgIC8vIGRpc3BsYXlHb2FscyhcImRlcGVuZGFudFwiLCBycyk7XG5cbiAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCBcImRvbmVcIl0pO1xuICAgIGRpc3BsYXlHb2FscyhcInN1Y2Nlc3NcIiwgcnMpO1xuICAgIGRpc3BsYXlHb2FscyhcImZhaWxlZFwiLCBycyk7XG5cbiAgICByZXR1cm4gcnM7XG4gIH1cblxuICBwcm9qZWN0VGFza3NTaGVldFJlbGF0aW9uRnJvbnRtYXR0ZXIoZHYpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gZHYuY3VycmVudCgpO1xuICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMoY3VycmVudCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogZm0uZ2V0TmFtZSgpLFxuICAgICAgdXVpZDogZm0udXVpZCxcbiAgICAgIGFjdGl2ZTpcbiAgICAgICAgZm0uZm0uYWN0aXZlID09PSB1bmRlZmluZWQgfHwgZm0uZm0uYWN0aXZlID09PSB0cnVlXG4gICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgOiBmYWxzZSxcbiAgICB9O1xuICB9XG5cbiAgcHJvamVjdFRhc2tzU2hlZXRSZWxhdGlvbihkdikge1xuICAgIGNvbnN0IHByb2plY3QgPSB0aGlzLnByb2plY3RUYXNrc1NoZWV0UmVsYXRpb25Gcm9udG1hdHRlcihkdik7XG5cbiAgICBjb25zdCBycyA9IFtdO1xuICAgIGNvbnN0IGJpbnMgPSB7XG4gICAgICBuZXh0QWN0aW9uOiBbXSxcbiAgICAgIHdhaXRpbmdGb3I6IFtdLFxuICAgICAgc29tZWRheU1heWJlOiBbXSxcbiAgICB9O1xuXG4gICAge1xuICAgICAgY29uc3QgcGFnZXMgPSBkdlxuICAgICAgICAucGFnZXMoYFwiSm91cm5hbFwiYClcbiAgICAgICAgLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgICByZXR1cm4gZm0uZ2V0UHJvamVjdCgpID09PSBwcm9qZWN0Lm5hbWU7XG4gICAgICAgIH0pXG4gICAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiZGVzY1wiKTtcblxuICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgYEpvdXJuYWwgKCR7cGFnZXMubGVuZ3RofSlgXSk7XG4gICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuICAgICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgICAgY29uc3QgdGV4dCA9IFJlbmRlcmVyLm1ha2VMaW5rKFxuICAgICAgICAgICAgZHYsXG4gICAgICAgICAgICBmbS5mLFxuICAgICAgICAgICAgYCR7Zm0uY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApfWAsXG4gICAgICAgICAgICBcImVudHJ5XCIsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBycy5wdXNoKFtcInBhcmFncmFwaFwiLCB0ZXh0XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwYWdlcyA9IGR2LnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKS53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGlmIChmbS5mbS5zdGF0dXMgPT09IFwiZG9uZVwiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKFtcImRhaWx5XCIsIFwid2Vla2x5XCIsIFwibW9udGhseVwiXS5jb250YWlucyhwcm9qZWN0Lm5hbWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHByb2plY3QubmFtZSA9PT0gXCJhZGhvY1wiICYmXG4gICAgICAgIGZtLmdldFByb2plY3QoKSA9PT0gdW5kZWZpbmVkXG4gICAgICApIHtcbiAgICAgICAgcGFnZS5maWxlLmZyb250bWF0dGVyLnByb2plY3QgPSBcImFkaG9jXCI7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChwcm9qZWN0Lm5hbWUgPT09IGZtLmdldFByb2plY3QoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcblxuICAgICAgaWYgKHRoaXMubm90ZUhlbHBlci5pc0RvYWJsZShwYWdlKSkge1xuICAgICAgICBpZiAoZm0uZm0ucHJpb3JpdHkgPiAwKSB7XG4gICAgICAgICAgYmlucy5uZXh0QWN0aW9uLnB1c2gocGFnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYmlucy5zb21lZGF5TWF5YmUucHVzaChwYWdlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGZtLmZtLm5lZWRzICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICB0aGlzLm5vdGVIZWxwZXIuaGFzUGVuZGluZ0RlcGVuZGVuY2llcyhmbS5mbS5uZWVkcylcbiAgICAgICAgKSB7XG4gICAgICAgICAgcGFnZS5jYXVzZSA9IFwiZGVwZW5kZW5jaWVzXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZm1BdCA9IGZtLmF0O1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRBdCA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgY29uc3QgZm1BZnRlciA9IGZtLmFmdGVyO1xuXG4gICAgICAgICAgaWYgKGZtLmZtLmF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZtQXQuc2V0SG91cnMoMCk7XG4gICAgICAgICAgICBmbUF0LnNldE1pbnV0ZXMoMCk7XG4gICAgICAgICAgICBmbUF0LnNldFNlY29uZHMoMCk7XG4gICAgICAgICAgICBmbUF0LnNldE1pbGxpc2Vjb25kcygwKTtcbiAgICAgICAgICAgIGN1cnJlbnRBdC5zZXRIb3VycygwKTtcbiAgICAgICAgICAgIGN1cnJlbnRBdC5zZXRNaW51dGVzKDApO1xuICAgICAgICAgICAgY3VycmVudEF0LnNldFNlY29uZHMoMCk7XG4gICAgICAgICAgICBjdXJyZW50QXQuc2V0TWlsbGlzZWNvbmRzKDApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZm0uYWZ0ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm1BZnRlci5zZXRIb3VycygwKTtcbiAgICAgICAgICAgIGZtQWZ0ZXIuc2V0TWludXRlcygwKTtcbiAgICAgICAgICAgIGZtQWZ0ZXIuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgICAgIGZtQWZ0ZXIuc2V0TWlsbGlzZWNvbmRzKDApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnNvbGUubG9nKGBjdXJyZW50OiAke2N1cnJlbnRBdC5nZXRUaW1lKCl9YCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYGF0OiAke2ZtLmF0LmdldFRpbWUoKX1gKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgYWZ0ZXI6ICR7Zm0uYWZ0ZXIuZ2V0VGltZSgpfWApO1xuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgZm0uZm0uYXQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgZm1BdC5nZXRUaW1lKCkgPiBjdXJyZW50QXQuZ2V0VGltZSgpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBwYWdlLmNhdXNlID0gXCJhdFwiO1xuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBmbS5mbS5hZnRlciAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBmbUFmdGVyLmdldFRpbWUoKSA8IGN1cnJlbnRBdC5nZXRUaW1lKClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHBhZ2UuY2F1c2UgPSBcImFmdGVyXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhZ2UuY2F1c2UgPSBcInVua25vd25cIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBiaW5zLndhaXRpbmdGb3IucHVzaChwYWdlKTtcbiAgICAgICAgLy8gYXRcbiAgICAgICAgLy8gYWZ0ZXJcbiAgICAgICAgLy8gbmVlZHNcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYmlucy5uZXh0QWN0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIGBOZXh0IEFjdGlvbnMgKCR7Ymlucy5uZXh0QWN0aW9uLmxlbmd0aH0pYF0pO1xuICAgICAgYmlucy5uZXh0QWN0aW9uLnNvcnQoSGVscGVyLnNvcnRCeVByaW9yaXR5QW5kRHVyYXRpb25BbmRBZ2UpO1xuICAgICAgcnMucHVzaChbXG4gICAgICAgIFwiYXJyYXlcIixcbiAgICAgICAgUmVuZGVyZXIuYmFzaWNUYXNrSm91cm5hbE5leHRBY3Rpb24sXG4gICAgICAgIGJpbnMubmV4dEFjdGlvbixcbiAgICAgIF0pO1xuICAgIH1cblxuICAgIGlmIChiaW5zLndhaXRpbmdGb3IubGVuZ3RoID4gMCkge1xuICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgYFdhaXRpbmcgKCR7Ymlucy53YWl0aW5nRm9yLmxlbmd0aH0pYF0pO1xuICAgICAgYmlucy53YWl0aW5nRm9yLnNvcnQoSGVscGVyLnNvcnRCeVByaW9yaXR5QW5kRHVyYXRpb25BbmRBZ2UpO1xuICAgICAgcnMucHVzaChbXG4gICAgICAgIFwiYXJyYXlcIixcbiAgICAgICAgUmVuZGVyZXIuYmFzaWNUYXNrSm91cm5hbFdhaXRpbmcsXG4gICAgICAgIGJpbnMud2FpdGluZ0ZvcixcbiAgICAgIF0pO1xuICAgIH1cblxuICAgIGlmIChiaW5zLnNvbWVkYXlNYXliZS5sZW5ndGggPiAwKSB7XG4gICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCBgTWF5YmUgKCR7Ymlucy5zb21lZGF5TWF5YmUubGVuZ3RofSlgXSk7XG4gICAgICBiaW5zLnNvbWVkYXlNYXliZS5zb3J0KEhlbHBlci5zb3J0QnlQcmlvcml0eUFuZER1cmF0aW9uQW5kQWdlKTtcbiAgICAgIHJzLnB1c2goW1wiYXJyYXlcIiwgUmVuZGVyZXIuYmFzaWNUYXNrSm91cm5hbCwgYmlucy5zb21lZGF5TWF5YmVdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcnM7XG4gIH1cblxuICBwcm9qZWN0TG9nc1NoZWV0UmVsYXRpb24oZHYpIHtcbiAgICBjb25zdCBwcm9qZWN0ID0gdGhpcy5wcm9qZWN0VGFza3NTaGVldFJlbGF0aW9uRnJvbnRtYXR0ZXIoZHYpO1xuXG4gICAgY29uc3QgZmlsdGVyQnkgPSBbXTtcbiAgICBjb25zdCBycyA9IFtdO1xuXG4gICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMiwgXCJMb2dzXCJdKTtcblxuICAgIGNvbnN0IGxvZ3MgPSB0aGlzLmR2LnBhZ2VzKGBcIiR7UGF0aHMuTG9nc31cImApLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICBpZiAocGFnZS50eXBlICE9PSBUeXBlcy5Mb2cpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHBhZ2UuZmlsZS5mcm9udG1hdHRlci5yZXZpZXdlZCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICBjb25zdCBidWZmID0ge307XG4gICAgZm9yIChjb25zdCBlIG9mIGxvZ3MpIHtcbiAgICAgIGNvbnN0IGZtID0gZS5maWxlLmZyb250bWF0dGVyO1xuICAgICAgaWYgKGZpbHRlckJ5Lmxlbmd0aCA+IDAgJiYgIXRoaXMubmFtZUluTmFtZXNwYWNlKGZtLCBmaWx0ZXJCeSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGZtLmNyZWF0ZWRBdCA9IHRoaXMuZnJvbnRtYXR0ZXIuZ2V0Q3JlYXRlZEF0KGUuZmlsZSk7XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgIUhlbHBlci5uaWxDaGVjayhmbS5wYXJlbnRfaWQpLFxuICAgICAgICBgTWlzc2luZyBmaWVsZCBcInBhcmVudF9pZFwiIGZyb20gbG9nOiBcIiR7Zm0udXVpZH1cImAsXG4gICAgICApO1xuICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5kdlxuICAgICAgICAucGFnZXMoYFwiJHtQYXRocy5UYXNrc30vJHtmbS5wYXJlbnRfaWR9XCJgKVxuICAgICAgICAuYXJyYXkoKTtcbiAgICAgIGlmIChwYXJlbnQubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgQXNzZXJ0LlRydWUoXG4gICAgICAgIHBhcmVudC5sZW5ndGggPT09IDEsXG4gICAgICAgIGBQYXJlbnQ6ICR7Zm0ucGFyZW50X2lkfSBub3QgZm91bmQgZm9yIGxvZzogXCIke2ZtLnV1aWR9XCJgLFxuICAgICAgKTtcbiAgICAgIGZtLnByb2plY3QgPSBIZWxwZXIuZ2V0UHJvamVjdChwYXJlbnRbMF0uZmlsZS5mcm9udG1hdHRlcik7XG4gICAgICBmbS5hcmVhID0gSGVscGVyLmdldEFyZWEocGFyZW50WzBdLmZpbGUuZnJvbnRtYXR0ZXIsIHRydWUpO1xuICAgICAgaWYgKFxuICAgICAgICBmbS5wcm9qZWN0ICE9PVxuICAgICAgICBgcHJvamVjdC8ke3Byb2plY3QubmFtZSA9PT0gXCJhZGhvY1wiID8gXCJub25lXCIgOiBwcm9qZWN0Lm5hbWV9YFxuICAgICAgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoSGVscGVyLm5pbENoZWNrKGZtLmRvbmVfYXQpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF0ZSA9IGZtLmRvbmVfYXQuc2xpY2UoMCwgMTApO1xuXG4gICAgICBpZiAoYnVmZltkYXRlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJ1ZmZbZGF0ZV0gPSBbZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidWZmW2RhdGVdLnB1c2goZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGJ1ZmYpO1xuICAgIGtleXMuc29ydCgpO1xuICAgIGZvciAoY29uc3QgZGF0ZSBvZiBrZXlzKSB7XG4gICAgICBidWZmW2RhdGVdLnNvcnQoXG4gICAgICAgIChhLCBiKSA9PlxuICAgICAgICAgIGIuZmlsZS5mcm9udG1hdHRlci5jcmVhdGVkQXQuZ2V0VGltZSgpIC1cbiAgICAgICAgICBhLmZpbGUuZnJvbnRtYXR0ZXIuY3JlYXRlZEF0LmdldFRpbWUoKSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBkYXRlIG9mIGtleXMucmV2ZXJzZSgpKSB7XG4gICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAzLCBkYXRlXSk7XG4gICAgICBycy5wdXNoKFtcImFycmF5XCIsIFJlbmRlcmVyLnByb2plY3RMb2dzLCBidWZmW2RhdGVdXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgZ2V0UHJvamVjdExvZ3MoZHYsIHByb2plY3QpIHtcbiAgICBjb25zdCBsb2dzID0gdGhpcy5kdi5wYWdlcyhgXCIke1BhdGhzLkxvZ3N9XCJgKS53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgaWYgKHBhZ2UudHlwZSAhPT0gVHlwZXMuTG9nKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGZvciAoY29uc3QgZSBvZiBsb2dzKSB7XG4gICAgICBjb25zdCBmbSA9IGUuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIEFzc2VydC5UcnVlKFxuICAgICAgICAhSGVscGVyLm5pbENoZWNrKGZtLnBhcmVudF9pZCksXG4gICAgICAgIGBNaXNzaW5nIGZpZWxkIFwicGFyZW50X2lkXCIgZnJvbSBsb2c6IFwiJHtmbS51dWlkfVwiYCxcbiAgICAgICk7XG4gICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmR2XG4gICAgICAgIC5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfS8ke2ZtLnBhcmVudF9pZH1cImApXG4gICAgICAgIC5hcnJheSgpO1xuICAgICAgaWYgKHBhcmVudC5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvLyBBc3NlcnQuVHJ1ZShcbiAgICAgIC8vIFx0cGFyZW50Lmxlbmd0aCA9PT0gMSxcbiAgICAgIC8vIFx0YFBhcmVudDogJHtmbS5wYXJlbnRfaWR9IG5vdCBmb3VuZCBmb3IgbG9nOiBcIiR7Zm0udXVpZH1cImAsXG4gICAgICAvLyApO1xuICAgICAgZm0ucHJvamVjdCA9IEhlbHBlci5nZXRQcm9qZWN0KHBhcmVudFswXS5maWxlLmZyb250bWF0dGVyKTtcbiAgICAgIGZtLmFyZWEgPSBIZWxwZXIuZ2V0QXJlYShwYXJlbnRbMF0uZmlsZS5mcm9udG1hdHRlciwgdHJ1ZSk7XG4gICAgICBpZiAoXG4gICAgICAgIGZtLnByb2plY3QgIT09XG4gICAgICAgIGBwcm9qZWN0LyR7cHJvamVjdC5uYW1lID09PSBcImFkaG9jXCIgPyBcIm5vbmVcIiA6IHByb2plY3QubmFtZX1gXG4gICAgICApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChIZWxwZXIubmlsQ2hlY2soZm0uZG9uZV9hdCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBidWZmLnB1c2goZSk7XG4gICAgfVxuICAgIHJldHVybiBidWZmO1xuICB9XG5cbiAgcHJvamVjdExvZ3NTaGVldChkdikge1xuICAgIGNvbnN0IHByb2plY3QgPSB0aGlzLmZyb250bWF0dGVyLnByb2plY3RQYXJzZU1ldGEoZHYpO1xuICAgIGNvbnN0IGZtbCA9IHRoaXMuZnJvbnRtYXR0ZXIuZ2V0Q3VycmVudEZyb250bWF0dGVyKCk7XG4gICAgaWYgKGZtbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZnJvbnRtYXR0ZXIsIGNhbm5vdCBwcm9jZWVkYCk7XG4gICAgfVxuXG4gICAgY29uc3QgYmVmb3JlID0gSGVscGVyLm5pbENoZWNrKGZtbC5iZWZvcmUpXG4gICAgICA/IG5ldyBEYXRlKDApXG4gICAgICA6IG5ldyBEYXRlKGZtbC5iZWZvcmUpO1xuICAgIGNvbnN0IGFmdGVyID0gSGVscGVyLm5pbENoZWNrKGZtbC5hZnRlcilcbiAgICAgID8gbmV3IERhdGUoKVxuICAgICAgOiBuZXcgRGF0ZShmbWwuYWZ0ZXIpO1xuXG4gICAgLy8gY29uc29sZS5sb2coYGJlZm9yZTogJyR7YmVmb3JlfSdgKTtcbiAgICAvLyBjb25zb2xlLmxvZyhgYWZ0ZXI6ICcke2FmdGVyfSdgKTtcbiAgICBjb25zdCBmaWx0ZXJCeSA9IHRoaXMuZnJvbnRtYXR0ZXIucGFyc2VMaXN0RmlsdGVyQnkoZm1sKTtcbiAgICBjb25zdCBycyA9IFtdO1xuICAgIGxldCB0b3RhbFRpbWUgPSAwO1xuICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDEsIHByb2plY3QubmFtZV0pO1xuXG4gICAgY29uc3QgbG9ncyA9IHRoaXMuZHYucGFnZXMoYFwiJHtQYXRocy5Mb2dzfVwiYCkud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgIGlmIChwYWdlLnR5cGUgIT09IFR5cGVzLkxvZykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGJ1ZmYgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgbG9ncykge1xuICAgICAgY29uc3QgZm0gPSBlLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBpZiAoZmlsdGVyQnkubGVuZ3RoID4gMCAmJiAhdGhpcy5uYW1lSW5OYW1lc3BhY2UoZm0sIGZpbHRlckJ5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgZm0uY3JlYXRlZEF0ID0gdGhpcy5mcm9udG1hdHRlci5nZXRDcmVhdGVkQXQoZS5maWxlKTtcbiAgICAgIEFzc2VydC5UcnVlKFxuICAgICAgICAhSGVscGVyLm5pbENoZWNrKGZtLnBhcmVudF9pZCksXG4gICAgICAgIGBNaXNzaW5nIGZpZWxkIFwicGFyZW50X2lkXCIgZnJvbSBsb2c6IFwiJHtmbS51dWlkfVwiYCxcbiAgICAgICk7XG4gICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmR2XG4gICAgICAgIC5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfS8ke2ZtLnBhcmVudF9pZH1cImApXG4gICAgICAgIC5hcnJheSgpO1xuICAgICAgaWYgKHBhcmVudC5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvLyBBc3NlcnQuVHJ1ZShcbiAgICAgIC8vIFx0cGFyZW50Lmxlbmd0aCA9PT0gMSxcbiAgICAgIC8vIFx0YFBhcmVudDogJHtmbS5wYXJlbnRfaWR9IG5vdCBmb3VuZCBmb3IgbG9nOiBcIiR7Zm0udXVpZH1cImAsXG4gICAgICAvLyApO1xuICAgICAgZm0ucHJvamVjdCA9IEhlbHBlci5nZXRQcm9qZWN0KHBhcmVudFswXS5maWxlLmZyb250bWF0dGVyKTtcbiAgICAgIGZtLmFyZWEgPSBIZWxwZXIuZ2V0QXJlYShwYXJlbnRbMF0uZmlsZS5mcm9udG1hdHRlciwgdHJ1ZSk7XG4gICAgICBpZiAoXG4gICAgICAgIGZtLnByb2plY3QgIT09XG4gICAgICAgIGBwcm9qZWN0LyR7cHJvamVjdC5uYW1lID09PSBcImFkaG9jXCIgPyBcIm5vbmVcIiA6IHByb2plY3QubmFtZX1gXG4gICAgICApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChIZWxwZXIubmlsQ2hlY2soZm0uZG9uZV9hdCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGUgPSBmbS5kb25lX2F0LnNsaWNlKDAsIDEwKTtcbiAgICAgIGNvbnN0IGNyZWF0ZWRBdCA9IG5ldyBEYXRlKGZtLmNyZWF0ZWRfYXQpO1xuICAgICAgY29uc3QgZG9uZUF0ID0gbmV3IERhdGUoZm0uZG9uZV9hdCk7XG5cbiAgICAgIGlmIChjcmVhdGVkQXQgPiBiZWZvcmUpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjcmVhdGVkQXQgPCBhZnRlcikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJ1ZmZbZGF0ZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBidWZmW2RhdGVdID0gW2VdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnVmZltkYXRlXS5wdXNoKGUpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkZWx0YSA9IGRvbmVBdC5nZXRUaW1lKCkgLSBjcmVhdGVkQXQuZ2V0VGltZSgpO1xuXG4gICAgICB0b3RhbFRpbWUgKz0gZGVsdGE7XG4gICAgfVxuXG4gICAgZHYucGFyYWdyYXBoKFxuICAgICAgYF90b3RhbFRpbWUgKGgpOl8gJHtNYXRoLnJvdW5kKCh0b3RhbFRpbWUgLyAoMTAwMCAqIDYwICogNjApKSAqIDEwKSAvIDEwfWAsXG4gICAgKTtcblxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhidWZmKTtcbiAgICBrZXlzLnNvcnQoKTtcbiAgICBmb3IgKGNvbnN0IGRhdGUgb2Yga2V5cykge1xuICAgICAgYnVmZltkYXRlXS5zb3J0KFxuICAgICAgICAoYSwgYikgPT5cbiAgICAgICAgICBiLmZpbGUuZnJvbnRtYXR0ZXIuY3JlYXRlZEF0LmdldFRpbWUoKSAtXG4gICAgICAgICAgYS5maWxlLmZyb250bWF0dGVyLmNyZWF0ZWRBdC5nZXRUaW1lKCksXG4gICAgICApO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZGF0ZSBvZiBrZXlzLnJldmVyc2UoKSkge1xuICAgICAgcnMucHVzaChbXCJoZWFkZXJcIiwgMywgZGF0ZV0pO1xuICAgICAgcnMucHVzaChbXCJhcnJheVwiLCBSZW5kZXJlci5wcm9qZWN0TG9ncywgYnVmZltkYXRlXV0pO1xuICAgIH1cblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIGxvZ3MoKSB7XG4gICAgY29uc3QgW2dyb3VwQnksIGZpbHRlckJ5LCBiZWZvcmUsIGFmdGVyXSA9XG4gICAgICB0aGlzLmZyb250bWF0dGVyLnBhcnNlQWxsUHJvZ3Jlc3NlZFRhc2tzKCk7XG5cbiAgICBjb25zdCB0YXNrcyA9IHRoaXMuZHZcbiAgICAgIC5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfVwiYClcbiAgICAgIC53aGVyZSgocGFnZSkgPT4gcGFnZS5maWxlLmZyb250bWF0dGVyLnN0YXR1cyAhPT0gXCJkb2luZ1wiKTtcblxuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcbiAgICAgIGNvbnN0IGZtID0gdGFzay5maWxlLmZyb250bWF0dGVyO1xuICAgICAgaWYgKGZpbHRlckJ5Lmxlbmd0aCA+IDAgJiYgIXRoaXMubmFtZUluTmFtZXNwYWNlKGZtLCBmaWx0ZXJCeSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRpbWVFc3RpbWF0ZSA9IEhlbHBlci5kdXJhdGlvblN0cmluZ1RvU2VjKGZtLnRpbWVfZXN0aW1hdGUpO1xuICAgICAgaWYgKHRpbWVFc3RpbWF0ZSA9PT0gdW5kZWZpbmVkICYmIGZtLnRpbWVfZXN0aW1hdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEludmFsaWQgdmFsdWU6IFwiJHtmbS50aW1lX2VzdGltYXRlfVwiIGZvciBlbnRyeTogXCIke2ZtLnV1aWR9XCJgLFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm0udGltZUVzdGltYXRlID0gdGltZUVzdGltYXRlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsb2dzID0gdGhpcy5kdlxuICAgICAgICAucGFnZXMoYFwiJHtQYXRocy5Mb2dzfS8ke2ZtLnV1aWR9XCJgKVxuICAgICAgICAud2hlcmUoKHBhZ2UpID0+IHBhZ2UudHlwZSA9PT0gVHlwZXMuTG9nKVxuICAgICAgICAuc29ydCgoaykgPT4gay5jcmVhdGVkX2F0LCBcImFzY1wiKTtcblxuICAgICAgLy8gZGlzY2FyZCB0YXNrcyB3aXRob3V0IGxvZyBlbnRyeVxuICAgICAgaWYgKGxvZ3MubGVuZ3RoIDwgMSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgZm0udG9vayA9IDA7XG4gICAgICBjb25zdCBwcm9qZWN0ID0gSGVscGVyLmdldEZpZWxkKEhlbHBlci5nZXRQcm9qZWN0KGZtLCB0cnVlKSwgXCJcIik7XG4gICAgICBjb25zdCBhcmVhID0gSGVscGVyLmdldEZpZWxkKEhlbHBlci5nZXRBcmVhKGZtLCB0cnVlKSwgXCJcIik7XG5cbiAgICAgIGZvciAoY29uc3QgbG9nIG9mIGxvZ3MpIHtcbiAgICAgICAgY29uc3QgZm1sID0gbG9nLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0ge1xuICAgICAgICAgIGFsaWFzOiBmbS5hbGlhcyxcbiAgICAgICAgICB1dWlkOiBmbS51dWlkLFxuICAgICAgICAgIGxvZ0lkOiBmbWwudXVpZCxcbiAgICAgICAgICBlc3RpbWF0ZTogZm0udGltZUVzdGltYXRlLFxuICAgICAgICAgIHByb2plY3Q6IHByb2plY3QsXG4gICAgICAgICAgYXJlYTogYXJlYSxcbiAgICAgICAgICBkb21haW46IEhlbHBlci5nZXRGaWVsZChIZWxwZXIuZ2V0RG9tYWluKGZtLCB0cnVlKSwgXCJcIiksXG4gICAgICAgICAgcGF0aDogdGFzay5maWxlLnBhdGgsXG4gICAgICAgICAgbG9nUGF0aDogbG9nLmZpbGUucGF0aCxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICBkb25lQXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICB0b29rOiB1bmRlZmluZWQsXG4gICAgICAgICAgdG9va0FjYzogdW5kZWZpbmVkLFxuICAgICAgICAgIGRlbHRhQWNjOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChmbWwuY3JlYXRlZF9hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihsb2cpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGB0YXNrOiAke2ZtLnV1aWR9IGxhc3QgZW50cnkgaXMgbWlzc2luZyAnY3JlYXRlZF9hdCcgZmllbGRgLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm1sLmRvbmVfYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IobG9nKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgdGFzazogJHtmbS51dWlkfSBsYXN0IGVudHJ5IGlzIG1pc3NpbmcgJ2RvbmVfYXQnIGZpZWxkYCxcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgZW50cnkuY3JlYXRlZEF0ID0gbmV3IERhdGUoZm1sLmNyZWF0ZWRfYXQpO1xuICAgICAgICBlbnRyeS5kb25lQXQgPSBuZXcgRGF0ZShmbWwuZG9uZV9hdCk7XG4gICAgICAgIGlmICghdGhpcy5maWx0ZXJCeURhdGUoZW50cnkuZG9uZUF0LCBiZWZvcmUsIGFmdGVyKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdG9vayA9XG4gICAgICAgICAgKGVudHJ5LmRvbmVBdC5nZXRUaW1lKCkgLSBlbnRyeS5jcmVhdGVkQXQuZ2V0VGltZSgpKSAvIDEwMDA7XG4gICAgICAgIGZtLnRvb2sgKz0gdG9vaztcbiAgICAgICAgZW50cnkudG9vayA9IHRvb2s7XG4gICAgICAgIGVudHJ5LnRvb2tBY2MgPSBmbS50b29rO1xuICAgICAgICBlbnRyeS5kZWx0YUFjYyA9IHRpbWVFc3RpbWF0ZSAtIGZtLnRvb2s7XG4gICAgICAgIGJ1ZmYucHVzaChlbnRyeSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qga2V5R2V0dGVyID0gSGVscGVyLmdldEtleShncm91cEJ5KTtcbiAgICBjb25zdCBiaW5zID0ge307XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBidWZmKSB7XG4gICAgICBsZXQgZCA9IHVuZGVmaW5lZDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZCA9IGtleUdldHRlcihlbnRyeSk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVudHJ5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJpbnNbZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW2RdID0gW2VudHJ5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJpbnNbZF0ucHVzaChlbnRyeSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGJpbnMpO1xuICAgIGtleXMuc29ydCgpO1xuXG4gICAgLy8gYnVpbGRzIHJlbmRlcmluZyBhcnJheVxuICAgIGNvbnN0IHJzID0gW107XG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cy5yZXZlcnNlKCkpIHtcbiAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIGtleV0pO1xuICAgICAgY29uc3QgYXJyID0gW107XG4gICAgICBsZXQgdG90YWxUaW1lID0gMDtcblxuICAgICAgLy8gZGF5IGxvb3BcbiAgICAgIGZvciAoY29uc3QgZSBvZiBiaW5zW2tleV0pIHtcbiAgICAgICAgY29uc3QgYnVmZiA9IFtdO1xuICAgICAgICBidWZmLnB1c2goXG4gICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtTaG9ydFVVSUQoXG4gICAgICAgICAgICB0aGlzLmR2LFxuICAgICAgICAgICAgeyBwYXRoOiBlLnBhdGgsIGZyb250bWF0dGVyOiB7IHV1aWQ6IGUudXVpZCB9IH0sXG4gICAgICAgICAgICBcIlRhc2tcIixcbiAgICAgICAgICApLFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIGJ1ZmYucHVzaChcbiAgICAgICAgLy8gXHR0aGlzLmR2LnNlY3Rpb25MaW5rKFxuICAgICAgICAvLyBcdFx0ZS5wYXRoLFxuICAgICAgICAvLyBcdFx0XCJUYXNrXCIsXG4gICAgICAgIC8vIFx0XHRmYWxzZSxcbiAgICAgICAgLy8gXHRcdGAke2UudXVpZC5zbGljZSgwLCA4KX1gLFxuICAgICAgICAvLyBcdCksXG4gICAgICAgIC8vICk7XG5cbiAgICAgICAgYnVmZi5wdXNoKFxuICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rU2hvcnRVVUlEKFxuICAgICAgICAgICAgdGhpcy5kdixcbiAgICAgICAgICAgIHsgcGF0aDogZS5sb2dQYXRoLCBmcm9udG1hdHRlcjogeyB1dWlkOiBlLmxvZ0lkIH0gfSxcbiAgICAgICAgICAgIFwiQ29udGVudFwiLFxuICAgICAgICAgICksXG4gICAgICAgICk7XG4gICAgICAgIC8vIGJ1ZmYucHVzaChcbiAgICAgICAgLy8gXHR0aGlzLmR2LnNlY3Rpb25MaW5rKFxuICAgICAgICAvLyBcdFx0ZS5sb2dQYXRoLFxuICAgICAgICAvLyBcdFx0XCJDb250ZW50XCIsXG4gICAgICAgIC8vIFx0XHRmYWxzZSxcbiAgICAgICAgLy8gXHRcdGAke2UubG9nSWQuc2xpY2UoMCwgOCl9YCxcbiAgICAgICAgLy8gXHQpLFxuICAgICAgICAvLyApO1xuXG4gICAgICAgIC8vIGJ1ZmYucHVzaChgJHtlLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDE2KX1gKTtcbiAgICAgICAgLy8gYnVmZi5wdXNoKGAke2UuZG9uZUF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTYpfWApO1xuXG4gICAgICAgIGNvbnN0IGNvbnZlcnRTZWNvbmRzVG9Ib3VycyA9ICh0KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoKHQgLyAzNjAwKSAqIDEwKSAvIDEwO1xuICAgICAgICB9O1xuICAgICAgICBidWZmLnB1c2goYCR7Y29udmVydFNlY29uZHNUb0hvdXJzKGUudG9vayl9YCk7XG4gICAgICAgIGJ1ZmYucHVzaChgJHtlLnByb2plY3R9YCk7XG5cbiAgICAgICAgYXJyLnB1c2goYnVmZik7XG4gICAgICAgIHRvdGFsVGltZSArPSBlLnRvb2s7XG4gICAgICB9XG5cbiAgICAgIC8vIHRhc2tcbiAgICAgIHRvdGFsVGltZSA9IE1hdGgucm91bmQoKHRvdGFsVGltZSAvIDM2MDApICogMTApIC8gMTA7XG4gICAgICBycy5wdXNoKFtcInN0YXRzXCIsIFwidG90YWxUaW1lXCIsIFwiaFwiLCB0b3RhbFRpbWVdKTtcbiAgICAgIHJzLnB1c2goW1wiYXJyYXlcIiwgUmVuZGVyZXIuYmFzaWNQcm9ncmVzc2VkVGFza1dpdGhMb2csIGFycl0pO1xuICAgIH1cblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIGluYm94KGR2KSB7XG4gICAgY29uc3QgcnMgPSBbXTtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgLy8gZm9uY3Rpb24gZCdleHRyYWN0aW9uIGV0IGQnaW5pdGlhbGlzYXRpb24gZGVzIHBhcmFtcnRyZXMgZHUgZnJvbnRtYXR0ZXJcbiAgICAvLyBmb25jdGlvbiBmaWx0ZXIsICh0YXNrKSAtPiBib29sXG5cbiAgICBjb25zdCBmaWx0ZXJCeSA9IFtdO1xuICAgIGNvbnN0IG1pblNpemUgPSAwO1xuICAgIGNvbnN0IG1heFNpemUgPSA0Mjk0OTY3Mjk1O1xuXG4gICAgY29uc3QgZmxlZXRpbmdzID0gdGhpcy5kdi5wYWdlcyhgXCIke1BhdGhzLkluYm94fVwiYCkuYXJyYXkoKTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgZmxlZXRpbmdzKSB7XG4gICAgICBjb25zdCBmbSA9IGUuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGUuZmlsZS5mcm9udG1hdHRlci5jcmVhdGVkQXQgPSB0aGlzLmZyb250bWF0dGVyLmdldENyZWF0ZWRBdChcbiAgICAgICAgZS5maWxlLFxuICAgICAgKTtcbiAgICAgIGxldCBmbWpzID0gbnVsbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZtanMgPSBuZXcgRnJvbnRtYXR0ZXJKUyhlKTtcbiAgICAgIH0gY2F0Y2ggKFZhbGlkYXRpb25FcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgZHYucGFyYWdyYXBoKFJlbmRlcmVyLm1ha2VMaW5rKGR2LCBlLmZpbGUpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGZtLnByb2plY3QgPSBIZWxwZXIuZ2V0UHJvamVjdChmbSwgdHJ1ZSk7XG4gICAgICBmbS5kb21haW4gPSBgZG9tYWluLyR7Zm1qcy5nZXREb21haW4oKX1gO1xuICAgICAgZm0uY29tcG9uZW50cyA9IEhlbHBlci5nZXRDb21wb25lbnRzKGZtKTtcblxuICAgICAgaWYgKGUuZmlsZS5zaXplIDwgbWluU2l6ZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChlLmZpbGUuc2l6ZSA+IG1heFNpemUpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGJ1ZmYucHVzaChlKTtcbiAgICB9XG5cbiAgICBjb25zdCBsb2dzID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGUgb2YgbG9ncykge1xuICAgICAgY29uc3QgZm0gPSBlLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBmbS5jcmVhdGVkQXQgPSB0aGlzLmZyb250bWF0dGVyLmdldENyZWF0ZWRBdChlLmZpbGUpO1xuICAgICAgQXNzZXJ0LlRydWUoXG4gICAgICAgICFIZWxwZXIubmlsQ2hlY2soZm0ucGFyZW50X2lkKSxcbiAgICAgICAgYE1pc3NpbmcgZmllbGQgXCJwYXJlbnRfaWRcIiBmcm9tIGxvZzogXCIke2ZtLnV1aWR9XCJgLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZHZcbiAgICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9LyR7Zm0ucGFyZW50X2lkfVwiYClcbiAgICAgICAgLmFycmF5KCk7XG4gICAgICBBc3NlcnQuVHJ1ZShcbiAgICAgICAgcGFyZW50Lmxlbmd0aCA9PT0gMSxcbiAgICAgICAgYFBhcmVudDogJHtmbS5wYXJlbnRfaWR9IG5vdCBmb3VuZCBmb3IgbG9nOiBcIiR7Zm0udXVpZH1cImAsXG4gICAgICApO1xuICAgICAgZm0ucHJvamVjdCA9IEhlbHBlci5nZXRQcm9qZWN0KHBhcmVudFswXS5maWxlLmZyb250bWF0dGVyLCB0cnVlKTtcbiAgICAgIGZtLmRvbWFpbiA9IHVuZGVmaW5lZDtcbiAgICAgIGZtLmNvbXBvbmVudHMgPSBbXTtcblxuICAgICAgaWYgKGUuZmlsZS5zaXplIDwgbWluU2l6ZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChlLmZpbGUuc2l6ZSA+IG1heFNpemUpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGJ1ZmYucHVzaChlKTtcbiAgICB9XG5cbiAgICBjb25zdCBzb3J0QnlTaXplVGhlbkRhdGUgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgICBjb25zdCBmQSA9IGEuZmlsZTtcbiAgICAgIGNvbnN0IGZCID0gYi5maWxlO1xuICAgICAgaWYgKGZBLnNpemUgIT09IGZCLnNpemUpIHtcbiAgICAgICAgcmV0dXJuIGZCLnNpemUgLSBmQS5zaXplO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBmQS5mcm9udG1hdHRlci5jcmVhdGVkQXQuZ2V0VGltZSgpIC1cbiAgICAgICAgICBmQi5mcm9udG1hdHRlci5jcmVhdGVkQXQuZ2V0VGltZSgpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHNvcnRCeUFnZSA9IChhLCBiKSA9PlxuICAgICAgYS5maWxlLmZyb250bWF0dGVyLmNyZWF0ZWRBdC5nZXRUaW1lKCkgLVxuICAgICAgYi5maWxlLmZyb250bWF0dGVyLmNyZWF0ZWRBdC5nZXRUaW1lKCk7XG5cbiAgICBidWZmLnNvcnQoc29ydEJ5QWdlKTtcbiAgICBycy5wdXNoKFtcImFycmF5XCIsIFJlbmRlcmVyLmluYm94RW50cnksIGJ1ZmZdKTtcblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIHByb2plY3RzKCkge1xuICAgIGNvbnN0IHJzID0gW107XG4gICAgY29uc3QgYmlucyA9IHtcbiAgICAgIGFjdGl2ZTogW10sXG4gICAgICBpbmFjdGl2ZTogW10sXG4gICAgfTtcblxuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5kdi5wYWdlcyhgXCJQcm9qZWN0c1wiYCkuc29ydCgoaykgPT4gay5uYW1lLCBcImFzY1wiKTtcbiAgICBmb3IgKGNvbnN0IHByb2plY3Qgb2YgcGFnZXMpIHtcbiAgICAgIGNvbnN0IGZtUHJvamVjdCA9IG5ldyBGcm9udG1hdHRlckpTKHByb2plY3QpO1xuICAgICAgaWYgKGZtUHJvamVjdC5mbS5hY3RpdmUgPT09IGZhbHNlKSB7XG4gICAgICAgIGJpbnMuaW5hY3RpdmUucHVzaChwcm9qZWN0KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2UgaWYgKGZtUHJvamVjdC5nZXROYW1lKCkgPT09IFwiYWRob2NcIikge1xuICAgICAgICBiaW5zLmFjdGl2ZS5wdXNoKHByb2plY3QpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIFtcInllYXJseVwiLCBcIm1vbnRobHlcIiwgXCJ3ZWVrbHlcIiwgXCJkYWlseVwiXS5jb250YWlucyhcbiAgICAgICAgICBmbVByb2plY3QuZ2V0TmFtZSgpLFxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRhc2tzID0gdGhpcy5kdlxuICAgICAgICAucGFnZXMoYCNwcm9qZWN0LyR7Zm1Qcm9qZWN0LmdldE5hbWUoKX1gKVxuICAgICAgICAud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgICAgICBpZiAocGFnZS5maWxlLmZvbGRlciAhPT0gYCR7UGF0aHMuVGFza3N9YCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGZtVGFzayA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICAgIGlmIChmbVRhc2suZm0ucHJpb3JpdHkgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBbXCJ0b2RvXCIsIFwiZG9pbmdcIiwgXCJ3YWl0aW5nXCJdLmNvbnRhaW5zKGZtVGFzay5mbS5zdGF0dXMpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICBpZiAodGFza3MubGVuZ3RoID4gMCkge1xuICAgICAgICBiaW5zLmFjdGl2ZS5wdXNoKHByb2plY3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmlucy5pbmFjdGl2ZS5wdXNoKHByb2plY3QpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIFwiQWN0aXZlXCJdKTtcbiAgICBycy5wdXNoKFtcImFycmF5XCIsIFJlbmRlcmVyLnByb2plY3RzLCBiaW5zLmFjdGl2ZV0pO1xuICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIFwiSW5hY3RpdmVcIl0pO1xuICAgIHJzLnB1c2goW1wiYXJyYXlcIiwgUmVuZGVyZXIucHJvamVjdHMsIGJpbnMuaW5hY3RpdmVdKTtcblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIHByYXhpcygpIHtcbiAgICBjb25zdCBwYWdlcyA9IHRoaXMuZHZcbiAgICAgIC5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfVwiYClcbiAgICAgIC53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgICBpZiAocGFnZS5maWxlLmZyb250bWF0dGVyLnR5cGUgIT09IFR5cGVzLlByYXhpcykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuc3RhdHVzICE9PSBTdGF0dXMuVG9kbykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSlcbiAgICAgIC5hcnJheSgpO1xuXG4gICAgY29uc3QgcnMgPSBbXTtcbiAgICBycy5wdXNoKFtcImhlYWRlclwiLCAxLCBcIlByYXhpc1wiXSk7XG4gICAgcnMucHVzaChbXCJhcnJheVwiLCBSZW5kZXJlci5iYXNpY1Rhc2ssIHBhZ2VzXSk7XG5cbiAgICByZXR1cm4gcnM7XG4gIH1cblxuICBwbGFubmluZyhsYXN0V2VlayA9IDIpIHtcbiAgICBjb25zdCBycyA9IFtdO1xuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5kdlxuICAgICAgLnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKVxuICAgICAgLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgIGlmIChmbS5hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZtLmdldFByb2plY3QoKSAhPT0gXCJkYWlseVwiKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KVxuICAgICAgLnNvcnQoKHBhZ2UpID0+IHBhZ2UuZmlsZS5mcm9udG1hdHRlci5hdCwgXCJkZXNjXCIpO1xuXG4gICAgY29uc3QgYmlucyA9IHt9O1xuICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGxldCBhdCA9IHVuZGVmaW5lZDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF0ID0gZm0uYXQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGRhdGU6ICcke2ZtLmZtLnV1aWR9J2ApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB3ZWVrTnVtYmVyID0gdGhpcy5nZXRXZWVrTnVtYmVyKGZtLmF0KTtcbiAgICAgIGlmIChiaW5zW3dlZWtOdW1iZXJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t3ZWVrTnVtYmVyXSA9IFtmbV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiaW5zW3dlZWtOdW1iZXJdLnB1c2goZm0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgY3VycmVudFdlZWtOdW1iZXIgPSB0aGlzLmdldFdlZWtOdW1iZXIobm93KTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhiaW5zKSkge1xuICAgICAgY29uc3Qgd2Vla051bWJlciA9IE51bWJlcihrZXkpO1xuICAgICAgaWYgKHdlZWtOdW1iZXIgKyBsYXN0V2VlayA8IGN1cnJlbnRXZWVrTnVtYmVyKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHdlZWtOdW1iZXIgPCBjdXJyZW50V2Vla051bWJlcikge1xuICAgICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCBgfn53ZWVrICR7a2V5fX5+YF0pO1xuICAgICAgfSBlbHNlIGlmICh3ZWVrTnVtYmVyID09PSBjdXJyZW50V2Vla051bWJlcikge1xuICAgICAgICBycy5wdXNoKFtcImhlYWRlclwiLCAyLCBgKndlZWsgJHtrZXl9KmBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIGB3ZWVrICR7a2V5fWBdKTtcbiAgICAgIH1cblxuICAgICAgYmluc1trZXldLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgcmV0dXJuIGEuYXQuZ2V0VGltZSgpIC0gYi5hdC5nZXRUaW1lKCk7XG4gICAgICB9KTtcblxuICAgICAgZm9yIChjb25zdCB0YXNrIG9mIGJpbnNba2V5XSkge1xuICAgICAgICBjb25zdCBkYXkgPSBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl1bXG4gICAgICAgICAgdGFzay5hdC5nZXREYXkoKVxuICAgICAgICBdO1xuICAgICAgICBjb25zdCB0ZXh0ID0gUmVuZGVyZXIubWFrZUxpbmsoXG4gICAgICAgICAgdGhpcy5kdixcbiAgICAgICAgICB0YXNrLmYsXG4gICAgICAgICAgYCR7dGFzay5hdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKX0sICR7ZGF5fWAsXG4gICAgICAgICAgXCJUYXNrXCIsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHdlZWtOdW1iZXIgPCBjdXJyZW50V2Vla051bWJlcikge1xuICAgICAgICAgIHJzLnB1c2goW1wicGFyYWdyYXBoXCIsIGB+fiR7dGV4dH1+fmBdKTtcbiAgICAgICAgfSBlbHNlIGlmICh3ZWVrTnVtYmVyID09PSBjdXJyZW50V2Vla051bWJlcikge1xuICAgICAgICAgIGlmICh0aGlzLmRheU9mWWVhcih0YXNrLmF0KSA8IHRoaXMuZGF5T2ZZZWFyKG5vdykpIHtcbiAgICAgICAgICAgIHJzLnB1c2goW1wicGFyYWdyYXBoXCIsIGB+fiR7dGV4dH1+fmBdKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcnMucHVzaChbXCJwYXJhZ3JhcGhcIiwgYCR7dGV4dH1gXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJzLnB1c2goW1wicGFyYWdyYXBoXCIsIGAke3RleHR9YF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgZGF5T2ZZZWFyKGR0KTogbnVtYmVyIHtcbiAgICBjb25zdCB5ZWFyID0gZHQuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBtb250aCA9IGR0LmdldE1vbnRoKCkgKyAxO1xuICAgIGNvbnN0IGRheSA9IGR0LmdldERhdGUoKTtcblxuICAgIGNvbnN0IE4xID0gTWF0aC5mbG9vcigoMjc1ICogbW9udGgpIC8gOSk7XG4gICAgY29uc3QgTjIgPSBNYXRoLmZsb29yKChtb250aCArIDkpIC8gMTIpO1xuICAgIGNvbnN0IE4zID0gMSArIE1hdGguZmxvb3IoKHllYXIgLSA0ICogTWF0aC5mbG9vcih5ZWFyIC8gNCkgKyAyKSAvIDMpO1xuICAgIHJldHVybiBOMSAtIE4yICogTjMgKyBkYXkgLSAzMDtcbiAgfVxuXG4gIGdldFdlZWtOdW1iZXIoZCkge1xuICAgIC8vIENvcHkgZGF0ZSBzbyBkb24ndCBtb2RpZnkgb3JpZ2luYWxcbiAgICBkID0gbmV3IERhdGUoRGF0ZS5VVEMoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCksIGQuZ2V0RGF0ZSgpKSk7XG4gICAgLy8gU2V0IHRvIG5lYXJlc3QgVGh1cnNkYXk6IGN1cnJlbnQgZGF0ZSArIDQgLSBjdXJyZW50IGRheSBudW1iZXJcbiAgICAvLyBNYWtlIFN1bmRheSdzIGRheSBudW1iZXIgN1xuICAgIGQuc2V0VVRDRGF0ZShkLmdldFVUQ0RhdGUoKSArIDQgLSAoZC5nZXRVVENEYXkoKSB8fCA3KSk7XG4gICAgLy8gR2V0IGZpcnN0IGRheSBvZiB5ZWFyXG4gICAgY29uc3QgeWVhclN0YXJ0OiBhbnkgPSBuZXcgRGF0ZShEYXRlLlVUQyhkLmdldFVUQ0Z1bGxZZWFyKCksIDAsIDEpKTtcbiAgICAvLyBDYWxjdWxhdGUgZnVsbCB3ZWVrcyB0byBuZWFyZXN0IFRodXJzZGF5XG4gICAgcmV0dXJuIE1hdGguY2VpbCgoKGQgLSB5ZWFyU3RhcnQpIC8gODY0MDAwMDAgKyAxKSAvIDcpO1xuICB9XG5cbiAgZ2V0V2Vla051bWJlcjQoZCkge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBkID0gbmV3IERhdGUoRGF0ZS5VVEMoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCksIGQuZ2V0RGF0ZSgpKSk7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IHllYXJTdGFydCA9IG5ldyBEYXRlKERhdGUuVVRDKGQuZ2V0VVRDRnVsbFllYXIoKSwgMCwgMSkpO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBmaXJzdFN1bmRheSA9XG4gICAgICB5ZWFyU3RhcnQuZ2V0VVRDRGF5KCkgPT09IDBcbiAgICAgICAgPyB5ZWFyU3RhcnRcbiAgICAgICAgOiBuZXcgRGF0ZShcbiAgICAgICAgICBEYXRlLlVUQyhcbiAgICAgICAgICAgIGQuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAxICsgKDcgLSB5ZWFyU3RhcnQuZ2V0VVRDRGF5KCkpLFxuICAgICAgICAgICksXG4gICAgICAgICk7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IGRheXNTaW5jZUZpcnN0U3VuZGF5ID0gKGQgLSBmaXJzdFN1bmRheSArIDg2NDAwMDAwKSAvIDg2NDAwMDAwO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICByZXR1cm4gTWF0aC5jZWlsKGRheXNTaW5jZUZpcnN0U3VuZGF5IC8gNyk7XG4gIH1cblxuICBnZXRNb250aCh5ZWFyLCB3ZWVrTnVtYmVyKSB7XG4gICAgLy8gQ3JlYXRlIGEgZGF0ZSBvYmplY3QgZm9yIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHllYXJcbiAgICBjb25zdCBmaXJzdERheU9mWWVhciA9IG5ldyBEYXRlKHllYXIsIDAsIDEpO1xuXG4gICAgLy8gRGV0ZXJtaW5lIHRoZSBkYXkgb2YgdGhlIHdlZWsgZm9yIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHllYXJcbiAgICBjb25zdCBmaXJzdERheU9mV2VlayA9IGZpcnN0RGF5T2ZZZWFyLmdldERheSgpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2YgZGF5cyB0byBhZGQgdG8gdGhlIGZpcnN0IGRheSBvZiB0aGUgeWVhclxuICAgIC8vIHRvIGdldCB0byB0aGUgc3RhcnQgb2YgdGhlIHNwZWNpZmllZCB3ZWVrXG4gICAgLy8gV2Vla3Mgc3RhcnQgb24gTW9uZGF5OyBpZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB5ZWFyIGlzIGEgTW9uZGF5LFxuICAgIC8vIG5vIGFkanVzdG1lbnQgaXMgbmVlZGVkLCBvdGhlcndpc2UgYWRqdXN0IHRvIHRoZSBuZXh0IE1vbmRheVxuICAgIGNvbnN0IGRheXNUb0FkZCA9XG4gICAgICAod2Vla051bWJlciAtIDEpICogNyAtXG4gICAgICBmaXJzdERheU9mV2VlayArXG4gICAgICAoZmlyc3REYXlPZldlZWsgPT09IDAgPyAxIDogMCk7XG5cbiAgICAvLyBBZGp1c3QgdGhlIGRhdGUgdG8gdGhlIHN0YXJ0IG9mIHRoZSBzcGVjaWZpZWQgd2Vla1xuICAgIGNvbnN0IHdlZWtTdGFydERhdGUgPSBuZXcgRGF0ZShcbiAgICAgIGZpcnN0RGF5T2ZZZWFyLnNldERhdGUoZmlyc3REYXlPZlllYXIuZ2V0RGF0ZSgpICsgZGF5c1RvQWRkKSxcbiAgICApO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHdlZWtTdGFydERhdGUgaXMgb24gdGhlIGxhc3QgZGF5IG9mIHRoZSBtb250aCxcbiAgICAvLyBpZiBzbywgbW92ZSB0byB0aGUgbmV4dCBtb250aCB0byByb3VuZCB1cCBmb3IgYSB3ZWVrIHRoYXQgc3BhbnMgYSBtb250aCB0cmFuc2l0aW9uXG4gICAgaWYgKHdlZWtTdGFydERhdGUuZ2V0RGF0ZSgpID4gMjQpIHtcbiAgICAgIHdlZWtTdGFydERhdGUuc2V0RGF0ZSh3ZWVrU3RhcnREYXRlLmdldERhdGUoKSArIDcpO1xuICAgIH1cblxuICAgIC8vIEV4dHJhY3QgdGhlIG1vbnRoIG51bWJlciAoMC0xMSBmb3IgSmFuLURlYykgZnJvbSB0aGUgd2Vla1N0YXJ0RGF0ZVxuICAgIGNvbnN0IG1vbnRoTnVtYmVyID0gd2Vla1N0YXJ0RGF0ZS5nZXRNb250aCgpO1xuXG4gICAgcmV0dXJuIG1vbnRoTnVtYmVyICsgMTsgLy8gUmV0dXJuIG1vbnRoIG51bWJlciAoMS0xMilcbiAgfVxuXG4gIGdldE1vbnRoTmFtZShtb250aE51bWJlcikge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgyMDAwLCBtb250aE51bWJlciAtIDEpOyAvLyBZZWFyIDIwMDAgaXMgdXNlZCBhcmJpdHJhcmlseTsgYW55IG5vbi1sZWFwIHllYXIgd2lsbCBkb1xuICAgIHJldHVybiBkYXRlLnRvTG9jYWxlU3RyaW5nKFwiZGVmYXVsdFwiLCB7IG1vbnRoOiBcImxvbmdcIiB9KTtcbiAgfVxuXG4gIGVuZXJneShkdikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBkdi5jdXJyZW50KCk7XG4gICAgaWYgKGN1cnJlbnQuZW5lcmd5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGN1cnJlbnQuZW5lcmd5ID0gMDtcbiAgICB9XG4gICAgbGV0IGNvbXAgPSB1bmRlZmluZWQ7XG4gICAgc3dpdGNoIChjdXJyZW50Lm9wKSB7XG4gICAgICBjYXNlIFwiPlwiOlxuICAgICAgICBjb21wID0gKGEsIGIpID0+IGEgPiBiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCI+PVwiOlxuICAgICAgICBjb21wID0gKGEsIGIpID0+IGEgPj0gYjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiPFwiOlxuICAgICAgICBjb21wID0gKGEsIGIpID0+IGEgPCBiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCI8PVwiOlxuICAgICAgICBjb21wID0gKGEsIGIpID0+IGEgPD0gYjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb21wID0gKGEsIGIpID0+IGEgPT09IGI7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNvbnN0IHJzID0gW107XG4gICAgY29uc3QgcGFnZXMgPSBkdi5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfVwiYCkud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICBpZiAoZm0uZ2V0UHJvamVjdCgpID09PSBcImRhaWx5XCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZm0uZm0uc3RhdHVzICE9PSBcInRvZG9cIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb21wKGZtLmVuZXJneSwgY3VycmVudC5lbmVyZ3kpO1xuICAgIH0pO1xuXG4gICAgcnMucHVzaChbXG4gICAgICBcImFycmF5XCIsXG4gICAgICAoZHYsIGRhdGEpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBkYXRhKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZW50cnkpO1xuICAgICAgICAgIGR2LnBhcmFncmFwaChcbiAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rQWxpYXMoZHYsIGVudHJ5LmZpbGUsIFwiIyMgVGFza1wiKSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcGFnZXMsXG4gICAgXSk7XG5cbiAgICByZXR1cm4gcnM7XG4gIH1cblxuICBtYW5kYWxhKGR2KSB7XG4gICAgbGV0IG1hbmRhbGFMbyA9IC0xO1xuICAgIGxldCBtYW5kYWxhSGkgPSAtMTtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIHtcbiAgICAgIGNvbnN0IHdlZWtOdW1iZXIgPSB0aGlzLmdldFdlZWtOdW1iZXI0KG5vdyk7XG4gICAgICBtYW5kYWxhTG8gPSB3ZWVrTnVtYmVyIC0gNjtcbiAgICAgIG1hbmRhbGFIaSA9IHdlZWtOdW1iZXIgLSA1O1xuICAgICAgaWYgKG1hbmRhbGFMbyA8IDAgfHwgbWFuZGFsYUhpIDwgMCkge1xuICAgICAgICBkdi5wYXJhZ3JhcGgoYHdlZWtOdW1iZXI6ICR7d2Vla051bWJlcn1gKTtcbiAgICAgICAgZHYucGFyYWdyYXBoKGBtYW5kYWxhTG86ICR7bWFuZGFsYUxvfWApO1xuICAgICAgICBkdi5wYXJhZ3JhcGgoYG1hbmRhbGFIaTogJHttYW5kYWxhSGl9YCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGR2LnBhcmFncmFwaChgd2Vla051bWJlcjogJHt3ZWVrTnVtYmVyfWApO1xuICAgICAgZHYucGFyYWdyYXBoKGBtYW5kYWxhTG86ICR7bWFuZGFsYUxvfWApO1xuICAgICAgZHYucGFyYWdyYXBoKGBtYW5kYWxhSGk6ICR7bWFuZGFsYUhpfWApO1xuICAgIH1cblxuICAgIGNvbnN0IHJzID0gW107XG4gICAgY29uc3QgYmlucyA9IHt9O1xuICAgIGNvbnN0IHN1aXZpV2Vla2x5ID0ge307XG4gICAgY29uc3Qgc3VpdmlNb250aGx5ID0ge307XG4gICAgY29uc3Qgc3VpdmlZZWFybHkgPSB7fTtcbiAgICBjb25zdCBwYWdlcyA9IHRoaXMuZHZcbiAgICAgIC5wYWdlcyhgXCJKb3VybmFsXCJgKVxuICAgICAgLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgIGNvbnN0IHdlZWtOdW1iZXIgPSB0aGlzLmdldFdlZWtOdW1iZXI0KGZtLmNyZWF0ZWRBdCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHdlZWtOdW1iZXIpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgd2Vla051bWJlciA+PSBtYW5kYWxhTG8gJiZcbiAgICAgICAgICB3ZWVrTnVtYmVyIDw9IG1hbmRhbGFIaSAmJlxuICAgICAgICAgIGZtLmNyZWF0ZWRBdC5nZXRGdWxsWWVhcigpID09PSBub3cuZ2V0RnVsbFllYXIoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0pXG4gICAgICAuc29ydCgocGFnZSkgPT4gcGFnZS5maWxlLmZyb250bWF0dGVyLmNyZWF0ZWRfYXQsIFwiZGVzY1wiKTtcbiAgICBjb25zb2xlLmxvZyhwYWdlcy5sZW5ndGgpO1xuXG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgLy8gY29uc3Qgd2Vla051bWJlciA9IHRoaXMuZ2V0V2Vla051bWJlcihmbS5jcmVhdGVkQXQpO1xuICAgICAgY29uc3Qgd2Vla051bWJlciA9IHRoaXMuZ2V0V2Vla051bWJlcjQoZm0uY3JlYXRlZEF0KTtcbiAgICAgIGNvbnN0IHllYXIgPSBmbS5jcmVhdGVkQXQuZ2V0RnVsbFllYXIoKTtcbiAgICAgIGNvbnN0IG1vbnRoID0gZm0uY3JlYXRlZEF0LmdldE1vbnRoKCkgKyAxO1xuXG4gICAgICBsZXQgbXNnID0gXCJcIjtcbiAgICAgIG1zZyArPSBgY3JlYXRlZEF0OiAke2ZtLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKX1cXG5gO1xuICAgICAgbXNnICs9IGB3ZWVrTnVtYmVyOiAke3dlZWtOdW1iZXJ9XFxuYDtcbiAgICAgIG1zZyArPSBgeWVhcjogJHt5ZWFyfVxcbmA7XG4gICAgICBtc2cgKz0gYG1vbnRoOiAke21vbnRofVxcbmA7XG4gICAgICBtc2cgKz0gYGRheTogJHtmbS5jcmVhdGVkQXQuZ2V0RGF5KCl9XFxuYDtcbiAgICAgIGNvbnN0IGRheSA9IFtcIlN1blwiLCBcIk1vblwiLCBcIlR1ZVwiLCBcIldlZFwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiXVtcbiAgICAgICAgZm0uY3JlYXRlZEF0LmdldERheSgpXG4gICAgICBdO1xuICAgICAgbXNnICs9IGBkYXk6ICR7ZGF5fVxcbmA7XG5cbiAgICAgIGNvbnNvbGUubG9nKG1zZyk7XG5cbiAgICAgIGlmIChiaW5zW3llYXJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t5ZWFyXSA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKGJpbnNbeWVhcl1bd2Vla051bWJlci50b1N0cmluZygpXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbeWVhcl1bd2Vla051bWJlci50b1N0cmluZygpXSA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKHN1aXZpTW9udGhseVt5ZWFyXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHN1aXZpTW9udGhseVt5ZWFyXSA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKHN1aXZpV2Vla2x5W3llYXJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3VpdmlXZWVrbHlbeWVhcl0gPSB7fTtcbiAgICAgIH1cblxuICAgICAgbGV0IHRhZyA9IFwiXCI7XG4gICAgICBpZiAoZm0uZ2V0RG9tYWluKCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0YWcgPSBmbS5nZXREb21haW4oKTtcbiAgICAgIH0gZWxzZSBpZiAoZm0uZ2V0UHJvamVjdCgpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGFnID0gZm0uZ2V0UHJvamVjdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFnID0gXCJhZGhvY1wiO1xuICAgICAgfVxuXG4gICAgICBpZiAodGFnID09IFwid2Vla2x5XCIpIHtcbiAgICAgICAgaWYgKHN1aXZpV2Vla2x5W3llYXJdW3dlZWtOdW1iZXJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzdWl2aVdlZWtseVt5ZWFyXVt3ZWVrTnVtYmVyXSA9IFtwYWdlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdWl2aVdlZWtseVt5ZWFyXVt3ZWVrTnVtYmVyXS5wdXNoKHBhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIGlmICh0YWcgPT09IFwibW9udGhseVwiKSB7XG4gICAgICAgIGlmIChzdWl2aU1vbnRobHlbeWVhcl1bbW9udGhdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzdWl2aU1vbnRobHlbeWVhcl1bbW9udGhdID0gW3BhZ2VdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN1aXZpTW9udGhseVt5ZWFyXVttb250aF0ucHVzaChwYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAodGFnID09PSBcInllYXJseVwiKSB7XG4gICAgICAgIGlmIChzdWl2aVllYXJseVt5ZWFyXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc3VpdmlZZWFybHlbeWVhcl0gPSBbcGFnZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VpdmlZZWFybHlbeWVhcl0ucHVzaChwYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJpbnNbeWVhcl1bd2Vla051bWJlcl1bdGFnXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbeWVhcl1bd2Vla051bWJlcl1bdGFnXSA9IFtwYWdlXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJpbnNbeWVhcl1bd2Vla051bWJlcl1bdGFnXS5wdXNoKHBhZ2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHtcbiAgICAgIGNvbnN0IHllYXJzID0gT2JqZWN0LmtleXMoYmlucyk7XG4gICAgICBsZXQgbGFzdFllYXIgPSA5OTk5O1xuICAgICAgbGV0IGxhc3RNb250aCA9IDEzO1xuICAgICAgeWVhcnMuc29ydCgpLnJldmVyc2UoKTtcblxuICAgICAgZm9yIChjb25zdCB5ZWFyIG9mIHllYXJzKSB7XG4gICAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIHllYXJdKTtcblxuICAgICAgICBpZiAocGFyc2VJbnQoeWVhciwgMTApIDwgbGFzdFllYXIpIHtcbiAgICAgICAgICBsYXN0TW9udGggPSAxMztcbiAgICAgICAgICBsYXN0WWVhciA9IHBhcnNlSW50KHllYXIsIDEwKTtcbiAgICAgICAgICBpZiAoc3VpdmlZZWFybHlbeWVhcl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIHN1aXZpWWVhcmx5W3llYXJdKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgICAgICAgIHJzLnB1c2goW1xuICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtBbGlhcyh0aGlzLmR2LCBmbS5mKSxcbiAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgd2VlayA9IDUyOyB3ZWVrID4gMDsgd2Vlay0tKSB7XG4gICAgICAgICAgY29uc3QgdGhpc01vbnRoID0gdGhpcy5nZXRNb250aCh5ZWFyLCB3ZWVrKTtcblxuICAgICAgICAgIGlmIChzdWl2aU1vbnRobHlbeWVhcl1bdGhpc01vbnRoXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAobGFzdE1vbnRoICE9PSB0aGlzTW9udGgpIHtcbiAgICAgICAgICAgICAgbGFzdE1vbnRoID0gdGhpc01vbnRoO1xuICAgICAgICAgICAgICBycy5wdXNoKFtcbiAgICAgICAgICAgICAgICBcImhlYWRlclwiLFxuICAgICAgICAgICAgICAgIDMsXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRNb250aE5hbWUobGFzdE1vbnRoKSxcbiAgICAgICAgICAgICAgXSk7XG5cbiAgICAgICAgICAgICAgaWYgKHN1aXZpTW9udGhseVt5ZWFyXVt0aGlzTW9udGhdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2Ygc3VpdmlNb250aGx5W3llYXJdW1xuICAgICAgICAgICAgICAgICAgdGhpc01vbnRoXG4gICAgICAgICAgICAgICAgXSkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgICAgICAgICAgIHJzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiLFxuICAgICAgICAgICAgICAgICAgICBSZW5kZXJlci5tYWtlTGlua0FsaWFzKHRoaXMuZHYsIGZtLmYpLFxuICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgc3VpdmlXZWVrbHlbeWVhcl1bd2Vla10gPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgYmluc1t5ZWFyXVt3ZWVrXSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBycy5wdXNoKFtcImhlYWRlclwiLCA0LCBgd2VlayAke3dlZWsudG9TdHJpbmcoKX1gXSk7XG4gICAgICAgICAgaWYgKHN1aXZpV2Vla2x5W3llYXJdW3dlZWtdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBzdWl2aVdlZWtseVt5ZWFyXVt3ZWVrXSkge1xuICAgICAgICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICAgICAgICBycy5wdXNoKFtcbiAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiLFxuICAgICAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rQWxpYXModGhpcy5kdiwgZm0uZiksXG4gICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChiaW5zW3llYXJdW3dlZWtdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGRvbWFpbiA+IHByb2plY3RcbiAgICAgICAgICBjb25zdCB0YWdzID0gT2JqZWN0LmtleXMoYmluc1t5ZWFyXVt3ZWVrXSk7XG4gICAgICAgICAgdGFncy5zb3J0KCk7XG5cbiAgICAgICAgICBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgICAgICAgICBycy5wdXNoKFtcImhlYWRlclwiLCA1LCB0YWddKTtcbiAgICAgICAgICAgIGJpbnNbeWVhcl1bd2Vla11bdGFnXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZtQSA9IG5ldyBGcm9udG1hdHRlckpTKGEpO1xuICAgICAgICAgICAgICBjb25zdCBmbUIgPSBuZXcgRnJvbnRtYXR0ZXJKUyhiKTtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICBmbUIuY3JlYXRlZEF0LmdldFRpbWUoKSAtXG4gICAgICAgICAgICAgICAgZm1BLmNyZWF0ZWRBdC5nZXRUaW1lKClcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgYmluc1t5ZWFyXVt3ZWVrXVt0YWddKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgICAgICAgIGlmIChmbS50eXBlID09PSA2KSB7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZCA9IGZtLmNyZWF0ZWRBdFxuICAgICAgICAgICAgICAgICAgLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgIC5zbGljZSgwLCAxMCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF5ID0gW1xuICAgICAgICAgICAgICAgICAgXCJTdW5cIixcbiAgICAgICAgICAgICAgICAgIFwiTW9uXCIsXG4gICAgICAgICAgICAgICAgICBcIlR1ZVwiLFxuICAgICAgICAgICAgICAgICAgXCJXZWRcIixcbiAgICAgICAgICAgICAgICAgIFwiVGh1XCIsXG4gICAgICAgICAgICAgICAgICBcIkZyaVwiLFxuICAgICAgICAgICAgICAgICAgXCJTYXRcIixcbiAgICAgICAgICAgICAgICBdW2ZtLmNyZWF0ZWRBdC5nZXREYXkoKV07XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGAke2R9LCAke2RheX1gO1xuICAgICAgICAgICAgICAgIHJzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rKHRoaXMuZHYsIGZtLmYsIHRleHQpLFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgam91cm5hbCgpIHtcbiAgICBjb25zdCBycyA9IFtdO1xuICAgIGNvbnN0IGJpbnMgPSB7fTtcbiAgICBjb25zdCBzdWl2aVdlZWtseSA9IHt9O1xuICAgIGNvbnN0IHN1aXZpTW9udGhseSA9IHt9O1xuICAgIGNvbnN0IHN1aXZpWWVhcmx5ID0ge307XG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLmR2XG4gICAgICAucGFnZXMoYFwiSm91cm5hbFwiYClcbiAgICAgIC5zb3J0KChwYWdlKSA9PiBwYWdlLmZpbGUuZnJvbnRtYXR0ZXIuY3JlYXRlZF9hdCwgXCJkZXNjXCIpO1xuXG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgLy8gY29uc3Qgd2Vla051bWJlciA9IHRoaXMuZ2V0V2Vla051bWJlcihmbS5jcmVhdGVkQXQpO1xuICAgICAgY29uc3Qgd2Vla051bWJlciA9IHRoaXMuZ2V0V2Vla051bWJlcjQoZm0uY3JlYXRlZEF0KTtcbiAgICAgIGNvbnN0IHllYXIgPSBmbS5jcmVhdGVkQXQuZ2V0RnVsbFllYXIoKTtcbiAgICAgIGNvbnN0IG1vbnRoID0gZm0uY3JlYXRlZEF0LmdldE1vbnRoKCkgKyAxO1xuXG4gICAgICBsZXQgbXNnID0gXCJcIjtcbiAgICAgIG1zZyArPSBgY3JlYXRlZEF0OiAke2ZtLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKX1cXG5gO1xuICAgICAgbXNnICs9IGB3ZWVrTnVtYmVyOiAke3dlZWtOdW1iZXJ9XFxuYDtcbiAgICAgIG1zZyArPSBgeWVhcjogJHt5ZWFyfVxcbmA7XG4gICAgICBtc2cgKz0gYG1vbnRoOiAke21vbnRofVxcbmA7XG4gICAgICBtc2cgKz0gYGRheTogJHtmbS5jcmVhdGVkQXQuZ2V0RGF5KCl9XFxuYDtcbiAgICAgIGNvbnN0IGRheSA9IFtcIlN1blwiLCBcIk1vblwiLCBcIlR1ZVwiLCBcIldlZFwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiXVtcbiAgICAgICAgZm0uY3JlYXRlZEF0LmdldERheSgpXG4gICAgICBdO1xuICAgICAgbXNnICs9IGBkYXk6ICR7ZGF5fVxcbmA7XG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKG1zZyk7XG5cbiAgICAgIGlmIChiaW5zW3llYXJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t5ZWFyXSA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKGJpbnNbeWVhcl1bd2Vla051bWJlci50b1N0cmluZygpXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbeWVhcl1bd2Vla051bWJlci50b1N0cmluZygpXSA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKHN1aXZpTW9udGhseVt5ZWFyXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHN1aXZpTW9udGhseVt5ZWFyXSA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKHN1aXZpV2Vla2x5W3llYXJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3VpdmlXZWVrbHlbeWVhcl0gPSB7fTtcbiAgICAgIH1cblxuICAgICAgbGV0IHRhZyA9IFwiXCI7XG4gICAgICBpZiAoZm0uZ2V0RG9tYWluKCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0YWcgPSBmbS5nZXREb21haW4oKTtcbiAgICAgIH0gZWxzZSBpZiAoZm0uZ2V0UHJvamVjdCgpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGFnID0gZm0uZ2V0UHJvamVjdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFnID0gXCJhZGhvY1wiO1xuICAgICAgfVxuXG4gICAgICBpZiAodGFnID09IFwid2Vla2x5XCIpIHtcbiAgICAgICAgaWYgKHN1aXZpV2Vla2x5W3llYXJdW3dlZWtOdW1iZXJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzdWl2aVdlZWtseVt5ZWFyXVt3ZWVrTnVtYmVyXSA9IFtwYWdlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdWl2aVdlZWtseVt5ZWFyXVt3ZWVrTnVtYmVyXS5wdXNoKHBhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIGlmICh0YWcgPT09IFwibW9udGhseVwiKSB7XG4gICAgICAgIGlmIChzdWl2aU1vbnRobHlbeWVhcl1bbW9udGhdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzdWl2aU1vbnRobHlbeWVhcl1bbW9udGhdID0gW3BhZ2VdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN1aXZpTW9udGhseVt5ZWFyXVttb250aF0ucHVzaChwYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAodGFnID09PSBcInllYXJseVwiKSB7XG4gICAgICAgIGlmIChzdWl2aVllYXJseVt5ZWFyXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc3VpdmlZZWFybHlbeWVhcl0gPSBbcGFnZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VpdmlZZWFybHlbeWVhcl0ucHVzaChwYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJpbnNbeWVhcl1bd2Vla051bWJlcl1bdGFnXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbeWVhcl1bd2Vla051bWJlcl1bdGFnXSA9IFtwYWdlXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJpbnNbeWVhcl1bd2Vla051bWJlcl1bdGFnXS5wdXNoKHBhZ2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHtcbiAgICAgIGNvbnN0IHllYXJzID0gT2JqZWN0LmtleXMoYmlucyk7XG4gICAgICBsZXQgbGFzdFllYXIgPSA5OTk5O1xuICAgICAgbGV0IGxhc3RNb250aCA9IDEzO1xuICAgICAgeWVhcnMuc29ydCgpLnJldmVyc2UoKTtcblxuICAgICAgZm9yIChjb25zdCB5ZWFyIG9mIHllYXJzKSB7XG4gICAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIHllYXJdKTtcblxuICAgICAgICBpZiAocGFyc2VJbnQoeWVhciwgMTApIDwgbGFzdFllYXIpIHtcbiAgICAgICAgICBsYXN0TW9udGggPSAxMztcbiAgICAgICAgICBsYXN0WWVhciA9IHBhcnNlSW50KHllYXIsIDEwKTtcbiAgICAgICAgICBpZiAoc3VpdmlZZWFybHlbeWVhcl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIHN1aXZpWWVhcmx5W3llYXJdKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgICAgICAgIHJzLnB1c2goW1xuICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmtBbGlhcyh0aGlzLmR2LCBmbS5mKSxcbiAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgd2VlayA9IDUyOyB3ZWVrID4gMDsgd2Vlay0tKSB7XG4gICAgICAgICAgY29uc3QgdGhpc01vbnRoID0gdGhpcy5nZXRNb250aCh5ZWFyLCB3ZWVrKTtcblxuICAgICAgICAgIGlmIChzdWl2aU1vbnRobHlbeWVhcl1bdGhpc01vbnRoXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAobGFzdE1vbnRoICE9PSB0aGlzTW9udGgpIHtcbiAgICAgICAgICAgICAgbGFzdE1vbnRoID0gdGhpc01vbnRoO1xuICAgICAgICAgICAgICBycy5wdXNoKFtcbiAgICAgICAgICAgICAgICBcImhlYWRlclwiLFxuICAgICAgICAgICAgICAgIDMsXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRNb250aE5hbWUobGFzdE1vbnRoKSxcbiAgICAgICAgICAgICAgXSk7XG5cbiAgICAgICAgICAgICAgaWYgKHN1aXZpTW9udGhseVt5ZWFyXVt0aGlzTW9udGhdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2Ygc3VpdmlNb250aGx5W3llYXJdW1xuICAgICAgICAgICAgICAgICAgdGhpc01vbnRoXG4gICAgICAgICAgICAgICAgXSkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgICAgICAgICAgICAgIHJzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiLFxuICAgICAgICAgICAgICAgICAgICBSZW5kZXJlci5tYWtlTGlua0FsaWFzKHRoaXMuZHYsIGZtLmYpLFxuICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgc3VpdmlXZWVrbHlbeWVhcl1bd2Vla10gPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgYmluc1t5ZWFyXVt3ZWVrXSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBycy5wdXNoKFtcImhlYWRlclwiLCA0LCBgd2VlayAke3dlZWsudG9TdHJpbmcoKX1gXSk7XG4gICAgICAgICAgaWYgKHN1aXZpV2Vla2x5W3llYXJdW3dlZWtdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBzdWl2aVdlZWtseVt5ZWFyXVt3ZWVrXSkge1xuICAgICAgICAgICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgICAgICAgICBycy5wdXNoKFtcbiAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiLFxuICAgICAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rQWxpYXModGhpcy5kdiwgZm0uZiksXG4gICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChiaW5zW3llYXJdW3dlZWtdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGRvbWFpbiA+IHByb2plY3RcbiAgICAgICAgICBjb25zdCB0YWdzID0gT2JqZWN0LmtleXMoYmluc1t5ZWFyXVt3ZWVrXSk7XG4gICAgICAgICAgdGFncy5zb3J0KCk7XG5cbiAgICAgICAgICBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgICAgICAgICBycy5wdXNoKFtcImhlYWRlclwiLCA1LCB0YWddKTtcbiAgICAgICAgICAgIGJpbnNbeWVhcl1bd2Vla11bdGFnXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZtQSA9IG5ldyBGcm9udG1hdHRlckpTKGEpO1xuICAgICAgICAgICAgICBjb25zdCBmbUIgPSBuZXcgRnJvbnRtYXR0ZXJKUyhiKTtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICBmbUIuY3JlYXRlZEF0LmdldFRpbWUoKSAtXG4gICAgICAgICAgICAgICAgZm1BLmNyZWF0ZWRBdC5nZXRUaW1lKClcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgYmluc1t5ZWFyXVt3ZWVrXVt0YWddKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgICAgICAgIGlmIChmbS50eXBlID09PSA2KSB7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZCA9IGZtLmNyZWF0ZWRBdFxuICAgICAgICAgICAgICAgICAgLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgIC5zbGljZSgwLCAxMCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF5ID0gW1xuICAgICAgICAgICAgICAgICAgXCJTdW5cIixcbiAgICAgICAgICAgICAgICAgIFwiTW9uXCIsXG4gICAgICAgICAgICAgICAgICBcIlR1ZVwiLFxuICAgICAgICAgICAgICAgICAgXCJXZWRcIixcbiAgICAgICAgICAgICAgICAgIFwiVGh1XCIsXG4gICAgICAgICAgICAgICAgICBcIkZyaVwiLFxuICAgICAgICAgICAgICAgICAgXCJTYXRcIixcbiAgICAgICAgICAgICAgICBdW2ZtLmNyZWF0ZWRBdC5nZXREYXkoKV07XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGAke2R9LCAke2RheX1gO1xuICAgICAgICAgICAgICAgIHJzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rKHRoaXMuZHYsIGZtLmYsIHRleHQpLFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgY2FsZW5kYXIoKSB7XG4gICAgY29uc3QgcnMgPSBbXTtcbiAgICBjb25zdCBiaW5zID0ge307XG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLmR2LnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKS53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGlmIChcbiAgICAgICAgZm0uZm0uYXQgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBmbS5mbS5iZWZvcmUgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBmbS5mbS5hZnRlciA9PT0gdW5kZWZpbmVkXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZm0uZm0uc3RhdHVzICE9PSBcInRvZG9cIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChmbS5nZXRQcm9qZWN0KCkgPT09IFwiZGFpbHlcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgbGV0IHllYXIgPSAwO1xuICAgICAgbGV0IG1vbnRoID0gMDtcbiAgICAgIGxldCBkYXkgPSAwO1xuXG4gICAgICBpZiAoZm0uZm0uYmVmb3JlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgeWVhciA9IGZtLmJlZm9yZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICBtb250aCA9IGZtLmJlZm9yZS5nZXRNb250aCgpO1xuICAgICAgICBkYXkgPSBmbS5iZWZvcmUuZ2V0VVRDRGF0ZSgpO1xuICAgICAgfSBlbHNlIGlmIChmbS5mbS5hdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHllYXIgPSBmbS5hdC5nZXRGdWxsWWVhcigpO1xuICAgICAgICBtb250aCA9IGZtLmF0LmdldE1vbnRoKCk7XG4gICAgICAgIGRheSA9IGZtLmF0LmdldFVUQ0RhdGUoKTtcbiAgICAgIH0gZWxzZSBpZiAoZm0uYWZ0ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB5ZWFyID0gZm0uYWZ0ZXIuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgbW9udGggPSBmbS5hZnRlci5nZXRNb250aCgpO1xuICAgICAgICBkYXkgPSBmbS5hZnRlci5nZXRVVENEYXRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJpbnNbeWVhcl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW3llYXJdID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmIChiaW5zW3llYXJdW21vbnRoXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbeWVhcl1bbW9udGhdID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmIChiaW5zW3llYXJdW21vbnRoXVtkYXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t5ZWFyXVttb250aF1bZGF5XSA9IHt9O1xuICAgICAgfVxuXG4gICAgICBpZiAoYmluc1t5ZWFyXVttb250aF1bZGF5XVtcImF0XCJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1t5ZWFyXVttb250aF1bZGF5XVtcImF0XCJdID0gW107XG4gICAgICB9XG4gICAgICBpZiAoYmluc1t5ZWFyXVttb250aF1bZGF5XVtcImJlZm9yZVwiXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbeWVhcl1bbW9udGhdW2RheV1bXCJiZWZvcmVcIl0gPSBbXTtcbiAgICAgIH1cbiAgICAgIGlmIChiaW5zW3llYXJdW21vbnRoXVtkYXldW1wiYWZ0ZXJcIl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW3llYXJdW21vbnRoXVtkYXldW1wiYWZ0ZXJcIl0gPSBbXTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZtLmZtLmJlZm9yZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJpbnNbeWVhcl1bbW9udGhdW2RheV1bXCJiZWZvcmVcIl0ucHVzaChwYWdlKTtcbiAgICAgIH0gZWxzZSBpZiAoZm0uZm0uYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBiaW5zW3llYXJdW21vbnRoXVtkYXldW1wiYXRcIl0ucHVzaChwYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJpbnNbeWVhcl1bbW9udGhdW2RheV1bXCJhZnRlclwiXS5wdXNoKHBhZ2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHtcbiAgICAgIGNvbnN0IHllYXJzID0gT2JqZWN0LmtleXMoYmlucyk7XG4gICAgICB5ZWFycy5zb3J0KChhLCBiKSA9PiBwYXJzZUludChhKSAtIHBhcnNlSW50KGIpKTtcblxuICAgICAgZm9yIChjb25zdCB5ZWFyIG9mIHllYXJzKSB7XG4gICAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIHllYXJdKTtcbiAgICAgICAgY29uc3QgbW9udGhzID0gT2JqZWN0LmtleXMoYmluc1t5ZWFyXSk7XG4gICAgICAgIG1vbnRocy5zb3J0KChhLCBiKSA9PiBwYXJzZUludChhKSAtIHBhcnNlSW50KGIpKTtcbiAgICAgICAgZm9yIChjb25zdCBtb250aCBvZiBtb250aHMpIHtcbiAgICAgICAgICBycy5wdXNoKFtcbiAgICAgICAgICAgIFwiaGVhZGVyXCIsXG4gICAgICAgICAgICAzLFxuICAgICAgICAgICAgYCR7W1wiSmFudWFyeVwiLCBcIkZlYnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIiwgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXVttb250aF19YCxcbiAgICAgICAgICBdKTtcblxuICAgICAgICAgIGNvbnN0IGRheXMgPSBPYmplY3Qua2V5cyhiaW5zW3llYXJdW21vbnRoXSk7XG4gICAgICAgICAgZGF5cy5zb3J0KChhLCBiKSA9PiBwYXJzZUludChhKSAtIHBhcnNlSW50KGIpKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IGRheSBvZiBkYXlzKSB7XG4gICAgICAgICAgICBjb25zdCB3ZWVrcyA9IFtcbiAgICAgICAgICAgICAgXCJTdW5cIixcbiAgICAgICAgICAgICAgXCJNb25cIixcbiAgICAgICAgICAgICAgXCJUdWVcIixcbiAgICAgICAgICAgICAgXCJXZWRcIixcbiAgICAgICAgICAgICAgXCJUaHVcIixcbiAgICAgICAgICAgICAgXCJGcmlcIixcbiAgICAgICAgICAgICAgXCJTYXRcIixcbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIGNvbnN0IGJlZm9yZSA9IGJpbnNbeWVhcl1bbW9udGhdW2RheV1bXCJiZWZvcmVcIl07XG4gICAgICAgICAgICBjb25zdCBhdCA9IGJpbnNbeWVhcl1bbW9udGhdW2RheV1bXCJhdFwiXTtcbiAgICAgICAgICAgIGNvbnN0IGFmdGVyID0gYmluc1t5ZWFyXVttb250aF1bZGF5XVtcImFmdGVyXCJdO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgYHllYXI6ICR7eWVhcn1cXG5tb250aDogJHttb250aH1cXG5kYXk6ICR7ZGF5fWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGJlZm9yZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBiZWZvcmUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIi0tLSBiZWZvcmUgLS0tXCIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhZ2UpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiLS0tLS0tXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGBiZWZvcmU6ICR7d2Vla3NbZm0uYmVmb3JlLmdldERheSgpXX0gJHtkYXl9ICR7Zm0uYXQudG9JU09TdHJpbmcoKS5zbGljZSgxMSwgMTYpfSB8ICR7Zm0uZ2V0UHJvamVjdCgpfWA7XG4gICAgICAgICAgICAgICAgcnMucHVzaChbXG4gICAgICAgICAgICAgICAgICBcInBhcmFncmFwaFwiLFxuICAgICAgICAgICAgICAgICAgUmVuZGVyZXIubWFrZUxpbmsoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHYsXG4gICAgICAgICAgICAgICAgICAgIGZtLmYsXG4gICAgICAgICAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICAgICAgICAgIFwiVGFza1wiLFxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBhdC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm1BID0gbmV3IEZyb250bWF0dGVySlMoYSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZm1CID0gbmV3IEZyb250bWF0dGVySlMoYik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZtQi5hdC5nZXRUaW1lKCkgLSBmbUEuYXQuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIGF0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCItLS0gYXQgLS0tXCIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhZ2UpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiLS0tLS0tXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGBhdDogJHt3ZWVrc1tmbS5hdC5nZXREYXkoKV19ICR7ZGF5fSAke2ZtLmF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMTEsIDE2KX0gfCAke2ZtLmdldFByb2plY3QoKX1gO1xuICAgICAgICAgICAgICAgIHJzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgXCJwYXJhZ3JhcGhcIixcbiAgICAgICAgICAgICAgICAgIFJlbmRlcmVyLm1ha2VMaW5rKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmR2LFxuICAgICAgICAgICAgICAgICAgICBmbS5mLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0LFxuICAgICAgICAgICAgICAgICAgICBcIlRhc2tcIixcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFmdGVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIGFmdGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCItLS0gYWZ0ZXIgLS0tXCIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhZ2UpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiLS0tLS0tXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGAgYWZ0ZXI6ICR7d2Vla3NbZm0uYWZ0ZXIuZ2V0RGF5KCldfSAke2RheX0gJHtmbS5hdC50b0lTT1N0cmluZygpLnNsaWNlKDExLCAxNil9IHwgJHtmbS5nZXRQcm9qZWN0KCl9YDtcbiAgICAgICAgICAgICAgICBycy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgIFwicGFyYWdyYXBoXCIsXG4gICAgICAgICAgICAgICAgICBSZW5kZXJlci5tYWtlTGluayhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kdixcbiAgICAgICAgICAgICAgICAgICAgZm0uZixcbiAgICAgICAgICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICAgICAgICAgICAgXCJUYXNrXCIsXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJzO1xuICB9XG5cbiAgZ2xvYmFsVGFza0xpc3QocGFnZXMpIHtcbiAgICBjb25zdCBycyA9IFtdO1xuICAgIGNvbnN0IGJpbnMgPSB7fTtcblxuICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGlmIChmbS5nZXRQcm9qZWN0KCkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmbS5wcm9qZWN0cyA9IFtcImFkaG9jXCJdO1xuICAgICAgfVxuXG4gICAgICBpZiAoYmluc1tmbS5nZXRQcm9qZWN0KCldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmluc1tmbS5nZXRQcm9qZWN0KCldID0gW3BhZ2VdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmluc1tmbS5nZXRQcm9qZWN0KCldLnB1c2gocGFnZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcHJvamVjdHMgPSBPYmplY3Qua2V5cyhiaW5zKTtcbiAgICBwcm9qZWN0cy5zb3J0KCk7XG4gICAgZm9yIChjb25zdCBwcm9qZWN0IG9mIHByb2plY3RzKSB7XG4gICAgICBjb25zdCB0YXNrcyA9IGJpbnNbcHJvamVjdF07XG4gICAgICB0YXNrcy5zb3J0KEhlbHBlci5zb3J0QnlQcmlvcml0eUFuZER1cmF0aW9uQW5kQWdlKTtcbiAgICAgIHJzLnB1c2goW1wiaGVhZGVyXCIsIDIsIGAke3Byb2plY3R9YF0pO1xuICAgICAgcnMucHVzaChbXCJhcnJheVwiLCBSZW5kZXJlci5iYXNpY1Rhc2tKb3VybmFsLCB0YXNrc10pO1xuICAgIH1cblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIG5leHRBY3Rpb25zKGR2KSB7XG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLmR2LnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKS53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGlmIChcbiAgICAgICAgW1wiZGFpbHlcIiwgXCJ3ZWVrbHlcIiwgXCJtb250aGx5XCIsIFwieWVhcmx5XCJdLmNvbnRhaW5zKFxuICAgICAgICAgIGZtLmdldFByb2plY3QoKSxcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLnByb2plY3RJc0FjdGl2ZShmbS5nZXRQcm9qZWN0KCkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gZXhjbHVkZSB0YXNrcyB3aXRoIHVuZnVsZmlsbGVkIGRlcGVuZGVuY2llc1xuICAgICAgaWYgKCF0aGlzLm5vdGVIZWxwZXIuaXNEb2FibGUocGFnZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBleGNsdWRlIHNvbWVkYXkgbWF5YmUgdGFza3NcbiAgICAgIGlmIChmbS5mbS5wcmlvcml0eSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2xvYmFsVGFza0xpc3QocGFnZXMpO1xuICB9XG5cbiAgd2FpdGluZ0Zvcihkdikge1xuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5kdi5wYWdlcyhgXCIke1BhdGhzLlRhc2tzfVwiYCkud2hlcmUoKHBhZ2UpID0+IHtcbiAgICAgIGNvbnN0IGZtID0gbmV3IEZyb250bWF0dGVySlMocGFnZSk7XG4gICAgICBpZiAoXG4gICAgICAgIFtcImRhaWx5XCIsIFwid2Vla2x5XCIsIFwibW9udGhseVwiLCBcInllYXJseVwiXS5jb250YWlucyhcbiAgICAgICAgICBmbS5nZXRQcm9qZWN0KCksXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICghW1widG9kb1wiLCBcIndhaXRpbmdcIl0uY29udGFpbnMoZm0uZm0uc3RhdHVzKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5wcm9qZWN0SXNBY3RpdmUoZm0uZ2V0UHJvamVjdCgpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4Y2x1ZGUgdGFza3Mgd2l0aCBmdWxmaWxsZWQgZGVwZW5kZW5jaWVzIGFuZCBzb21lZGF5IG1heWJlXG4gICAgICBpZiAodGhpcy5ub3RlSGVscGVyLmlzRG9hYmxlKHBhZ2UpIHx8IGZtLmZtLnByaW9yaXR5ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5nbG9iYWxUYXNrTGlzdChwYWdlcyk7XG4gIH1cblxuICBwcm9qZWN0SXNBY3RpdmUobmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcHJvamVjdCA9IHRoaXMuZHYucGFnZXMoYFwiUHJvamVjdHNcImApLndoZXJlKChwYWdlKSA9PiB7XG4gICAgICBjb25zdCBmbSA9IG5ldyBGcm9udG1hdHRlckpTKHBhZ2UpO1xuICAgICAgaWYgKGZtLmdldE5hbWUoKSAhPT0gbmFtZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChmbS5mbS5hY3RpdmUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcHJvamVjdC5sZW5ndGggPiAwO1xuICB9XG5cbiAgc29tZWRheU1heWJlKGR2KSB7XG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLmR2LnBhZ2VzKGBcIiR7UGF0aHMuVGFza3N9XCJgKS53aGVyZSgocGFnZSkgPT4ge1xuICAgICAgY29uc3QgZm0gPSBuZXcgRnJvbnRtYXR0ZXJKUyhwYWdlKTtcbiAgICAgIGlmIChcbiAgICAgICAgW1wiZGFpbHlcIiwgXCJ3ZWVrbHlcIiwgXCJtb250aGx5XCIsIFwieWVhcmx5XCJdLmNvbnRhaW5zKFxuICAgICAgICAgIGZtLmdldFByb2plY3QoKSxcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLnByb2plY3RJc0FjdGl2ZShmbS5nZXRQcm9qZWN0KCkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gZXhjbHVkZSB0YXNrcyB3aXRoIHVuZnVsZmlsbGVkIGRlcGVuZGVuY2llc1xuICAgICAgaWYgKCF0aGlzLm5vdGVIZWxwZXIuaXNEb2FibGUocGFnZSkgfHwgZm0uZm0ucHJpb3JpdHkgPiAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5nbG9iYWxUYXNrTGlzdChwYWdlcyk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIER2TGliIHtcbiAgdGFza0RpciA9IFwiODEzIFRhc2tzXCI7XG4gIGluYm94RGlyID0gXCI4MDAgSW5ib3hcIjtcbiAgcmVmRGlyID0gXCI4MDIgUmVmc1wiO1xuICBsb2dEaXIgPSBcIjYwMCBMb2dcIjtcblxuICBUYXNrID0ge1xuICAgIEJBU0U6IDMsXG4gICAgREFJTFk6IDQsXG4gIH07XG5cbiAgVHlwZSA9IHtcbiAgICBUQVNLOiAzLFxuICAgIERBSUxZOiA0LFxuICAgIExPRzogNixcbiAgfTtcblxuICBTdGF0dXMgPSB7XG4gICAgVE9ETzogXCJ0b2RvXCIsXG4gICAgRE9ORTogXCJkb25lXCIsXG4gICAgRE9JTkc6IFwiZG9pbmdcIixcbiAgICBUUkFTSDogXCJ0cmFzaFwiLFxuICAgIE1BWUJFOiBcIm1heWJlXCIsXG4gICAgU1RBTkRCWTogXCJzdGFuZGJ5XCIsXG4gIH07XG5cbiAgTmFtZXNwYWNlID0ge1xuICAgIEFSRUE6IFwiYXJlYVwiLFxuICAgIENPTlRFWFQ6IFwiY29udGV4dFwiLFxuICAgIExBWUVSOiBcImxheWVyXCIsXG4gICAgT1JHOiBcIm9yZ1wiLFxuICAgIFBST0pFQ1Q6IFwicHJvamVjdFwiLFxuICB9O1xuXG4gIERlZmF1bHQgPSB7XG4gICAgQVJFQTogXCJub25lXCIsXG4gICAgQ09OVEVYVDogXCJhbnlcIixcbiAgICBMQVlFUjogXCJub25lXCIsXG4gICAgT1JHOiBcIm5vbmVcIixcbiAgICBQUk9KRUNUOiBcIm5vbmVcIixcbiAgfTtcblxuICBfZHYgPSBcIlwiO1xuXG4gIHNldCBkdihtb2QpIHtcbiAgICB0aGlzLl9kdiA9IG1vZDtcbiAgfVxuXG4gIGdldCBkdigpIHtcbiAgICByZXR1cm4gdGhpcy5fZHY7XG4gIH1cblxuICBpc0NoaWxkVGFnKHBhcmVudCwgY2hpbGQpIHtcbiAgICBpZiAoY2hpbGQubGVuZ3RoIDw9IHBhcmVudC5sZW5ndGggKyAxKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChjaGlsZC5zbGljZSgwLCBwYXJlbnQubGVuZ3RoICsgMSkgIT0gYCR7cGFyZW50fS9gKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgc3RyaXBUYWcodGFnKSB7XG4gICAgbGV0IHQgPSBcIlwiO1xuICAgIGlmICh0YWcuc2xpY2UoLTEpID09PSBcIi9cIikge1xuICAgICAgdCA9IHRhZy5zbGljZSgwLCAtMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHQgPSB0YWc7XG4gICAgfVxuICAgIGlmICh0LnNsaWNlKDAsIDEpID09PSBcIiNcIikge1xuICAgICAgdCA9IHQuc2xpY2UoMSwgdC5sZW5ndGgpO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbiAgfVxuXG4gIGdldFRhc2tGcm9tVVVJRChkdiwgdXVpZCkge1xuICAgIGNvbnN0IG4gPSBkdi5wYWdlcyhgXCIke3RoaXMudGFza0Rpcn0vJHt1dWlkfVwiYCk7XG4gICAgaWYgKG4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBzaG91bGQgd2FybiwgdGhpcyBtZWFucyBub3RlIGRlcGVuZHMgb24gYSBub24tZXhpc3RpbmcgdGFza1xuICAgICAgY29uc29sZS53YXJuKGBcIiR7dGhpcy50YXNrRGlyfS8ke3V1aWR9XCIgdGFzayBkb2VzIG5vdCBleGlzdHNgKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiBuWzBdO1xuICB9XG5cbiAgaGFzVmFsaWRGb3JtYXQodGFzaykge1xuICAgIC8vIGR2LnBhZ2VzIHJldHVybnMgYW4gYXJyYXkgd2V0aGVyIGl0IGZpbmRzIDEgb3IgbW9yZSBub3Rlc1xuICAgIGNvbnN0IGZtID0gdGFzay5maWxlLmZyb250bWF0dGVyO1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyB0aGlzIHNob3VsZCB3YXJuLCBhbGwgdGFza3Mgc2hvdWxkIGhhdmUgYSBmcm9udG1hdHRlclxuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgXCIke3RoaXMudGFza0Rpcn0vJHt0YXNrLnV1aWR9XCIgdGFzayBkb2VzIG5vdCBoYXZlIGEgZnJvbnRtYXR0ZXJgLFxuICAgICAgKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZm0udHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBhbGwgdGFza3MgbXVzdCBoYXZlIGEgYHR5cGVgIGZpZWxkXG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBcIiR7dGhpcy50YXNrRGlyfS8ke3Rhc2sudXVpZH1cIiB0YXNrIGRvZXMgbm90IGhhdmUgYSBcXGB0eXBlXFxgIGZpZWxkYCxcbiAgICAgICk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGZtLnN0YXR1cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBhbGwgdGFza3MgbXVzdCBoYXZlIGEgYHN0YXR1c2AgZmllbGRcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFwiJHt0aGlzLnRhc2tEaXJ9LyR7dGFzay51dWlkfVwiIHRhc2sgZG9lcyBub3QgaGF2ZSBhIFxcYHN0YXR1c1xcYCBmaWVsZGAsXG4gICAgICApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGhhc1BlbmRpbmdEZXBlbmRlbmNpZXMoZHYsIGRlcHMpIHtcbiAgICBmb3IgKGNvbnN0IGRlcCBvZiBkZXBzKSB7XG4gICAgICBjb25zdCB0YXNrID0gdGhpcy5nZXRUYXNrRnJvbVVVSUQoZHYsIGRlcCk7XG4gICAgICBpZiAodGFzayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmhhc1ZhbGlkRm9ybWF0KHRhc2spKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBpZiAoZm0udHlwZSAhPT0gdGhpcy5UYXNrLkJBU0UgJiYgZm0udHlwZSAhPT0gdGhpcy5UYXNrLkRBSUxZKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGZtLnN0YXR1cyA9PT0gdGhpcy5TdGF0dXMuVE9ETykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaXNEb2FibGUoZHYsIHRhc2spIHtcbiAgICBjb25zdCBmbSA9IHRhc2suZmlsZS5mcm9udG1hdHRlcjtcblxuICAgIGlmIChmbS5zdGF0dXMgIT09IHRoaXMuU3RhdHVzLlRPRE8pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZm0uYWZ0ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgYWZ0ZXIgPSBuZXcgRGF0ZShmbS5hZnRlcik7XG4gICAgICBpZiAoRGF0ZS5ub3coKSA8PSBhZnRlci5nZXRUaW1lKCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGRlcHMgPSBmbS5uZWVkcztcbiAgICBpZiAoZGVwcyA9PT0gdW5kZWZpbmVkIHx8IGRlcHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYXNQZW5kaW5nRGVwZW5kZW5jaWVzKGR2LCBkZXBzKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZ2V0TmFtZXNwYWNlQ29udGVudChkdiwgbnMpIHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IFtdO1xuICAgIGNvbnN0IHJlc3AgPSBkdi5wYWdlcyhgIyR7bnN9YCk7XG4gICAgZm9yIChjb25zdCBmIG9mIHJlc3ApIHtcbiAgICAgIGNvbnN0IHRhZ3MgPSBmLnRhZ3M7XG4gICAgICBpZiAodGFncyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQ2hpbGRUYWcobnMsIHRhZykpIHtcbiAgICAgICAgICBjb25zdCB0ID0gdGFnLnNsaWNlKG5zLmxlbmd0aCArIDEpO1xuICAgICAgICAgIGlmICghY2hpbGRyZW4uaW5jbHVkZXModCkpIHtcbiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2godCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9XG5cbiAgaXNEb25lKGR2LCBkZXApIHtcbiAgICBjb25zdCB0YXNrID0gdGhpcy5nZXRUYXNrRnJvbVVVSUQoZHYsIGRlcCk7XG4gICAgaWYgKHRhc2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5oYXNWYWxpZEZvcm1hdCh0YXNrKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGZtID0gdGFzay5maWxlLmZyb250bWF0dGVyO1xuICAgIGlmIChmbS5zdGF0dXMgPT09IHRoaXMuU3RhdHVzLkRPTkUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGdldFRhc2tzKFxuICAgIGR2LFxuICAgIHRhZyxcbiAgICB0YXNrVHlwZSA9IFt0aGlzLlRhc2suQkFTRSwgdGhpcy5UYXNrLkRBSUxZXSxcbiAgICBzdGF0dXMgPSB0aGlzLlN0YXR1cy5UT0RPLFxuICApIHtcbiAgICBjb25zdCBidWZmID0gW107XG4gICAgY29uc3QgdGFza3MgPSBkdi5wYWdlcyh0YWcpO1xuXG4gICAgZm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XG4gICAgICBjb25zdCBmbSA9IHRhc2suZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGZtLnN0YXR1cyA9PT0gdW5kZWZpbmVkIHx8IGZtLnN0YXR1cyAhPT0gc3RhdHVzKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGZtLnR5cGUgPT09IHVuZGVmaW5lZCB8fCAhdGFza1R5cGUuY29udGFpbnMoZm0udHlwZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBidWZmLnB1c2godGFzayk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1ZmY7XG4gIH1cblxuICBmb3JtYXRUYXNrKGR2LCB0YXNrKSB7XG4gICAgcmV0dXJuIGR2LmZpbGVMaW5rKHRhc2suZmlsZS5wYXRoKTtcbiAgfVxuXG4gIGZvcm1hdFRhc2tCaXMoZHYsIHRhc2spIHtcbiAgICBjb25zdCBmID0gdGFzay5maWxlO1xuICAgIGxldCBjdHggPSBcIlwiO1xuXG4gICAgZm9yIChjb25zdCB0YWcgb2YgZi50YWdzKSB7XG4gICAgICBpZiAodGFnLnNsaWNlKDAsIDkpID09IFwiI2NvbnRleHQvXCIpIHtcbiAgICAgICAgY3R4ID0gdGFnLnNsaWNlKDkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbXG4gICAgICBkdi5maWxlTGluayhmLnBhdGgpLFxuICAgICAgZHYubWFya2Rvd25UYXNrTGlzdChmLnRhc2tzKSxcbiAgICAgIGYuZnJvbnRtYXR0ZXIudGltZV9lc3RpbWF0ZSxcbiAgICAgIGN0eCxcbiAgICBdO1xuICB9XG5cbiAgZm9ybWF0VGFza0Jhc2UoZHYsIHRhc2spIHtcbiAgICBjb25zdCBmID0gdGFzay5maWxlO1xuICAgIGNvbnN0IGZtID0gZi5mcm9udG1hdHRlcjtcbiAgICBjb25zdCB0YWdzID0gZm0udGFncztcblxuICAgIGNvbnN0IGFyZWEgPSB0aGlzLmdldEFyZWEodGFncyk7XG5cbiAgICByZXR1cm4gW1xuICAgICAgZHYuZmlsZUxpbmsoZi5wYXRoLCBmYWxzZSwgZm0udXVpZC5zbGljZSgwLCA4KSksXG4gICAgICBkdi5tYXJrZG93blRhc2tMaXN0KGYudGFza3MpLFxuICAgICAgZm0udGltZV9lc3RpbWF0ZSxcbiAgICAgIGFyZWEsXG4gICAgXTtcbiAgfVxuXG4gIGZvcm1hdFRhc2tXYWl0aW5nKGR2LCB0YXNrKSB7XG4gICAgY29uc3QgZiA9IHRhc2suZmlsZTtcbiAgICBjb25zdCBmbSA9IGYuZnJvbnRtYXR0ZXI7XG4gICAgY29uc3QgZGVwcyA9IFtdO1xuXG4gICAgaWYgKGZtLm5lZWRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGZvciAoY29uc3QgZGVwIG9mIGZtLm5lZWRzKSB7XG4gICAgICAgIGRlcHMucHVzaChkdi5maWxlTGluayhgJHt0aGlzLnRhc2tEaXJ9LyR7ZGVwfWApKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmb3JtYXRUYXNrTWF5YmUoZHYsIHRhc2spIHtcbiAgICBjb25zdCBmID0gdGFzay5maWxlO1xuICAgIGNvbnN0IGZtID0gZi5mcm9udG1hdHRlcjtcbiAgICBjb25zdCBkZXBzID0gW107XG5cbiAgICByZXR1cm4gW2R2LmZpbGVMaW5rKGYucGF0aCldO1xuICB9XG5cbiAgbWFrZUFzeW5jUmVxdWVzdChkdiwgdXVpZCkge1xuICAgIHJldHVybiBkdlxuICAgICAgLnF1ZXJ5KGBMSVNUIFdIRVJFIG5lZWRzIEFORCBjb250YWlucyhuZWVkcywgXCIke3V1aWR9XCIpYClcbiAgICAgIC50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9KTtcbiAgfVxuXG4gIGdldERlcGVuZGFudFRhc2tzKGR2LCB0YXNrKSB7XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGNvbnN0IHV1aWQgPSB0YXNrLmZpbGUubmFtZTtcblxuICAgIGlmICh0YXNrLmZpbGUuZnJvbnRtYXR0ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGJ1ZmY7XG4gICAgfVxuXG4gICAgY29uc3QgdGFza3MgPSBkdlxuICAgICAgLnBhZ2VzKGBcIiR7dGhpcy50YXNrRGlyfVwiYClcbiAgICAgIC53aGVyZSgocCkgPT4gcC5uZWVkcyAhPT0gdW5kZWZpbmVkICYmIHAubmVlZHMuY29udGFpbnModXVpZCkpO1xuICAgIGZvciAoY29uc3QgdGsgb2YgdGFza3MpIHtcbiAgICAgIGNvbnN0IHQgPSBkdi5wYWdlcyhgXCIke3RrLmZpbGUucGF0aH1cImApO1xuICAgICAgYnVmZi5wdXNoKHRbMF0pO1xuICAgIH1cblxuICAgIHJldHVybiBidWZmO1xuICB9XG5cbiAgYnlEZXBlbmRlbmN5QW5kUHJpb3JpdHlBbmRDcmVhdGVkQXQoZHYsIGEsIGIpIHtcbiAgICBjb25zdCBmdEEgPSBhLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgY29uc3QgZnRCID0gYi5maWxlLmZyb250bWF0dGVyO1xuICAgIGNvbnN0IHByaW9BID0gZnRBLnByaW9yaXR5O1xuICAgIGNvbnN0IHByaW9CID0gZnRCLnByaW9yaXR5O1xuICAgIC8vIGJlZm9yZSA+IGRlcHMgPiBwcmlvID4gY3JlYXRlZF9hdFxuICAgIC8vIGxldCBiZWZvcmVBID0gZnRBLmJlZm9yZTtcbiAgICAvLyBsZXQgYmVmb3JlQiA9IGZ0Qi5iZWZvcmU7XG5cbiAgICBjb25zdCBkZXBzQSA9IHRoaXMuZ2V0RGVwZW5kYW50VGFza3MoZHYsIGEpO1xuICAgIGNvbnN0IGRlcHNCID0gdGhpcy5nZXREZXBlbmRhbnRUYXNrcyhkdiwgYik7XG5cbiAgICBpZiAoZGVwc0EubGVuZ3RoIC0gZGVwc0IubGVuZ3RoICE9PSAwKSB7XG4gICAgICByZXR1cm4gZGVwc0EubGVuZ3RoIC0gZGVwc0IubGVuZ3RoO1xuICAgIH1cblxuICAgIGlmIChwcmlvQSAtIHByaW9CICE9PSAwKSB7XG4gICAgICByZXR1cm4gcHJpb0EgLSBwcmlvQjtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRlQSA9IG5ldyBEYXRlKGZ0QS5jcmVhdGVkX2F0KTtcbiAgICBjb25zdCBkYXRlQiA9IG5ldyBEYXRlKGZ0Qi5jcmVhdGVkX2F0KTtcblxuICAgIHJldHVybiAoZGF0ZUEuZ2V0VGltZSgpIC0gZGF0ZUIuZ2V0VGltZSgpKSAqIC0xO1xuICB9XG5cbiAgZm9ybWF0VGFza1BsYW5uaW5nV2FpdGluZyhkdiwgdGFzaykge1xuICAgIGNvbnN0IGYgPSB0YXNrLmZpbGU7XG5cbiAgICByZXR1cm4gW1xuICAgICAgLy8gYWpvdXRlciBhbGlhcyBzdXIgbGUgbGlua1xuICAgICAgZHYubWFya2Rvd25UYXNrTGlzdChmLnRhc2tzKSxcbiAgICAgIGR2LmZpbGVMaW5rKGYucGF0aCwgZmFsc2UsIGYubmFtZS5zbGljZSgwLCA4KSksXG4gICAgICBmLmZyb250bWF0dGVyLnRpbWVfZXN0aW1hdGUsXG4gICAgICBmLmZyb250bWF0dGVyLmNhdXNlLFxuICAgIF07XG4gIH1cblxuICByZW5kZXJCYXNlQXNBcnJheShkdiwgdGFza3MpIHtcbiAgICBjb25zdCBhcnIgPSBbXTtcbiAgICB0YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICBhcnIucHVzaCh0aGlzLmZvcm1hdFRhc2tCYXNlKGR2LCB0YXNrKSk7XG4gICAgfSk7XG4gICAgZHYudGFibGUoW1widXVpZFwiLCBcInRhc2tzXCIsIFwiZXN0aW1hdGVcIiwgXCJhcmVhXCJdLCBhcnIpO1xuICB9XG5cbiAgcmVuZGVyUGxhbm5pbmdXYWl0aW5nKGR2LCB0YXNrcykge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIHRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgIGFyci5wdXNoKHRoaXMuZm9ybWF0VGFza1BsYW5uaW5nV2FpdGluZyhkdiwgdGFzaykpO1xuICAgIH0pO1xuICAgIGR2LnRhYmxlKFtcInRhc2tzXCIsIFwidXVpZFwiLCBcImVzdGltYXRlXCIsIFwiY2F1c2VcIl0sIGFycik7XG4gIH1cblxuICByZW5kZXJNYXliZUFzQXJyYXkoZHYsIHRhc2tzKSB7XG4gICAgY29uc3QgYXJyID0gW107XG4gICAgdGFza3MuZm9yRWFjaCgoeyByZWYsIHRhc2sgfSkgPT4ge1xuICAgICAgaWYgKHRhc2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhcnIucHVzaCh0aGlzLmZvcm1hdFRhc2tNYXliZShkdiwgdGFzaykpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGR2LnRhYmxlKFtcInV1aWRcIl0sIGFycik7XG4gIH1cblxuICBmb3JtYXRUYXNrRGFpbHkoZHYsIHRhc2spIHtcbiAgICBjb25zdCBmID0gdGFzay5maWxlO1xuICAgIGNvbnN0IGZtID0gdGFzay5maWxlLmZyb250bWF0dGVyO1xuICAgIGNvbnN0IHRhZ3MgPSB0YXNrLmZpbGUudGFncztcbiAgICBjb25zdCBhcmVhcyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgaWYgKHRhZy5zbGljZSgwLCA2KSA9PSBcIiNhcmVhL1wiKSB7XG4gICAgICAgIGFyZWFzLnB1c2godGFnLnNsaWNlKDYpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBsaW5rcyA9IFtdO1xuICAgIGZvciAoY29uc3QgbGluayBvZiBmLm91dGxpbmtzKSB7XG4gICAgICBsaW5rcy5wdXNoKGxpbmspO1xuICAgIH1cblxuICAgIGNvbnN0IHRhc2tzID0gW107XG4gICAgZm9yIChjb25zdCB0IG9mIGYudGFza3MpIHtcbiAgICAgIHRhc2tzLnB1c2godCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtcbiAgICAgIGR2LmZpbGVMaW5rKGYucGF0aCksXG4gICAgICBsaW5rcy5sZW5ndGggPiAwXG4gICAgICAgID8gZHYubWFya2Rvd25MaXN0KGxpbmtzKVxuICAgICAgICA6IGR2Lm1hcmtkb3duVGFza0xpc3QodGFza3MpLFxuICAgICAgZm0udGltZV9hbGxvY2F0ZWQsXG4gICAgICBhcmVhcy5sZW5ndGggPiAwID8gZHYubWFya2Rvd25MaXN0KGFyZWFzKSA6IFwiXCIsXG4gICAgXTtcbiAgfVxuXG4gIGZvcm1hdEZsZWV0aW5nKGR2LCB0YXNrKSB7XG4gICAgY29uc3QgZiA9IHRhc2suZmlsZTtcbiAgICBjb25zdCBmbSA9IHRhc2suZmlsZS5mcm9udG1hdHRlcjtcbiAgICBjb25zdCB0YWdzID0gdGFzay5maWxlLnRhZ3M7XG4gICAgY29uc3QgaG91cnMgPSAzNjAwO1xuICAgIGNvbnN0IGRheXMgPSA4NjQwMDtcblxuICAgIGxldCBkdCA9IG5ldyBEYXRlKCk7XG4gICAgaWYgKGZtICE9PSB1bmRlZmluZWQgJiYgZm0uY3JlYXRlZF9hdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkdCA9IG5ldyBEYXRlKGZtLmNyZWF0ZWRfYXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkdCA9IG5ldyBEYXRlKGYuY3RpbWUudHMpO1xuICAgIH1cbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGRlbHRhID0gKG5vdy5nZXRUaW1lKCkgLSBkdC5nZXRUaW1lKCkpIC8gMTAwMDtcbiAgICBsZXQgc2luY2UgPSBcIlwiO1xuICAgIGNvbnN0IHRvRHQgPSAodCkgPT4ge1xuICAgICAgcmV0dXJuIFN0cmluZyhNYXRoLnJvdW5kKHQgKiAxMCkgLyAxMCkucGFkU3RhcnQoMiwgXCIwXCIpO1xuICAgIH07XG4gICAgaWYgKGRlbHRhID49IGRheXMpIHtcbiAgICAgIC8vIGRheXMgYWdvXG4gICAgICBzaW5jZSA9IHRvRHQoZGVsdGEgLyBkYXlzKSArIFwiZFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBob3VycyBhZ29cbiAgICAgIHNpbmNlID0gdG9EdChkZWx0YSAvIGhvdXJzKSArIFwiaFwiO1xuICAgIH1cblxuICAgIC8vIHJldHVybiBbZHYuZmlsZUxpbmsoYCR7Zi5wYXRofSNDb250ZW50YCksIHNpbmNlLCBmLnNpemVdO1xuICAgIGlmIChmbS5hbGlhcyA9PT0gdW5kZWZpbmVkIHx8IGZtLmFsaWFzID09PSBcIlwiKSB7XG4gICAgICByZXR1cm4gW2R2LmZpbGVMaW5rKGAke2YucGF0aH1gKSwgc2luY2UsIGYuc2l6ZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbZHYuZmlsZUxpbmsoYCR7Zi5wYXRofWAsIGZhbHNlLCBmbS5hbGlhcyksIHNpbmNlLCBmLnNpemVdO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlckRhaWx5QXNBcnJheShkdiwgdGFza3MpIHtcbiAgICBjb25zdCBhcnIgPSBbXTtcbiAgICB0YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICBhcnIucHVzaCh0aGlzLmZvcm1hdFRhc2tEYWlseShkdiwgdGFzaykpO1xuICAgIH0pO1xuICAgIGR2LnRhYmxlKFtcInV1aWRcIiwgXCJjb250ZW50XCIsIFwiZHVyYXRpb25cIiwgXCJhcmVhXCJdLCBhcnIpO1xuICB9XG5cbiAgcmVuZGVyRmxlZXRpbmdBc0FycmF5KGR2LCB0YXNrcykge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIHRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgIGFyci5wdXNoKHRoaXMuZm9ybWF0RmxlZXRpbmcoZHYsIHRhc2spKTtcbiAgICB9KTtcbiAgICBkdi50YWJsZShbXCJjb250ZW50XCIsIFwiYWdlXCIsIFwic2l6ZVwiXSwgYXJyKTtcbiAgfVxuXG4gIGF1dG9GaWVsZE5lZWQoZHYsIGZtKSB7XG4gICAgaWYgKGZtLm5lZWRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGZvciAoY29uc3QgZGVwIG9mIGZtLm5lZWRzKSB7XG4gICAgICBpZiAoIXRoaXMuaXNEb25lKGR2LCBkZXApKSB7XG4gICAgICAgIGJ1ZmYucHVzaChkdi5maWxlTGluayhgJHt0aGlzLnRhc2tEaXJ9LyR7ZGVwfWApKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGJ1ZmYubGVuZ3RoID4gMCkge1xuICAgICAgZHYuaGVhZGVyKDIsIFwiTmVlZHNcIik7XG4gICAgICBkdi5saXN0KGJ1ZmYpO1xuICAgIH1cbiAgfVxuXG4gIGF1dG9GaWVsZE5lZWRlZEJ5KGR2LCBjdXJyZW50KSB7XG4gICAgY29uc3QgdGFza3MgPSB0aGlzLmdldERlcGVuZGFudFRhc2tzKGR2LCBjdXJyZW50KTtcbiAgICBpZiAodGFza3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYnVmZiA9IFtdO1xuICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xuICAgICAgaWYgKCF0aGlzLmlzRG9uZShkdiwgdGFzay51dWlkKSkge1xuICAgICAgICBidWZmLnB1c2goZHYuZmlsZUxpbmsodGFzay5maWxlLnBhdGgpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGJ1ZmYubGVuZ3RoID4gMCkge1xuICAgICAgZHYuaGVhZGVyKDIsIFwiTmVlZGVkQnlcIik7XG4gICAgICBkdi5saXN0KGJ1ZmYpO1xuICAgIH1cbiAgfVxuXG4gIGF1dG9GaWVsZFRhZ3MoZHYsIGZtKSB7XG4gICAgY29uc3QgdGFncyA9IGZtLnRhZ3M7XG4gICAgaWYgKHRhZ3MgPT0gdW5kZWZpbmVkIHx8IHRhZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGFncy5zb3J0KCk7XG4gICAgZHYuaGVhZGVyKDIsIFwiVGFnc1wiKTtcbiAgICBsZXQgcyA9IFwiXCI7XG4gICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgcyArPSBgICMke3RhZ31gO1xuICAgIH1cbiAgICBkdi5wYXJhZ3JhcGgocyk7XG5cbiAgICAvLyBkdi5wYXJhZ3JhcGgocyk7XG4gICAgLy8gZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgIC8vICAgZHYucGFyYWdyYXBoKGAjJHt0YWd9YCk7XG4gICAgLy8gfVxuICB9XG5cbiAgYXV0b0ZpZWxkVGFza0Jhc2UoZHYpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gZHYuY3VycmVudCgpO1xuICAgIGNvbnN0IGZtID0gY3VycmVudC5maWxlLmZyb250bWF0dGVyO1xuICAgIGlmIChmbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJmbSBpcyByZXF1aXJlZFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IEhlbHBlci5nZXRQcm9qZWN0KGZtKTtcbiAgICBpZiAocHJvamVjdE5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgcHJvamVjdHMgPSBkdi5wYWdlcyhgXCJQcm9qZWN0c1wiYCkud2hlcmUoKGZtUCkgPT4ge1xuICAgICAgICBpZiAoZm1QLm5hbWUgPT09IHByb2plY3ROYW1lLnNsaWNlKDgpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcbiAgICAgIGlmIChwcm9qZWN0cy5sZW5ndGgpIHtcbiAgICAgICAgZHYuaGVhZGVyKDIsIFwiUHJvamVjdFwiKTtcbiAgICAgICAgZHYucGFyYWdyYXBoKFJlbmRlcmVyLm1ha2VMaW5rTmFtZShkdiwgcHJvamVjdHNbMF0uZmlsZSkpO1xuICAgICAgICAvLyBkdi5wYXJhZ3JhcGgoZHYuZmlsZUxpbmsoYFByb2plY3RzLyR7cHJvamVjdHNbMF0uZmlsZS5mcm9udG1hdHRlci51dWlkfWApKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5hdXRvRmllbGROZWVkKGR2LCBmbSk7XG4gICAgdGhpcy5hdXRvRmllbGROZWVkZWRCeShkdiwgY3VycmVudCk7XG4gICAgLy8gdGhpcy5hdXRvRmllbGRUYWdzKGR2LCBmbSk7XG5cbiAgICBjb25zdCBsb2dFbnRyaWVzID0gZHZcbiAgICAgIC5wYWdlcyhgXCIke3RoaXMubG9nRGlyfS8ke2ZtLnV1aWR9XCJgKVxuICAgICAgLndoZXJlKChwKSA9PiBwLnR5cGUgPT09IDYpXG4gICAgICAuc29ydCgoaykgPT4gay5jcmVhdGVkX2F0LCBcImRlc2NcIik7XG5cbiAgICBjb25zdCBidWZmID0gW107XG4gICAgbGV0IHRvdGFsVGltZSA9IDA7XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBsb2dFbnRyaWVzKSB7XG4gICAgICBjb25zdCBmbWUgPSBlbnRyeS5maWxlLmZyb250bWF0dGVyO1xuICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgbGV0IHN0YXJ0OiBhbnkgPSAwO1xuICAgICAgbGV0IHN0b3A6IGFueSA9IDA7XG5cbiAgICAgIGlmIChmbWUgPT09IHVuZGVmaW5lZCB8fCBmbWUuY3JlYXRlZF9hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBmcm9udG1hdHRlcjogJHtmbWUudXVpZH1gKTtcbiAgICAgIH1cblxuICAgICAgc3RhcnQgPSBuZXcgRGF0ZShmbWUuY3JlYXRlZF9hdCk7XG4gICAgICBlLnB1c2goc3RhcnQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkpO1xuXG4gICAgICBpZiAoZm1lLmRvbmVfYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdG9wID0gRGF0ZS5ub3coKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0b3AgPSBuZXcgRGF0ZShmbWUuZG9uZV9hdCk7XG4gICAgICB9XG4gICAgICB0b3RhbFRpbWUgKz0gc3RvcCAtIHN0YXJ0O1xuXG4gICAgICBlLnB1c2goXG4gICAgICAgIGR2LnNlY3Rpb25MaW5rKFxuICAgICAgICAgIGZtZS51dWlkLFxuICAgICAgICAgIFwiIyMgQ29udGVudFwiLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIGZtZS51dWlkLnNsaWNlKDAsIDgpLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICAgIGUucHVzaChNYXRoLnJvdW5kKCgoc3RvcCAtIHN0YXJ0KSAvICgxMDAwICogNjAgKiA2MCkpICogMTApIC8gMTApO1xuICAgICAgaWYgKGZtZS5yZXZpZXdlZCA9PT0gdW5kZWZpbmVkIHx8IGZtZS5yZXZpZXdlZCA9PT0gMCkge1xuICAgICAgICBlLnB1c2goMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlLnB1c2goZm1lLnJldmlld2VkKTtcbiAgICAgIH1cblxuICAgICAgYnVmZi5wdXNoKGUpO1xuICAgIH1cblxuICAgIGlmIChidWZmLmxlbmd0aCA+IDApIHtcbiAgICAgIGR2LmhlYWRlcigyLCBcIkxvZ3NcIik7XG4gICAgICBkdi50YWJsZShbXCJjcmVhdGVkX2F0XCIsIFwidXVpZFwiLCBcInNlc3Npb25cIiwgXCJyZXZpZXdlZFwiXSwgYnVmZik7XG4gICAgICBpZiAodG90YWxUaW1lID4gMCkge1xuICAgICAgICBkdi5wYXJhZ3JhcGgoXG4gICAgICAgICAgYF90b3RhbFRpbWUgKGgpOl8gJHtNYXRoLnJvdW5kKCh0b3RhbFRpbWUgLyAoMTAwMCAqIDYwICogNjApKSAqIDEwKSAvIDEwXG4gICAgICAgICAgfWAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXV0b0ZpZWxkTG9nKGR2KSB7XG4gICAgY29uc3QgY3VycmVudCA9IGR2LmN1cnJlbnQoKTtcbiAgICBjb25zdCBmbSA9IGN1cnJlbnQuZmlsZS5mcm9udG1hdHRlcjtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGR2LmhlYWRlcigyLCBcIlBhcmVudFwiKTtcbiAgICBkdi5wYXJhZ3JhcGgoZHYuZmlsZUxpbmsoYCR7dGhpcy50YXNrRGlyfS8ke2ZtLnBhcmVudF9pZH1gKSk7XG4gIH1cblxuICBhdXRvRmllbGRBdXRob3JzKGR2LCBmbSkge1xuICAgIGNvbnN0IGF1dGhvcnMgPSBmbS5hdXRob3JzO1xuICAgIGlmIChhdXRob3JzID09PSB1bmRlZmluZWQgfHwgYXV0aG9ycy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHYuaGVhZGVyKDIsIFwiQXV0aG9yc1wiKTtcbiAgICBkdi5saXN0KGF1dGhvcnMpO1xuICB9XG5cbiAgYXV0b0ZpZWxkVGl0bGUoZHYsIGZtKSB7XG4gICAgY29uc3QgdGl0bGUgPSBmbS5hbGlhcztcbiAgICBpZiAodGl0bGUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZHYuaGVhZGVyKDEsIHRpdGxlKTtcbiAgfVxuXG4gIGF1dG9GaWVsZExpdGVyYXR1cmVOb3RlKGR2KSB7XG4gICAgY29uc3QgY3VycmVudCA9IGR2LmN1cnJlbnQoKTtcbiAgICBjb25zdCBmbSA9IGN1cnJlbnQuZmlsZS5mcm9udG1hdHRlcjtcbiAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuYXV0b0ZpZWxkVGl0bGUoZHYsIGZtKTtcbiAgICB0aGlzLmF1dG9GaWVsZEF1dGhvcnMoZHYsIGZtKTtcbiAgICB0aGlzLmF1dG9GaWVsZFRhZ3MoZHYsIGZtKTtcbiAgfVxuXG4gIGF1dG9GaWVsZFBlcm1hbmVudChkdikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBkdi5jdXJyZW50KCk7XG4gICAgY29uc3QgZm0gPSBjdXJyZW50LmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmF1dG9GaWVsZFRhZ3MoZHYsIGZtKTtcbiAgfVxuXG4gIGF1dG9GaWVsZFRhc2soZHYpIHtcbiAgICByZXR1cm4gdGhpcy5hdXRvRmllbGRUYXNrQmFzZShkdik7XG4gIH1cblxuICBhdXRvRmllbGRMaXRlcmF0dXJlKGR2KSB7XG4gICAgcmV0dXJuIHRoaXMuYXV0b0ZpZWxkTGl0ZXJhdHVyZU5vdGUoZHYpO1xuICB9XG5cbiAgYXV0b0ZpZWxkRmxlZXRpbmcoZHYpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBhdXRvRmllbGRTdXBwbHkoZHYpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmaW5kVGFza3NCeVByb2plY3QoZHYsIG5hbWUpIHtcbiAgICBjb25zdCBidWZmID0gW107XG5cbiAgICBpZiAobmFtZSAhPT0gXCJcIiAmJiBuYW1lICE9PSBcIm5vbmVcIikge1xuICAgICAgY29uc3QgdGFza3MgPSB0aGlzLmdldFRhc2tzKGR2LCBgJHt0aGlzLk5hbWVzcGFjZS5QUk9KRUNUfS9ub25lYCwgW1xuICAgICAgICB0aGlzLlRhc2suQkFTRSxcbiAgICAgIF0pO1xuICAgICAgZm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XG4gICAgICAgIGNvbnN0IGZtID0gdGFzay5maWxlLmZyb250bWF0dGVyO1xuICAgICAgICBpZiAodGhpcy5pc0RvYWJsZShkdiwgdGFzaykpIHtcbiAgICAgICAgICBidWZmLnB1c2godGFzayk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdGFza3MgPSB0aGlzLmdldFRhc2tzKGR2LCBcIlwiLCBbdGhpcy5UYXNrLkJBU0VdKTtcbiAgICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xuICAgICAgICBjb25zdCBmbSA9IHRhc2suZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgICAgY29uc3QgdGFncyA9IGZtLnRhZ3M7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAoZm0udGFncyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAobmFtZSA9PT0gXCJcIiB8fCBuYW1lID09PSBcIm5vbmVcIikpIHx8XG4gICAgICAgICAgZm0udGFncy5jb250YWlucyhgJHt0aGlzLk5hbWVzcGFjZS5QUk9KRUNUfS9ub25lYClcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHRoaXMuaXNEb2FibGUoZHYsIHRhc2spKSB7XG4gICAgICAgICAgICBidWZmLnB1c2godGFzayk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYnVmZi5zb3J0KCk7XG4gICAgcmV0dXJuIGJ1ZmY7XG4gIH1cblxuICBnZXRUYWcodGFncywgdHlwZSkge1xuICAgIGxldCBuYW1lID0gXCJcIjtcbiAgICBsZXQgZGVmYXVsdFZhbHVlID0gXCJcIjtcblxuICAgIGlmICh0eXBlID09PSBcImFyZWFcIikge1xuICAgICAgbmFtZSA9IHRoaXMuTmFtZXNwYWNlLkFSRUE7XG4gICAgICBkZWZhdWx0VmFsdWUgPSB0aGlzLkRlZmF1bHQuQVJFQTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiY29udGV4dFwiKSB7XG4gICAgICBuYW1lID0gdGhpcy5OYW1lc3BhY2UuQ09OVEVYVDtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IHRoaXMuRGVmYXVsdC5DT05URVhUO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJsYXllclwiKSB7XG4gICAgICBuYW1lID0gdGhpcy5OYW1lc3BhY2UuTEFZRVI7XG4gICAgICBkZWZhdWx0VmFsdWUgPSB0aGlzLkRlZmF1bHQuTEFZRVI7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcIm9yZ1wiKSB7XG4gICAgICBuYW1lID0gdGhpcy5OYW1lc3BhY2UuT1JHO1xuICAgICAgZGVmYXVsdFZhbHVlID0gdGhpcy5EZWZhdWx0Lk9SRztcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwicHJvamVjdFwiKSB7XG4gICAgICBuYW1lID0gdGhpcy5OYW1lc3BhY2UuUFJPSkVDVDtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IHRoaXMuRGVmYXVsdC5QUk9KRUNUO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGdldFRhZyBnb3QgdW5zdXBvcnRlZCB0eXBlOiAke3R5cGV9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgbGVuID0gbmFtZS5sZW5ndGggKyAxO1xuICAgIGNvbnN0IGRlZmF1bHRUYWcgPSBgJHtuYW1lfS8ke2RlZmF1bHRWYWx1ZX1gO1xuICAgIGlmICh0YWdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0VGFnO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcbiAgICAgIGlmICh0YWcubGVuZ3RoID4gbGVuICYmIHRhZy5zbGljZSgwLCBsZW4pID09IGAke25hbWV9L2ApIHtcbiAgICAgICAgcmV0dXJuIHRhZztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGVmYXVsdFRhZztcbiAgfVxuXG4gIGdldEFyZWEodGFncykge1xuICAgIHJldHVybiB0aGlzLmdldFRhZyh0YWdzLCBcImFyZWFcIik7XG4gIH1cblxuICBnZXRDb250ZXh0KHRhZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRUYWcodGFncywgXCJjb250ZXh0XCIpO1xuICB9XG4gIGdldExheWVyKHRhZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRUYWcodGFncywgXCJsYXllclwiKTtcbiAgfVxuXG4gIGdldE9yZyh0YWdzKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGFnKHRhZ3MsIFwib3JnXCIpO1xuICB9XG5cbiAgZ2V0UHJvamVjdCh0YWdzKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGFnKHRhZ3MsIFwicHJvamVjdFwiKTtcbiAgfVxuXG4gIHBhcnNlTGlzdEZyb250bWF0dGVyKGZtKSB7XG4gICAgbGV0IG1pblByaW9yaXR5ID0gMDtcbiAgICBpZiAoZm0ubWluX3ByaW9yaXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG1pblByaW9yaXR5ID0gZm0ubWluX3ByaW9yaXR5O1xuICAgIH1cblxuICAgIGxldCBpZ25vcmUgPSBbXTtcbiAgICBpZiAoZm0uaWdub3JlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlnbm9yZSA9IGZtLmlnbm9yZTtcbiAgICB9XG5cbiAgICBsZXQgYnlBcmVhcyA9IFtdO1xuICAgIGlmIChmbS5ieV9hcmVhcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBieUFyZWFzID0gZm0uYnlfYXJlYXM7XG4gICAgfVxuXG4gICAgbGV0IGJ5UHJvamVjdHMgPSBbXTtcbiAgICBpZiAoZm0uYnlfcHJvamVjdHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgYnlQcm9qZWN0cyA9IGZtLmJ5X3Byb2plY3RzO1xuICAgIH1cbiAgICByZXR1cm4gW21pblByaW9yaXR5LCBpZ25vcmUsIGJ5QXJlYXMsIGJ5UHJvamVjdHNdO1xuICB9XG5cbiAgcmVuZGVyTmFtZXNwYWNlQ29udGVudChkdikge1xuICAgIGNvbnN0IHNlbGYgPSBkdi5jdXJyZW50KCk7XG4gICAgY29uc3QgbmFtZSA9IHNlbGYuZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCkuc2xpY2UoMCwgLTEpO1xuXG4gICAgZHYuaGVhZGVyKDEsIFwiSW5kZXhcIik7XG4gICAgZHYuaGVhZGVyKDIsIGAke3NlbGYuZmlsZS5uYW1lfWApO1xuXG4gICAgY29uc3QgdGFncyA9IHRoaXMuZ2V0TmFtZXNwYWNlQ29udGVudChkdiwgbmFtZSk7XG4gICAgdGFncy5zb3J0KCk7XG5cbiAgICBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgICBkdi5wYXJhZ3JhcGgoYCMke25hbWV9LyR7dGFnfWApO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlclVucHJvY2Vzc2VkTG9ncyhkdikge1xuICAgIGNvbnN0IGxvZ3MgPSBkdlxuICAgICAgLnBhZ2VzKGBcIiR7dGhpcy5sb2dEaXJ9XCJgKVxuICAgICAgLndoZXJlKFxuICAgICAgICAocCkgPT5cbiAgICAgICAgICBwLnR5cGUgPT09IHRoaXMuVHlwZS5MT0cgJiZcbiAgICAgICAgICAocC5yZXZpZXdkID09PSB1bmRlZmluZWQgfHwgcC5yZXZpZXdlZCA8IDEpLFxuICAgICAgKVxuICAgICAgLnNvcnQoKGspID0+IGsuY3JlYXRlZF9hdCwgXCJhc2NcIik7XG5cbiAgICBjb25zdCBidWZmID0gW107XG5cbiAgICBjb25zdCBhcnIgPSBbXTtcbiAgICBsb2dzLmZvckVhY2goKGVudHJ5KSA9PiB7XG4gICAgICBjb25zdCBmbSA9IGVudHJ5LmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICBpZiAoZm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBhcmVudElkID0gZm0ucGFyZW50X2lkO1xuICAgICAgaWYgKHBhcmVudElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGxvZyBlbnRyeTogJHtlbnRyeS5maWxlLnBhdGh9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBhcmVudCA9IGR2LnBhZ2VzKGBcIiR7dGhpcy50YXNrRGlyfS8ke3BhcmVudElkfVwiYCk7XG4gICAgICBjb25zdCBwYXJlbnRGbSA9IHBhcmVudC5maWxlLmZyb250bWF0dGVyO1xuICAgICAgaWYgKHBhcmVudEZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRhc2s6ICR7cGFyZW50LmZpbGUucGF0aH1gKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHByb2plY3QgPSB0aGlzLmdldFByb2plY3QocGFyZW50Rm0udGFncyk7XG4gICAgICBpZiAoXG4gICAgICAgIHByb2plY3QgPT09IGAke3RoaXMuTmFtZXNwYWNlLlBST0pFQ1R9LyR7dGhpcy5EZWZhdWx0LlBST0pFQ1R9YFxuICAgICAgKSB7XG4gICAgICAgIHByb2plY3QgPSBcIlwiO1xuICAgICAgfVxuXG4gICAgICBsZXQgYXJlYSA9IHRoaXMuZ2V0QXJlYShwYXJlbnRGbS50YWdzKTtcbiAgICAgIGlmIChhcmVhID09PSBgJHt0aGlzLk5hbWVzcGFjZS5BUkVBfS8ke3RoaXMuRGVmYXVsdC5BUkVBfWApIHtcbiAgICAgICAgYXJlYSA9IFwiXCI7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZvcm1hdGVkID0gW107XG5cbiAgICAgIGZvcm1hdGVkLnB1c2goXG4gICAgICAgIGR2LnNlY3Rpb25MaW5rKFxuICAgICAgICAgIGVudHJ5LmZpbGUucGF0aCxcbiAgICAgICAgICBcIkNvbnRlbnRcIixcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICBgJHtmbS51dWlkLnNsaWNlKDAsIDgpfWAsXG4gICAgICAgICksXG4gICAgICApO1xuICAgICAgY29uc3QgY3JlYXRlZEF0ID0gbmV3IERhdGUoZm0uY3JlYXRlZF9hdCk7XG4gICAgICBmb3JtYXRlZC5wdXNoKGNyZWF0ZWRBdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKSk7XG4gICAgICBmb3JtYXRlZC5wdXNoKHByb2plY3QpO1xuICAgICAgZm9ybWF0ZWQucHVzaChhcmVhKTtcbiAgICAgIGFyci5wdXNoKGZvcm1hdGVkKTtcbiAgICB9KTtcblxuICAgIGR2LnRhYmxlKFtcInV1aWRcIiwgXCJjcmVhdGVkX2F0XCIsIFwicHJvamVjdFwiLCBcImFyZWFcIl0sIGFycik7XG4gIH1cblxuICBhc3NlcnRUYXNrRG9uZUF0KGR2LCB0YXNrSWQpIHtcbiAgICBjb25zdCB0YXNrID0gZHYucGFnZXMoYFwiJHt0aGlzLnRhc2tEaXJ9LyR7dGFza0lkfVwiYCk7XG4gICAgaWYgKHRhc2subGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHRhc2s6ICR7dGFza0lkfSBkb2VzdCBub3QgZXhpc3RzYCk7XG4gICAgfVxuXG4gICAgY29uc3QgZm0gPSB0YXNrLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdGFzazogJHt0YXNrSWR9IGRvZXMgbm90IGhhdmUgYSBmcm9udG1hdHRlcmApO1xuICAgIH1cblxuICAgIGNvbnN0IGxvZ3MgPSBkdlxuICAgICAgLnBhZ2VzKGBcIiR7dGhpcy5sb2dEaXJ9LyR7dGFza0lkfVwiYClcbiAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiYXNjXCIpO1xuICAgIGlmIChsb2dzLmxlbmd0aCA8IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdGFzazogJHt0YXNrSWR9IGhhcyBubyBMb2dzYCk7XG4gICAgfVxuXG4gICAgY29uc3QgbGFzdEVudHJ5ID0gbG9nc1tsb2dzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChsYXN0RW50cnkuZmlsZS5mcm9udG1hdHRlci5kb25lX2F0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYHRhc2s6ICR7dGFza0lkfSBsYXN0IGVudHJ5IGlzIG1pc3NpbmcgJ2RvbmVfYXQnIGZpZWxkYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgZG9uZUF0ID0gbmV3IERhdGUobGFzdEVudHJ5LmZpbGUuZnJvbnRtYXR0ZXIuZG9uZV9hdCk7XG4gICAgcmV0dXJuIFtcbiAgICAgIGR2LnNlY3Rpb25MaW5rKFxuICAgICAgICB0YXNrLmZpbGUucGF0aCxcbiAgICAgICAgXCJDb250ZW50XCIsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBgJHt0YXNrLmZpbGUuZnJvbnRtYXR0ZXIudXVpZC5zbGljZSgwLCA4KX1gLFxuICAgICAgKSxcbiAgICAgIGAke2RvbmVBdC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKX1gLFxuICAgIF07XG4gIH1cblxuICBnZXREb25lVGltZWxpbmUoZHYpIHtcbiAgICAvLyBwcmVuZHMgZW4gY29tcHRlIGRvaW5nIC0+IGRvbmUsIHBhcyBsZXMgdGFzayBzdXIgbGVxdWVsbGVzIGR1IHRyYXZhaWwgYSBcdTAwRTl0XHUwMEU5IGZhaXQgbWFpcyBxdWkgb250IFx1MDBFOXRcdTAwRTkgc3VzcGVuZFxuICAgIC8vIGRhaWx5LCB0YXNrIHRyb3AgbG9uZ3VlIHBvdXIgZXRyZSBmYWl0ZSBlbiB1biBzaXR0aW5nXG4gICAgY29uc3QgdGFza3MgPSBkdlxuICAgICAgLnBhZ2VzKGBcIiR7dGhpcy50YXNrRGlyfVwiYClcbiAgICAgIC53aGVyZSgocCkgPT4gcC5zdGF0dXMgPT09IFwiZG9uZVwiKTtcblxuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcbiAgICAgIGNvbnN0IGZtID0gdGFzay5maWxlLmZyb250bWF0dGVyO1xuICAgICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB0YXNrOiAke2ZtLnV1aWR9IGRvZXMgbm90IGhhdmUgYSBmcm9udG1hdHRlcmApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsb2dzID0gZHZcbiAgICAgICAgLnBhZ2VzKGBcIiR7dGhpcy5sb2dEaXJ9LyR7Zm0udXVpZH1cImApXG4gICAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiYXNjXCIpO1xuICAgICAgaWYgKGxvZ3MubGVuZ3RoIDwgMSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYHRhc2s6ICR7Zm0udXVpZH0gaGFzIG5vIExvZ3NgKTtcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKGB0YXNrOiAke3Rhc2tJZH0gaGFzIG5vIExvZ3NgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGFzdEVudHJ5ID0gbG9nc1tsb2dzLmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKGxhc3RFbnRyeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGxhc3RFbnRyeS5maWxlLmZyb250bWF0dGVyLmRvbmVfYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYHRhc2s6ICR7Zm0udXVpZH0gbGFzdCBlbnRyeSBpcyBtaXNzaW5nICdkb25lX2F0JyBmaWVsZGAsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGZtLmRvbmVBdCA9IG5ldyBEYXRlKGxhc3RFbnRyeS5maWxlLmZyb250bWF0dGVyLmRvbmVfYXQpO1xuICAgICAgYnVmZi5wdXNoKHRhc2spO1xuICAgIH1cblxuICAgIGJ1ZmYuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgZGF0ZUEgPSBuZXcgRGF0ZShhLmZpbGUuZnJvbnRtYXR0ZXIuZG9uZUF0KTtcbiAgICAgIGNvbnN0IGRhdGVCID0gbmV3IERhdGUoYi5maWxlLmZyb250bWF0dGVyLmRvbmVBdCk7XG4gICAgICByZXR1cm4gKGRhdGVBLmdldFRpbWUoKSAtIGRhdGVCLmdldFRpbWUoKSkgKiAtMTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGJ1ZmYuZm9yRWFjaCgoZSkgPT4ge1xuICAgICAgYXJyLnB1c2goW1xuICAgICAgICBkdi5zZWN0aW9uTGluayhcbiAgICAgICAgICBlLmZpbGUucGF0aCxcbiAgICAgICAgICBcIkNvbnRlbnRcIixcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICBgJHtlLmZpbGUuZnJvbnRtYXR0ZXIudXVpZC5zbGljZSgwLCA4KX1gLFxuICAgICAgICApLFxuICAgICAgICBgJHtlLmZpbGUuZnJvbnRtYXR0ZXIuZG9uZUF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTYpfWAsXG4gICAgICBdKTtcbiAgICB9KTtcblxuICAgIGR2LnRhYmxlKFtcInV1aWRcIiwgXCJkb25lQXRcIl0sIGFycik7XG4gIH1cblxuICBkdXJhdGlvblN0cmluZ1RvU2VjKHZhbCkge1xuICAgIGNvbnN0IG11bHQgPSB2YWwuc2xpY2UoLTEpO1xuICAgIGxldCBtID0gMDtcbiAgICBpZiAobXVsdCA9PT0gXCJoXCIpIHtcbiAgICAgIG0gPSA2MCAqIDYwO1xuICAgIH0gZWxzZSBpZiAobXVsdCA9PT0gXCJtXCIpIHtcbiAgICAgIG0gPSA2MDtcbiAgICB9IGVsc2UgaWYgKG11bHQgPT09IFwiZFwiKSB7XG4gICAgICBtID0gMjQgKiA2MCAqIDYwO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oYFVuaGFuZGxlZCBjYXNlIG11bHQ6ICR7bXVsdH1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbSAqIHBhcnNlSW50KHZhbC5zbGljZSgwLCAtMSkpO1xuICB9XG5cbiAgdGVzdER2RnVuYygpIHtcbiAgICAvLyBwcmVuZHMgZW4gY29tcHRlIGRvaW5nIC0+IGRvbmUsIHBhcyBsZXMgdGFzayBzdXIgbGVxdWVsbGVzIGR1IHRyYXZhaWwgYSBcdTAwRTl0XHUwMEU5IGZhaXQgbWFpcyBxdWkgb250IFx1MDBFOXRcdTAwRTkgc3VzcGVuZFxuICAgIC8vIGRhaWx5LCB0YXNrIHRyb3AgbG9uZ3VlIHBvdXIgZXRyZSBmYWl0ZSBlbiB1biBzaXR0aW5nXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IGR2ID0gYXBwLnBsdWdpbnMucGx1Z2lucy5kYXRhdmlldy5hcGk7XG4gICAgY29uc3QgdGFza3MgPSBkdlxuICAgICAgLnBhZ2VzKGBcIiR7dGhpcy50YXNrRGlyfVwiYClcbiAgICAgIC53aGVyZSgocCkgPT4gcC5zdGF0dXMgPT09IFwiZG9uZVwiKTtcblxuICAgIGNvbnN0IGJ1ZmYgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcbiAgICAgIGNvbnN0IGZtID0gdGFzay5maWxlLmZyb250bWF0dGVyO1xuICAgICAgaWYgKGZtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB0YXNrOiAke2ZtLnV1aWR9IGRvZXMgbm90IGhhdmUgYSBmcm9udG1hdHRlcmApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsb2dzID0gZHZcbiAgICAgICAgLnBhZ2VzKGBcIiR7dGhpcy5sb2dEaXJ9LyR7Zm0udXVpZH1cImApXG4gICAgICAgIC5zb3J0KChrKSA9PiBrLmNyZWF0ZWRfYXQsIFwiYXNjXCIpO1xuICAgICAgaWYgKGxvZ3MubGVuZ3RoIDwgMSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYHRhc2s6ICR7Zm0udXVpZH0gaGFzIG5vIExvZ3NgKTtcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKGB0YXNrOiAke3Rhc2tJZH0gaGFzIG5vIExvZ3NgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGFzdEVudHJ5ID0gbG9nc1tsb2dzLmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKGxhc3RFbnRyeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGxhc3RFbnRyeS5maWxlLmZyb250bWF0dGVyLmRvbmVfYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYHRhc2s6ICR7Zm0udXVpZH0gbGFzdCBlbnRyeSBpcyBtaXNzaW5nICdkb25lX2F0JyBmaWVsZGAsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGZtLmRvbmVBdCA9IG5ldyBEYXRlKGxhc3RFbnRyeS5maWxlLmZyb250bWF0dGVyLmRvbmVfYXQpO1xuICAgICAgYnVmZi5wdXNoKHRhc2spO1xuICAgIH1cblxuICAgIGJ1ZmYuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgZGF0ZUEgPSBuZXcgRGF0ZShhLmZpbGUuZnJvbnRtYXR0ZXIuZG9uZUF0KTtcbiAgICAgIGNvbnN0IGRhdGVCID0gbmV3IERhdGUoYi5maWxlLmZyb250bWF0dGVyLmRvbmVBdCk7XG4gICAgICByZXR1cm4gKGRhdGVBLmdldFRpbWUoKSAtIGRhdGVCLmdldFRpbWUoKSkgKiAtMTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGJ1ZmYuZm9yRWFjaCgoZSkgPT4ge1xuICAgICAgYXJyLnB1c2goW1xuICAgICAgICBkdi5zZWN0aW9uTGluayhcbiAgICAgICAgICBlLmZpbGUucGF0aCxcbiAgICAgICAgICBcIkNvbnRlbnRcIixcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICBgJHtlLmZpbGUuZnJvbnRtYXR0ZXIudXVpZC5zbGljZSgwLCA4KX1gLFxuICAgICAgICApLFxuICAgICAgICBgJHtlLmZpbGUuZnJvbnRtYXR0ZXIuZG9uZUF0LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTYpfWAsXG4gICAgICBdKTtcbiAgICB9KTtcblxuICAgIC8vIGR2LnRhYmxlKFtcInV1aWRcIiwgXCJkb25lQXRcIl0sIGFycik7XG4gIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBLHNCQVlPOzs7QUNiQSxJQUFNLFFBQVE7QUFBQSxFQUNwQixPQUFPO0FBQUEsRUFDUCxZQUFZO0FBQUEsRUFDWixPQUFPO0FBQUEsRUFDUCxTQUFTO0FBQUEsRUFDVCxPQUFPO0FBQUEsRUFDUCxNQUFNO0FBQUEsRUFDTixVQUFVO0FBQUEsRUFDVixNQUFNO0FBQUEsRUFDTixhQUFhO0FBQUEsRUFDYixTQUFTO0FBQUEsRUFDVCxXQUFXO0FBQUEsRUFDWCxVQUFVO0FBQUEsRUFDVixTQUFTO0FBQUEsRUFDVCxPQUFPO0FBQ1I7QUFFTyxJQUFNLFNBQVM7QUFBQSxFQUNyQixNQUFNO0FBQUEsRUFDTixPQUFPO0FBQUEsRUFDUCxNQUFNO0FBQUEsRUFDTixPQUFPO0FBQUEsRUFDUCxTQUFTO0FBQUEsRUFDVCxPQUFPO0FBQ1I7QUFDTyxJQUFNLGFBQWE7QUFBQSxFQUN6QixTQUFTO0FBQUEsRUFDVCxVQUFVO0FBQUEsRUFDVixnQkFBZ0I7QUFBQSxFQUNoQixTQUFTO0FBQUEsRUFDVCxXQUFXO0FBQUEsRUFDWCxRQUFRO0FBQUEsRUFDUixRQUFRO0FBQUEsRUFDUixTQUFTO0FBQ1Y7QUFFTyxJQUFNLFFBQVE7QUFBQSxFQUNwQixVQUFVO0FBQUEsRUFDVixZQUFZO0FBQUEsRUFDWixXQUFXO0FBQUEsRUFDWCxNQUFNO0FBQUEsRUFDTixRQUFRO0FBQUEsRUFDUixXQUFXO0FBQUEsRUFDWCxLQUFLO0FBQUEsRUFDTCxVQUFVO0FBQUEsRUFDVixPQUFPO0FBQUEsRUFDUCxTQUFTO0FBQUEsRUFDVCxLQUFLO0FBQUEsRUFDTCxRQUFRO0FBQUEsRUFDUixXQUFXO0FBQ1o7QUFFTyxJQUFNLFlBQVk7QUFBQSxFQUN4QixNQUFNO0FBQUEsRUFDTixTQUFTO0FB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QyxXQUFPLE9BQU87QUFBQSxFQUNmO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsU0FBSyxXQUFXLE9BQU87QUFBQSxNQUN0QixDQUFDO0FBQUEsTUFDRDtBQUFBLE1BQ0EsTUFBTSxLQUFLLFNBQVM7QUFBQSxJQUNyQjtBQUFBLEVBQ0Q7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUNsQztBQUNEO0FBRU8sSUFBTSxlQUFOLGNBQTJCLHNCQUFNO0FBQUEsRUFDdkMsWUFBWUgsTUFBVTtBQUNyQixVQUFNQSxJQUFHO0FBQUEsRUFDVjtBQUFBLEVBRUEsU0FBUztBQUNSLFVBQU0sRUFBRSxVQUFVLElBQUk7QUFFdEIsVUFBTSxLQUFLLEtBQUssSUFBSSxRQUFRLFFBQVEsU0FBUztBQUM3QyxVQUFNLFFBQVEsR0FBRyxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sR0FBRyxFQUFFO0FBQzVDLFFBQUksSUFBSTtBQUNSLGVBQVcsUUFBUSxPQUFPO0FBQ3pCLFdBQUssR0FBRyxLQUFLLEtBQUs7QUFBQTtBQUFBO0FBQUEsSUFDbkI7QUFDQSxjQUFVLFFBQVEsQ0FBQztBQUFBLEVBQ3BCO0FBQUEsRUFFQSxVQUFVO0FBQ1QsVUFBTSxFQUFFLFVBQVUsSUFBSTtBQUN0QixjQUFVLE1BQU07QUFBQSxFQUNqQjtBQUNEOyIsCiAgIm5hbWVzIjogWyJlIiwgImF0IiwgInBhZ2UiLCAiZm0iLCAiYXBwIiwgImYiLCAicnMiLCAicGFnZXMiLCAiYnVmZiIsICJWYWxpZGF0aW9uRXJyb3IiLCAiZHYiLCAiYXBwIiwgInBhZ2UiLCAiZmlsZSIsICJjb21wb25lbnROYW1lIl0KfQo=
